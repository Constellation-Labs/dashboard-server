!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=101)}([function(t,e,n){"use strict";t.exports=n(108)},function(t,e,n){"use strict";function r(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function i(t){return Math.round(t/f.EPSILON)*f.EPSILON}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,r=void 0===n?f.precision||4:n;return t=i(t),parseFloat(t.toPrecision(r))}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function s(t){return t.clone?t.clone():new Array(t)}function u(t,e){if(a(t)){for(var n=s(t),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}return e(t)}function l(t){return u(t,function(t){return t/180*Math.PI})}function c(t){return u(t,function(t){return 180*t/Math.PI})}function h(t,e,n){return u(t,function(t){return Math.max(e,Math.min(n,t))})}function p(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!p(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=f.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}n.d(e,"c",function(){return f}),e.a=r,e.f=o,e.g=l,e.d=c,e.b=h,e.e=p;var f={};f.EPSILON=1e-12,f.debug=!0,f.precision=4,f.printTypes=!1,f.printDegrees=!1,f.printRowMajor=!0},function(t,e,n){"use strict";function r(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function i(t){return Math.round(t/f.EPSILON)*f.EPSILON}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,r=void 0===n?f.precision||4:n;return t=i(t),parseFloat(t.toPrecision(r))}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function s(t){return t.clone?t.clone():new Array(t)}function u(t,e){if(a(t)){for(var n=s(t),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}return e(t)}function l(t){return u(t,function(t){return t/180*Math.PI})}function c(t){return u(t,function(t){return 180*t/Math.PI})}function h(t,e,n){return u(t,function(t){return Math.max(e,Math.min(n,t))})}function p(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!p(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=f.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}n.d(e,"c",function(){return f}),e.a=r,e.f=o,e.g=l,e.d=c,e.b=h,e.e=p;var f={};f.EPSILON=1e-12,f.debug=!0,f.precision=4,f.printTypes=!1,f.printDegrees=!1,f.printRowMajor=!0},function(t,e,n){t.exports=n(125)()},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return _});var p=n(0),f=(n.n(p),n(3)),d=n.n(f),y=n(5),g={captureScroll:d.a.bool,captureDrag:d.a.bool,captureClick:d.a.bool,captureDoubleClick:d.a.bool},m={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0},v={viewport:d.a.instanceOf(y.a),isDragging:d.a.bool,eventManager:d.a.object},_=function(t){function e(t){var n;return o(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._events=null,n._onContainerLoad=n._onContainerLoad.bind(h(n)),n}return l(e,t),s(e,[{key:"_onContainerLoad",value:function(t){var e=this.context.eventManager;if(e){var n=this._events;n&&(e.off(n),n=null),t&&(n={wheel:this._onScroll.bind(this),panstart:this._onDrag.bind(this),click:this._onClick.bind(this),dblclick:this._onDoubleClick.bind(this)},e.on(n,t)),this._events=n}}},{key:"_onScroll",value:function(t){this.props.captureScroll&&t.stopPropagation()}},{key:"_onDrag",value:function(t){this.props.captureDrag&&t.stopPropagation()}},{key:"_onClick",value:function(t){this.props.captureClick&&t.stopPropagation()}},{key:"_onDoubleClick",value:function(t){this.props.captureDoubleClick&&t.stopPropagation()}},{key:"render",value:function(){return null}}]),e}(p.Component);_.propTypes=g,_.defaultProps=m,_.contextTypes=v},function(t,e,n){"use strict";var r=n(6);n.d(e,"a",function(){return r.a});var i=(n(88),n(145));n.d(e,"c",function(){return i.a});var o=n(146);n.d(e,"b",function(){return o.a});n(8)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return _});var p=n(129),f=n(8),d=n(88),y=n(143),g=n.n(y),m=n(144),v=n.n(m),_=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,s=void 0===a?0:a,l=n.longitude,c=void 0===l?0:l,p=n.zoom,d=void 0===p?0:p,y=n.pitch,g=void 0===y?0:y,m=n.bearing,v=void 0===m?0:m,_=n.altitude,b=void 0===_?1.5:_,x=n.farZMultiplier,w=void 0===x?10:x;o(this,e),r=r||1,i=i||1;var E=Object(f.i)(d);b=Math.max(.75,b);var S=Object(f.c)({longitude:c,latitude:s,scale:E}),I=Object(f.a)({width:r,height:i,pitch:g,bearing:v,altitude:b,farZMultiplier:w}),C=Object(f.b)({height:i,center:S,pitch:g,bearing:v,altitude:b,flipY:!0});return t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{width:r,height:i,viewMatrix:C,projectionMatrix:I})),t.latitude=s,t.longitude=c,t.zoom=d,t.pitch=g,t.bearing=v,t.altitude=b,t.scale=E,t.center=S,Object.freeze(h(t)),t}return l(e,t),s(e,[{key:"projectFlat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(f.d)(t,e)}},{key:"unprojectFlat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(f.g)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(f.e)(n,this.pixelUnprojectionMatrix),i=Object(f.d)(e,this.scale),o=g()([],i,v()([],r)),a=g()([],this.center,o);return Object(f.g)(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(d.a)(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),e}(p.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return S});var h=n(24),p=n(1),f=n(49),d=n.n(f),y=n(25),g=n.n(y),m=n(52),v=n.n(m),_=n(53),b=n.n(_),x=n(54),w=n.n(x),E=[0,0,0],S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i),t}return c(e,t),s(e,[{key:"angle",value:function(t){return d()(this,t)}},{key:"cross",value:function(t){return g()(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return v()(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return b()(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return w()(this,this,r,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(p.a)(t)}}]),e}(h.a)},function(t,e,n){"use strict";function r(t,e){return a(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(t){if(Array.isArray(t))return t}function s(t){return Math.pow(2,t)}function u(t){return Math.log2(t)}function l(t,e){var n=r(t,2),i=n[0],o=n[1];return e*=z,[e*(i*R+L)/(2*L),e*(L-Math.log(Math.tan(N+o*R*.5)))/(2*L)]}function c(t,e){var n=r(t,2),i=n[0],o=n[1];e*=z;var a=i/e*(2*L)-L,s=2*(Math.atan(Math.exp(L-o/e*(2*L)))-N);return[a*D,s*D]}function h(t){var e=Number.isFinite,n=t.latitude,r=t.longitude,i=t.zoom,o=t.scale,a=t.highPrecision;o=void 0===o?s(i):o,Object(O.a)(e(n)&&e(r)&&e(o));var u={},l=z*o,c=Math.cos(n*R),h=l/360,p=h/c,f=l/F/c;if(u.pixelsPerMeter=[f,f,f],u.metersPerPixel=[1/f,1/f,1/f],u.pixelsPerDegree=[h,p,f],u.degreesPerPixel=[1/h,1/p,1/f],void 0!==a&&a){var d=R*Math.tan(n*R)/c,y=l/F*d,g=y/p*f;u.pixelsPerDegree2=[0,h*d/2,y],u.pixelsPerMeter2=[g,0,g]}return u}function p(t){var e=t.longitude,n=t.latitude,r=t.zoom,i=t.scale,o=t.meterOffset,a=t.distanceScales,u=void 0===a?null:a;i=void 0===i?s(r):i;var c=l([e,n],i),p=new v.b(c[0],c[1],0);if(o){u=u||h({latitude:n,longitude:e,scale:i});var f=new v.b(o).scale(u.pixelsPerMeter).scale([1,-1,1]);p.add(f)}return p}function f(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.center,a=void 0===o?null:o,s=t.flipY,u=Object(_.a)();return I()(u,u,[0,0,-i]),E()(u,u,[1,1,1/e]),T()(u,u,-n*R),k()(u,u,r*R),void 0!==s&&s&&E()(u,u,[1,-1,1]),a&&I()(u,u,new v.b(a).negate()),u}function d(t){var e=Math.PI,n=Math.sin,r=Math.atan,i=t.width,o=t.height,a=t.altitude,s=void 0===a?B:a,u=t.pitch,l=void 0===u?0:u,c=t.farZMultiplier,h=void 0===c?1:c,p=l*R,f=r(.5/s),d=n(f)*s/n(e/2-p-f),y=Math.cos(e/2-p)*d+s;return{fov:2*r(o/2/s),aspect:i/o,focalDistance:s,near:.1,far:y*h}}function y(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,o=t.farZMultiplier,a=void 0===o?10:o,s=d({width:e,height:n,altitude:i,pitch:r,farZMultiplier:a}),u=s.fov,l=s.aspect,c=s.near,h=s.far;return x()([],u,l,c,h)}function g(t,e){var n=Number.isFinite,i=r(t,3),o=i[0],a=i[1],s=i[2],u=void 0===s?0:s;return Object(O.a)(n(o)&&n(a)&&n(u)),Object(_.d)(e,[o,a,u,1])}function m(t,e){var n=Number.isFinite,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=r(t,3),a=o[0],s=o[1],u=o[2];if(Object(O.a)(n(a)&&n(s)),n(u)){return Object(_.d)(e,[a,s,u,1])}var l=Object(_.d)(e,[a,s,0,1]),c=Object(_.d)(e,[a,s,1,1]),h=l[2],p=c[2],f=h===p?0:((i||0)-h)/(p-h);return A()([],l,c,f)}e.i=s,e.f=u,e.d=l,e.g=c,e.c=p,e.b=f,e.a=y,e.h=g,e.e=m;var v=n(23),_=n(16),b=n(27),x=n.n(b),w=n(14),E=n.n(w),S=n(15),I=n.n(S),C=n(31),T=n.n(C),M=n(32),k=n.n(M),P=n(142),A=n.n(P),O=n(87),L=Math.PI,N=L/4,R=L/180,D=180/L,z=512,F=4003e4,B=1.5},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){y&&f&&(y=!1,f.length?d=f.concat(d):g=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(f=d,d=[];++g<e;)f&&f[g].run();g=-1,e=d.length}f=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,p=t.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"===typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var f,d=[],y=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}e.a=r},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return S});var h=n(38),p=n(2),f=n(49),d=n.n(f),y=n(25),g=n.n(y),m=n(52),v=n.n(m),_=n(53),b=n.n(_),x=n(54),w=n.n(x),E=[0,0,0],S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i),t}return c(e,t),s(e,[{key:"angle",value:function(t){return d()(this,t)}},{key:"cross",value:function(t){return g()(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return v()(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return b()(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return w()(this,this,r,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(p.a)(t)}}]),e}(h.a)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return p});var h=n(1),p=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(h.c)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(h.f)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(h.e)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(h.c.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},function(t,e){function n(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=n},function(t,e){function n(t,e,n){var r,i,o,a,s,u,l,c,h,p,f,d,y=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*m+e[12],t[13]=e[1]*y+e[5]*g+e[9]*m+e[13],t[14]=e[2]*y+e[6]*g+e[10]*m+e[14],t[15]=e[3]*y+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*y+s*g+h*m+e[12],t[13]=i*y+u*g+p*m+e[13],t[14]=o*y+l*g+f*m+e[14],t[15]=a*y+c*g+d*m+e[15]),t}t.exports=n},function(t,e,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t,e){var n=c()([],e,t);return u()(n,n,1/n[3]),n}function o(t,e){var n=t%e;return 0>n?e+n:n}function a(t,e,n){return n*e+(1-n)*t}e.a=r,e.d=i,e.c=o,e.b=a;var s=n(83),u=n.n(s),l=n(30),c=n.n(l)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){return s(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function s(t){if(Array.isArray(t))return t}function u(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function h(t,e,n){return t<e?e:t>n?n:t}n.d(e,"a",function(){return d}),n.d(e,"b",function(){return g});var p=n(5),f=n(10),d={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},y={pitch:0,bearing:0,altitude:1.5},g=function(){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=n.longitude,s=n.zoom,l=n.bearing,c=void 0===l?y.bearing:l,h=n.pitch,p=void 0===h?y.pitch:h,g=n.altitude,m=void 0===g?y.altitude:g,v=n.maxZoom,_=void 0===v?d.maxZoom:v,b=n.minZoom,x=void 0===b?d.minZoom:b,w=n.maxPitch,E=void 0===w?d.maxPitch:w,S=n.minPitch,I=void 0===S?d.minPitch:S,C=n.transitionDuration,T=n.transitionEasing,M=n.transitionInterpolator,k=n.transitionInterruption,P=n.startPanLngLat,A=n.startZoomLngLat,O=n.startBearing,L=n.startPitch,N=n.startZoom;u(this,t),Object(f.a)(e(r),"`width` must be supplied"),Object(f.a)(e(i),"`height` must be supplied"),Object(f.a)(e(a),"`longitude` must be supplied"),Object(f.a)(e(o),"`latitude` must be supplied"),Object(f.a)(e(s),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:r,height:i,latitude:o,longitude:a,zoom:s,bearing:c,pitch:p,altitude:m,maxZoom:_,minZoom:x,maxPitch:E,minPitch:I,transitionDuration:C,transitionEasing:T,transitionInterpolator:M,transitionInterruption:k}),this._interactiveState={startPanLngLat:P,startZoomLngLat:A,startBearing:O,startPitch:L,startZoom:N}}var e=Number.isFinite;return c(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var o=this._calculateNewLngLat({startPanLngLat:r,pos:e}),a=i(o,2),s=a[0],u=a[1];return this._getUpdatedMapState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){return t.pos,this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var n=t.deltaScaleX,r=void 0===n?0:n,i=t.deltaScaleY,o=void 0===i?0:i,a=this._interactiveState,s=a.startBearing,u=a.startPitch;if(!e(s)||!e(u))return this;var l=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:o,startBearing:s,startPitch:u}),c=l.pitch,h=l.bearing;return this._getUpdatedMapState({bearing:h,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var n=t.pos,r=t.startPos,o=t.scale;Object(f.a)(0<o,"`scale` must be a positive number");var a=this._interactiveState,s=a.startZoom,u=a.startZoomLngLat;e(s)||(s=this._viewportProps.zoom,u=this._unproject(r)||this._unproject(n)),Object(f.a)(u,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var l=this._calculateNewZoom({scale:o,startZoom:s}),c=new p.a(Object.assign({},this._viewportProps,{zoom:l})),h=c.getLocationAtPoint({lngLat:u,pos:n}),d=i(h,2),y=d[0],g=d[1];return this._getUpdatedMapState({zoom:l,longitude:y,latitude:g})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=h(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=h(a,o,i),Object.assign(t,Object(p.c)(t)),t}},{key:"_unproject",value:function(t){var e=new p.a(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new p.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return h(n+Math.log2(e),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=h(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return 0<n?u=i+n*(s-i):0>n&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}}]),t}()},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return h}),n.d(e,"b",function(){return d});var s=n(10),u=n(36),l=n(17),c=function(){},h={BREAK:1,SNAP_TO_END:2,IGNORE:3},p={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new u.a,transitionInterruption:h.BREAK,onTransitionStart:c,onTransitionInterrupt:c,onTransitionEnd:c},f={animation:null,propsInTransition:null,startProps:null,endProps:null},d=function(){function t(e){i(this,t),this.props=e,this.state=f,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return a(t,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(t){var e=!1,n=this.props;if(this.props=t,this._shouldIgnoreViewportChange(n,t))return e;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(t)){var i=Object.assign({},n,this.state.interruption===h.SNAP_TO_END?this.state.endProps:this.state.propsInTransition);r&&n.onTransitionInterrupt(),t.onTransitionStart(),this._triggerTransition(i,t),e=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return e}},{key:"_isTransitionInProgress",value:function(){return!!this.state.propsInTransition}},{key:"_isTransitionEnabled",value:function(t){return 0<t.transitionDuration&&!!t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this._isTransitionInProgress()?this.state.interruption===h.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){Object(s.a)(this._isTransitionEnabled(e),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=e.transitionInterpolator.initializeProps(t,e);this.state={duration:e.transitionDuration,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=f}},{key:"_updateViewport",value:function(){var t=Date.now(),e=this.state,n=e.startTime,r=e.duration,i=e.easing,o=e.interpolator,a=e.startProps,s=e.endProps,u=!1,c=(t-n)/r;1<=c&&(c=1,u=!0),c=i(c);var h=o.interpolateProps(a,s,c),p=new l.b(Object.assign({},this.props,h));this.state.propsInTransition=p.getViewportProps();var f=this.props.onViewportChange||this.props.onChangeViewport;f&&f(this.state.propsInTransition),this.props.onViewStateChange&&this.props.onViewStateChange({viewState:this.state.propsInTransition}),u&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();d.defaultProps=p},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return p});var h=n(2),p=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(h.c)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(h.f)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(h.e)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(h.c.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c});var r=n(94),i=r.b?[[r.b.Rotate,{enable:!1}],[r.b.Pinch,{enable:!1}],[r.b.Swipe,{enable:!1}],[r.b.Pan,{threshold:0,enable:!1}],[r.b.Press,{enable:!1}],[r.b.Tap,{event:"doubletap",taps:2,enable:!1}],[r.b.Tap,{enable:!1}]]:null,o={rotate:["pinch"]},a={doubletap:["tap"]},s={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},u={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]},l={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},c={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseleave:"pointerleave"}},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){"use strict";var r=n(44);n.d(e,"d",function(){return r.a});var i=n(45);n.d(e,"c",function(){return i.a});var o=(n(4),n(171));n.d(e,"b",function(){return o.a});var a=(n(172),n(174),n(175),n(177),n(178),n(18),n(36));n.d(e,"a",function(){return a.b});var s=n(96);s.a},function(t,e,n){"use strict";var r=n(47);n.d(e,"a",function(){return r.a});var i=n(7);n.d(e,"b",function(){return i.a});var o=(n(55),n(26),n(66),n(1));n.d(e,"c",function(){return o.e});n(139),n(140),n(86),n(141)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var h=n(13),p=n(1),f=function(t,e){if(!t)throw new Error(e)},d=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(p.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(p.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return f(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(p.a)(this[t])}},{key:"setComponent",value:function(t,e){return f(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}]),e}(h.a)},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t){return p(t)||h(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function f(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function g(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _(t,e){return t.length===e&&t.every(Number.isFinite)}n.d(e,"a",function(){return ut});var b=n(13),x=n(1),w=n(47),E=n(7),S=n(55),I=n(56),C=n.n(I),T=n(57),M=n.n(T),k=n(58),P=n.n(k),A=n(59),O=n.n(A),L=n(60),N=n.n(L),R=n(27),D=n.n(R),z=n(61),F=n.n(z),B=n(28),j=n.n(B),V=n(29),q=n.n(V),U=n(62),G=n.n(U),X=n(14),Y=n.n(X),Z=n(15),W=n.n(Z),$=n(63),H=n.n($),K=n(64),J=n.n(K),Q=n(30),tt=n.n(Q),et=n(31),nt=n.n(et),rt=n(65),it=n.n(rt),ot=n(32),at=n.n(ot),st=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ut=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return f(this,e),t=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return v(e,t),y(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=u,this[3]=p,this[4]=e,this[5]=o,this[6]=l,this[7]=f,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=h,this[15]=y,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=p,this[13]=f,this[14]=d,this[15]=y,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,l(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this[e][t]=Object(x.a)(n),this}},{key:"determinant",value:function(){return C()(this)}},{key:"identity",value:function(){return this.copy(st)}},{key:"fromQuaternion",value:function(t){return M()(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=t.far;return P()(this,e,n,r,i,o,a),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,o=void 0===i?[0,1,0]:i;return O()(this,e,r,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return N()(this,e,n,r,i,a,u),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,l=void 0===u?.1:u,c=t.far,h=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var p=r/2,f=s*Math.tan(p),d=f*o;return(new e).ortho({left:-d,right:d,bottom:-f,top:f,near:l,far:h})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.near,s=void 0===a?.1:a,u=t.far,l=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error("radians");return D()(this,e,o,s,l),this.check()}},{key:"transpose",value:function(){return F()(this,this),this.check()}},{key:"invert",value:function(){return j()(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return q()(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return q()(this,this,t),this.check()}},{key:"rotateX",value:function(t){return nt()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return it()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return at()(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=o(t,3),n=e[0],r=e[1],i=e[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(t,e){return G()(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Y()(this,this,t),this.check()}},{key:"translate",value:function(t){return W()(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new w.a,H()(e,t,this),_(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new E.a,J()(e,t,this),_(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new S.a,tt()(e,t,this),_(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,n){switch(t.length){case 2:e=e||new w.a,tt()(e,[t[0],t[1],0,n],this),e.length=2,_(e,2);break;case 3:e=e||new E.a,tt()(e,[t[0],t[1],t[2],n],this),e.length=3,_(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new S.a,tt()(e,t,this),_(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(b.a)},function(t,e){function n(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],g=e[14],m=e[15],v=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*y-h*d,I=c*g-p*d,C=c*m-f*d,T=h*g-p*y,M=h*m-f*y,k=p*m-f*g,P=v*k-_*M+b*T+x*C-w*I+E*S;return P?(P=1/P,t[0]=(s*k-u*M+l*T)*P,t[1]=(i*M-r*k-o*T)*P,t[2]=(y*E-g*w+m*x)*P,t[3]=(p*w-h*E-f*x)*P,t[4]=(u*C-a*k-l*I)*P,t[5]=(n*k-i*C+o*I)*P,t[6]=(g*b-d*E-m*_)*P,t[7]=(c*E-p*b+f*_)*P,t[8]=(a*M-s*C+l*S)*P,t[9]=(r*C-n*M-o*S)*P,t[10]=(d*w-y*b+m*v)*P,t[11]=(h*b-c*w-f*v)*P,t[12]=(s*I-a*T-u*S)*P,t[13]=(n*T-r*I+i*S)*P,t[14]=(y*_-d*x-g*v)*P,t[15]=(c*x-h*_+p*v)*P,t):null}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],g=e[13],m=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*y,t[1]=_*i+b*u+x*p+w*g,t[2]=_*o+b*l+x*f+w*m,t[3]=_*a+b*c+x*d+w*v,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*h+w*y,t[5]=_*i+b*u+x*p+w*g,t[6]=_*o+b*l+x*f+w*m,t[7]=_*a+b*c+x*d+w*v,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*h+w*y,t[9]=_*i+b*u+x*p+w*g,t[10]=_*o+b*l+x*f+w*m,t[11]=_*a+b*c+x*d+w*v,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*h+w*y,t[13]=_*i+b*u+x*p+w*g,t[14]=_*o+b*l+x*f+w*m,t[15]=_*a+b*c+x*d+w*v,t}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}t.exports=n},function(t,e){function n(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t}t.exports=n},function(t,e){function n(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t}t.exports=n},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}t.exports=n},function(t,e,n){t.exports=n(135)},function(t,e){function n(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}t.exports=n},function(t,e,n){"use strict";var r=(n(37),n(155));n.d(e,"b",function(){return r.a});var i=n(156);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return l});var s=n(151),u=n(10),l=function(){function t(){i(this,t)}return a(t,[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a,u=(this.propNames||[])[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)if(a=o.value,!Object(s.a)(t[a],e[a]))return!1}catch(t){r=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(){Object(u.a)(!1,"interpolateProps is not implemented")}}]),t}()},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var h=n(19),p=n(2),f=function(t,e){if(!t)throw new Error(e)},d=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(p.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(p.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return f(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(p.a)(this[t])}},{key:"setComponent",value:function(t,e){return f(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}]),e}(h.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t){return p(t)||h(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function f(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function g(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _(t,e){return t.length===e&&t.every(Number.isFinite)}n.d(e,"a",function(){return ut});var b=n(19),x=n(2),w=n(89),E=n(11),S=n(90),I=n(56),C=n.n(I),T=n(57),M=n.n(T),k=n(58),P=n.n(k),A=n(59),O=n.n(A),L=n(60),N=n.n(L),R=n(27),D=n.n(R),z=n(61),F=n.n(z),B=n(28),j=n.n(B),V=n(29),q=n.n(V),U=n(62),G=n.n(U),X=n(14),Y=n.n(X),Z=n(15),W=n.n(Z),$=n(63),H=n.n($),K=n(64),J=n.n(K),Q=n(30),tt=n.n(Q),et=n(31),nt=n.n(et),rt=n(65),it=n.n(rt),ot=n(32),at=n.n(ot),st=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ut=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return f(this,e),t=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return v(e,t),y(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=u,this[3]=p,this[4]=e,this[5]=o,this[6]=l,this[7]=f,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=h,this[15]=y,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=p,this[13]=f,this[14]=d,this[15]=y,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,l(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this[e][t]=Object(x.a)(n),this}},{key:"determinant",value:function(){return C()(this)}},{key:"identity",value:function(){return this.copy(st)}},{key:"fromQuaternion",value:function(t){return M()(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=t.far;return P()(this,e,n,r,i,o,a),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,o=void 0===i?[0,1,0]:i;return O()(this,e,r,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return N()(this,e,n,r,i,a,u),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,l=void 0===u?.1:u,c=t.far,h=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var p=r/2,f=s*Math.tan(p),d=f*o;return(new e).ortho({left:-d,right:d,bottom:-f,top:f,near:l,far:h})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.near,s=void 0===a?.1:a,u=t.far,l=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error("radians");return D()(this,e,o,s,l),this.check()}},{key:"transpose",value:function(){return F()(this,this),this.check()}},{key:"invert",value:function(){return j()(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return q()(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return q()(this,this,t),this.check()}},{key:"rotateX",value:function(t){return nt()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return it()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return at()(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=o(t,3),n=e[0],r=e[1],i=e[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(t,e){return G()(this,this,t,e),this.check()}},{key:"scale",value:function(t){return Y()(this,this,t),this.check()}},{key:"translate",value:function(t){return W()(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new w.a,H()(e,t,this),_(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new E.a,J()(e,t,this),_(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new S.a,tt()(e,t,this),_(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,n){switch(t.length){case 2:e=e||new w.a,tt()(e,[t[0],t[1],0,n],this),e.length=2,_(e,2);break;case 3:e=e||new E.a,tt()(e,[t[0],t[1],t[2],n],this),e.length=3,_(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new S.a,tt()(e,t,this),_(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(b.a)},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(t){return m=t,v}}function o(t,e){try{return t(e)}catch(t){return m=t,v}}function a(t,e,n){try{t(e,n)}catch(t){return m=t,v}}function s(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&y(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),l(t,new d(e,n,a))})}function l(t,e){for(;3===t._83;)t=t._18;if(s._47&&s._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);c(t,e)}function c(t,e){g(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?h(e.promise,t._18):p(e.promise,t._18));var r=o(n,t._18);r===v?p(e.promise,m):h(e.promise,r)})}function h(t,e){if(e===t)return p(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===typeof e||"function"===typeof e)){var n=i(e);if(n===v)return p(t,m);if(n===t.then&&e instanceof s)return t._83=3,t._18=e,void f(t);if("function"===typeof n)return void y(n.bind(e),t)}t._83=1,t._18=e,f(t)}function p(t,e){t._83=2,t._18=e,s._71&&s._71(t,e),f(t)}function f(t){if(1===t._75&&(l(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)l(t,t._38[e]);t._38=null}}function d(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function y(t,e){var n=!1,r=a(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,p(e,t))});n||r!==v||(n=!0,p(e,m))}var g=n(104),m=null,v={};t.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return l(this,new d(t,e,n)),n}},function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,u],h=0;l=new Error(e.replace(/%s/g,function(){return c[h++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(t){};t.exports=r},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return T});var p=n(0),f=(n.n(p),n(3)),d=n.n(f),y=n(45),g=n(17),m=n(5),v=n(18),_=n(157),b=n(96),x=n(168),w=n(97),E=Object.assign({},y.a.propTypes,{maxZoom:d.a.number,minZoom:d.a.number,maxPitch:d.a.number,minPitch:d.a.number,onViewStateChange:d.a.func,onViewportChange:d.a.func,transitionDuration:d.a.number,transitionInterpolator:d.a.object,transitionInterruption:d.a.number,transitionEasing:d.a.func,onTransitionStart:d.a.func,onTransitionInterrupt:d.a.func,onTransitionEnd:d.a.func,scrollZoom:d.a.bool,dragPan:d.a.bool,dragRotate:d.a.bool,doubleClickZoom:d.a.bool,touchZoom:d.a.bool,touchRotate:d.a.bool,keyboard:d.a.bool,onHover:d.a.func,onClick:d.a.func,onContextMenu:d.a.func,touchAction:d.a.string,clickRadius:d.a.number,getCursor:d.a.func,visibilityConstraints:d.a.shape({minZoom:d.a.number,maxZoom:d.a.number,minPitch:d.a.number,maxPitch:d.a.number}),mapControls:d.a.shape({events:d.a.arrayOf(d.a.string),handleEvent:d.a.func})}),S=function(t){var e=t.isDragging,n=t.isHovering;return e?x.a.CURSOR.GRABBING:n?x.a.CURSOR.POINTER:x.a.CURSOR.GRAB},I=Object.assign({},y.a.defaultProps,g.a,v.b.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchAction:"none",clickRadius:0,getCursor:S,visibilityConstraints:g.a}),C={viewport:d.a.instanceOf(m.a),isDragging:d.a.bool,eventManager:d.a.object},T=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),Object(w.a)(t),n.state={isDragging:!1,isHovering:!1},n._mapControls=t.mapControls||new b.a,n._eventManager=new _.a(null,{legacyBlockScroll:!1,touchAction:t.touchAction}),n.getMap=n.getMap.bind(h(n)),n.queryRenderedFeatures=n.queryRenderedFeatures.bind(h(n)),n._checkVisibilityConstraints=n._checkVisibilityConstraints.bind(h(n)),n._getFeatures=n._getFeatures.bind(h(n)),n._onInteractiveStateChange=n._onInteractiveStateChange.bind(h(n)),n._getPos=n._getPos.bind(h(n)),n._eventCanvasLoaded=n._eventCanvasLoaded.bind(h(n)),n._staticMapLoaded=n._staticMapLoaded.bind(h(n)),n}return l(e,t),u(e,null,[{key:"supported",value:function(){return y.a.supported()}}]),u(e,[{key:"getChildContext",value:function(){return{viewport:new m.a(this.props),isDragging:this.state.isDragging,eventManager:this._eventManager}}},{key:"componentDidMount",value:function(){var t=this._eventManager;t.on({mousemove:this._onMouseMove.bind(this),click:this._onMouseClick.bind(this),contextmenu:this._onContextMenu.bind(this)}),this._mapControls.setOptions(Object.assign({},this.props,this.props.viewState,{onStateChange:this._onInteractiveStateChange,eventManager:t})),this._transitionManager=new v.b(this.props)}},{key:"componentWillUpdate",value:function(t){var e=Object.assign({},t,t.viewState);this._mapControls.setOptions(e),this._transitionManager.processViewportChange(e)}},{key:"getMap",value:function(){return this._map?this._map.getMap():null}},{key:"queryRenderedFeatures",value:function(t,e){return this._map.queryRenderedFeatures(t,e)}},{key:"_checkVisibilityConstraints",value:function(t){var e=t.visibilityConstraints;for(var n in t){var r=function(t){return t[0].toUpperCase()+t.slice(1)}(n),i="min".concat(r),o="max".concat(r);if(i in e&&t[n]<e[i])return!1;if(o in e&&t[n]>e[o])return!1}return!0}},{key:"_getFeatures",value:function(t){var e,n=t.pos,r=t.radius;if(r){var i=r,o=[[n[0]-i,n[1]+i],[n[0]+i,n[1]-i]];e=this._map.queryRenderedFeatures(o)}else e=this._map.queryRenderedFeatures(n);return e}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"_getPos",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"_onMouseMove",value:function(t){if(!this.state.isDragging){var e=this._getPos(t),n=this._getFeatures({pos:e,radius:this.props.clickRadius}),r=n&&0<n.length;if(r!==this.state.isHovering&&this.setState({isHovering:r}),this.props.onHover){var i=new m.a(this.props);t.lngLat=i.unproject(e),t.features=n,this.props.onHover(t)}}}},{key:"_onMouseClick",value:function(t){if(this.props.onClick){var e=this._getPos(t),n=new m.a(this.props);t.lngLat=n.unproject(e),t.features=this._getFeatures({pos:e,radius:this.props.clickRadius}),this.props.onClick(t)}}},{key:"_onContextMenu",value:function(t){this.props.onContextMenu&&this.props.onContextMenu(t)}},{key:"_eventCanvasLoaded",value:function(t){this._eventManager.setElement(t)}},{key:"_staticMapLoaded",value:function(t){this._map=t}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.getCursor,i={width:e,height:n,position:"relative",cursor:r(this.state)};return Object(p.createElement)("div",{key:"map-controls",ref:this._eventCanvasLoaded,style:i},Object(p.createElement)(y.a,Object.assign({},this.props,this._transitionManager&&this._transitionManager.getViewportInTransition(),{visible:this._checkVisibilityConstraints(this.props),ref:this._staticMapLoaded,children:this.props.children})))}}]),e}(p.PureComponent);T.displayName="InteractiveMap",T.propTypes=E,T.defaultProps=I,T.childContextTypes=C},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){}n.d(e,"a",function(){return C});var f=n(0),d=(n.n(f),n(3)),y=n.n(d),g=n(127),m=n(46),v=n(5),_=n(147),b=n(148),x=b.a?n(150):null,w="A valid API access token is required to use Mapbox data",E=Object.assign({},_.a.propTypes,{mapStyle:y.a.oneOfType([y.a.string,y.a.object]),preventStyleDiffing:y.a.bool,visible:y.a.bool}),S=Object.assign({},_.a.defaultProps,{mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0}),I={viewport:y.a.instanceOf(v.a)},C=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._queryParams={},e.supported()||(n.componentDidMount=p,n.componentWillReceiveProps=p,n.componentDidUpdate=p,n.componentWillUnmount=p),n.state={accessTokenInvalid:!1},n.getMap=n.getMap.bind(h(n)),n.queryRenderedFeatures=n.queryRenderedFeatures.bind(h(n)),n._updateQueryParams=n._updateQueryParams.bind(h(n)),n._updateMapSize=n._updateMapSize.bind(h(n)),n._updateMapStyle=n._updateMapStyle.bind(h(n)),n._mapboxMapLoaded=n._mapboxMapLoaded.bind(h(n)),n._mapboxMapError=n._mapboxMapError.bind(h(n)),n._renderNoTokenWarning=n._renderNoTokenWarning.bind(h(n)),n}return l(e,t),u(e,null,[{key:"supported",value:function(){return x&&x.supported()}}]),u(e,[{key:"getChildContext",value:function(){return{viewport:new v.a(this.props)}}},{key:"componentDidMount",value:function(){var t=this.props.mapStyle;this._mapbox=new _.a(Object.assign({},this.props,{mapboxgl:x,container:this._mapboxMap,onError:this._mapboxMapError,mapStyle:Object(m.a)(t)?t.toJS():t})),this._map=this._mapbox.getMap(),this._updateQueryParams(t)}},{key:"componentWillReceiveProps",value:function(t){this._mapbox.setProps(t),this._updateMapStyle(this.props,t),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._mapbox.finalize(),this._mapbox=null,this._map=null}},{key:"getMap",value:function(){return this._map}},{key:"queryRenderedFeatures",value:function(t,e){var n=e||this._queryParams;return n.layers&&0===n.layers.length?[]:this._map.queryRenderedFeatures(t,n)}},{key:"_updateQueryParams",value:function(t){var e=Object(g.a)(t);this._queryParams={layers:e}}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&this._map.resize()}},{key:"_updateMapStyle",value:function(t,e){var n=e.mapStyle,r=t.mapStyle;n!==r&&(Object(m.a)(n)?this.props.preventStyleDiffing?this._map.setStyle(n.toJS()):Object(g.b)(r,n,this._map):this._map.setStyle(n),this._updateQueryParams(n))}},{key:"_mapboxMapLoaded",value:function(t){this._mapboxMap=t}},{key:"_mapboxMapError",value:function(t){401!==(t.error&&t.error.status||t.status)||this.state.accessTokenInvalid||(console.error(w),this.setState({accessTokenInvalid:!0}))}},{key:"_renderNoTokenWarning",value:function(){return this.state.accessTokenInvalid?Object(f.createElement)("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},[Object(f.createElement)("h3",{key:"header"},w),Object(f.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),Object(f.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")]):null}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.width,r=t.height,i=t.style,o=t.visible,a=Object.assign({},i,{width:n,height:r,position:"relative"}),s=Object.assign({},i,{width:n,height:r,visibility:o?"visible":"hidden"});return Object(f.createElement)("div",{key:"map-container",style:a,children:[Object(f.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapLoaded,style:s,className:e}),Object(f.createElement)("div",{key:"map-overlays",className:"overlays",style:{position:"absolute",left:0,top:0,width:n,height:r,overflow:"hidden"},children:this.props.children}),this._renderNoTokenWarning()]})}}]),e}(f.PureComponent);C.displayName="StaticMap",C.propTypes=E,C.defaultProps=S,C.childContextTypes=I},function(t,e,n){"use strict";function r(t){return!(!t||!t[i])}e.a=r;var i="@@__IMMUTABLE_MAP__@@"},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return y});var h=n(24),p=n(1),f=n(48),d=n.n(f),y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r),t}return c(e,t),s(e,[{key:"cross",value:function(t){return d()(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}}]),e}(h.a)},function(t,e){function n(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}t.exports=n},function(t,e,n){function r(t,e){var n=i(t[0],t[1],t[2]),r=i(e[0],e[1],e[2]);o(n,n),o(r,r);var s=a(n,r);return s>1?0:Math.acos(s)}t.exports=r;var i=n(130),o=n(50),a=n(51)},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}t.exports=n},function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}t.exports=n},function(t,e){function n(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=e[0],t[1]=i+a*l-s*u,t[2]=o+a*u+s*l,t}t.exports=n},function(t,e){function n(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+s*u+a*l,t[1]=e[1],t[2]=o+s*l-a*u,t}t.exports=n},function(t,e){function n(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+a*l-s*u,t[1]=o+a*u+s*l,t[2]=e[2],t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return f});var h=n(24),p=n(1),f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return c(e,t),s(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(p.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(p.a)(t)}}]),e}(h.a)},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],p=t[11],f=t[12],d=t[13],y=t[14],g=t[15];return(e*a-n*o)*(h*g-p*y)-(e*s-r*o)*(c*g-p*d)+(e*u-i*o)*(c*y-h*d)+(n*s-r*a)*(l*g-p*f)-(n*u-i*a)*(l*y-h*f)+(r*u-i*s)*(l*d-c*f)}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,h=r*s,p=i*a,f=i*s,d=i*u,y=o*a,g=o*s,m=o*u;return t[0]=1-h-d,t[1]=c+m,t[2]=p-g,t[3]=0,t[4]=c-m,t[5]=1-l-d,t[6]=f+y,t[7]=0,t[8]=p+g,t[9]=f-y,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}t.exports=n},function(t,e){function n(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}t.exports=n},function(t,e,n){function r(t,e,n,r){var o,a,s,u,l,c,h,p,f,d,y=e[0],g=e[1],m=e[2],v=r[0],_=r[1],b=r[2],x=n[0],w=n[1],E=n[2];return Math.abs(y-x)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(m-E)<1e-6?i(t):(h=y-x,p=g-w,f=m-E,d=1/Math.sqrt(h*h+p*p+f*f),h*=d,p*=d,f*=d,o=_*f-b*p,a=b*h-v*f,s=v*p-_*h,d=Math.sqrt(o*o+a*a+s*s),d?(d=1/d,o*=d,a*=d,s*=d):(o=0,a=0,s=0),u=p*s-f*a,l=f*o-h*s,c=h*a-p*o,d=Math.sqrt(u*u+l*l+c*c),d?(d=1/d,u*=d,l*=d,c*=d):(u=0,l=0,c=0),t[0]=o,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=l,t[6]=p,t[7]=0,t[8]=s,t[9]=c,t[10]=f,t[11]=0,t[12]=-(o*y+a*g+s*m),t[13]=-(u*y+l*g+c*m),t[14]=-(h*y+p*g+f*m),t[15]=1,t)}var i=n(131);t.exports=r},function(t,e){function n(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}t.exports=n},function(t,e){function n(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}t.exports=n},function(t,e){function n(t,e,n,r){var i,o,a,s,u,l,c,h,p,f,d,y,g,m,v,_,b,x,w,E,S,I,C,T,M=r[0],k=r[1],P=r[2],A=Math.sqrt(M*M+k*k+P*P);return Math.abs(A)<1e-6?null:(A=1/A,M*=A,k*=A,P*=A,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],l=e[2],c=e[3],h=e[4],p=e[5],f=e[6],d=e[7],y=e[8],g=e[9],m=e[10],v=e[11],_=M*M*a+o,b=k*M*a+P*i,x=P*M*a-k*i,w=M*k*a-P*i,E=k*k*a+o,S=P*k*a+M*i,I=M*P*a+k*i,C=k*P*a-M*i,T=P*P*a+o,t[0]=s*_+h*b+y*x,t[1]=u*_+p*b+g*x,t[2]=l*_+f*b+m*x,t[3]=c*_+d*b+v*x,t[4]=s*w+h*E+y*S,t[5]=u*w+p*E+g*S,t[6]=l*w+f*E+m*S,t[7]=c*w+d*E+v*S,t[8]=s*I+h*C+y*T,t[9]=u*I+p*C+g*T,t[10]=l*I+f*C+m*T,t[11]=c*I+d*C+v*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}t.exports=n},function(t,e){function n(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=u*i-p*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=u*r+p*i,t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return tt});var h=n(13),p=n(1),f=n(67),d=n.n(f),y=n(68),g=n.n(y),m=n(69),v=n.n(m),_=n(70),b=n.n(_),x=n(71),w=n.n(x),E=n(72),S=n.n(E),I=n(73),C=n.n(I),T=n(74),M=n.n(T),k=n(75),P=n.n(k),A=n(76),O=n.n(A),L=n(77),N=n.n(L),R=n(78),D=n.n(R),z=n(34),F=n.n(z),B=n(79),j=n.n(B),V=n(80),q=n.n(V),U=n(81),G=n.n(U),X=n(82),Y=n.n(X),Z=n(84),W=n.n(Z),$=n(35),H=n.n($),K=n(85),J=n.n(K),Q=[0,0,0,1],tt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return c(e,t),s(e,[{key:"fromMatrix3",value:function(t){return d()(this,t),this.check()}},{key:"fromValues",value:function(t,e,n,r){return this.set(t,e,n,r)}},{key:"identity",value:function(){return g()(this),this.check()}},{key:"length",value:function(){return v()(this)}},{key:"squaredLength",value:function(t){return b()(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return w()(this,t)}},{key:"rotationTo",value:function(t,e){return S()(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return C()(this,t),this.check()}},{key:"calculateW",value:function(){return M()(this,this),this.check()}},{key:"conjugate",value:function(){return P()(this,this),this.check()}},{key:"invert",value:function(){return O()(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return N()(this,t,e,n),this.check()}},{key:"multiply",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.multiply only takes one argument");return D()(this,this,e),this.check()}},{key:"normalize",value:function(){return F()(this,this),this.check()}},{key:"rotateX",value:function(t){return j()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return q()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return G()(this,this,t),this.check()}},{key:"scale",value:function(t){return Y()(this,this,t),this.check()}},{key:"set",value:function(t,e,n,r){return W()(this,t,e,n,r),this.check()}},{key:"setAxisAngle",value:function(t,e){return H()(this,t,e),this.check()}},{key:"slerp",value:function(t){var e=t.start,n=void 0===e?Q:e,r=t.target,i=t.ratio;return J()(this,n,r,i),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(p.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(p.a)(t)}}]),e}(h.a)},function(t,e){function n(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}t.exports=n},function(t,e){function n(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}t.exports=n},function(t,e,n){t.exports=n(132)},function(t,e,n){t.exports=n(133)},function(t,e,n){t.exports=n(134)},function(t,e,n){function r(t,e,n){var r=i(e,n);return r<-.999999?(o(c,h,e),a(c)<1e-6&&o(c,p,e),s(c,c),l(t,c,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o(c,e,n),t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=1+r,u(t,t))}var i=n(51),o=n(25),a=n(33),s=n(50),u=n(34),l=n(35);t.exports=r;var c=[0,0,0],h=[1,0,0],p=[0,1,0]},function(t,e,n){t.exports=n(136)},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}t.exports=n},function(t,e){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}t.exports=n},function(t,e,n){t.exports=n(137)},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-r*l,t[2]=o*c+a*l+r*u-i*s,t[3]=a*c-r*s-i*u-o*l,t}t.exports=n},function(t,e){function n(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}t.exports=n},function(t,e){function n(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}t.exports=n},function(t,e){function n(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}t.exports=n},function(t,e,n){t.exports=n(83)},function(t,e){function n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}t.exports=n},function(t,e,n){t.exports=n(138)},function(t,e){function n(t,e,n,r){var i,o,a,s,u,l=e[0],c=e[1],h=e[2],p=e[3],f=n[0],d=n[1],y=n[2],g=n[3];return o=l*f+c*d+h*y+p*g,o<0&&(o=-o,f=-f,d=-d,y=-y,g=-g),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*l+u*f,t[1]=s*c+u*d,t[2]=s*h+u*y,t[3]=s*p+u*g,t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return t>=0&&t<6}function p(t){if(t<0&&t>=6)throw new Error(v);return t}n.d(e,"a",function(){return _});var f=n(13),d=n(1),y=n(26),g=n(66),m=n(7),v="Unknown Euler angle order",_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;if(o(this,e),t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),arguments.length>0&&Array.isArray(arguments[0])){var u;(u=t).fromVector3.apply(u,arguments)}else t.set(n,r,i,s);return t}return c(e,t),l(e,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return e.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return e.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),l(e,[{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check()}},{key:"validate",value:function(){return h(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new m.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,n,r){return this.set(t,n,r,e.ZYX)}},{key:"fromQuaternion",value:function(t,e){return this._fromRotationMatrix(y.a.fromQuaternion(t),e),this.check()}},{key:"fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder;return this._fromRotationMatrix(t,n),this.check()}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new y.a;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new g.a;switch(this[4]){case e.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case e.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case e.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case e.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case e.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case e.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(v)}}},{key:"_fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],p=r[10];switch(n=n||this[3]){case e.XYZ:this[1]=Math.asin(Object(d.b)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-l,p),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(h,u),this[2]=0);break;case e.YXZ:this[0]=Math.asin(-Object(d.b)(l,-1,1)),Math.abs(l)<.99999?(this[1]=Math.atan2(a,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-c,i),this[2]=0);break;case e.ZXY:this[0]=Math.asin(Object(d.b)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-c,p),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case e.ZYX:this[1]=Math.asin(-Object(d.b)(c,-1,1)),Math.abs(c)<.99999?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case e.YZX:this[2]=Math.asin(Object(d.b)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-l,u),this[1]=Math.atan2(-c,i)):(this[0]=0,this[1]=Math.atan2(a,p));break;case e.XZY:this[2]=Math.asin(-Object(d.b)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(h,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-l,p),this[1]=0);break;default:throw new Error(v)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var t=new y.a,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),l=Math.sin(r),c=Math.sin(i);switch(this[3]){case e.XYZ:var h=o*s,p=o*c,f=u*s,d=u*c;t[0]=a*s,t[4]=-a*c,t[8]=l,t[1]=p+f*l,t[5]=h-d*l,t[9]=-u*a,t[2]=d-h*l,t[6]=f+p*l,t[10]=o*a;break;case e.YXZ:var g=a*s,m=a*c,_=l*s,b=l*c;t[0]=g+b*u,t[4]=_*u-m,t[8]=o*l,t[1]=o*c,t[5]=o*s,t[9]=-u,t[2]=m*u-_,t[6]=b+g*u,t[10]=o*a;break;case e.ZXY:var x=a*s,w=a*c,E=l*s,S=l*c;t[0]=x-S*u,t[4]=-o*c,t[8]=E+w*u,t[1]=w+E*u,t[5]=o*s,t[9]=S-x*u,t[2]=-o*l,t[6]=u,t[10]=o*a;break;case e.ZYX:var I=o*s,C=o*c,T=u*s,M=u*c;t[0]=a*s,t[4]=T*l-C,t[8]=I*l+M,t[1]=a*c,t[5]=M*l+I,t[9]=C*l-T,t[2]=-l,t[6]=u*a,t[10]=o*a;break;case e.YZX:var k=o*a,P=o*l,A=u*a,O=u*l;t[0]=a*s,t[4]=O-k*c,t[8]=A*c+P,t[1]=c,t[5]=o*s,t[9]=-u*s,t[2]=-l*s,t[6]=P*c+A,t[10]=k-O*c;break;case e.XZY:var L=o*a,N=o*l,R=u*a,D=u*l;t[0]=a*s,t[4]=-c,t[8]=l*s,t[1]=L*c+D,t[5]=o*s,t[9]=N*c-R,t[2]=R*c-N,t[6]=u*s,t[10]=D*c+L;break;default:throw new Error(v)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=p(t)}}]),e}(f.a)},function(t,e,n){"use strict";function r(t){if(!t)throw new Error("viewport-mercator-project: assertion failed.")}e.a=r},function(t,e,n){"use strict";function r(t,e){return a(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(t){if(Array.isArray(t))return t}function s(t){var e=Math.abs,n=Number.isFinite,i=t.width,o=t.height,a=t.bounds,s=t.padding,c=void 0===s?0:s,h=t.offset,p=void 0===h?[0,0]:h,f=r(a,2),d=r(f[0],2),y=d[0],g=d[1],m=r(f[1],2),v=m[0],_=m[1];if(n(c)){var b=c;c={top:b,bottom:b,left:b,right:b}}else Object(l.a)(n(c.top)&&n(c.bottom)&&n(c.left)&&n(c.right));var x=new u.a({width:i,height:o,longitude:0,latitude:0,zoom:0}),w=x.project([y,_]),E=x.project([v,g]),S=[e(E[0]-w[0]),e(E[1]-w[1])],I=[i-c.left-c.right-2*e(p[0]),o-c.top-c.bottom-2*e(p[1])];Object(l.a)(0<I[0]&&0<I[1]);var C=I[0]/S[0],T=I[1]/S[1],M=(c.right-c.left)/2/C,k=(c.bottom-c.top)/2/T,P=[(E[0]+w[0])/2+M,(E[1]+w[1])/2+k],A=x.unproject(P),O=x.zoom+Math.log2(e(Math.min(C,T)));return{longitude:A[0],latitude:A[1],zoom:O}}e.a=s;var u=n(6),l=n(87)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return y});var h=n(38),p=n(2),f=n(48),d=n.n(f),y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r),t}return c(e,t),s(e,[{key:"cross",value:function(t){return d()(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}}]),e}(h.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return f});var h=n(38),p=n(2),f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return c(e,t),s(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(p.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(p.a)(t)}}]),e}(h.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return tt});var h=n(19),p=n(2),f=n(67),d=n.n(f),y=n(68),g=n.n(y),m=n(69),v=n.n(m),_=n(70),b=n.n(_),x=n(71),w=n.n(x),E=n(72),S=n.n(E),I=n(73),C=n.n(I),T=n(74),M=n.n(T),k=n(75),P=n.n(k),A=n(76),O=n.n(A),L=n(77),N=n.n(L),R=n(78),D=n.n(R),z=n(34),F=n.n(z),B=n(79),j=n.n(B),V=n(80),q=n.n(V),U=n(81),G=n.n(U),X=n(82),Y=n.n(X),Z=n(84),W=n.n(Z),$=n(35),H=n.n($),K=n(85),J=n.n(K),Q=[0,0,0,1],tt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return c(e,t),s(e,[{key:"fromMatrix3",value:function(t){return d()(this,t),this.check()}},{key:"fromValues",value:function(t,e,n,r){return this.set(t,e,n,r)}},{key:"identity",value:function(){return g()(this),this.check()}},{key:"length",value:function(){return v()(this)}},{key:"squaredLength",value:function(t){return b()(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return w()(this,t)}},{key:"rotationTo",value:function(t,e){return S()(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return C()(this,t),this.check()}},{key:"calculateW",value:function(){return M()(this,this),this.check()}},{key:"conjugate",value:function(){return P()(this,this),this.check()}},{key:"invert",value:function(){return O()(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return N()(this,t,e,n),this.check()}},{key:"multiply",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.multiply only takes one argument");return D()(this,this,e),this.check()}},{key:"normalize",value:function(){return F()(this,this),this.check()}},{key:"rotateX",value:function(t){return j()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return q()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return G()(this,this,t),this.check()}},{key:"scale",value:function(t){return Y()(this,this,t),this.check()}},{key:"set",value:function(t,e,n,r){return W()(this,t,e,n,r),this.check()}},{key:"setAxisAngle",value:function(t,e){return H()(this,t,e),this.check()}},{key:"slerp",value:function(t){var e=t.start,n=void 0===e?Q:e,r=t.target,i=t.ratio;return J()(this,n,r,i),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(p.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(p.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(p.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(p.a)(t)}}]),e}(h.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function h(t){return t>=0&&t<6}function p(t){if(t<0&&t>=6)throw new Error(v);return t}n.d(e,"a",function(){return _});var f=n(19),d=n(2),y=n(39),g=n(91),m=n(11),v="Unknown Euler angle order",_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;if(o(this,e),t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),arguments.length>0&&Array.isArray(arguments[0])){var u;(u=t).fromVector3.apply(u,arguments)}else t.set(n,r,i,s);return t}return c(e,t),l(e,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return e.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return e.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),l(e,[{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check()}},{key:"validate",value:function(){return h(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new m.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,n,r){return this.set(t,n,r,e.ZYX)}},{key:"fromQuaternion",value:function(t,e){return this._fromRotationMatrix(y.a.fromQuaternion(t),e),this.check()}},{key:"fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder;return this._fromRotationMatrix(t,n),this.check()}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new y.a;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new g.a;switch(this[4]){case e.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case e.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case e.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case e.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case e.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case e.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(v)}}},{key:"_fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],p=r[10];switch(n=n||this[3]){case e.XYZ:this[1]=Math.asin(Object(d.b)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-l,p),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(h,u),this[2]=0);break;case e.YXZ:this[0]=Math.asin(-Object(d.b)(l,-1,1)),Math.abs(l)<.99999?(this[1]=Math.atan2(a,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-c,i),this[2]=0);break;case e.ZXY:this[0]=Math.asin(Object(d.b)(h,-1,1)),Math.abs(h)<.99999?(this[1]=Math.atan2(-c,p),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case e.ZYX:this[1]=Math.asin(-Object(d.b)(c,-1,1)),Math.abs(c)<.99999?(this[0]=Math.atan2(h,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case e.YZX:this[2]=Math.asin(Object(d.b)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-l,u),this[1]=Math.atan2(-c,i)):(this[0]=0,this[1]=Math.atan2(a,p));break;case e.XZY:this[2]=Math.asin(-Object(d.b)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(h,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-l,p),this[1]=0);break;default:throw new Error(v)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var t=new y.a,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),l=Math.sin(r),c=Math.sin(i);switch(this[3]){case e.XYZ:var h=o*s,p=o*c,f=u*s,d=u*c;t[0]=a*s,t[4]=-a*c,t[8]=l,t[1]=p+f*l,t[5]=h-d*l,t[9]=-u*a,t[2]=d-h*l,t[6]=f+p*l,t[10]=o*a;break;case e.YXZ:var g=a*s,m=a*c,_=l*s,b=l*c;t[0]=g+b*u,t[4]=_*u-m,t[8]=o*l,t[1]=o*c,t[5]=o*s,t[9]=-u,t[2]=m*u-_,t[6]=b+g*u,t[10]=o*a;break;case e.ZXY:var x=a*s,w=a*c,E=l*s,S=l*c;t[0]=x-S*u,t[4]=-o*c,t[8]=E+w*u,t[1]=w+E*u,t[5]=o*s,t[9]=S-x*u,t[2]=-o*l,t[6]=u,t[10]=o*a;break;case e.ZYX:var I=o*s,C=o*c,T=u*s,M=u*c;t[0]=a*s,t[4]=T*l-C,t[8]=I*l+M,t[1]=a*c,t[5]=M*l+I,t[9]=C*l-T,t[2]=-l,t[6]=u*a,t[10]=o*a;break;case e.YZX:var k=o*a,P=o*l,A=u*a,O=u*l;t[0]=a*s,t[4]=O-k*c,t[8]=A*c+P,t[1]=c,t[5]=o*s,t[9]=-u*s,t[2]=-l*s,t[6]=P*c+A,t[10]=k-O*c;break;case e.XZY:var L=o*a,N=o*l,R=u*a,D=u*l;t[0]=a*s,t[4]=-c,t[8]=l*s,t[1]=L*c+D,t[5]=o*s,t[9]=N*c-R,t[2]=R*c-N,t[6]=u*s,t[10]=D*c+L;break;default:throw new Error(v)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=p(t)}}]),e}(f.a)},function(t,e,n){"use strict";function r(t,e,n){return Array.isArray(t)?t.map(function(t,i){return r(t,e[i],n)}):n*e+(1-n)*t}function i(t){return Number.isFinite(t)||Array.isArray(t)}function o(t){return s[t]}function a(t,e,n){return o(t)&&180<Math.abs(n-e)&&(n=0>n?n+360:n-360),n}e.c=r,e.b=i,e.a=a;var s={longitude:1,bearing:1}},function(t,e,n){"use strict";function r(t){var e={},n=function(){return e};return e.get=function(){return null},e.set=n,e.on=n,e.off=n,e.destroy=n,e.emit=n,e}n.d(e,"a",function(){return s});var i=n(95),o=(n.n(i),n(161)),a=void 0;i.isBrowser&&(a=n(162)),a&&(Object(o.b)(a.PointerEventInput),Object(o.a)(a.MouseInput));var s=a?a.Manager:r;e.b=a},function(t,e,n){(function(e){var r=n(159).default,i="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"";t.exports={window:"undefined"!==typeof window?window:e,global:"undefined"!==typeof e?e:window,document:"undefined"!==typeof document?document:{},isBrowser:r,userAgent:i}}).call(e,n(12))},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){return s(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function s(t){if(Array.isArray(t))return t}function u(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"a",function(){return m});var h=n(17),p=n(36),f=n(18),d={transitionDuration:0},y={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new p.a,transitionInterruption:f.a.BREAK},g={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},m=function(){function t(){u(this,t),this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this)}var e=Math.abs;return c(t,[{key:"handleEvent",value:function(t){switch(this.mapState=this.getMapState(),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"setState",value:function(t){Object.assign(this._state,t),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this.mapState?this.mapState.getViewportProps():{},i=Object.assign({},t.getViewportProps(),e),o=Object.keys(i).some(function(t){return r[t]!==i[t]});o&&this.onViewStateChange&&this.onViewStateChange({viewState:i}),o&&this.onViewportChange&&this.onViewportChange(i),this.setState(Object.assign({},t.getInteractiveState(),n))}},{key:"getMapState",value:function(t){return new h.b(Object.assign({},this.mapStateProps,this._state,t))}},{key:"setOptions",value:function(t){var e=t.onChangeViewport,n=t.touchZoomRotate,r=void 0===n||n,i=t.onViewStateChange,o=t.onViewportChange,a=t.onStateChange,s=void 0===a?this.onStateChange:a,u=t.eventManager,l=void 0===u?this.eventManager:u,c=t.scrollZoom,p=void 0===c||c,f=t.dragPan,d=void 0===f||f,y=t.dragRotate,m=void 0===y||y,v=t.doubleClickZoom,_=void 0===v||v,b=t.touchZoom,x=t.touchRotate,w=t.keyboard,E=void 0===w||w;this.onViewStateChange=i,this.onViewportChange=o||e,this.onStateChange=s,this.mapStateProps&&this.mapStateProps.height!==t.height&&this.updateViewport(new h.b(t)),this.mapStateProps=t,this.eventManager!==l&&(this.eventManager=l,this._events={},this.toggleEvents(this.events,!0));var S=!(!this.onViewStateChange&&!this.onViewportChange);this.toggleEvents(g.WHEEL,S&&p),this.toggleEvents(g.PAN,S&&(d||m)),this.toggleEvents(g.PINCH,S&&r),this.toggleEvents(g.DOUBLE_TAP,S&&_),this.toggleEvents(g.KEYBOARD,S&&E),this.scrollZoom=p,this.dragPan=d,this.dragRotate=m,this.doubleClickZoom=_,this.touchZoom=r&&(void 0===b||b),this.touchRotate=r&&void 0!==x&&x,this.keyboard=E}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t),n=this.mapState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,d,{isDragging:!0})}},{key:"_onPan",value:function(t){return this.isFunctionKeyPressed(t)||t.rightButton?this._onPanRotate(t):this._onPanMove(t)}},{key:"_onPanEnd",value:function(){var t=this.mapState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.mapState.pan({pos:e});return this.updateViewport(n,d,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var n=t.deltaX,r=t.deltaY,o=this.getCenter(t),a=i(o,2),s=a[1],u=s-r,l=this.mapState.getViewportProps(),c=l.width,h=l.height,p=0;0<r?e(h-u)>5&&(p=r/(u-h)*1.2):0>r&&u>5&&(p=1-s/u),p=Math.min(1,Math.max(-1,p));var f=this.mapState.rotate({deltaScaleX:n/c,deltaScaleY:p});return this.updateViewport(f,d,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();var n=this.getCenter(t),r=t.delta,i=2/(1+Math.exp(-e(.01*r)));0>r&&0!==i&&(i=1/i);var o=this.mapState.zoom({pos:n,scale:i});return this.updateViewport(o,d)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,d,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,d,{isDragging:!0})}},{key:"_onPinchEnd",value:function(){var t=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),r=this.mapState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,y)}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=n?this.getMapState({zoom:r.zoom-2}):this.getMapState({zoom:r.zoom-1});break;case 187:e=n?this.getMapState({zoom:r.zoom+2}):this.getMapState({zoom:r.zoom+1});break;case 37:e=n?this.getMapState({bearing:r.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:e=n?this.getMapState({bearing:r.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:e=n?this.getMapState({pitch:r.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:e=n?this.getMapState({pitch:r.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,y)}}]),t}()},function(t,e,n){"use strict";function r(t){return"react-map-gl: `".concat(t,"` is deprecated and will be removed in a later version.")}function i(t){return"Use `".concat(t,"` instead.")}function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a.forEach(function(e){if(t.hasOwnProperty(e.old)){var n=r(e.old);e.new&&(n="".concat(n," ").concat(i(e.new))),console.warn(n)}})}e.a=o;var a=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"}]},function(t,e,n){!function(t,n){n(e)}(0,function(t){"use strict";function e(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&I(r),i&&C(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");i&&I(i);var a;switch(t){case"Point":a=r(e).geometry;break;case"LineString":a=s(e).geometry;break;case"Polygon":a=o(e).geometry;break;case"MultiPoint":a=h(e).geometry;break;case"MultiLineString":a=c(e).geometry;break;case"MultiPolygon":a=p(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(a.bbox=i),a}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return o(t,e)}),n)}function s(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return s(t,e)}),n)}function l(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&I(n),r&&C(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function c(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function y(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=zo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function g(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=zo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function m(t,e){return _(g(t,e))}function v(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return y(g(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Bo[e||"meters"];if(!r)throw new Error("invalid original units");var i=Bo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function I(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!E(t))throw new Error("bbox must only contain numbers")})}function C(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function T(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,y="Feature"===f,g=d?t.features.length:1,m=0;m<g;m++){s=(c=!!(l=d?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,p,m,_,b),p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,m,_,b),p++,"MultiPoint"===x&&_++;"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,m,_,b),p++;"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,m,_,b),p++;b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)T(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,n,r){var i=n;return T(t,function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)},r),i}function k(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function P(t,e,n){var r=n;return k(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function A(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function O(t,e,n){var r=n;return A(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function L(t){var e=[];return T(t,function(t){e.push(t)}),e}function N(t,e){var n,r,i,o,a,s,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,y=f?t.features.length:1;for(n=0;n<y;n++){for(s=f?t.features[n].geometry:d?t.geometry:t,l=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,l,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,l,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,l,c,h);p++}}function R(t,e,n){var r=n;return N(t,function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),r}function D(t,n){N(t,function(t,r,i,o,a){var s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:a}),r,0)}var u;switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:u,coordinates:t},i),r,o)})})}function z(t,e,n){var r=n;return D(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function F(t,e){D(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&M(t,function(o,a,u,l,c,h){var p=s([o,a],t.properties);return e(p,n,r,h,i),i++,a})}})}function B(t,e,n){var r=n,i=!1;return F(t,function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0}),r}function j(t,e){if(!t)throw new Error("geojson is required");D(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),n,r,a)}}})}function V(t,e,n){var r=n;return j(t,function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)}),r}function q(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function U(t){if(!t)throw new Error("obj is required");var e=G(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function G(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return X(e),e;throw new Error("No valid coordinates")}function X(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return X(t[0]);throw new Error("coordinates must only contain numbers")}function Y(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function Z(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function W(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function $(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function H(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function K(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function J(t,e,n){n=n||{};for(var r=Object.keys(Uo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=void 0!==a&&null!==a?a:Uo[o],Go[o]=a}Go.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var a=function(t,e,n){var r,i,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),p=h.cval,f=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);s.push([n+f[0],e+f[1]]),f=nt(h,o=c[p]),s.push([n+f[0],e+f[1]]),et(h);for(var d=n+u[p],y=e+l[p],g=p;d>=0&&y>=0&&y<a&&(d!=n||y!=e)&&void 0!==(h=t[y][d]);){if(0===(p=h.cval)||15===p)return{path:s,info:"mergeable"};o=c[p],r=u[p],i=l[p],5!==p&&10!==p||(5===p?h.flipped?-1===l[g]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[g]&&(o="bottom",r=0,i=-1):10===p&&(h.flipped?-1===u[g]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===l[g]&&(o="left",r=-1,i=0))),f=nt(h,o),s.push([d+f[0],y+f[1]]),et(h),d+=r,y+=i,g=p}return{path:s,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[c].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],l=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){s|=u>=e?8:0,s|=l>=e?4:0,s|=c>=e?2:0;var p=!1;if(5===(s|=h>=e?1:0)||10===s){var f=(u+l+c+h)/4;5===s&&f<e?(s=10,p=!0):10===s&&f<e&&(s=5,p=!0)}if(0!==s&&15!==s){var d,y,g,m;d=y=g=m=.5,1===s?(g=1-Q(e,u,h),y=1-Q(e,c,h)):2===s?(y=Q(e,h,c),m=1-Q(e,l,c)):3===s?(g=1-Q(e,u,h),m=1-Q(e,l,c)):4===s?(d=Q(e,u,l),m=Q(e,c,l)):5===s?(d=Q(e,u,l),m=Q(e,c,l),y=1-Q(e,c,h),g=1-Q(e,u,h)):6===s?(y=Q(e,h,c),d=Q(e,u,l)):7===s?(g=1-Q(e,u,h),d=Q(e,u,l)):8===s?(g=Q(e,h,u),d=1-Q(e,l,u)):9===s?(y=1-Q(e,c,h),d=1-Q(e,l,u)):10===s?(d=1-Q(e,l,u),m=1-Q(e,l,c),y=Q(e,h,c),g=Q(e,h,u)):11===s?(d=1-Q(e,l,u),m=1-Q(e,l,c)):12===s?(g=Q(e,h,u),m=Q(e,c,l)):13===s?(y=1-Q(e,c,h),m=Q(e,c,l)):14===s?(g=Q(e,h,u),y=Q(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:p,top:d,right:m,bottom:y,left:g}}}}}return i}(t,e));return"function"==typeof Go.successCallback&&Go.successCallback(s),s}function Q(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return A(t,function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]})}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(l)}return a}function it(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||function(t,e){return t<e?-1:t>e?1:0};r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);it(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}var c=t[e],h=n,p=r;for(ot(t,n,e),i(t[r],c)>0&&ot(t,n,r);h<p;){for(ot(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;i(t[p],c)>0;)p--}0===i(t[n],c)?ot(t,n,p):ot(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function at(t,e){if(!(this instanceof at))return new at(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function st(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,n,r,i){i||(i=gt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],lt(i,t.leaf?r(o):o);return i}function lt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ct(t,e){return t.minX-e.minX}function ht(t,e){return t.minY-e.minY}function pt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ft(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function yt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function gt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Xo(t,o,e,n,i),a.push(e,o,o,n))}function vt(t,e){return e={exports:{}},t(e,e.exports),e.exports}function _t(t,e){if(!(this instanceof _t))return new _t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function bt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)ia(t[o],s)||u.push(t[o]);var l=ta(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Yo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=It(u,r),a.push(r)}var l=Yo(16);for(s=0;s<a.length;s++)l.insert(St(a[s]));for(var c=e*e,h=n*n;a.length;){var p=a.shift(),f=p.p,d=p.next.p,y=Ct(f,d);if(!(y<h)){var g=y/c;(u=function(t,e,n,r,i,o,a){for(var s=new na(null,xt),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?Tt(c,n,r):function(t,e,n){if(wt(t,n)||wt(e,n))return 0;var r=Mt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Mt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Mt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Mt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),f=p.node,d=Tt(f,e,n),y=Tt(f,r,i);if(p.dist<d&&p.dist<y&&Et(n,f,a)&&Et(r,f,a))return f}(u=s.pop())&&(u=u.node)}return null}(o,p.prev.p,f,d,p.next.next.p,g,l))&&Math.min(Ct(u,f),Ct(u,d))<=g&&(a.push(p),a.push(It(u,p)),o.remove(u),l.remove(p),l.insert(St(p)),l.insert(St(p.next)))}}p=r;var m=[];do{m.push(p.p),p=p.next}while(p!==r);return m.push(p.p),m}function xt(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Et(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&oa(t,e,n)>0!=oa(t,e,r)>0&&oa(n,r,t)>0!=oa(n,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function St(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function It(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ct(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Tt(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return o=t[0]-r,a=t[1]-i,o*o+a*a}function Mt(t,e,n,r,i,o,a,s){var u,l,c,h,p=n-t,f=r-e,d=a-i,y=s-o,g=t-i,m=e-o,v=p*p+f*f,_=p*d+f*y,b=d*d+y*y,x=p*g+f*m,w=d*g+y*m,E=v*b-_*_,S=E,I=E;0===E?(l=0,S=1,h=w,I=b):(h=v*w-_*x,(l=_*w-b*x)<0?(l=0,h=w,I=b):l>S&&(l=S,h=w+_,I=b)),h<0?(h=0,-x<0?l=0:-x>v?l=S:(l=-x,S=v)):h>I&&(h=I,-x+_<0?l=0:-x+_>v?l=S:(l=-x+_,S=v)),u=0===l?0:l/S;var C=(1-(c=0===h?0:h/I))*i+c*a-((1-u)*t+u*n),T=(1-c)*o+c*s-((1-u)*e+u*r);return C*C+T*T}function kt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(T(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=aa(r,n);return i.length>3?o([i]):null}function Pt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=U(t),o=G(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(At(i,o[u][0],r)){for(var c=!1,h=1;h<o[u].length&&!c;)At(i,o[u][h],!r)&&(c=!0),h++;c||(l=!0)}return l}function At(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}function Ot(t,e){var n=[];return N(e,function(e){A(t,function(t){Pt(t,e)&&n.push(t)})}),l(n)}function Lt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return l(function(t){if(t.length<3)return[];t.sort(Rt);for(var e,n,r,i,o,a,s=t.length-1,u=t[s].x,l=t[0].x,c=t[s].y,h=c;s--;)t[s].y<c&&(c=t[s].y),t[s].y>h&&(h=t[s].y);var p,f=l-u,d=h-c,y=f>d?f:d,g=.5*(l+u),m=.5*(h+c),v=[new Nt({x:g-20*y,y:m-y,__sentinel:!0},{x:g,y:m+20*y,__sentinel:!0},{x:g+20*y,y:m-y,__sentinel:!0})],_=[],b=[];for(s=t.length;s--;){for(b.length=0,p=v.length;p--;)(f=t[s].x-v[p].x)>0&&f*f>v[p].r?(_.push(v[p]),v.splice(p,1)):(d=t[s].y-v[p].y,f*f+d*d>v[p].r||(b.push(v[p].a,v[p].b,v[p].b,v[p].c,v[p].c,v[p].a),v.splice(p,1)));for(Dt(b),p=b.length;p;)n=b[--p],e=b[--p],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&v.push(new Nt(e,n,r))}for(Array.prototype.push.apply(_,v),s=_.length;s--;)(_[s].a.__sentinel||_[s].b.__sentinel||_[s].c.__sentinel)&&_.splice(s,1);return _}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],a)}))}function Nt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*l-a*c)/h,this.y=(o*c-s*l)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Rt(t,e){return e.x-t.x}function Dt(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function zt(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=U(t),o=U(e),a=b(o[1]-i[1]),s=b(o[0]-i[0]),u=b(i[1]),l=b(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(l);return y(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function Ft(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return Bt(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Vt(t);default:throw new Error("unknown GeoJSON type")}}function Bt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=jt(t.properties),e.geometry=Vt(t.geometry),e}function jt(t){var e={};return t?(Object.keys(t).forEach(function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map(function(t){return t}):e[n]=jt(r):e[n]=r}),e):e}function Vt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Vt(t)}),e):(e.coordinates=qt(t.coordinates),e)}function qt(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return qt(t)})}function Ut(t,e){function n(t,e){e.length&&e.pop();for(var n=l[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&ca(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}function s(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(s)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:n,coordinates:e}}var u=la(t.transform),l=t.arcs;return s(e)}function Gt(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),a.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Ut(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],s=[];return e.forEach(n),a.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),a.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&r.push(t)})})}),r=ha(t,r),(n=r.length)>1)for(var a,s,u=1,l=i(r[0]);u<n;++u)(a=i(r[u]))>l&&(s=r[0],r[0]=r[u],r[u]=s,l=a);return r})}}function Xt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Yt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Zt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Zt:Wt)(t)}function Zt(t){var e,n=Wt(t.geometry);null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox);for(e in t.properties){n.properties=t.properties;break}return n}function Wt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Wt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function $t(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Ht(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Kt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[],i=V(t,function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Jt(r[0]),a=Jt(r[r.length-1]),u=Jt(i[0]),l=Jt(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(u===a)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return s(n)}(t,e)||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:c(r.map(function(t){return t.coordinates})):null}function Jt(t){return t[0].toString()+","+t[1].toString()}function Qt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=function(t){var e={};D(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return Kt(t,e);case"Polygon":return function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ft(t));var r=[];D(t,function(t){r.push(t.geometry)});var i=wa({geoms:f(r).geometry});return pa(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=K(t),o=[];switch(i){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":G(t).forEach(function(t){o.push(ee(t))});break;case"MultiPolygon":G(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(ee(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var a={};G(t).forEach(function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=G(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)n=e[s-1],r=e[s],function(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],l=s-o,c=u-a;return(r-o)*c-(i-a)*l==0&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=u:u<=i&&i<=a)}(n,i=e[s+1],r)||o.push(r);return o.push(i),o}function ne(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function re(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return o=t.x-r,a=t.y-i,o*o+a*a}function ie(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var u=re(t[s],t[e],t[n]);u>a&&(o=s,a=u)}a>r&&(o-e>1&&ie(t,e,o,r,i),i.push(t[o]),n-o>1&&ie(t,o,n,r,i))}function oe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)ne(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),t=function(t,e){var n=t.length-1,r=[t[0]];return ie(t,0,n,e,r),r.push(t[n]),r}(t,r)}function ae(t,e,n){return oe(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function se(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=oe(r,e,n).map(function(t){return[t.x,t.y]});!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=oe(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function ue(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(n))throw new Error("resolution must be an number");if(!E(r))throw new Error("sharpness must be an number");for(var i=[],o=new Ea({points:$(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return s(i,t.properties)}function le(t){I(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[r,n],[r,i],[e,i],a]])}function ce(t){return le(q(t))}function he(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(zt(t.slice(0,2),[r,n])>=zt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function pe(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.units,a=i.properties,s=U(t),u=b(s[0]),l=b(s[1]),c=b(n),h=g(e,o),p=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(c));return r([_(u+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(p))),_(p)],a)}function fe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(pe(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),o([a],i)}function de(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=de(e,t);return n=(n+180)%360}(t,e);var r=U(t),i=U(e),o=b(r[0]),a=b(i[0]),s=b(r[1]),u=b(i[1]),l=Math.sin(a-o)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return _(Math.atan2(l,c))}function ye(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=q(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ge(t,e){var n=0,i=0,o=0;return T(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function me(t,e){switch(K(t)){case"Point":return t;case"Polygon":var n=[];T(t,function(t){n.push(t)});var i,o,a,s,u,l,c,h,p=ge(t,e),f=p.geometry.coordinates,d=0,y=0,g=0,m=n.map(function(t){return[t[0]-f[0],t[1]-f[1]]});for(i=0;i<n.length-1;i++)s=(o=m[i])[0],l=o[1],u=(a=m[i+1])[0],g+=h=s*(c=a[1])-u*l,d+=(s+u)*h,y+=(l+c)*h;if(0===g)return p;var v=1/(.5*g*6);return r([f[0]+v*d,f[1]+v*y],e);default:var _=kt(t);return _?me(_,e):ge(t,e)}}function ve(t){var e=[];return"FeatureCollection"===t.type?A(t,function(t){T(t,function(n){e.push(r(n,t.properties))})}):T(t,function(n){e.push(r(n,t.properties))}),l(e)}function _e(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=be(t,0,i,n,!0),a=[];if(!o)return a;var s,u,l,c,h,p,f;if(r&&(o=function(t,e,n,r){var i,o,a,s,u,l=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=be(t,a,s,r,!1))===u.next&&(u.steiner=!0),l.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(u));for(l.sort(Ee),i=0;i<l.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Ie(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&ke(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=Pe(e,t);xe(n,n.next)}}(l[i],n),n=xe(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=l=t[0],u=c=t[1];for(var d=n;d<i;d+=n)h=t[d],p=t[d+1],h<s&&(s=h),p<u&&(u=p),h>l&&(l=h),p>c&&(c=p);f=0!==(f=Math.max(l-s,c-u))?1/f:0}return we(o,a,n,s,u,f),a}function be(t,e,n,r,i){var o,a;if(i===Ne(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ae(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ae(o,t[o],t[o+1],a);return a&&Te(a,a.next)&&(Oe(a),a=a.next),a}function xe(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Te(r,r.next)&&0!==Ce(r.prev,r,r.next))r=r.next;else{if(Oe(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function we(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Se(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Ce(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Se(s,u,e,n,r),p=Se(l,c,e,n,r),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Ie(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ce(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Ie(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ce(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(Ce(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ie(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ce(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Oe(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?we(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Te(i,o)&&Me(i,r,r.next,o)&&ke(i,o)&&ke(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Oe(r),Oe(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===a&&function(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Me(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&ke(t,e)&&ke(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(a,s)){var u=Pe(a,s);return a=xe(a,a.next),u=xe(u,u.next),we(a,e,n,r,i,o),void we(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}(t,e,n,r,i,o):we(xe(t),e,n,r,i,o,1);break}}}function Ee(t,e){return t.x-e.x}function Se(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Ie(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ce(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Te(t,e){return t.x===e.x&&t.y===e.y}function Me(t,e,n,r){return!!(Te(t,e)&&Te(n,r)||Te(t,r)&&Te(n,e))||Ce(t,e,n)>0!=Ce(t,e,r)>0&&Ce(n,r,t)>0!=Ce(n,r,e)>0}function ke(t,e){return Ce(t.prev,t,t.next)<0?Ce(t,e,t.next)>=0&&Ce(t,t.prev,e)>=0:Ce(t,e,t.prev)<0||Ce(t,t.next,e)<0}function Pe(t,e){var n=new Le(t.i,t.x,t.y),r=new Le(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ae(t,e,n,r){var i=new Le(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Oe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Le(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ne(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Re(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Sa(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var a=0;a<i.length;a+=3){var s=i.slice(a,a+3);s.push(i[a]),r.push(o([s]))}return r}function De(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return A(e,function(e,i){var o=zt(t,e);o<r&&((n=Ft(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function ze(t,e,n,r,i){Fe(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Fe(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Fe(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}var c=t[e],h=n,p=r;for(Be(t,n,e),i(t[r],c)>0&&Be(t,n,r);h<p;){for(Be(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;i(t[p],c)>0;)p--}0===i(t[n],c)?Be(t,n,p):Be(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function Be(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function je(t,e){if(!(this instanceof je))return new je(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ve(t,e){qe(t,0,t.children.length,e,t)}function qe(t,e,n,r,i){i||(i=He(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Ue(i,t.leaf?r(o):o);return i}function Ue(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ge(t,e){return t.minX-e.minX}function Xe(t,e){return t.minY-e.minY}function Ye(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ze(t){return t.maxX-t.minX+(t.maxY-t.minY)}function We(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function $e(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function He(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(ze(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function Je(t){var e=je(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tn(t);return je.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=Qe(t);n.bbox=t,e.push(n)}):A(t,function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)}),je.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Qe(e)).bbox=e}return je.prototype.remove.call(this,t)},e.clear=function(){return je.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:je.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return je.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:je.prototype.all.call(this)}},e.toJSON=function(){return je.prototype.toJSON.call(this)},e.fromJSON=function(t){return je.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t),{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Qe(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return D(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=G(r);break;case"LineString":n=[G(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=s([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),l(e)}function nn(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&i.push(o),l(i)}var a=Je();return a.load(en(n)),A(en(t),function(t){A(a.search(t),function(e){var n=rn(t,e);if(n){var o=G(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),l(i)}function rn(t,e){var n=G(t),i=G(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],l=i[0][0],c=i[0][1],h=i[1][0],p=i[1][1],f=(p-c)*(s-o)-(h-l)*(u-a),d=(h-l)*(a-c)-(p-c)*(o-l),y=(s-o)*(a-c)-(u-a)*(o-l);if(0===f)return null;var g=d/f,m=y/f;return g>=0&&g<=1&&m>=0&&m<=1?r([o+g*(s-o),a+g*(u-a)]):null}function on(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return D(t,function(t){for(var i=G(t),u=0;u<i.length-1;u++){var l=r(i[u]);l.properties.dist=zt(e,l,n);var c=r(i[u+1]);c.properties.dist=zt(e,c,n);var h=zt(l,c,n),p=Math.max(l.properties.dist,c.properties.dist),f=de(l,c),d=pe(e,p,f+90,n),y=pe(e,p,f-90,n),g=nn(s([d.geometry.coordinates,y.geometry.coordinates]),s([l.geometry.coordinates,c.geometry.coordinates])),m=null;g.features.length>0&&((m=g.features[0]).properties.dist=zt(e,m,n),m.properties.location=a+zt(l,m,n)),l.properties.dist<o.properties.dist&&((o=l).properties.index=u,o.properties.location=a),c.properties.dist<o.properties.dist&&((o=c).properties.index=u+1,o.properties.location=a+h),m&&m.properties.dist<o.properties.dist&&((o=m).properties.index=u),a+=h}}),o}function an(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");var i;return(i=r?sn(U(e),U(t)):sn(U(t),U(e)))>180?-(360-i):i}function sn(t,e){var n=b(t[1]),r=b(e[1]),i=b(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(_(Math.atan2(i,o))+360)%360}function un(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=U(t),o=U(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,x(function(t,e,n){var r=n=void 0===n?Do:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+l*l*s*s)*r}(i,o),"meters",r)}function ln(t,e){return hn(t,"mercator",e)}function cn(t,e){return hn(t,"wgs84",e)}function hn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?pn(t):fn(t):(!0!==r&&(t=Ft(t)),T(t,function(t){var n="mercator"===e?pn(t):fn(t);t[0]=n[0],t[1]=n[1]})),t}function pn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function fn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function dn(t,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):Z(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):Z(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return F(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],s=function(t,e,n,i){var o=i.mercator,a=!0!==o?zt(e,t,i):yn(e,t,i),s=v(!0!==o?de(e,t):an(e,t)),u=v(!0!==o?de(e,n):an(e,n)),l=Math.abs(s-u);if(l>90)return a;var c=(u+180)%360,h=v(!0!==o?de(n,t):an(n,t)),p=Math.abs(h-c);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?zt(t,n,i):yn(t,n,i):!0!==o?a*Math.sin(b(l)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=r(n),s=ln([t[0]+o,t[1]]),u=ln([e[0]+o,e[1]]),l=ln([n[0]+o,n[1]]),c=cn(function(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1],s=n[0],u=n[1],l=o-r,c=a-i,h=((s-r)*l+(u-i)*c)/(l*l+c*c);return[r+h*l,i+h*c]}(s,u,l));return 0!==o&&(c[0]-=o),un(a,c,i)}(e,n,t,i)}(a,e,n,i);o>s&&(o=s)}),o}function yn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=ln([t[0]+i,t[1]]),a=ln([e[0]+i,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return x(Math.sqrt(u),"meters",r)}function gn(t){for(var n=function(t){return"FeatureCollection"!==t.type?l("Feature"!==t.type?[e(t)]:[t]):t}(t),i=ye(n),o=!1,a=0;!o&&a<n.features.length;){var s,u=n.features[a].geometry,c=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var h=!1;for(s=0;!h&&s<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[s][0]&&i.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===u.type)for(s=0;!c&&s<u.coordinates.length-1;)mn(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(c=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){c=!1,s=0;for(var f=u.coordinates[p];!c&&s<f.length-1;)mn(i.geometry.coordinates[0],i.geometry.coordinates[1],f[s][0],f[s][1],f[s+1][0],f[s+1][1])&&(c=!0,o=!0),s++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Pt(i,u)&&(o=!0);a++}if(o)return i;var d=l([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(ve(n.features[a]).features);return r(De(i,d).geometry.coordinates)}function mn(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function vn(t){return R(t,function(t,e){return t+_n(e)},0)}function _n(t){var e,n=0;switch(t.type){case"Polygon":return bn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=bn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=_n(t.geometries[e]);return n}}function bn(t){var e=0;if(t&&t.length>0){e+=Math.abs(xn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(xn(t[n]))}return e}function xn(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(wn(t[o][0])-wn(e[0]))*Math.sin(wn(n[1]));s=s*Ta*Ta/2}return s}function wn(t){return t*Math.PI/180}function En(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,function(t,n){var r=n.geometry.coordinates;return t+zt(r[0],r[1],e)},0)}function Sn(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,u,l,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(i[h]),s(o);u=de(i[h],i[h-1])-180,l=pe(i[h],a,u,r),o.push(l.geometry.coordinates)}if(c>=n)return(a=n-c)?(u=de(i[h],i[h-1])-180,l=pe(i[h],a,u,r),o.push(l.geometry.coordinates),s(o)):(o.push(i[h]),s(o));if(c>=e&&o.push(i[h]),h===i.length-1)return s(o);c+=zt(i[h],i[h+1],r)}return s(i[i.length-1])}function In(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!S(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=U(t),o=G(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,r){var i=n[0],o=n[1],a=t[0],s=t[1],u=e[0],l=e[1],c=n[0]-a,h=n[1]-s,p=u-a,f=l-s;return c*f-h*p==0&&(r?"start"===r?Math.abs(p)>=Math.abs(f)?p>0?a<i&&i<=u:u<=i&&i<a:f>0?s<o&&o<=l:l<=o&&o<s:"end"===r?Math.abs(p)>=Math.abs(f)?p>0?a<=i&&i<u:u<i&&i<=a:f>0?s<=o&&o<l:l<o&&o<=s:"both"===r?Math.abs(p)>=Math.abs(f)?p>0?a<i&&i<u:u<i&&i<a:f>0?s<o&&o<l:l<o&&o<s:void 0:Math.abs(p)>=Math.abs(f)?p>0?a<=i&&i<=u:u<=i&&i<=a:f>0?s<=o&&o<=l:l<=o&&o<=s)}(o[a],o[a+1],i,s))return!0}return!1}function Cn(t,e){var n=K(t),r=K(e),i=$(t),o=$(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Mn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return In(i,o,{ignoreEndVertices:!0});case"Polygon":return Pt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Mn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!In(t.coordinates[r],e))return!1;n||(n=In(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Pt(t.coordinates[1],e);if(!i){n=!1;break}i=Pt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!In(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!Tn(q(e),q(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!Pt(t.coordinates[r],e))return!1;if(n||(n=Pt(t.coordinates[r],e,{ignoreBoundary:!0})),!n){n=Pt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0})}}return n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=q(t);if(!Tn(q(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Pt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Tn(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]}function kn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],h=t[3],p=e/zt([s,u],[c,u],n)*(c-s),f=e/zt([s,u],[s,h],n)*(h-u),d=c-s,y=h-u,g=Math.floor(d/p),m=(y-Math.floor(y/f)*f)/2,v=s+(d-g*p)/2;v<=c;){for(var _=u+m;_<=h;){var b=r([v,_],o);i?Cn(b,i)&&a.push(b):a.push(b),_+=f}v+=p}return l(a)}function Pn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return T(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function An(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!An(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function On(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Ln(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Ln(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Nn(t,e){var n=[],r=Je();return D(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Dn(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),A(Rn(o,e),function(t){n.push(t),r.insert(t)})}}else(n=Rn(t,e).features).forEach(function(t){t.bbox||(t.bbox=he(q(t)))}),r.load(l(n))}),l(n)}function Rn(t,e){var n=[],r=G(t)[0],i=G(t)[t.geometry.coordinates.length-1];if(zn(r,U(e))||zn(i,U(e)))return l([t]);var o=Je(),a=en(t);o.load(a);var u=o.search(e);if(!u.features.length)return l([t]);var c=Dn(e,u),h=O(a,function(t,r,i){var o=G(r)[1],a=U(e);return i===c.id?(t.push(a),n.push(s(t)),zn(a,o)?[a]:[a,o]):(t.push(o),t)},[r]);return h.length>1&&n.push(s(h)),l(n)}function Dn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return A(e,function(e){var i=on(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function zn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fn(t,e,n,r,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Bn(n),l=Bn(r),c=t.properties;if(u===l)return s(fe(t,e,i).geometry.coordinates[0],c);for(var h=u,p=u<l?l:l+360,f=h,d=[],y=0;f<p;)d.push(pe(t,e,f,a).geometry.coordinates),f=h+360*++y/o;return f>p&&d.push(pe(t,e,p,a).geometry.coordinates),s(d,c)}function Bn(t){var e=t%360;return e<0&&(e+=360),e}function jn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=K(t),i=G(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Vn(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(Vn(t,n))}),l(o);default:throw new Error("geom "+r+" not supported")}}function Vn(t,e){return t.length>1?c(t,e):s(t[0],e)}function qn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,K(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(G(Un(t,{},r,i)))}),p(o,n)}return Un(t,n,r,i)}function Un(t,e,n,r){e=e||t.properties||{};var i=G(t),a=K(t);if(!i.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(i=Gn(i)),o([i],e);case"MultiLineString":var u=[],l=0;return i.forEach(function(t){if(n&&(t=Gn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(q(s(t)));e>l?(u.unshift(t),l=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function Gn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function Xn(t,e,n){var r,i,o,a,s,u=t.length,l=Zn(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],a=s=Zn(o=t[r],e);;){if(!(l|a)){c.push(i),a!==s?(c.push(o),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(o);break}if(l&a)break;l?l=Zn(i=Yn(i,o,l,e),e):a=Zn(o=Yn(i,o,a,e),e)}l=s}return c.length&&n.push(c),n}function Yn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Zn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Wn(t,e){for(var n=[],r=0;r<t.length;r++){var i=Fa.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function $n(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Hn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Kn(t)||Kn(e))return!1;if(t.prototype!==e.prototype)return!1;if($n(t))return!!$n(e)&&(t=Ba.call(t),e=Ba.call(e),Hn(t,e,n));if(Jn(t)){if(!Jn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(i=o[r],!Hn(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Kn(t){return null===t||void 0===t}function Jn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}function Qn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.tolerance||0,i=[],o=Je();o.load(en(t));var a;return F(e,function(t){var e=!1;A(o.search(t),function(n){if(!1===e){var i=G(t).sort(),o=G(n).sort();Hn(i,o)?(e=!0,a=a?tr(a,t):t):(0===r?In(i[0],n)&&In(i[1],n):on(n,i[0]).properties.dist<=r&&on(n,i[1]).properties.dist<=r)?(e=!0,a=a?tr(a,t):t):(0===r?In(o[0],t)&&In(o[1],t):on(t,o[0]).properties.dist<=r&&on(t,o[1]).properties.dist<=r)&&(a=a?tr(a,n):n)}}),!1===e&&a&&(i.push(a),a=void 0)}),a&&i.push(a),l(i)}function tr(t,e){var n=G(e),r=G(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Hn(n[0],i)?a.unshift(n[1]):Hn(n[0],o)?a.push(n[1]):Hn(n[1],i)?a.unshift(n[0]):Hn(n[1],o)&&a.push(n[0]),t}function er(t){var e=t%360;return e<0&&(e+=360),e}function nr(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.units,a=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=x(e,o,"meters"),u=U(t),l=function(t,e,n,r){r=void 0===r?Do:Number(r);var i=e/r,o=t[0]*Math.PI/180,a=b(t[1]),s=b(n),u=i*Math.cos(s),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?u/c:Math.cos(a);return[(180*(o+i*Math.sin(s)/h)/Math.PI+540)%360-180,180*l/Math.PI]}(u,s,n);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,r(l,a)}function rr(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=ir(s,u,e),n<=0&&r>0?function(t,e,n){return ir(t,e,n)<0}(e,s,i)||(i=s):n>0&&r<=0&&(function(t,e,n){return ir(t,e,n)>0}(e,s,o)||(o=s)),n=r}return[i,o]}function ir(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function or(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=G(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function ar(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return N(t,function(t){ar(t,e)}),t;case"LineString":return sr(G(t),e),t;case"Polygon":return ur(G(t),e),t;case"MultiLineString":return G(t).forEach(function(t){sr(t,e)}),t;case"MultiPolygon":return G(t).forEach(function(t){ur(t,e)}),t;case"Point":case"MultiPoint":return t}}function sr(t,e){or(t)===e&&t.reverse()}function ur(t,e){or(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)or(t[n])===e&&t[n].reverse()}function lr(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return A(t,function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]})}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(l)}return a}function cr(t,e,n,r){r=r||{};for(var i=Object.keys(ja),o=0;o<i.length;o++){var a=i[o],s=r[a];s=void 0!==s&&null!==s?s:ja[a],Va[a]=s}Va.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var l=0,c=t[s+1][u],h=t[s+1][u+1],p=t[s][u+1],f=t[s][u];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){l|=c<e?0:c>a?128:64,l|=h<e?0:h>a?32:16,l|=p<e?0:p>a?8:4;var d=+(l|=f<e?0:f>a?2:1),y=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var g=(c+h+p+f)/4;y=g>a?2:g<e?0:1,34===l?1===y?l=35:0===y&&(l=136):136===l?1===y?(l=35,y=4):0===y&&(l=34):17===l?1===y?(l=155,y=4):0===y&&(l=153):68===l?1===y?(l=103,y=4):0===y&&(l=102):153===l?1===y&&(l=155):102===l?1===y&&(l=103):152===l?y<2&&(l=156,y=1):137===l?y<2&&(l=139,y=1):98===l?y<2&&(l=99,y=1):38===l?y<2&&(l=39,y=1):18===l?y>0?(l=156,y=4):l=152:33===l?y>0?(l=139,y=4):l=137:72===l?y>0?(l=99,y=4):l=98:132===l&&(y>0?(l=39,y=4):l=38)}if(0!=l&&170!=l){var m,v,_,b,x,w,E,S;m=v=_=b=x=w=E=S=.5;var I=[];1===l?(_=1-hr(e,p,f),S=1-hr(e,c,f),I.push(Ts[l])):169===l?(_=hr(a,f,p),S=hr(a,f,c),I.push(Ts[l])):4===l?(w=1-hr(e,h,p),b=hr(e,f,p),I.push(Is[l])):166===l?(w=hr(a,p,h),b=1-hr(a,p,f),I.push(Is[l])):16===l?(x=hr(e,p,h),v=hr(e,c,h),I.push(Ss[l])):154===l?(x=1-hr(a,h,p),v=1-hr(a,h,c),I.push(Ss[l])):64===l?(E=hr(e,f,c),m=1-hr(e,h,c),I.push(ks[l])):106===l?(E=1-hr(a,c,f),m=hr(a,c,h),I.push(ks[l])):168===l?(b=hr(a,f,p),_=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),I.push(Cs[l]),I.push(Ts[l])):2===l?(b=1-hr(e,p,f),_=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),I.push(Cs[l]),I.push(Ts[l])):162===l?(x=hr(a,p,h),w=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),I.push(Cs[l]),I.push(Ts[l])):8===l?(x=1-hr(e,h,p),w=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),I.push(Ss[l]),I.push(Is[l])):138===l?(x=1-hr(e,h,p),w=1-hr(a,h,p),m=1-hr(a,h,c),v=1-hr(e,h,c),I.push(Ss[l]),I.push(Is[l])):32===l?(x=hr(a,p,h),w=hr(e,p,h),m=hr(e,c,h),v=hr(a,c,h),I.push(Ss[l]),I.push(Is[l])):42===l?(S=1-hr(a,c,f),E=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h),I.push(Ms[l]),I.push(ks[l])):128===l&&(S=hr(e,f,c),E=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c),I.push(Ms[l]),I.push(ks[l])),5===l?(w=1-hr(e,h,p),S=1-hr(e,c,f),I.push(Is[l])):165===l?(w=hr(a,p,h),S=hr(a,f,c),I.push(Is[l])):20===l?(b=hr(e,f,p),v=hr(e,c,h),I.push(Cs[l])):150===l?(b=1-hr(a,p,f),v=1-hr(a,h,c),I.push(Cs[l])):80===l?(x=hr(e,p,h),E=hr(e,f,c),I.push(Ss[l])):90===l?(x=1-hr(a,h,p),E=1-hr(a,c,f),I.push(Ss[l])):65===l?(_=1-hr(e,p,f),m=1-hr(e,h,c),I.push(Ts[l])):105===l?(_=hr(a,f,p),m=hr(a,c,h),I.push(Ts[l])):160===l?(x=hr(a,p,h),w=hr(e,p,h),S=hr(e,f,c),E=hr(a,f,c),I.push(Ss[l]),I.push(Is[l])):10===l?(x=1-hr(e,h,p),w=1-hr(a,h,p),S=1-hr(a,c,f),E=1-hr(e,c,f),I.push(Ss[l]),I.push(Is[l])):130===l?(b=1-hr(e,p,f),_=1-hr(a,p,f),m=1-hr(a,h,c),v=1-hr(e,h,c),I.push(Cs[l]),I.push(Ts[l])):40===l?(b=hr(a,f,p),_=hr(e,f,p),m=hr(e,c,h),v=hr(a,c,h),I.push(Cs[l]),I.push(Ts[l])):101===l?(w=hr(a,p,h),m=hr(a,c,h),I.push(Is[l])):69===l?(w=1-hr(e,h,p),m=1-hr(e,h,c),I.push(Is[l])):149===l?(S=hr(a,f,c),v=1-hr(a,h,c),I.push(Ms[l])):21===l?(S=1-hr(e,c,f),v=hr(e,c,h),I.push(Ms[l])):86===l?(b=1-hr(a,p,f),E=1-hr(a,c,f),I.push(Cs[l])):84===l?(b=hr(e,f,p),E=hr(e,f,c),I.push(Cs[l])):89===l?(x=1-hr(a,h,p),_=hr(a,f,p),I.push(Ts[l])):81===l?(x=hr(e,p,h),_=1-hr(e,p,f),I.push(Ts[l])):96===l?(x=hr(a,p,h),w=hr(e,p,h),E=hr(e,f,c),m=hr(a,c,h),I.push(Ss[l]),I.push(Is[l])):74===l?(x=1-hr(e,h,p),w=1-hr(a,h,p),E=1-hr(a,c,f),m=1-hr(e,h,c),I.push(Ss[l]),I.push(Is[l])):24===l?(x=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),v=hr(e,c,h),I.push(Ss[l]),I.push(Ts[l])):146===l?(x=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),v=1-hr(a,h,c),I.push(Ss[l]),I.push(Ts[l])):6===l?(w=1-hr(e,h,p),b=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),I.push(Is[l]),I.push(Cs[l])):164===l?(w=hr(a,p,h),b=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),I.push(Is[l]),I.push(Cs[l])):129===l?(_=1-hr(e,p,f),S=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c),I.push(Ts[l]),I.push(Ms[l])):41===l?(_=hr(a,f,p),S=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h),I.push(Ts[l]),I.push(Ms[l])):66===l?(b=1-hr(e,p,f),_=1-hr(a,p,f),E=1-hr(a,c,f),m=1-hr(e,h,c),I.push(Cs[l]),I.push(Ts[l])):104===l?(b=hr(a,f,p),_=hr(e,f,p),E=hr(e,f,c),m=hr(a,c,h),I.push(Ts[l]),I.push(Ps[l])):144===l?(x=hr(e,p,h),S=hr(e,f,c),E=hr(a,f,c),v=1-hr(a,h,c),I.push(Ss[l]),I.push(ks[l])):26===l?(x=1-hr(a,h,p),S=1-hr(a,c,f),E=1-hr(e,c,f),v=hr(e,c,h),I.push(Ss[l]),I.push(ks[l])):36===l?(w=hr(a,p,h),b=hr(e,f,p),m=hr(e,c,h),v=hr(a,c,h),I.push(Is[l]),I.push(Cs[l])):134===l?(w=1-hr(e,h,p),b=1-hr(a,p,f),m=1-hr(a,h,c),v=1-hr(e,h,c),I.push(Is[l]),I.push(Cs[l])):9===l?(x=1-hr(e,h,p),w=1-hr(a,h,p),_=hr(a,f,p),S=1-hr(e,c,f),I.push(Ss[l]),I.push(Is[l])):161===l?(x=hr(a,p,h),w=hr(e,p,h),_=1-hr(e,p,f),S=hr(a,f,c),I.push(Ss[l]),I.push(Is[l])):37===l?(w=hr(a,p,h),S=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h),I.push(Is[l]),I.push(Ms[l])):133===l?(w=1-hr(e,h,p),S=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c),I.push(Is[l]),I.push(Ms[l])):148===l?(b=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),v=1-hr(a,h,c),I.push(Cs[l]),I.push(ks[l])):22===l?(b=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),v=hr(e,c,h),I.push(Cs[l]),I.push(ks[l])):82===l?(x=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),E=1-hr(a,c,f),I.push(Ss[l]),I.push(Ts[l])):88===l?(x=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),E=hr(e,f,c),I.push(Ss[l]),I.push(Ts[l])):73===l?(x=1-hr(e,h,p),w=1-hr(a,h,p),_=hr(a,f,p),m=1-hr(e,h,c),I.push(Ss[l]),I.push(Is[l])):97===l?(x=hr(a,p,h),w=hr(e,p,h),_=1-hr(e,p,f),m=hr(a,c,h),I.push(Ss[l]),I.push(Is[l])):145===l?(x=hr(e,p,h),_=1-hr(e,p,f),S=hr(a,f,c),v=1-hr(a,h,c),I.push(Ss[l]),I.push(Ms[l])):25===l?(x=1-hr(a,h,p),_=hr(a,f,p),S=1-hr(e,c,f),v=hr(e,c,h),I.push(Ss[l]),I.push(Ms[l])):70===l?(w=1-hr(e,h,p),b=1-hr(a,p,f),E=1-hr(a,c,f),m=1-hr(e,h,c),I.push(Is[l]),I.push(Cs[l])):100===l?(w=hr(a,p,h),b=hr(e,f,p),E=hr(e,f,c),m=hr(a,c,h),I.push(Is[l]),I.push(Cs[l])):34===l?(0===y?(x=1-hr(e,h,p),w=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)):(x=hr(a,p,h),w=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)),I.push(Ss[l]),I.push(Is[l]),I.push(Ms[l]),I.push(ks[l])):35===l?(4===y?(x=1-hr(e,h,p),w=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)):(x=hr(a,p,h),w=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)),I.push(Ss[l]),I.push(Is[l]),I.push(Ts[l]),I.push(ks[l])):136===l?(0===y?(x=hr(a,p,h),w=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)):(x=1-hr(e,h,p),w=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)),I.push(Ss[l]),I.push(Is[l]),I.push(Ms[l]),I.push(ks[l])):153===l?(0===y?(x=hr(e,p,h),_=1-hr(e,p,f),S=1-hr(e,c,f),v=hr(e,c,h)):(x=1-hr(a,h,p),_=hr(a,f,p),S=hr(a,f,c),v=1-hr(a,h,c)),I.push(Ss[l]),I.push(Ts[l])):102===l?(0===y?(w=1-hr(e,h,p),b=hr(e,f,p),E=hr(e,f,c),m=1-hr(e,h,c)):(w=hr(a,p,h),b=1-hr(a,p,f),E=1-hr(a,c,f),m=hr(a,c,h)),I.push(Is[l]),I.push(ks[l])):155===l?(4===y?(x=hr(e,p,h),_=1-hr(e,p,f),S=1-hr(e,c,f),v=hr(e,c,h)):(x=1-hr(a,h,p),_=hr(a,f,p),S=hr(a,f,c),v=1-hr(a,h,c)),I.push(Ss[l]),I.push(Ms[l])):103===l?(4===y?(w=1-hr(e,h,p),b=hr(e,f,p),E=hr(e,f,c),m=1-hr(e,h,c)):(w=hr(a,p,h),b=1-hr(a,p,f),E=1-hr(a,c,f),m=hr(a,c,h)),I.push(Is[l]),I.push(Cs[l])):152===l?(0===y?(x=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),v=hr(e,c,h)):(x=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),v=1-hr(a,h,c)),I.push(Ss[l]),I.push(Cs[l]),I.push(Ts[l])):156===l?(4===y?(x=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),v=hr(e,c,h)):(x=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),v=1-hr(a,h,c)),I.push(Ss[l]),I.push(Ts[l]),I.push(ks[l])):137===l?(0===y?(x=hr(a,p,h),w=hr(e,p,h),_=1-hr(e,p,f),S=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)):(x=1-hr(e,h,p),w=1-hr(a,h,p),_=hr(a,f,p),S=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)),I.push(Ss[l]),I.push(Is[l]),I.push(Ts[l])):139===l?(4===y?(x=hr(a,p,h),w=hr(e,p,h),_=1-hr(e,p,f),S=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)):(x=1-hr(e,h,p),w=1-hr(a,h,p),_=hr(a,f,p),S=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)),I.push(Ss[l]),I.push(Is[l]),I.push(Ms[l])):98===l?(0===y?(x=1-hr(e,h,p),w=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),E=hr(e,f,c),m=1-hr(e,h,c)):(x=hr(a,p,h),w=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),E=1-hr(a,c,f),m=hr(a,c,h)),I.push(Ss[l]),I.push(Is[l]),I.push(ks[l])):99===l?(4===y?(x=1-hr(e,h,p),w=1-hr(a,h,p),b=hr(a,f,p),_=hr(e,f,p),E=hr(e,f,c),m=1-hr(e,h,c)):(x=hr(a,p,h),w=hr(e,p,h),b=1-hr(e,p,f),_=1-hr(a,p,f),E=1-hr(a,c,f),m=hr(a,c,h)),I.push(Ss[l]),I.push(Is[l]),I.push(Ts[l])):38===l?(0===y?(w=1-hr(e,h,p),b=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)):(w=hr(a,p,h),b=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)),I.push(Is[l]),I.push(Ms[l]),I.push(ks[l])):39===l?(4===y?(w=1-hr(e,h,p),b=hr(e,f,p),S=hr(e,f,c),E=hr(a,f,c),m=1-hr(a,h,c),v=1-hr(e,h,c)):(w=hr(a,p,h),b=1-hr(a,p,f),S=1-hr(a,c,f),E=1-hr(e,c,f),m=hr(e,c,h),v=hr(a,c,h)),I.push(Is[l]),I.push(Cs[l]),I.push(ks[l])):85===l&&(x=1,w=0,b=1,_=0,S=0,E=1,m=0,v=1),(m<0||m>1||v<0||v>1||x<0||x>1||b<0||b>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+p+","+f+" "+y+" "+m+" "+v+" "+x+" "+w+" "+b+" "+_+" "+S+" "+E),o.cells[s][u]={cval:l,cval_real:d,flipped:y,topleft:m,topright:v,righttop:x,rightbottom:w,bottomright:b,bottomleft:_,leftbottom:S,lefttop:E,edges:I}}}}}return o}(t,e,n);return Va.polygons?(Va.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=Os[t.cval](t);"object"==typeof o&&pr(o)?"object"==typeof o[0]&&pr(o[0])?"object"==typeof o[0][0]&&pr(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(l)):(Va.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=t.cells[o][a],u=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Ua?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Ga?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Xa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Ua?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Ga?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Xa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Xa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Xa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&qa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Xa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Xa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&qa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&qa?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Xa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&qa?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&qa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Ua?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&qa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Ua?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(s),l=null,c=a,h=o;null!==u&&i.push([u.p[0]+c,u.p[1]+h]);do{if(null===(l=function(t,e,n,r){var i,o,a,s,u,l=t.cval;switch(e){case-1:switch(r){case 0:i=Is[l],a=es[l],s=ns[l],u=rs[l];break;default:i=Ss[l],a=Ja[l],s=Qa[l],u=ts[l]}break;case 1:switch(r){case 0:i=Ms[l],a=fs[l],s=ds[l],u=ys[l];break;default:i=ks[l],a=cs[l],s=hs[l],u=ps[l]}break;default:switch(n){case-1:switch(r){case 0:i=Ps[l],a=Ya[l],s=Za[l],u=Wa[l];break;default:i=As[l],a=$a[l],s=Ha[l],u=Ka[l]}break;case 1:switch(r){case 0:i=Ts[l],a=is[l],s=os[l],u=as[l];break;default:i=Cs[l],a=ss[l],s=us[l],u=ls[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&Ua?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:l&Ga?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:l&Ga?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:l&Xa?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&Ua?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:l&Ga?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:l&Ga?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:l&Xa?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:l&Ga?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:l&Xa?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:l&Xa?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&qa?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:l&Ga?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:l&Xa?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:l&Xa?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&qa?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:l&Ga?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&qa?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:l&Xa?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&qa?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&qa?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&Ua?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&qa?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&Ua?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}(t.cells[h][c],u.x,u.y,u.o)))break;if(i.push([l.p[0]+c,l.p[1]+h]),c+=l.x,h+=l.y,u=l,h<0||h>=n||c<0||c>=r||void 0===t.cells[h][c]){c-=l.x,h-=l.y;var p=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=r,a=t.cells[l][u],s=a.cval_real,-1===i)if(0===o)if(s&Xa)c.push([u,l]),r=-1,i=0,o=0;else{if(!(s&Ga)){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+1,l]),r=1,i=0,o=0}else{if(!(s&Xa)){if(s&Ga){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+a.bottomleft,l]),r=0,i=1,o=0,h=!0;break}c.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&Ua)){if(s&qa){c.push([u+a.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+a.topright,l+1]),r=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}else c.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&qa)){if(s&Xa){c.push([u,l+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+a.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}else{if(!(s&qa)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&Ga)){c.push([u+1,l+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(s&Ga)){if(s&Ua){c.push([u+1,l+a.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(a=t.cells[l][u],s=a.cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(s&Xa)){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(s&qa)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(s&Ua)){c.push([u+a.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(s&Ga)){c.push([u+1,l+a.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(s&qa)){c.push([u,l+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}}if(u+=r,l+=i,u===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}(t,c,h,l.x,l.y,l.o);if(null===p)break;p.path.forEach(function(t){i.push(t)}),c=p.i,h=p.j,u=p}}while(void 0!==t.cells[h][c]&&t.cells[h][c].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(l)),"function"==typeof Va.successCallback&&Va.successCallback(u),u}function hr(t,e,n){return(t-e)/(n-e)}function pr(t){return t.constructor.toString().indexOf("Array")>-1}function fr(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=ge(t)),!1!==i&&void 0!==i||(t=Ft(t)),T(t,function(t){var n=an(r,t)+e,i=un(r,t),o=G(nr(r,i,n));t[0]=o[0],t[1]=o[1]}),t)}function dr(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Ft(t)),"FeatureCollection"!==t.type||o?yr(t,e,r):(A(t,function(n,i){t.features[i]=yr(n,e,r)}),t)}function yr(t,e,n){var i="Point"===K(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return U(e);var n=t.bbox?t.bbox:q(t),i=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return ye(t);case void 0:case null:case"centroid":return ge(t);default:throw new Error("invalid origin")}}(t,n),1===e||i?t:(T(t,function(t){var r=un(n,t),i=an(n,t),o=G(nr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function gr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function mr(t,e){return t[0]*e[1]-e[0]*t[1]}function vr(t,e){return!function(t,e){return 0===mr(gr(t),gr(e))}(t,e)&&function(t,e){var n=t[0],r=gr(t),i=e[0],o=gr(e),a=mr(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(mr(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/a,r))}(t,e)}function _r(t,e,n){var r=[],i=m(e,n),o=G(t),a=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r;return[[i,t[1]+n*(t[0]-e[0])/r],[o,e[1]+n*(t[0]-e[0])/r]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],u=vr(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}}),s(a,t.properties)}function br(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(r*a-o*i)}function xr(t,e){return e.geometry.coordinates[0].every(function(e){return Pt(r(e),t)})}function wr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return r*a-i*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Er(t,e){return nn(e,jn(t)).features.length>0}function Sr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Ir(t,e){return t[0]===e[0]&&t[1]===e[1]}function Cr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),kr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function Tr(t,e){return nn(t,jn(e)).features.length>0}function Mr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,a=0;a<o&&n&&i;)Pt(r(t.coordinates[0][a]),e)?n=!0:i=!0,a++;return i&&i}function kr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Pr(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Ar(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Or(t,e){return js(t,e,{strict:!0})}function Lr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=K(t);if(n!==K(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new qs({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=L(t),o=L(e);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":F(t,function(t){F(e,function(e){Qn(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":F(t,function(t){F(e,function(e){nn(t,e).features.length&&r++})})}return r>0}function Nr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Rr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Dr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function zr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Fr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Fr(t,e,n){this.x=t,this.y=e,this.weight=n}function Br(t){this.content=[],this.scoreFunction=t}function jr(t){return t[0]}function Vr(t){return t[1]}function qr(){this._=null}function Ur(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Gr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Xr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Yr(t){for(;t.L;)t=t.L;return t}function Zr(t,e,n,r){var i=[null,null],o=su.push(i)-1;return i.left=t,i.right=e,n&&$r(i,t,e,n),r&&$r(i,e,t,r),ou[t.index].halfedges.push(o),ou[e.index].halfedges.push(o),i}function Wr(t,e,n){var r=[e,n];return r.left=t,r}function $r(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Hr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=0,h=1,p=s[0]-u,f=s[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*p,l+c*f]),h<1&&(t[1]=[u+h*p,l+h*f]),!0)}}}}}function Kr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,h=l[0],p=l[1],f=c[0],d=c[1],y=(h+f)/2,g=(p+d)/2;if(d===p){if(y<e||y>=r)return;if(h>f){if(u){if(u[1]>=i)return}else u=[y,n];o=[y,i]}else{if(u){if(u[1]<n)return}else u=[y,i];o=[y,n]}}else if(a=(h-f)/(d-p),s=g-a*y,a<-1||a>1)if(h>f){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Jr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Qr(t,e){return e[+(e.left!==t.site)]}function ti(t,e){return e[+(e.left===t.site)]}function ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,h=o[1]-s,p=2*(u*h-l*c);if(!(p>=-hu)){var f=u*u+l*l,d=c*c+h*h,y=(h*f-l*d)/p,g=(u*d-c*f)/p,m=uu.pop()||new function(){Ur(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=i,m.x=y+a,m.y=(m.cy=g+s)+Math.sqrt(y*y+g*g),t.circle=m;for(var v=null,_=au._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}au.insert(v,m),v||(ru=m)}}}}function ni(t){var e=t.circle;e&&(e.P||(ru=e.N),au.remove(e),uu.push(e),Ur(e),t.circle=null)}function ri(t){var e=lu.pop()||new function(){Ur(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ii(t){ni(t),iu.remove(t),lu.push(t),Ur(t)}function oi(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ii(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<cu&&Math.abs(r-u.circle.cy)<cu;)o=u.P,s.unshift(u),ii(u),u=o;s.unshift(u),ni(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<cu&&Math.abs(r-l.circle.cy)<cu;)a=l.N,s.push(l),ii(l),l=a;s.push(l),ni(l);var c,h=s.length;for(c=1;c<h;++c)l=s[c],u=s[c-1],$r(l.edge,u.site,l.site,i);u=s[0],(l=s[h-1]).edge=Zr(u.site,l.site,null,i),ei(u),ei(l)}function ai(t){for(var e,n,r,i,o=t[0],a=t[1],s=iu._;s;)if((r=si(s,a)-o)>cu)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return si(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>cu)){r>-cu?(e=s.P,n=s):i>-cu?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){ou[t.index]={site:t,halfedges:[]}}(t);var u=ri(t);if(iu.insert(e,u),e||n){if(e===n)return ni(e),n=ri(e.site),iu.insert(u,n),u.edge=n.edge=Zr(e.site,u.site),ei(e),void ei(n);if(n){ni(e),ni(n);var l=e.site,c=l[0],h=l[1],p=t[0]-c,f=t[1]-h,d=n.site,y=d[0]-c,g=d[1]-h,m=2*(p*g-f*y),v=p*p+f*f,_=y*y+g*g,b=[(g*v-f*_)/m+c,(p*_-y*v)/m+h];$r(n.edge,l,d,b),u.edge=Zr(l,t,null,b),n.edge=Zr(t,d,null,b),ei(e),ei(n)}else u.edge=Zr(e.site,u.site)}}function si(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,p=c/l;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function ui(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function li(t,e){return e[1]-t[1]||e[0]-t[0]}function ci(t,e){var n,r,i,o=t.sort(li).pop();for(su=[],ou=new Array(t.length),iu=new qr,au=new qr;;)if(i=ru,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ai(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;oi(i.arc)}if(function(){for(var t,e,n,r,i=0,o=ou.length;i<o;++i)if((t=ou[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Jr(t,su[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=su.length;o--;)Kr(i=su[o],t,e,n,r)&&Hr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>cu||Math.abs(i[0][1]-i[1][1])>cu)||delete su[o]}(a,s,u,l),function(t,e,n,r){var i,o,a,s,u,l,c,h,p,f,d,y,g=ou.length,m=!0;for(i=0;i<g;++i)if(o=ou[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)su[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(f=ti(o,su[u[s]]))[0],y=f[1],h=(c=Qr(o,su[u[++s%l]]))[0],p=c[1],(Math.abs(d-h)>cu||Math.abs(y-p)>cu)&&(u.splice(s,0,su.push(Wr(a,f,Math.abs(d-t)<cu&&r-y>cu?[t,Math.abs(h-t)<cu?p:r]:Math.abs(y-r)<cu&&n-d>cu?[Math.abs(p-r)<cu?h:n,r]:Math.abs(d-n)<cu&&y-e>cu?[n,Math.abs(h-n)<cu?p:e]:Math.abs(y-e)<cu&&d-t>cu?[Math.abs(p-e)<cu?h:t,e]:null))-1),++l);l&&(m=!1)}if(m){var v,_,b,x=1/0;for(i=0,m=null;i<g;++i)(o=ou[i])&&(b=(v=(a=o.site)[0]-t)*v+(_=a[1]-e)*_)<x&&(x=b,m=o);if(m){var w=[t,e],E=[t,r],S=[n,r],I=[n,e];m.halfedges.push(su.push(Wr(a=m.site,w,E))-1,su.push(Wr(a,E,S))-1,su.push(Wr(a,S,I))-1,su.push(Wr(a,I,w))-1)}}for(i=0;i<g;++i)(o=ou[i])&&(o.halfedges.length||delete ou[i])}(a,s,u,l)}this.edges=su,this.cells=ou,iu=au=su=ou=null}function hi(t){return(t=t.slice()).push(t[0]),o([t])}function pi(t,e,n,r){var i=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!S(r))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var c=U(t);if("degrees"===a)var h=b(s);else e=nr(t,e,90,{units:a}),n=nr(t,n,0,{units:a}),e=U(e)[0]-c[0],n=U(n)[1]-c[1];for(var p=[],f=0;f<i;f+=1){var d=-360*f/i,y=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(fi(d),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(fi(d),2));if(d<-90&&d>=-270&&(y=-y),d<-180&&d>=-360&&(g=-g),"degrees"===a){var m=y*Math.cos(h)+g*Math.sin(h),v=g*Math.cos(h)-y*Math.sin(h);y=m,g=v}p.push([y+c[0],g+c[1]])}return p.push(p[0]),"degrees"===a?o([p],l):fr(o([p],l),s,{pivot:u})}function fi(t){var e=t*Math.PI/180;return Math.tan(e)}function di(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return N(t,function(t,e,n){var r=n[i];if(r=void 0===r||null===r?1:r,!E(r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&T(t,function(t){o+=t[0]*r,a+=t[1]*r,s+=r})}),r([o/s,a/s],n)}function yi(t,e,n,i){var o=n.properties.tolerance||.001,a=0,s=0,u=0,l=0;if(A(n,function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(r=Number(r),!E(r))throw new Error("weight value must be a number");if(r>0){l+=1;var i=r*zt(e,t);0===i&&(i=1);var o=r/i;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}}),l<1)throw new Error("no features to measure");var c=a/u,h=s/u;return 1===l||0===i||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?r([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),yi([c,h],t,n,i-1))}function gi(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function mi(t){if(S(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*xi(),180*xi()]}function vi(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(mi(n)));return l(i)}function _i(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),E(r)||(r=10),E(i)||(i=10);for(var a=[],s=0;s<t;s++){var u=[],c=Array.apply(null,new Array(r+1)).map(Math.random);c.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),c.forEach(function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(mi(n))),a.push(o([u]))}return l(a)}function bi(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!E(r)||r<2)&&(r=10),E(i)||(i=1e-4),E(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var c=[mi(n)],h=0;h<r-1;h++){var p=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;c.push([c[h][0]+f*Math.cos(p),c[h][1]+f*Math.sin(p)])}a.push(s(c))}return l(a)}function xi(){return Math.random()-.5}function wi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return A(t,function(t){Ci(t.properties,e)&&n.push(t)}),l(n)}function Ei(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=Ii(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],c=0;c<s.length;c++)u.push(t.features[s[c]]);n(l(u),a,o)}}function Si(t,e,n,r){var i=r;return Ei(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function Ii(t,e){var n={};return A(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function Ci(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ci(t,e[r]))return!1;return!0}return Ti(t,e)}function Ti(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Mi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function ki(){}function Pi(t){this.message=t||""}function Ai(t){this.message=t||""}function Oi(){}function Li(t){return null===t?Ll:t.color}function Ni(t){return null===t?null:t.parent}function Ri(t,e){null!==t&&(t.color=e)}function Di(t){return null===t?null:t.left}function zi(t){return null===t?null:t.right}function Fi(){this.root_=null,this.size_=0}function Bi(){}function ji(){this.array_=[],arguments[0]instanceof vl&&this.addAll(arguments[0])}function Vi(){}function qi(t){this.message=t||""}function Ui(){this.array_=[]}function Gi(t){switch(t.type){case"Polygon":return vn(t)>1?t:null;case"MultiPolygon":var e=[];if(D(t,function(t){vn(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Xi(){this.reset()}function Yi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Zi(t){return t>1?Bf:t<-1?-Bf:Math.asin(t)}function Wi(){}function $i(t,e){t&&td.hasOwnProperty(t.type)&&td[t.type](t,e)}function Hi(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ki(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Hi(t[n],e,1);e.polygonEnd()}function Ji(t){return[Yf(t[1],t[0]),Zi(t[2])]}function Qi(t){var e=t[0],n=t[1],r=Zf(n);return[r*Zf(e),r*Hf(e),Hf(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function io(t){var e=Kf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>Ff?t-Vf:t<-Ff?t+Vf:t,e]}function ao(t,e,n){return(t%=Vf)?e||n?nd(uo(t),lo(e,n)):uo(t):e||n?lo(e,n):oo}function so(t){return function(e,n){return e+=t,[e>Ff?e-Vf:e<-Ff?e+Vf:e,n]}}function uo(t){var e=so(t);return e.invert=so(-t),e}function lo(t,e){function n(t,e){var n=Zf(e),s=Zf(t)*n,u=Hf(t)*n,l=Hf(e),c=l*r+s*i;return[Yf(u*o-c*a,s*r-l*i),Zi(c*o+u*a)]}var r=Zf(t),i=Hf(t),o=Zf(e),a=Hf(e);return n.invert=function(t,e){var n=Zf(e),s=Zf(t)*n,u=Hf(t)*n,l=Hf(e),c=l*o-u*a;return[Yf(u*o+l*a,s*r+c*i),Zi(c*r-s*i)]},n}function co(t,e){(e=Qi(e))[0]-=t,io(e);var n=function(t){return t>1?0:t<-1?Ff:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+Vf-zf)%Vf}function ho(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function po(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function fo(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return Gf(r[0]-t)<zf?i>0?0:3:Gf(r[0]-n)<zf?i>0?2:1:Gf(r[1]-e)<zf?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&x.point(t,e)}function l(o,a){var s=i(o,a);if(h&&p.push([o,a]),_)f=o,d=a,y=s,_=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&v)x.point(o,a);else{var u=[g=Math.max(hd,Math.min(cd,g)),m=Math.max(hd,Math.min(cd,m))],l=[o=Math.max(hd,Math.min(cd,o)),a=Math.max(hd,Math.min(cd,a))];od(u,l,t,e,n,r)?(v||(x.lineStart(),x.point(u[0],u[1])),x.point(l[0],l[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(o,a),b=!1)}g=o,m=a,v=s}var c,h,p,f,d,y,g,m,v,_,b,x=a,w=id(),E={point:u,lineStart:function(){E.point=l,h&&h.push(p=[]),_=!0,v=!1,g=m=NaN},lineEnd:function(){c&&(l(f,d),y&&v&&w.rejoin(),c.push(w.result())),E.point=u,v&&x.lineEnd()},polygonStart:function(){x=w,c=[],h=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,a,s=h[n],u=1,l=s.length,c=s[0],p=c[0],f=c[1];u<l;++u)o=p,a=f,p=(c=s[u])[0],f=c[1],a<=r?f>r&&(p-o)*(r-a)>(f-a)*(t-o)&&++e:f<=r&&(p-o)*(r-a)<(f-a)*(t-o)&&--e;return e}(),n=b&&e,i=(c=ld(c)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&sd(c,s,e,o,a),a.polygonEnd()),x=a,c=h=p=null}};return E}}function yo(t){return t.length>1}function go(t,e){return((t=t.x)[0]<0?t[1]-Bf-zf:Bf-t[1])-((e=e.x)[0]<0?e[1]-Bf-zf:Bf-e[1])}function mo(t){return function(e){var n=new vo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function vo(){}function _o(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ed(n,t.stream(vd));var a=vd.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}function bo(t){return function(t){function e(t){return t=l(t[0]*Uf,t[1]*Uf),[t[0]*y+a,s-t[1]*y]}function n(t,e){return t=o(t,e),[t[0]*y+a,s-t[1]*y]}function r(){l=nd(u=ao(b,x,w),o);var t=o(v,_);return a=g-t[0]*y,s=m+t[1]*y,i()}function i(){return f=d=null,e}var o,a,s,u,l,c,h,p,f,d,y=150,g=480,m=250,v=0,_=0,b=0,x=0,w=0,E=null,S=bd,I=null,C=fd,T=.5,M=Sd(n,T);return e.stream=function(t){return f&&d===t?f:f=Id(S(u,M(C(d=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?xd(E=t*Uf,6*Uf):(E=null,bd),i()):E*qf},e.clipExtent=function(t){return arguments.length?(C=null==t?(I=c=h=p=null,fd):fo(I=+t[0][0],c=+t[0][1],h=+t[1][0],p=+t[1][1]),i()):null==I?null:[[I,c],[h,p]]},e.scale=function(t){return arguments.length?(y=+t,r()):y},e.translate=function(t){return arguments.length?(g=+t[0],m=+t[1],r()):[g,m]},e.center=function(t){return arguments.length?(v=t[0]%360*Uf,_=t[1]%360*Uf,r()):[v*qf,_*qf]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Uf,x=t[1]%360*Uf,w=t.length>2?t[2]%360*Uf:0,r()):[b*qf,x*qf,w*qf]},e.precision=function(t){return arguments.length?(M=Sd(n,T=t*t),i()):Kf(T)},e.fitExtent=function(t,n){return _o(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return _o(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-a)/y,(s-t[1])/y))&&[t[0]*qf,t[1]*qf]},r()}}(function(){return t})()}function xo(t,e){return[t,$f(Jf((Bf+e)/2))]}function wo(t,e){return[$f(Jf((Bf+e)/2)),-t]}function Eo(t,n,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return N(t,function(t){var e=Eo(t,n,r,i);e&&s.push(e)}),l(s)}var u,c=q(t),h=c[1]>50&&c[3]>50;u=h?{type:a.type,coordinates:Io(a.coordinates,To(a))}:ln(a);var p=(new wc).read(u),f=y(g(n,r),"meters"),d=fp.bufferOp(p,f);if(d=(new Ec).write(d),!So(d.coordinates)){var m;return(m=h?{type:d.type,coordinates:Co(d.coordinates,To(a))}:cn(d)).geometry?m:e(m,o)}}function So(t){return Array.isArray(t[0])?So(t[0]):isNaN(t[0])}function Io(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return Io(t,e)})}function Co(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return Co(t,e)})}function To(t){var e=ye(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Cd().center(e).rotate(n).scale(Do)}function Mo(){for(var t=new wc,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Nf.union(e,t.read(JSON.stringify(arguments[n].geometry)));return e=(new Ec).write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}function ko(t,n){var r=$(t),i=$(n);if(te(Pn(i,{precision:4})).coordinates[0].length<4)return null;if(te(Pn(r,{precision:4})).coordinates[0].length<4)return null;var o=new wc,a=o.read(Pn(r)),s=o.read(Pn(i)),u=If.intersection(a,s);return u.isEmpty()?null:e((new Ec).write(u))}function Po(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,o){var a=n(e,t);a>=0&&(void 0===i||a<i)&&(i=a,r=o)}),r}(t,e,function(t,e){return t-e})}function Ao(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(K(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],c=t[2],h=t[3],p=(u+h)/2,f=(s+c)/2,d=2*e/zt([s,p],[c,p],n)*(c-s),y=2*e/zt([f,u],[f,h],n)*(h-u),g=d/2,m=2*g,v=Math.sqrt(3)/2*y,_=c-s,b=h-u,x=.75*m,w=v,I=(_-m)/(m-g/2),C=Math.floor(I),T=(C*x-g/2-_)/2-g/2+x/2,M=Math.floor((b-v)/v),k=(b-M*v)/2,P=M*v-b>v/2;P&&(k-=v/4);for(var A=[],O=[],L=0;L<6;L++){var N=2*Math.PI/6*L;A.push(Math.cos(N)),O.push(Math.sin(N))}for(var R=[],D=0;D<=C;D++)for(var z=0;z<=M;z++){var F=D%2==1;if((0!==z||!F)&&(0!==z||!P)){var B=D*x+s-T,j=z*w+u+k;if(F&&(j-=v/2),!0===i)(function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var l=[];l.push(t),l.push([t[0]+e*i[u],t[1]+n*a[u]]),l.push([t[0]+e*i[(u+1)%6],t[1]+n*a[(u+1)%6]]),l.push(t),s.push(o([l],r))}return s})([B,j],d/2,y/2,r,A,O).forEach(function(t){a?ko(a,t)&&R.push(t):R.push(t)});else{var V=function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var l=t[0]+e*i[u],c=t[1]+n*a[u];s.push([l,c])}return s.push(s[0].slice()),o([s],r)}([B,j],d/2,y/2,r,A,O);a?ko(a,V)&&R.push(V):R.push(V)}}}return l(R)}function Oo(t){if(t.features.length<=1)return t;var e=function(t){var e=Yo(),n=[];return D(t,function(t,e){var r=q(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return D(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},Lo),r[i]=!0;;){var o=q(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map(function(t){return r[t.index]=!0,e.remove({index:t.index},Lo),t.geojson});s.push(t),t=Mo.apply(this,s)}if(0===a.length)break}n.push(t)}),l(n)}function Lo(t,e){return t.index===e.index}function No(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],h=t[3],p=e/zt([s,u],[c,u],n)*(c-s),f=e/zt([s,u],[s,h],n)*(h-u),d=c-s,y=h-u,g=Math.floor(d/p),m=Math.floor(y/f),v=(y-m*f)/2,_=s+(d-g*p)/2,b=0;b<g;b++){for(var x=u+v,w=0;w<m;w++){var I=o([[[_,x],[_,x+f],[_+p,x+f],[_+p,x],[_,x]]],r);i?ko(i,I)&&a.push(I):a.push(I),x+=f}_+=p}return l(a)}function Ro(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/zt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/zt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,h=t[0];h<=t[2];){for(var p=0,f=t[1];f<=t[3];){var d=null,y=null;c%2==0&&p%2==0?(d=o([[[h,f],[h,f+u],[h+s,f],[h,f]]],r),y=o([[[h,f+u],[h+s,f+u],[h+s,f],[h,f+u]]],r)):c%2==0&&p%2==1?(d=o([[[h,f],[h+s,f+u],[h+s,f],[h,f]]],r),y=o([[[h,f],[h,f+u],[h+s,f+u],[h,f]]],r)):p%2==0&&c%2==1?(d=o([[[h,f],[h,f+u],[h+s,f+u],[h,f]]],r),y=o([[[h,f],[h+s,f+u],[h+s,f],[h,f]]],r)):p%2==1&&c%2==1&&(d=o([[[h,f],[h,f+u],[h+s,f],[h,f]]],r),y=o([[[h,f+u],[h+s,f+u],[h+s,f],[h,f+u]]],r)),i?(ko(i,d)&&a.push(d),ko(i,y)&&a.push(y)):(a.push(d),a.push(y)),f+=u,p++}c++,h+=s}return l(a)}var Do=6371008.8,zo={meters:Do,metres:Do,millimeters:1e3*Do,millimetres:1e3*Do,centimeters:100*Do,centimetres:100*Do,kilometers:Do/1e3,kilometres:Do/1e3,miles:Do/1609.344,nauticalmiles:Do/1852,inches:39.37*Do,yards:Do/1.0936,feet:3.28084*Do,radians:1,degrees:Do/111325},Fo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Do,degrees:1/111325},Bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},jo=Object.freeze({earthRadius:Do,factors:zo,unitsFactors:Fo,areaFactors:Bo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:l,multiLineString:c,multiPoint:h,multiPolygon:p,geometryCollection:f,round:d,radiansToLength:y,lengthToRadians:g,lengthToDegrees:m,bearingToAzimuth:v,radiansToDegrees:_,degreesToRadians:b,convertLength:x,convertArea:w,isNumber:E,isObject:S,validateBBox:I,validateId:C,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Vo=Object.freeze({coordEach:T,coordReduce:M,propEach:k,propReduce:P,featureEach:A,featureReduce:O,coordAll:L,geomEach:N,geomReduce:R,flattenEach:D,flattenReduce:z,segmentEach:F,segmentReduce:B,lineEach:j,lineReduce:V}),qo=Object.freeze({getCoord:U,getCoords:G,containsNumber:X,geojsonType:Y,featureOf:Z,collectionOf:W,getGeom:$,getGeomType:H,getType:K}),Uo={successCallback:null,verbose:!1},Go={},Xo=it,Yo=at;at.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!yt(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],yt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):dt(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!yt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,yt(t,a)){if(e.leaf||dt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=gt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!dt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:ct,compareMinY:ht,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=gt(t.slice(e,n+1)),st(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=gt([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(mt(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(mt(t,s,l=Math.min(s+p-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return st(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=pt(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),lt(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=gt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,st(n,this.toBBox),st(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=gt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ut(t,0,r,this.toBBox),o=ut(t,r,n,this.toBBox)),s=pt(i)+pt(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ct,i=t.leaf?this.compareMinY:ht;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=ut(t,0,e,a),u=ut(t,n-e,n,a),l=ft(s)+ft(u);for(i=e;i<n-e;i++)o=t.children[i],lt(s,t.leaf?a(o):o),l+=ft(s);for(i=n-e-1;i>=e;i--)o=t.children[i],lt(u,t.leaf?a(o):o),l+=ft(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)lt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():st(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Zo=function(t,e,n){var r=t*e,i=Wo*t,o=i-(i-t),a=t-o,s=Wo*e,u=s-(s-e),l=e-u,c=a*l-(r-o*u-a*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},Wo=+(Math.pow(2,27)+1),$o=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=n+r,s=new Array(a),u=0,l=0,c=0,h=Math.abs,p=t[l],f=h(p),d=e[c],y=h(d);f<y?(o=p,(l+=1)<n&&(f=h(p=t[l]))):(o=d,(c+=1)<r&&(y=h(d=e[c]))),l<n&&f<y||c>=r?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(y=h(d=e[c])));for(var g,m,v=i+o,_=v-i,b=o-_,x=b,w=v;l<n&&c<r;)f<y?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(y=h(d=e[c]))),(b=(o=x)-(_=(v=i+o)-i))&&(s[u++]=b),x=w-((g=w+v)-(m=g-w))+(v-m),w=g;for(;l<n;)(b=(o=x)-(_=(v=(i=p)+o)-i))&&(s[u++]=b),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(l+=1)<n&&(p=t[l]);for(;c<r;)(b=(o=x)-(_=(v=(i=d)+o)-i))&&(s[u++]=b),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(c+=1)<r&&(d=e[c]);return x&&(s[u++]=x),w&&(s[u++]=w),u||(s[u++]=0),s.length=u,s},Ho=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Ko=function(t,e){var n=t.length;if(1===n){var r=Zo(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Zo(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){Zo(t[u],e,a);var l=o[1];Ho(l,a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],h=o[1],p=c+h,f=h-(p-c);o[1]=p,f&&(i[s++]=f)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Jo=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=n+r,s=new Array(a),u=0,l=0,c=0,h=Math.abs,p=t[l],f=h(p),d=-e[c],y=h(d);f<y?(o=p,(l+=1)<n&&(f=h(p=t[l]))):(o=d,(c+=1)<r&&(y=h(d=-e[c]))),l<n&&f<y||c>=r?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(y=h(d=-e[c])));for(var g,m,v=i+o,_=v-i,b=o-_,x=b,w=v;l<n&&c<r;)f<y?(i=p,(l+=1)<n&&(f=h(p=t[l]))):(i=d,(c+=1)<r&&(y=h(d=-e[c]))),(b=(o=x)-(_=(v=i+o)-i))&&(s[u++]=b),x=w-((g=w+v)-(m=g-w))+(v-m),w=g;for(;l<n;)(b=(o=x)-(_=(v=(i=p)+o)-i))&&(s[u++]=b),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(l+=1)<n&&(p=t[l]);for(;c<r;)(b=(o=x)-(_=(v=(i=d)+o)-i))&&(s[u++]=b),x=w-((g=w+v)-(m=g-w))+(v-m),w=g,(c+=1)<r&&(d=-e[c]);return x&&(s[u++]=x),w&&(s[u++]=w),u||(s[u++]=0),s.length=u,s},Qo=vt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(i(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(a,u))):o.push.apply(o,i(e(a,u))),s.push("m"+u);var l=r(n),c=r(o),h="orientation"+t+"Exact",p=["function ",h,"(",s.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)($o,Zo,Ko,Jo)}var a=o(3),s=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var u=3.3306690738754716e-16*r;return s>=u||s<=-u?s:a(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],d=o*c,y=a*l,g=a*u,m=i*c,v=i*l,_=o*u,b=h*(d-y)+p*(g-m)+f*(v-_),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(y))*Math.abs(h)+(Math.abs(g)+Math.abs(m))*Math.abs(p)+(Math.abs(v)+Math.abs(_))*Math.abs(f));return b>x||-b>x?b:s(t,e,n,r)}];!function(){for(;u.length<=5;)u.push(o(u.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),r=0;r<=5;++r)t.exports[r]=u[r]}()}),ta=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]});var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],l=o.length;l>1&&ea(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(s),l=a.length;l>1&&ea(t[a[l-2]],t[a[l-1]],u)>=0;)l-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var p=a.length-2;p>0;--p)n[c++]=a[p];return n},ea=Qo[3],na=_t,ra=_t;_t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},na.default=ra;var ia=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],l=e[a][0],c=e[a][1];u>r!=c>r&&n<(l-s)*(r-u)/(c-u)+s&&(i=!i)}return i},oa=Qo[3],aa=bt,sa=bt;aa.default=sa;var ua=function(t){return t},la=function(t){if(null==t)return ua;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;u<l;)c[u]=t[u],++u;return c}},ca=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},ha=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var l=r===n?n:n.concat(r);i[l.start=n.start]=o[l.end=r.end]=l}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=o[c.end=n.end]=c}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||a.push([t])}),a},pa=function(t){return Ut(t,Gt.apply(this,arguments))},fa=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=i;return{set:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l]=o;if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)break;c=a[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}},da=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ya=new ArrayBuffer(16),ga=new Float64Array(ya),ma=new Uint32Array(ya),va=function(t){ga[0]=t[0],ga[1]=t[1];var e=ma[0]^ma[1];return 2147483647&(e=e<<5^e>>7^ma[2]^ma[3])},_a=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=f[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++g,y[n]=1)}else f[n]=e,d[n]=r}}function n(t){return va(u[t])}function r(t,e){return da(u[t],u[e])}var i,o,a,s,u=t.coordinates,l=t.lines,c=t.rings,h=function(){for(var t=fa(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),d=new Int32Array(u.length),y=new Int8Array(u.length),g=0;for(i=0,o=u.length;i<o;++i)p[i]=f[i]=d[i]=-1;for(i=0,o=l.length;i<o;++i){var m=l[i],v=m[0],_=m[1];for(a=h[v],s=h[++v],++g,y[a]=1;++v<=_;)e(i,a,a=s,s=h[v]);++g,y[s]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=c.length;i<o;++i){var b=c[i],x=b[0]+1,w=b[1];for(e(i,h[w-1],a=h[x-1],s=h[x]);++x<=w;)e(i,a,a=s,s=h[x])}p=f=d=null;var E,S=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*g,va,da);for(i=0,o=u.length;i<o;++i)y[E=h[i]]&&S.add(u[E]);return S},ba=function(t){var e,n,r,i=_a(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],p=h[0],f=p,d=h[1],y=i.has(o[p]);++f<d;)i.has(o[f])&&(y?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(function(t,e,n,r){Xt(t,e,n),Xt(t,e,e+r),Xt(t,e+r,n)}(o,p,d,d-f),o[d]=o[p],y=!0,f=p));return t},xa=function(t){function e(t){var e,n,r,i,o,a,s,u;if(r=f.get(e=l[t[0]]))for(s=0,u=r.length;s<u;++s)if(i=r[s],function(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!da(l[n],l[r]))return!1;return!0}(i,t))return t[0]=i[0],void(t[1]=i[1]);if(o=f.get(n=l[t[1]]))for(s=0,u=o.length;s<u;++s)if(a=o[s],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!da(l[n],l[o]))return!1;return!0}(a,t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var a=i(t),s=i(e),u=0;u<o;++u)if(!da(l[n+(u+a)%o],l[r+(u+s)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],a=e[1],s=o-n;if(s!==a-r)return!1;for(var u=i(t),c=s-i(e),h=0;h<s;++h)if(!da(l[n+(h+u)%s],l[a-(h+c)%s]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=l[r];++r<n;){var a=l[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var o,a,s,u,l=t.coordinates,c=t.lines,h=t.rings,p=c.length+h.length;for(delete t.lines,delete t.rings,s=0,u=c.length;s<u;++s)for(o=c[s];o=o.next;)++p;for(s=0,u=h.length;s<u;++s)for(a=h[s];a=a.next;)++p;var f=fa(2*p*1.4,va,da),d=t.arcs=[];for(s=0,u=c.length;s<u;++s){o=c[s];do{e(o)}while(o=o.next)}for(s=0,u=h.length;s<u;++s)if((a=h[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=f.get(e=l[t[0]]))for(s=0,u=o.length;s<u;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=f.get(e=l[t[0]+i(t)]))for(s=0,u=o.length;s<u;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):f.set(e,[t]),d.push(t)}(a);return t},wa=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var c in t)e(t[c]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Yt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-l)*f),Math.round((t[1]-c)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,u=0,h=t.length,p=new Array(h);++s<h;)n=t[s],o=Math.round((n[0]-l)*f),a=Math.round((n[1]-c)*d),o===r&&a===i||(p[u++]=[r=o,i=a]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&y.hasOwnProperty(t.type)&&y[t.type](t)}var l=e[0],c=e[1],h=e[2],p=e[3],f=h-l?(n-1)/(h-l):1,d=p-c?(n-1)/(p-c):1,y={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var g in t)u(t[g]);return{scale:[1/f,1/d],translate:[l,c]}}(t,o,e),s=xa(ba(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,l=fa(1.4*s.arcs.length,$t,Ht);t=s.objects,s.bbox=o,s.arcs=s.arcs.map(function(t,e){return l.set(t,e),u.slice(t[0],t[1]+1)}),delete s.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],h=l[1];++a<u;)r=(l=o[a])[0],i=l[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},Ea=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ea.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Ea.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ea.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Sa=_e,Ia=_e;_e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Ne(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Ne(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},_e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Sa.default=Ia,je.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!$e(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],$e(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):We(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!$e(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,$e(t,a)){if(e.leaf||We(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=He([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!We(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Ge,compareMinY:Xe,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=He(t.slice(e,n+1)),Ve(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=He([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(Ke(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(Ke(t,s,l=Math.min(s+p-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Ve(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Ye(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Ue(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=He(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ve(n,this.toBBox),Ve(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=He([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ve(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=qe(t,0,r,this.toBBox),o=qe(t,r,n,this.toBBox)),s=Ye(i)+Ye(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Ge,i=t.leaf?this.compareMinY:Xe;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=qe(t,0,e,a),u=qe(t,n-e,n,a),l=Ze(s)+Ze(u);for(i=e;i<n-e;i++)o=t.children[i],Ue(s,t.leaf?a(o):o),l+=Ze(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Ue(u,t.leaf?a(o):o),l+=Ze(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ue(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ve(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ca=Object.freeze({toMercator:ln,toWgs84:cn}),Ta=6378137,Ma=function(t,e,n){function r(t,n,r,i){var u=o[t][n],l=o[t][n+1],c=o[r][i],h=o[r][i+1],p=function(t,e,n,r){if(An(t,n)||An(t,r)||An(e,n)||An(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],l=n[1],c=r[0],h=r[1],p=(i-a)*(l-h)-(o-s)*(u-c);return 0===p?null:[((i*s-o*a)*(u-c)-(i-a)*(u*h-l*c))/p,((i*s-o*a)*(l-h)-(o-s)*(u*h-l*c))/p]}(u,l,c,h);if(null!==p){var f,d;if(f=l[0]!==u[0]?(p[0]-u[0])/(l[0]-u[0]):(p[1]-u[1])/(l[1]-u[1]),d=h[0]!==c[0]?(p[0]-c[0])/(h[0]-c[0]):(p[1]-c[1])/(h[1]-c[1]),!(f>=1||f<=0||d>=1||d<=0)){var y=p,g=!s[y];g&&(s[y]=!0),e?a.push(e(p,t,n,u,l,f,r,i,c,h,d,g)):a.push(p)}}}function i(t,e){var n,r,i,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(n=s[0],r=u[0]):(n=u[0],r=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var u=[],l=0;l<o.length;l++)for(var c=0;c<o[l].length-1;c++)u.push(i(l,c));var h=Yo();h.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)h.search(i(p,f)).forEach(function(t){var e=t.ring,n=t.edge;r(p,f,e,n)});else for(var d=0;d<o.length;d++)for(var y=0;y<o[d].length-1;y++)r(p,f,d,y);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a},ka=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&Pt(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&vn(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,a=[],s=0;s<i;s++){var u=t.geometry.coordinates[s];Ln(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=a.length,h=Ma(t,function(t,e,n,r,i,o,a,s,u,l,c,h){return[t,e,n,r,i,o,a,s,u,l,c,h]}),p=h.length;if(0==p){var f=[];for(s=0;s<i;s++)f.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(On([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var d=l(f);return e(),n(),d}var y=[],g=[];for(s=0;s<i;s++){y.push([]);for(var m=0;m<t.geometry.coordinates[s].length-1;m++)y[s].push([new Pa(t.geometry.coordinates[s][(m+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,m],[s,(m+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),g.push(new Aa(t.geometry.coordinates[s][m],[s,(m-1).modulo(t.geometry.coordinates[s].length-1)],[s,m],void 0,void 0,!1,!0))}for(s=0;s<p;s++)y[h[s][1]][h[s][2]].push(new Pa(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&g.push(new Aa(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var v=g.length;for(s=0;s<y.length;s++)for(m=0;m<y[s].length;m++)y[s][m].sort(function(t,e){return t.param<e.param?-1:1});var _=[];for(s=0;s<v;s++)_.push({minX:g[s].coord[0],minY:g[s].coord[1],maxX:g[s].coord[0],maxY:g[s].coord[1],index:s});var b=Yo();for(b.load(_),s=0;s<y.length;s++)for(m=0;m<y[s].length;m++)for(var x=0;x<y[s][m].length;x++){E=x==y[s][m].length-1?y[s][(m+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:y[s][m][x+1].coord;var w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];y[s][m][x].nxtIsectAlongEdgeIn=w.index}for(s=0;s<y.length;s++)for(m=0;m<y[s].length;m++)for(x=0;x<y[s][m].length;x++){var E=y[s][m][x].coord,S=(w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;S<c?g[S].nxtIsectAlongRingAndEdge2=y[s][m][x].nxtIsectAlongEdgeIn:Ln(g[S].ringAndEdge1,y[s][m][x].ringAndEdgeIn)?g[S].nxtIsectAlongRingAndEdge1=y[s][m][x].nxtIsectAlongEdgeIn:g[S].nxtIsectAlongRingAndEdge2=y[s][m][x].nxtIsectAlongEdgeIn}var I=[];for(s=0,m=0;m<i;m++){var C=s;for(x=0;x<t.geometry.coordinates[m].length-1;x++)g[s].coord[0]<g[C].coord[0]&&(C=s),s++;var T=g[C].nxtIsectAlongRingAndEdge2;for(x=0;x<g.length;x++)if(g[x].nxtIsectAlongRingAndEdge1==C||g[x].nxtIsectAlongRingAndEdge2==C){var M=x;break}var k=On([g[M].coord,g[C].coord,g[T].coord],!0)?1:-1;I.push({isect:C,parent:-1,winding:k})}for(I.sort(function(t,e){return g[t.isect].coord>g[e.isect].coord?-1:1}),f=[];I.length>0;){var P=I.pop(),A=P.isect,O=P.parent,L=P.winding,N=f.length,R=[g[A].coord],D=A;if(g[A].ringAndEdge1Walkable)var z=g[A].ringAndEdge1,F=g[A].nxtIsectAlongRingAndEdge1;else z=g[A].ringAndEdge2,F=g[A].nxtIsectAlongRingAndEdge2;for(;!Ln(g[A].coord,g[F].coord);){R.push(g[F].coord);var B=void 0;for(s=0;s<I.length;s++)if(I[s].isect==F){B=s;break}if(void 0!=B&&I.splice(B,1),Ln(z,g[F].ringAndEdge1)){if(z=g[F].ringAndEdge2,g[F].ringAndEdge2Walkable=!1,g[F].ringAndEdge1Walkable){var j={isect:F};On([g[D].coord,g[F].coord,g[g[F].nxtIsectAlongRingAndEdge2].coord],1==L)?(j.parent=O,j.winding=-L):(j.parent=N,j.winding=L),I.push(j)}D=F,F=g[F].nxtIsectAlongRingAndEdge2}else z=g[F].ringAndEdge1,g[F].ringAndEdge1Walkable=!1,g[F].ringAndEdge2Walkable&&(j={isect:F},On([g[D].coord,g[F].coord,g[g[F].nxtIsectAlongRingAndEdge1].coord],1==L)?(j.parent=O,j.winding=-L):(j.parent=N,j.winding=L),I.push(j)),D=F,F=g[F].nxtIsectAlongRingAndEdge1}R.push(g[F].coord),f.push(o([R],{index:N,parent:O,winding:L,netWinding:void 0}))}return d=l(f),e(),n(),d},Pa=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Aa=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var Oa=Math.PI/180,La=180/Math.PI,Na=function(t,e){this.lon=t,this.lat=e,this.x=Oa*t,this.y=Oa*e};Na.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Na.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Na(e,t)};var Ra=function(){this.coords=[],this.length=0};Ra.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Da=function(t){this.properties=t||{},this.geometries=[]};Da.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Da.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var za=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Na(t.x,t.y),this.end=new Na(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};za.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=La*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[La*Math.atan2(i,r),a]},za.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,p=360-l,f=1;f<n.length;++f){var d=n[f-1][0],y=n[f][0],g=Math.abs(y-d);g>p&&(y>c&&d<h||d>c&&y<h)?s=!0:g>u&&(u=g)}var m=[];if(s&&u<l){var v=[];m.push(v);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>p){var x=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),E=parseFloat(n[_][0]),S=parseFloat(n[_][1]);if(x>-180&&x<h&&180===E&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){v.push([-180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(x>c&&x<180&&-180===E&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){v.push([180,n[_][1]]),_++,v.push([n[_][0],n[_][1]]);continue}if(x<h&&E>c){var I=x;x=E,E=I;var C=w;w=S,S=C}if(x>c&&E<h&&(E+=360),x<=180&&E>=180&&x<E){var T=(180-x)/(E-x),M=T*S+(1-T)*w;v.push([n[_-1][0]>c?180:-180,M]),(v=[]).push([n[_-1][0]>c?-180:180,M]),m.push(v)}else v=[],m.push(v);v.push([b,n[_][1]])}else v.push([n[_][0],n[_][1]])}}else{var k=[];m.push(k);for(var P=0;P<n.length;++P)k.push([n[P][0],n[P][1]])}for(var A=new Da(this.properties),O=0;O<m.length;++O){var L=new Ra;A.geometries.push(L);for(var N=m[O],R=0;R<N.length;++R)L.move_to(N[R])}return A};var Fa=Xn;Xn.polyline=Xn,Xn.polygon=function(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Zn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Zn(s=t[a],e)&r))!==o&&n.push(Yn(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n};var Ba=Array.prototype.slice,ja={successCallback:null,verbose:!1,polygons:!1},Va={},qa=64,Ua=16,Ga=4,Xa=1,Ya=[],Za=[],Wa=[],$a=[],Ha=[],Ka=[],Ja=[],Qa=[],ts=[],es=[],ns=[],rs=[],is=[],os=[],as=[],ss=[],us=[],ls=[],cs=[],hs=[],ps=[],fs=[],ds=[],ys=[];Ja[85]=es[85]=-1,Qa[85]=ns[85]=0,ts[85]=rs[85]=1,cs[85]=fs[85]=1,hs[85]=ds[85]=0,ps[85]=ys[85]=1,Ya[85]=$a[85]=0,Za[85]=Ha[85]=-1,Wa[85]=as[85]=0,ss[85]=is[85]=0,us[85]=os[85]=1,Ka[85]=ls[85]=1,fs[1]=fs[169]=0,ds[1]=ds[169]=-1,ys[1]=ys[169]=0,is[1]=is[169]=-1,os[1]=os[169]=0,as[1]=as[169]=0,es[4]=es[166]=0,ns[4]=ns[166]=-1,rs[4]=rs[166]=1,ss[4]=ss[166]=1,us[4]=us[166]=0,ls[4]=ls[166]=0,Ja[16]=Ja[154]=0,Qa[16]=Qa[154]=1,ts[16]=ts[154]=1,$a[16]=$a[154]=1,Ha[16]=Ha[154]=0,Ka[16]=Ka[154]=1,cs[64]=cs[106]=0,hs[64]=hs[106]=1,ps[64]=ps[106]=0,Ya[64]=Ya[106]=-1,Za[64]=Za[106]=0,Wa[64]=Wa[106]=1,cs[2]=cs[168]=0,hs[2]=hs[168]=-1,ps[2]=ps[168]=1,fs[2]=fs[168]=0,ds[2]=ds[168]=-1,ys[2]=ys[168]=0,is[2]=is[168]=-1,os[2]=os[168]=0,as[2]=as[168]=0,ss[2]=ss[168]=-1,us[2]=us[168]=0,ls[2]=ls[168]=1,Ja[8]=Ja[162]=0,Qa[8]=Qa[162]=-1,ts[8]=ts[162]=0,es[8]=es[162]=0,ns[8]=ns[162]=-1,rs[8]=rs[162]=1,is[8]=is[162]=1,os[8]=os[162]=0,as[8]=as[162]=1,ss[8]=ss[162]=1,us[8]=us[162]=0,ls[8]=ls[162]=0,Ja[32]=Ja[138]=0,Qa[32]=Qa[138]=1,ts[32]=ts[138]=1,es[32]=es[138]=0,ns[32]=ns[138]=1,rs[32]=rs[138]=0,Ya[32]=Ya[138]=1,Za[32]=Za[138]=0,Wa[32]=Wa[138]=0,$a[32]=$a[138]=1,Ha[32]=Ha[138]=0,Ka[32]=Ka[138]=1,fs[128]=fs[42]=0,ds[128]=ds[42]=1,ys[128]=ys[42]=1,cs[128]=cs[42]=0,hs[128]=hs[42]=1,ps[128]=ps[42]=0,Ya[128]=Ya[42]=-1,Za[128]=Za[42]=0,Wa[128]=Wa[42]=1,$a[128]=$a[42]=-1,Ha[128]=Ha[42]=0,Ka[128]=Ka[42]=0,es[5]=es[165]=-1,ns[5]=ns[165]=0,rs[5]=rs[165]=0,fs[5]=fs[165]=1,ds[5]=ds[165]=0,ys[5]=ys[165]=0,ss[20]=ss[150]=0,us[20]=us[150]=1,ls[20]=ls[150]=1,$a[20]=$a[150]=0,Ha[20]=Ha[150]=-1,Ka[20]=Ka[150]=1,Ja[80]=Ja[90]=-1,Qa[80]=Qa[90]=0,ts[80]=ts[90]=1,cs[80]=cs[90]=1,hs[80]=hs[90]=0,ps[80]=ps[90]=1,is[65]=is[105]=0,os[65]=os[105]=1,as[65]=as[105]=0,Ya[65]=Ya[105]=0,Za[65]=Za[105]=-1,Wa[65]=Wa[105]=0,Ja[160]=Ja[10]=-1,Qa[160]=Qa[10]=0,ts[160]=ts[10]=1,es[160]=es[10]=-1,ns[160]=ns[10]=0,rs[160]=rs[10]=0,fs[160]=fs[10]=1,ds[160]=ds[10]=0,ys[160]=ys[10]=0,cs[160]=cs[10]=1,hs[160]=hs[10]=0,ps[160]=ps[10]=1,ss[130]=ss[40]=0,us[130]=us[40]=1,ls[130]=ls[40]=1,is[130]=is[40]=0,os[130]=os[40]=1,as[130]=as[40]=0,Ya[130]=Ya[40]=0,Za[130]=Za[40]=-1,Wa[130]=Wa[40]=0,$a[130]=$a[40]=0,Ha[130]=Ha[40]=-1,Ka[130]=Ka[40]=1,es[37]=es[133]=0,ns[37]=ns[133]=1,rs[37]=rs[133]=1,fs[37]=fs[133]=0,ds[37]=ds[133]=1,ys[37]=ys[133]=0,Ya[37]=Ya[133]=-1,Za[37]=Za[133]=0,Wa[37]=Wa[133]=0,$a[37]=$a[133]=1,Ha[37]=Ha[133]=0,Ka[37]=Ka[133]=0,ss[148]=ss[22]=-1,us[148]=us[22]=0,ls[148]=ls[22]=0,fs[148]=fs[22]=0,ds[148]=ds[22]=-1,ys[148]=ys[22]=1,cs[148]=cs[22]=0,hs[148]=hs[22]=1,ps[148]=ps[22]=1,$a[148]=$a[22]=-1,Ha[148]=Ha[22]=0,Ka[148]=Ka[22]=1,Ja[82]=Ja[88]=0,Qa[82]=Qa[88]=-1,ts[82]=ts[88]=1,ss[82]=ss[88]=1,us[82]=us[88]=0,ls[82]=ls[88]=1,is[82]=is[88]=-1,os[82]=os[88]=0,as[82]=as[88]=1,cs[82]=cs[88]=0,hs[82]=hs[88]=-1,ps[82]=ps[88]=0,Ja[73]=Ja[97]=0,Qa[73]=Qa[97]=1,ts[73]=ts[97]=0,es[73]=es[97]=0,ns[73]=ns[97]=-1,rs[73]=rs[97]=0,is[73]=is[97]=1,os[73]=os[97]=0,as[73]=as[97]=0,Ya[73]=Ya[97]=1,Za[73]=Za[97]=0,Wa[73]=Wa[97]=1,Ja[145]=Ja[25]=0,Qa[145]=Qa[25]=-1,ts[145]=ts[25]=0,is[145]=is[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,fs[145]=fs[25]=0,ds[145]=ds[25]=1,ys[145]=ys[25]=1,$a[145]=$a[25]=-1,Ha[145]=Ha[25]=0,Ka[145]=Ka[25]=0,es[70]=es[100]=0,ns[70]=ns[100]=1,rs[70]=rs[100]=0,ss[70]=ss[100]=-1,us[70]=us[100]=0,ls[70]=ls[100]=1,cs[70]=cs[100]=0,hs[70]=hs[100]=-1,ps[70]=ps[100]=1,Ya[70]=Ya[100]=1,Za[70]=Za[100]=0,Wa[70]=Wa[100]=0,es[101]=es[69]=0,ns[101]=ns[69]=1,rs[101]=rs[69]=0,Ya[101]=Ya[69]=1,Za[101]=Za[69]=0,Wa[101]=Wa[69]=0,fs[149]=fs[21]=0,ds[149]=ds[21]=1,ys[149]=ys[21]=1,$a[149]=$a[21]=-1,Ha[149]=Ha[21]=0,Ka[149]=Ka[21]=0,ss[86]=ss[84]=-1,us[86]=us[84]=0,ls[86]=ls[84]=1,cs[86]=cs[84]=0,hs[86]=hs[84]=-1,ps[86]=ps[84]=1,Ja[89]=Ja[81]=0,Qa[89]=Qa[81]=-1,ts[89]=ts[81]=0,is[89]=is[81]=1,os[89]=os[81]=0,as[89]=as[81]=1,Ja[96]=Ja[74]=0,Qa[96]=Qa[74]=1,ts[96]=ts[74]=0,es[96]=es[74]=-1,ns[96]=ns[74]=0,rs[96]=rs[74]=1,cs[96]=cs[74]=1,hs[96]=hs[74]=0,ps[96]=ps[74]=0,Ya[96]=Ya[74]=1,Za[96]=Za[74]=0,Wa[96]=Wa[74]=1,Ja[24]=Ja[146]=0,Qa[24]=Qa[146]=-1,ts[24]=ts[146]=1,ss[24]=ss[146]=1,us[24]=us[146]=0,ls[24]=ls[146]=1,is[24]=is[146]=0,os[24]=os[146]=1,as[24]=as[146]=1,$a[24]=$a[146]=0,Ha[24]=Ha[146]=-1,Ka[24]=Ka[146]=0,es[6]=es[164]=-1,ns[6]=ns[164]=0,rs[6]=rs[164]=1,ss[6]=ss[164]=-1,us[6]=us[164]=0,ls[6]=ls[164]=0,fs[6]=fs[164]=0,ds[6]=ds[164]=-1,ys[6]=ys[164]=1,cs[6]=cs[164]=1,hs[6]=hs[164]=0,ps[6]=ps[164]=0,is[129]=is[41]=0,os[129]=os[41]=1,as[129]=as[41]=1,fs[129]=fs[41]=0,ds[129]=ds[41]=1,ys[129]=ys[41]=0,Ya[129]=Ya[41]=-1,Za[129]=Za[41]=0,Wa[129]=Wa[41]=0,$a[129]=$a[41]=0,Ha[129]=Ha[41]=-1,Ka[129]=Ka[41]=0,ss[66]=ss[104]=0,us[66]=us[104]=1,ls[66]=ls[104]=0,is[66]=is[104]=-1,os[66]=os[104]=0,as[66]=as[104]=1,cs[66]=cs[104]=0,hs[66]=hs[104]=-1,ps[66]=ps[104]=0,Ya[66]=Ya[104]=0,Za[66]=Za[104]=-1,Wa[66]=Wa[104]=1,Ja[144]=Ja[26]=-1,Qa[144]=Qa[26]=0,ts[144]=ts[26]=0,fs[144]=fs[26]=1,ds[144]=ds[26]=0,ys[144]=ys[26]=1,cs[144]=cs[26]=0,hs[144]=hs[26]=1,ps[144]=ps[26]=1,$a[144]=$a[26]=-1,Ha[144]=Ha[26]=0,Ka[144]=Ka[26]=1,es[36]=es[134]=0,ns[36]=ns[134]=1,rs[36]=rs[134]=1,ss[36]=ss[134]=0,us[36]=us[134]=1,ls[36]=ls[134]=0,Ya[36]=Ya[134]=0,Za[36]=Za[134]=-1,Wa[36]=Wa[134]=1,$a[36]=$a[134]=1,Ha[36]=Ha[134]=0,Ka[36]=Ka[134]=0,Ja[9]=Ja[161]=-1,Qa[9]=Qa[161]=0,ts[9]=ts[161]=0,es[9]=es[161]=0,ns[9]=ns[161]=-1,rs[9]=rs[161]=0,is[9]=is[161]=1,os[9]=os[161]=0,as[9]=as[161]=0,fs[9]=fs[161]=1,ds[9]=ds[161]=0,ys[9]=ys[161]=1,Ja[136]=0,Qa[136]=1,ts[136]=1,es[136]=0,ns[136]=1,rs[136]=0,ss[136]=-1,us[136]=0,ls[136]=1,is[136]=-1,os[136]=0,as[136]=0,fs[136]=0,ds[136]=-1,ys[136]=0,cs[136]=0,hs[136]=-1,ps[136]=1,Ya[136]=1,Za[136]=0,Wa[136]=0,$a[136]=1,Ha[136]=0,Ka[136]=1,Ja[34]=0,Qa[34]=-1,ts[34]=0,es[34]=0,ns[34]=-1,rs[34]=1,ss[34]=1,us[34]=0,ls[34]=0,is[34]=1,os[34]=0,as[34]=1,fs[34]=0,ds[34]=1,ys[34]=1,cs[34]=0,hs[34]=1,ps[34]=0,Ya[34]=-1,Za[34]=0,Wa[34]=1,$a[34]=-1,Ha[34]=0,Ka[34]=0,Ja[35]=0,Qa[35]=1,ts[35]=1,es[35]=0,ns[35]=-1,rs[35]=1,ss[35]=1,us[35]=0,ls[35]=0,is[35]=-1,os[35]=0,as[35]=0,fs[35]=0,ds[35]=-1,ys[35]=0,cs[35]=0,hs[35]=1,ps[35]=0,Ya[35]=-1,Za[35]=0,Wa[35]=1,$a[35]=1,Ha[35]=0,Ka[35]=1,Ja[153]=0,Qa[153]=1,ts[153]=1,is[153]=-1,os[153]=0,as[153]=0,fs[153]=0,ds[153]=-1,ys[153]=0,$a[153]=1,Ha[153]=0,Ka[153]=1,es[102]=0,ns[102]=-1,rs[102]=1,ss[102]=1,us[102]=0,ls[102]=0,cs[102]=0,hs[102]=1,ps[102]=0,Ya[102]=-1,Za[102]=0,Wa[102]=1,Ja[155]=0,Qa[155]=-1,ts[155]=0,is[155]=1,os[155]=0,as[155]=1,fs[155]=0,ds[155]=1,ys[155]=1,$a[155]=-1,Ha[155]=0,Ka[155]=0,es[103]=0,ns[103]=1,rs[103]=0,ss[103]=-1,us[103]=0,ls[103]=1,cs[103]=0,hs[103]=-1,ps[103]=1,Ya[103]=1,Za[103]=0,Wa[103]=0,Ja[152]=0,Qa[152]=1,ts[152]=1,ss[152]=-1,us[152]=0,ls[152]=1,is[152]=-1,os[152]=0,as[152]=0,fs[152]=0,ds[152]=-1,ys[152]=0,cs[152]=0,hs[152]=-1,ps[152]=1,$a[152]=1,Ha[152]=0,Ka[152]=1,Ja[156]=0,Qa[156]=-1,ts[156]=1,ss[156]=1,us[156]=0,ls[156]=1,is[156]=-1,os[156]=0,as[156]=0,fs[156]=0,ds[156]=-1,ys[156]=0,cs[156]=0,hs[156]=1,ps[156]=1,$a[156]=-1,Ha[156]=0,Ka[156]=1,Ja[137]=0,Qa[137]=1,ts[137]=1,es[137]=0,ns[137]=1,rs[137]=0,is[137]=-1,os[137]=0,as[137]=0,fs[137]=0,ds[137]=-1,ys[137]=0,Ya[137]=1,Za[137]=0,Wa[137]=0,$a[137]=1,Ha[137]=0,Ka[137]=1,Ja[139]=0,Qa[139]=1,ts[139]=1,es[139]=0,ns[139]=-1,rs[139]=0,is[139]=1,os[139]=0,as[139]=0,fs[139]=0,ds[139]=1,ys[139]=0,Ya[139]=-1,Za[139]=0,Wa[139]=0,$a[139]=1,Ha[139]=0,Ka[139]=1,Ja[98]=0,Qa[98]=-1,ts[98]=0,es[98]=0,ns[98]=-1,rs[98]=1,ss[98]=1,us[98]=0,ls[98]=0,is[98]=1,os[98]=0,as[98]=1,cs[98]=0,hs[98]=1,ps[98]=0,Ya[98]=-1,Za[98]=0,Wa[98]=1,Ja[99]=0,Qa[99]=1,ts[99]=0,es[99]=0,ns[99]=-1,rs[99]=1,ss[99]=1,us[99]=0,ls[99]=0,is[99]=-1,os[99]=0,as[99]=1,cs[99]=0,hs[99]=-1,ps[99]=0,Ya[99]=1,Za[99]=0,Wa[99]=1,es[38]=0,ns[38]=-1,rs[38]=1,ss[38]=1,us[38]=0,ls[38]=0,fs[38]=0,ds[38]=1,ys[38]=1,cs[38]=0,hs[38]=1,ps[38]=0,Ya[38]=-1,Za[38]=0,Wa[38]=1,$a[38]=-1,Ha[38]=0,Ka[38]=0,es[39]=0,ns[39]=1,rs[39]=1,ss[39]=-1,us[39]=0,ls[39]=0,fs[39]=0,ds[39]=-1,ys[39]=1,cs[39]=0,hs[39]=1,ps[39]=0,Ya[39]=-1,Za[39]=0,Wa[39]=1,$a[39]=1,Ha[39]=0,Ka[39]=0;var gs=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ms=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},vs=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},_s=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},bs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},xs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ws=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Es=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ss=[],Is=[],Cs=[],Ts=[],Ms=[],ks=[],Ps=[],As=[];Ts[1]=Ms[1]=18,Ts[169]=Ms[169]=18,Cs[4]=Is[4]=12,Cs[166]=Is[166]=12,Ss[16]=As[16]=4,Ss[154]=As[154]=4,ks[64]=Ps[64]=22,ks[106]=Ps[106]=22,Cs[2]=ks[2]=17,Ts[2]=Ms[2]=18,Cs[168]=ks[168]=17,Ts[168]=Ms[168]=18,Ss[8]=Ts[8]=9,Is[8]=Cs[8]=12,Ss[162]=Ts[162]=9,Is[162]=Cs[162]=12,Ss[32]=As[32]=4,Is[32]=Ps[32]=1,Ss[138]=As[138]=4,Is[138]=Ps[138]=1,Ms[128]=As[128]=21,ks[128]=Ps[128]=22,Ms[42]=As[42]=21,ks[42]=Ps[42]=22,Is[5]=Ms[5]=14,Is[165]=Ms[165]=14,Cs[20]=As[20]=6,Cs[150]=As[150]=6,Ss[80]=ks[80]=11,Ss[90]=ks[90]=11,Ts[65]=Ps[65]=3,Ts[105]=Ps[105]=3,Ss[160]=ks[160]=11,Is[160]=Ms[160]=14,Ss[10]=ks[10]=11,Is[10]=Ms[10]=14,Cs[130]=As[130]=6,Ts[130]=Ps[130]=3,Cs[40]=As[40]=6,Ts[40]=Ps[40]=3,Is[101]=Ps[101]=1,Is[69]=Ps[69]=1,Ms[149]=As[149]=21,Ms[21]=As[21]=21,Cs[86]=ks[86]=17,Cs[84]=ks[84]=17,Ss[89]=Ts[89]=9,Ss[81]=Ts[81]=9,Ss[96]=Ps[96]=0,Is[96]=ks[96]=15,Ss[74]=Ps[74]=0,Is[74]=ks[74]=15,Ss[24]=Cs[24]=8,Ts[24]=As[24]=7,Ss[146]=Cs[146]=8,Ts[146]=As[146]=7,Is[6]=ks[6]=15,Cs[6]=Ms[6]=16,Is[164]=ks[164]=15,Cs[164]=Ms[164]=16,Ts[129]=As[129]=7,Ms[129]=Ps[129]=20,Ts[41]=As[41]=7,Ms[41]=Ps[41]=20,Cs[66]=Ps[66]=2,Ts[66]=ks[66]=19,Cs[104]=Ps[104]=2,Ts[104]=ks[104]=19,Ss[144]=Ms[144]=10,ks[144]=As[144]=23,Ss[26]=Ms[26]=10,ks[26]=As[26]=23,Is[36]=As[36]=5,Cs[36]=Ps[36]=2,Is[134]=As[134]=5,Cs[134]=Ps[134]=2,Ss[9]=Ms[9]=10,Is[9]=Ts[9]=13,Ss[161]=Ms[161]=10,Is[161]=Ts[161]=13,Is[37]=As[37]=5,Ms[37]=Ps[37]=20,Is[133]=As[133]=5,Ms[133]=Ps[133]=20,Cs[148]=Ms[148]=16,ks[148]=As[148]=23,Cs[22]=Ms[22]=16,ks[22]=As[22]=23,Ss[82]=Cs[82]=8,Ts[82]=ks[82]=19,Ss[88]=Cs[88]=8,Ts[88]=ks[88]=19,Ss[73]=Ps[73]=0,Is[73]=Ts[73]=13,Ss[97]=Ps[97]=0,Is[97]=Ts[97]=13,Ss[145]=Ts[145]=9,Ms[145]=As[145]=21,Ss[25]=Ts[25]=9,Ms[25]=As[25]=21,Is[70]=Ps[70]=1,Cs[70]=ks[70]=17,Is[100]=Ps[100]=1,Cs[100]=ks[100]=17,Ss[34]=Ts[34]=9,Is[34]=Cs[34]=12,Ms[34]=As[34]=21,ks[34]=Ps[34]=22,Ss[136]=As[136]=4,Is[136]=Ps[136]=1,Cs[136]=ks[136]=17,Ts[136]=Ms[136]=18,Ss[35]=As[35]=4,Is[35]=Cs[35]=12,Ts[35]=Ms[35]=18,ks[35]=Ps[35]=22,Ss[153]=As[153]=4,Ts[153]=Ms[153]=18,Is[102]=Cs[102]=12,ks[102]=Ps[102]=22,Ss[155]=Ts[155]=9,Ms[155]=As[155]=23,Is[103]=Ps[103]=1,Cs[103]=ks[103]=17,Ss[152]=As[152]=4,Cs[152]=ks[152]=17,Ts[152]=Ms[152]=18,Ss[156]=Cs[156]=8,Ts[156]=Ms[156]=18,ks[156]=As[156]=23,Ss[137]=As[137]=4,Is[137]=Ps[137]=1,Ts[137]=Ms[137]=18,Ss[139]=As[139]=4,Is[139]=Ts[139]=13,Ms[139]=Ps[139]=20,Ss[98]=Ts[98]=9,Is[98]=Cs[98]=12,ks[98]=Ps[98]=22,Ss[99]=Ps[99]=0,Is[99]=Cs[99]=12,Ts[99]=ks[99]=19,Is[38]=Cs[38]=12,Ms[38]=As[38]=21,ks[38]=Ps[38]=22,Is[39]=As[39]=5,Cs[39]=Ms[39]=16,ks[39]=Ps[39]=22;var Os=[];Os[1]=Os[169]=gs,Os[4]=Os[166]=ms,Os[16]=Os[154]=vs,Os[64]=Os[106]=_s,Os[168]=Os[2]=bs,Os[162]=Os[8]=xs,Os[138]=Os[32]=ws,Os[42]=Os[128]=Es,Os[5]=Os[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Os[20]=Os[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Os[80]=Os[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Os[65]=Os[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Os[160]=Os[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Os[130]=Os[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Os[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Os[101]=Os[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Os[149]=Os[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Os[86]=Os[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Os[89]=Os[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Os[96]=Os[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Os[24]=Os[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Os[6]=Os[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Os[129]=Os[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Os[66]=Os[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Os[144]=Os[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Os[36]=Os[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Os[9]=Os[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Os[37]=Os[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Os[148]=Os[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Os[82]=Os[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Os[73]=Os[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Os[145]=Os[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Os[70]=Os[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Os[34]=function(t){return[Es(t),xs(t)]},Os[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Os[136]=function(t){return[ws(t),bs(t)]},Os[153]=function(t){return[vs(t),gs(t)]},Os[102]=function(t){return[ms(t),_s(t)]},Os[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Os[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Os[152]=function(t){return[vs(t),bs(t)]},Os[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Os[137]=function(t){return[ws(t),gs(t)]},Os[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Os[98]=function(t){return[xs(t),_s(t)]},Os[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Os[38]=function(t){return[ms(t),Es(t)]},Os[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Ls=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Ls.buildId=function(t){return t.join(",")},Ls.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},Ls.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},Ls.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Ls.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=br(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},Ls.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Ls.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Ls.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var Ns=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};Ns.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Ns(this.to,this.from),this.symetric.symetric=this),this.symetric},Ns.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Ns.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Ns.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Ns.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},Ns.prototype.compareTo=function(t){return br(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Rs=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Ds={length:{configurable:!0}};Rs.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Rs.prototype.get=function(t){return this.edges[t]},Ds.length.get=function(){return this.edges.length},Rs.prototype.forEach=function(t){this.edges.forEach(t)},Rs.prototype.map=function(t){return this.edges.map(t)},Rs.prototype.some=function(t){return this.edges.some(t)},Rs.prototype.isValid=function(){return!0},Rs.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=br(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},Rs.prototype.toMultiPoint=function(){return h(this.edges.map(function(t){return t.from.coordinates}))},Rs.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Rs.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ce(this.toPolygon())},Rs.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&xr(a,o)){var s=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});s&&e.inside(r(s))&&(i&&!xr(n,a)||(i=e))}}),i},Rs.prototype.inside=function(t){return Pt(t,this.toPolygon())},Object.defineProperties(Rs.prototype,Ds);var zs=function(){this.edges=[],this.nodes={}};zs.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new zs;return D(t,function(t){Z(t,"LineString","Graph::fromGeoJson"),M(t,function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n})}),e},zs.prototype.getNode=function(t){var e=Ls.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Ls(t)),n},zs.prototype.addEdge=function(t,e){var n=new Ns(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},zs.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},zs.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},zs.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},zs.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},zs.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,l=void 0;a.label===e&&(u=a),s.label===e&&(l=s),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},zs.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},zs.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},zs.prototype._findIntersectionNodes=function(t){var e=[],n=t;do{!function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next}()}while(!t.isEqual(n));return e},zs.prototype._findEdgeRing=function(t){var e=t,n=new Rs;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},zs.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},zs.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var Fs=vt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Bs=(Fs.shim,vt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r})),js=(Bs.supported,Bs.unsupported,vt(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Bs(t))return!!Bs(o)&&(t=r.call(t),o=r.call(o),i(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var l=Fs(t),c=Fs(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!=c[s])return!1;for(s=l.length-1;s>=0;s--)if(u=l[s],!i(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}})),Vs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Or};Vs.prototype.compare=function(t,e){if(t.type!==e.type||!Ar(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Pr(t),i=Pr(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},Vs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Vs.prototype.compareLine=function(t,e,n,r){if(!Ar(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Vs.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Vs.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},Vs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},Vs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Vs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Vs.prototype.removePseudo=function(t){return t};var qs=Vs,Us=vt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Gs=vt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,u=0;u<c;u++)a[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)a[u]+=this.dataset[l][u];s++}}if(s>0){for(u=0;u<c;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Xs=vt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Ys=vt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=Xs;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Zs=vt(function(t){t.exports&&(t.exports={DBSCAN:Us,KMEANS:Gs,OPTICS:Ys,PriorityQueue:Xs})}),Ws=(Zs.DBSCAN,Zs.KMEANS,Zs.OPTICS,Zs.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i}),$s=Ws,Hs=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Ks=Ws,Js=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},Qs=function(t,e){var n=t[0].length?$s:Hs,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var p=1/0,f=0;f<u;f++){var d=n(t[h],r[f]);d<=p&&(p=d)}s[h]=p}for(var y=0;y<i;y++)l+=s[y];for(var g=0;g<i;g++)c[g]={i:g,v:t[g],pr:s[g]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var m=1;m<i;m++)c[m].cs=c[m-1].cs+c[m].pr;for(var v=Math.random(),_=0;_<i-1&&c[_++].cs<v;);r.push(c[_-1].v)}return r},tu=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,l=r||1e4,c=t.length,h=t[0].length,p=h>0,f=[];if(n)i="kmrand"==n?Js(t,e):"kmpp"==n?Qs(t,e):n;else for(var d={};i.length<e;){var y=Math.floor(Math.random()*c);d[y]||(d[y]=!0,i.push(t[y]))}do{Nr(e,0,f);for(var g=0;g<c;g++){for(var m=1/0,v=0,_=0;_<e;_++)(s=p?Ks(t[g],i[_]):Math.abs(t[g]-i[_]))<=m&&(m=s,v=_);a[g]=v,f[v]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=p?Nr(h,0,b[x]):0,o[x]=i[x];if(p){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<c;E++)for(var S=b[a[E]],I=t[E],C=0;C<h;C++)S[C]+=I[C];u=!0;for(var T=0;T<e;T++){for(var M=i[T],k=b[T],P=o[T],A=f[T],O=0;O<h;O++)M[O]=k[O]/A||0;if(u)for(var L=0;L<h;L++)if(P[L]!=M[L]){u=!1;break}}}else{for(var N=0;N<c;N++)b[a[N]]+=t[N];for(var R=0;R<e;R++)i[R]=b[R]/f[R]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:a,centroids:i}},eu={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||eu.heuristics.manhattan,o=r.closest||!1,a=new Br(function(t){return t.f}),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return Dr(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var p=l[c];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),d?a.rescoreElement(p):a.push(p))}}}return o?Dr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};zr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)eu.cleanNode(this.nodes[t])},zr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)eu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},zr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},zr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},zr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Fr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Fr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Fr.prototype.isWall=function(){return 0===this.weight},Br.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var nu=function(t){return function(){return t}};qr.prototype={constructor:qr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Yr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Gr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Xr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Xr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Gr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Yr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Gr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Xr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Gr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Xr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Gr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Xr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var ru,iu,ou,au,su,uu=[],lu=[],cu=1e-6,hu=1e-12;ci.prototype={constructor:ci,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Qr(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,l=e[i[o-1]],c=l.left===s?l.right:l.left;++u<o;)a=c,c=(l=e[i[u]]).left===s?l.right:l.left,a&&c&&r<a.index&&r<c.index&&ui(s,a,c)<0&&t.push([s.data,a.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;h<c&&(c=h,a=s.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var pu=function(){function t(t){return new ci(t.map(function(r,i){var o=[Math.round(e(r,i,t)/cu)*cu,Math.round(n(r,i,t)/cu)*cu];return o.index=i,o.data=r,o}),r)}var e=jr,n=Vr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:nu(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:nu(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},fu=Object.freeze({randomPosition:mi,randomPoint:vi,randomPolygon:_i,randomLineString:bi}),du=Object.freeze({getCluster:wi,clusterEach:Ei,clusterReduce:Si,createBins:Ii,applyFilter:Ci,propertiesContainsFilter:Ti,filterProperties:Mi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var gu=function(){},mu=function(){},vu={MAX_VALUE:{configurable:!0}};mu.isNaN=function(t){return Number.isNaN(t)},mu.doubleToLongBits=function(t){return t},mu.longBitsToDouble=function(t){return t},mu.isInfinite=function(t){return!Number.isFinite(t)},vu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(mu,vu);var _u=function(){},bu=function(){},xu=function(){},wu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Eu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};wu.prototype.setOrdinate=function(t,e){switch(t){case wu.X:this.x=e;break;case wu.Y:this.y=e;break;case wu.Z:this.z=e;break;default:throw new gu("Invalid ordinate index: "+t)}},wu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!yu.equalsWithTolerance(this.x,e.x,n)&&!!yu.equalsWithTolerance(this.y,e.y,n)}},wu.prototype.getOrdinate=function(t){switch(t){case wu.X:return this.x;case wu.Y:return this.y;case wu.Z:return this.z}throw new gu("Invalid ordinate index: "+t)},wu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||mu.isNaN(this.z))&&mu.isNaN(t.z)},wu.prototype.equals=function(t){return t instanceof wu&&this.equals2D(t)},wu.prototype.equalInZ=function(t,e){return yu.equalsWithTolerance(this.z,t.z,e)},wu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},wu.prototype.clone=function(){},wu.prototype.copy=function(){return new wu(this)},wu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},wu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},wu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},wu.prototype.hashCode=function(){var t=17;return t=37*t+wu.hashCode(this.x),t=37*t+wu.hashCode(this.y)},wu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},wu.prototype.interfaces_=function(){return[_u,bu,ki]},wu.prototype.getClass=function(){return wu},wu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=mu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Eu.DimensionalComparator.get=function(){return Su},Eu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Eu.NULL_ORDINATE.get=function(){return mu.NaN},Eu.X.get=function(){return 0},Eu.Y.get=function(){return 1},Eu.Z.get=function(){return 2},Object.defineProperties(wu,Eu);var Su=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new gu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Su.prototype.compare=function(t,e){var n=t,r=e,i=Su.compare(n.x,r.x);if(0!==i)return i;var o=Su.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Su.compare(n.z,r.z)},Su.prototype.interfaces_=function(){return[xu]},Su.prototype.getClass=function(){return Su},Su.compare=function(t,e){return t<e?-1:t>e?1:mu.isNaN(t)?mu.isNaN(e)?0:-1:mu.isNaN(e)?1:0};var Iu=function(){};Iu.prototype.create=function(){},Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu};var Cu=function(){},Tu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu},Cu.toLocationSymbol=function(t){switch(t){case Cu.EXTERIOR:return"e";case Cu.BOUNDARY:return"b";case Cu.INTERIOR:return"i";case Cu.NONE:return"-"}throw new gu("Unknown location value: "+t)},Tu.INTERIOR.get=function(){return 0},Tu.BOUNDARY.get=function(){return 1},Tu.EXTERIOR.get=function(){return 2},Tu.NONE.get=function(){return-1},Object.defineProperties(Cu,Tu);var Mu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},ku=function(){},Pu={LOG_10:{configurable:!0}};ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.log10=function(t){var e=Math.log(t);return mu.isInfinite(e)?e:mu.isNaN(e)?e:e/ku.LOG_10},ku.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},ku.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},ku.wrap=function(t,e){return t<0?e- -t%e:t%e},ku.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},ku.average=function(t,e){return(t+e)/2},Pu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(ku,Pu);var Au=function(t){this.str=t};Au.prototype.append=function(t){this.str+=t},Au.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Au.prototype.toString=function(t){return this.str};var Ou=function(t){this.value=t};Ou.prototype.intValue=function(){return this.value},Ou.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Ou.isNaN=function(t){return Number.isNaN(t)};var Lu=function(){};Lu.isWhitespace=function(t){return t<=32&&t>=0||127===t},Lu.toUpperCase=function(t){return t.toUpperCase()};var Nu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Ru={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Nu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Nu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Nu.magnitude(n._hi),i=Nu.TEN.pow(r);(n=n.divide(i)).gt(Nu.TEN)?(n=n.divide(Nu.TEN),r+=1):n.lt(Nu.ONE)&&(n=n.multiply(Nu.TEN),r-=1);for(var o=r+1,a=new Au,s=Nu.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(Nu.valueOf(l)).multiply(Nu.TEN),c&&n.selfAdd(Nu.TEN);var p=!0,f=Nu.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},Nu.prototype.sqr=function(){return this.multiply(this)},Nu.prototype.doubleValue=function(){return this._hi+this._lo},Nu.prototype.subtract=function(){if(arguments[0]instanceof Nu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Nu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Nu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Nu.prototype.selfSubtract=function(){if(arguments[0]instanceof Nu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Nu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Nu.prototype.min=function(t){return this.le(t)?this:t},Nu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Nu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this._hi/n,l=Nu.SPLIT*u,i=l-u,h=Nu.SPLIT*n,i=l-i,o=u-i,a=h-n,c=u*n,a=h-a,s=n-a,h=i*a-c+i*s+o*a+o*s,l=(this._hi-c-h+this._lo-u*r)/n,h=u+l,this._hi=h,this._lo=u-h+l,this}},Nu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Nu.prototype.divide=function(){if(arguments[0]instanceof Nu){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=Nu.SPLIT*o)-(e=a-o)),u=e*(r=(u=Nu.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new Nu(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return mu.isNaN(l)?Nu.createNaN():Nu.copy(this).selfDivide(l,0)}},Nu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Nu.prototype.pow=function(t){if(0===t)return Nu.valueOf(1);var e=new Nu(this),n=Nu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Nu.prototype.ceil=function(){if(this.isNaN())return Nu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Nu(t,e)},Nu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Nu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Nu.prototype.setValue=function(){if(arguments[0]instanceof Nu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Nu.prototype.max=function(t){return this.ge(t)?this:t},Nu.prototype.sqrt=function(){if(this.isZero())return Nu.valueOf(0);if(this.isNegative())return Nu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Nu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Nu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Nu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return i=this._hi+e,a=i-this._hi,o=i-a,o=e-a+(this._hi-o),s=o+this._lo,n=i+s,r=s+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,p=null,f=null,d=null,y=null,g=null;f=this._hi+u,h=this._lo+l,d=f-(y=f-this._hi),p=h-(g=h-this._lo);var m=(c=f+(y=(d=u-y+(this._hi-d))+h))+(y=(p=l-g+(this._lo-p))+(y+(f-c))),v=y+(c-m);return this._hi=m,this._lo=v,this}},Nu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Nu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=Nu.SPLIT*this._hi)-this._hi,l=Nu.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},Nu.prototype.selfSqr=function(){return this.selfMultiply(this)},Nu.prototype.floor=function(){if(this.isNaN())return Nu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Nu(t,e)},Nu.prototype.negate=function(){return this.isNaN()?this:new Nu(-this._hi,-this._lo)},Nu.prototype.clone=function(){},Nu.prototype.multiply=function(){if(arguments[0]instanceof Nu){var t=arguments[0];return t.isNaN()?Nu.createNaN():Nu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return mu.isNaN(e)?Nu.createNaN():Nu.copy(this).selfMultiply(e,0)}},Nu.prototype.isNaN=function(){return mu.isNaN(this._hi)},Nu.prototype.intValue=function(){return Math.trunc(this._hi)},Nu.prototype.toString=function(){var t=Nu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Nu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Nu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Nu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Nu.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=Nu.SPLIT*i)-(t=o-i)),n=(s=Nu.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new Nu(u,i-u+o)},Nu.prototype.toSciNotation=function(){if(this.isZero())return Nu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Nu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Nu.prototype.abs=function(){return this.isNaN()?Nu.NaN:this.isNegative()?this.negate():new Nu(this)},Nu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Nu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Nu.prototype.add=function(){if(arguments[0]instanceof Nu){var t=arguments[0];return Nu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Nu.copy(this).selfAdd(e)}},Nu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Nu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Nu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Nu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Nu.prototype.trunc=function(){return this.isNaN()?Nu.NaN:this.isPositive()?this.floor():this.ceil()},Nu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Nu.prototype.interfaces_=function(){return[ki,_u,bu]},Nu.prototype.getClass=function(){return Nu},Nu.sqr=function(t){return Nu.valueOf(t).selfMultiply(t)},Nu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Nu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Nu(e)}},Nu.sqrt=function(t){return Nu.valueOf(t).sqrt()},Nu.parse=function(t){for(var e=0,n=t.length;Lu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Nu,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,Lu.isDigit(l)){var c=l-"0";o.selfMultiply(Nu.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=Ou.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var p=o,f=a-s-u;if(0===f)p=o;else if(f>0){var d=Nu.TEN.pow(f);p=o.divide(d)}else if(f<0){var y=Nu.TEN.pow(-f);p=o.multiply(y)}return r?p.negate():p},Nu.createNaN=function(){return new Nu(mu.NaN,mu.NaN)},Nu.copy=function(t){return new Nu(t)},Nu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Nu.stringOfChar=function(t,e){for(var n=new Au,r=0;r<e;r++)n.append(t);return n.toString()},Ru.PI.get=function(){return new Nu(3.141592653589793,1.2246467991473532e-16)},Ru.TWO_PI.get=function(){return new Nu(6.283185307179586,2.4492935982947064e-16)},Ru.PI_2.get=function(){return new Nu(1.5707963267948966,6.123233995736766e-17)},Ru.E.get=function(){return new Nu(2.718281828459045,1.4456468917292502e-16)},Ru.NaN.get=function(){return new Nu(mu.NaN,mu.NaN)},Ru.EPS.get=function(){return 1.23259516440783e-32},Ru.SPLIT.get=function(){return 134217729},Ru.MAX_PRINT_DIGITS.get=function(){return 32},Ru.TEN.get=function(){return Nu.valueOf(10)},Ru.ONE.get=function(){return Nu.valueOf(1)},Ru.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ru.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Nu,Ru);var Du=function(){},zu={DP_SAFE_EPSILON:{configurable:!0}};Du.prototype.interfaces_=function(){return[]},Du.prototype.getClass=function(){return Du},Du.orientationIndex=function(t,e,n){var r=Du.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Nu.valueOf(e.x).selfAdd(-t.x),o=Nu.valueOf(e.y).selfAdd(-t.y),a=Nu.valueOf(n.x).selfAdd(-e.x),s=Nu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Du.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Du.intersection=function(t,e,n,r){var i=Nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Nu.valueOf(e.x).selfSubtract(t.x)),o=Nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Nu.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Nu.valueOf(t.y).selfSubtract(n.y)),u=Nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Nu.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=Nu.valueOf(t.x).selfAdd(Nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=Nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Nu.valueOf(t.y).selfSubtract(n.y)),p=Nu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Nu.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(a).doubleValue(),d=Nu.valueOf(n.y).selfAdd(Nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new wu(c,d)},Du.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return Du.signum(a);r=i+o}else{if(!(i<0))return Du.signum(a);if(o>=0)return Du.signum(a);r=-i-o}var s=Du.DP_SAFE_EPSILON*r;return a>=s||-a>=s?Du.signum(a):2},Du.signum=function(t){return t>0?1:t<0?-1:0},zu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Du,zu);var Fu=function(){},Bu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Bu.X.get=function(){return 0},Bu.Y.get=function(){return 1},Bu.Z.get=function(){return 2},Bu.M.get=function(){return 3},Fu.prototype.setOrdinate=function(t,e,n){},Fu.prototype.size=function(){},Fu.prototype.getOrdinate=function(t,e){},Fu.prototype.getCoordinate=function(){},Fu.prototype.getCoordinateCopy=function(t){},Fu.prototype.getDimension=function(){},Fu.prototype.getX=function(t){},Fu.prototype.clone=function(){},Fu.prototype.expandEnvelope=function(t){},Fu.prototype.copy=function(){},Fu.prototype.getY=function(t){},Fu.prototype.toCoordinateArray=function(){},Fu.prototype.interfaces_=function(){return[bu]},Fu.prototype.getClass=function(){return Fu},Object.defineProperties(Fu,Bu);var ju=function(){},Vu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ju),qu=function(){};qu.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},qu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Uu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof wu&&arguments[1]instanceof wu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],y=h.y-p.y,g=p.x-h.x,m=h.x*p.y-p.x*h.y,v=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=g*b-_*m,this.y=v*m-y*b,this.w=y*_-v*g}};Uu.prototype.getY=function(){var t=this.y/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new Vu;return t},Uu.prototype.getX=function(){var t=this.x/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new Vu;return t},Uu.prototype.getCoordinate=function(){var t=new wu;return t.x=this.getX(),t.y=this.getY(),t},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,p=(s*a-i*l)/c;if(mu.isNaN(h)||mu.isInfinite(h)||mu.isNaN(p)||mu.isInfinite(p))throw new Vu;return new wu(h,p)};var Gu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof wu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Xu={serialVersionUID:{configurable:!0}};Gu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Gu.prototype.equals=function(t){if(!(t instanceof Gu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Gu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Gu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Gu(e,r,n,i)},Gu.prototype.isNull=function(){return this._maxx<this._minx},Gu.prototype.getMaxX=function(){return this._maxx},Gu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof wu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Gu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Gu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Gu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof wu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Gu.prototype.getMinY=function(){return this._miny},Gu.prototype.getMinX=function(){return this._minx},Gu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof wu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Gu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Gu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Gu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Gu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Gu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Gu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Gu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Gu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Gu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Gu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Gu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Gu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof wu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Gu.prototype.centre=function(){return this.isNull()?null:new wu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Gu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof wu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Gu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Gu.prototype.getMaxY=function(){return this._maxy},Gu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Gu.prototype.hashCode=function(){var t=17;return t=37*t+wu.hashCode(this._minx),t=37*t+wu.hashCode(this._maxx),t=37*t+wu.hashCode(this._miny),t=37*t+wu.hashCode(this._maxy)},Gu.prototype.interfaces_=function(){return[_u,ki]},Gu.prototype.getClass=function(){return Gu},Gu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u)&&!(c<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(l>u)&&!(c<s))}},Xu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Gu,Xu);var Yu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Zu=function(t){this.geometryFactory=t||new gc};Zu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Yu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Yu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],$u[n]&&(e=$u[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Zu.prototype.write=function(t){return this.extractGeometry(t)},Zu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Wu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Wu[e].apply(this,[t])+")"};var Wu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Wu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Wu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Wu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Wu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Wu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Wu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Wu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Wu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},$u={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Yu.spaces);return this.geometryFactory.createPoint(new wu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Yu.trimParens,"$1"),r.push($u.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Yu.spaces),r.push(new wu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Yu.spaces),r.push(new wu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Yu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Yu.trimParens,"$1"),r.push($u.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Yu.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Yu.trimParens,"$1"),n=$u.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Yu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Yu.trimParens,"$1"),r.push($u.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Hu=function(t){this.parser=new Zu(t)};Hu.prototype.write=function(t){return this.parser.write(t)},Hu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ku=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ju=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ku),Qu=function(){};Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu},Qu.shouldNeverReachHere=function(){if(0===arguments.length)Qu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Ju("Should never reach here"+(null!==t?": "+t:""))}},Qu.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],Qu.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Ju:new Ju(e)},Qu.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],Qu.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new Ju("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var tl=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new wu,this._intPt[1]=new wu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},el={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};tl.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},tl.prototype.getTopologySummary=function(){var t=new Au;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},tl.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},tl.prototype.getIntersectionNum=function(){return this._result},tl.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},tl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},tl.prototype.setPrecisionModel=function(t){this._precisionModel=t},tl.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},tl.prototype.getIntersection=function(t){return this._intPt[t]},tl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},tl.prototype.hasIntersection=function(){return this._result!==tl.NO_INTERSECTION},tl.prototype.getEdgeDistance=function(t,e){return tl.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},tl.prototype.isCollinear=function(){return this._result===tl.COLLINEAR_INTERSECTION},tl.prototype.toString=function(){return Hu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Hu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},tl.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},tl.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},tl.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return Qu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},tl.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Qu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},el.DONT_INTERSECT.get=function(){return 0},el.DO_INTERSECT.get=function(){return 1},el.COLLINEAR.get=function(){return 2},el.NO_INTERSECTION.get=function(){return 0},el.POINT_INTERSECTION.get=function(){return 1},el.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(tl,el);var nl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Gu(this._inputLines[0][0],this._inputLines[0][1]),n=new Gu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Gu.intersects(n,r,e)&&0===ol.orientationIndex(n,r,e)&&0===ol.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Uu.intersection(t,n,r,i)}catch(a){if(!(a instanceof Vu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new wu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Du.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);qu.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&qu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new wu(t),o=new wu(e),a=new wu(n),s=new wu(r),u=new wu;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Gu.intersects(e,n,r),a=Gu.intersects(e,n,i),s=Gu.intersects(r,i,e),u=Gu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<p?u:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Gu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=ol.orientationIndex(e,n,r),a=ol.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=ol.orientationIndex(r,i,e),u=ol.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new wu(r):0===a?this._intPt[0]=new wu(i):0===s?this._intPt[0]=new wu(e):0===u&&(this._intPt[0]=new wu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=ol.distancePointLine(t,n,r),a=ol.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=ol.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=ol.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(tl),rl=function(){};rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return rl.signOfDet2x2(r,i,o,a)},rl.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(a=Math.floor(n/t),n-=a*t,(r-=a*e)<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(a=Math.floor(t/n),t-=a*n,(e-=a*r)<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var il=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};il.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=rl.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},il.prototype.isPointInPolygon=function(){return this.getLocation()!==Cu.EXTERIOR},il.prototype.getLocation=function(){return this._isPointOnSegment?Cu.BOUNDARY:this._crossingCount%2==1?Cu.INTERIOR:Cu.EXTERIOR},il.prototype.isOnSegment=function(){return this._isPointOnSegment},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},il.locatePointInRing=function(){if(arguments[0]instanceof wu&&Mu(arguments[1],Fu)){for(var t=arguments[0],e=arguments[1],n=new il(t),r=new wu,i=new wu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof wu&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new il(a),l=1;l<s.length;l++){var c=s[l],h=s[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var ol=function(){},al={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.orientationIndex=function(t,e,n){return Du.orientationIndex(t,e,n)},ol.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Mu(arguments[0],Fu)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new wu,l=new wu,c=new wu;a.getCoordinate(0,l),a.getCoordinate(1,c);var h=l.x;c.x-=h;for(var p=0,f=1;f<s-1;f++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(f+1,c),c.x-=h,p+=l.x*(u.y-c.y);return p/2}},ol.distanceLineLine=function(t,e,n,r){if(t.equals(e))return ol.distancePointLine(t,n,r);if(n.equals(r))return ol.distancePointLine(r,t,e);var i=!1;if(Gu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?ku.min(ol.distancePointLine(t,n,r),ol.distancePointLine(e,n,r),ol.distancePointLine(n,t,e),ol.distancePointLine(r,t,e)):0},ol.isPointInRing=function(t,e){return ol.locatePointInRing(t,e)!==Cu.EXTERIOR},ol.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new wu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},ol.isCCW=function(t){var e=t.length-1;if(e<3)throw new gu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=ol.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},ol.locatePointInRing=function(t,e){return il.locatePointInRing(t,e)},ol.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},ol.computeOrientation=function(t,e,n){return ol.orientationIndex(t,e,n)},ol.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new gu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=ol.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},ol.isOnLine=function(t,e){for(var n=new nl,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},al.CLOCKWISE.get=function(){return-1},al.RIGHT.get=function(){return ol.CLOCKWISE},al.COUNTERCLOCKWISE.get=function(){return 1},al.LEFT.get=function(){return ol.COUNTERCLOCKWISE},al.COLLINEAR.get=function(){return 0},al.STRAIGHT.get=function(){return ol.COLLINEAR},Object.defineProperties(ol,al);var sl=function(){};sl.prototype.filter=function(t){},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var ul=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ll={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ul.prototype.isGeometryCollection=function(){return this.getSortIndex()===ul.SORTINDEX_GEOMETRYCOLLECTION},ul.prototype.getFactory=function(){return this._factory},ul.prototype.getGeometryN=function(t){return this},ul.prototype.getArea=function(){return 0},ul.prototype.isRectangle=function(){return!1},ul.prototype.equals=function(){if(arguments[0]instanceof ul){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ul))return!1;var n=e;return this.equalsExact(n)}},ul.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ul.prototype.geometryChanged=function(){this.apply(ul.geometryChangedFilter)},ul.prototype.geometryChangedAction=function(){this._envelope=null},ul.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ul.prototype.getLength=function(){return 0},ul.prototype.getNumGeometries=function(){return 1},ul.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ul.prototype.getUserData=function(){return this._userData},ul.prototype.getSRID=function(){return this._SRID},ul.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ul.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ul.SORTINDEX_GEOMETRYCOLLECTION)throw new gu("This method does not support GeometryCollection arguments")},ul.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ul.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ul.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ul.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Gu(this._envelope)},ul.prototype.setSRID=function(t){this._SRID=t},ul.prototype.setUserData=function(t){this._userData=t},ul.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ul.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ul.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ul.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ul.SORTINDEX_MULTIPOINT||this.getSortIndex()===ul.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ul.SORTINDEX_MULTIPOLYGON},ul.prototype.interfaces_=function(){return[bu,_u,ki]},ul.prototype.getClass=function(){return ul},ul.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ul.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ll.serialVersionUID.get=function(){return 0x799ea46522854c00},ll.SORTINDEX_POINT.get=function(){return 0},ll.SORTINDEX_MULTIPOINT.get=function(){return 1},ll.SORTINDEX_LINESTRING.get=function(){return 2},ll.SORTINDEX_LINEARRING.get=function(){return 3},ll.SORTINDEX_MULTILINESTRING.get=function(){return 4},ll.SORTINDEX_POLYGON.get=function(){return 5},ll.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ll.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ll.geometryChangedFilter.get=function(){return cl},Object.defineProperties(ul,ll);var cl=function(){};cl.interfaces_=function(){return[sl]},cl.filter=function(t){t.geometryChangedAction()};var hl=function(){};hl.prototype.filter=function(t){},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var pl=function(){},fl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};pl.prototype.isInBoundary=function(t){},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},fl.Mod2BoundaryNodeRule.get=function(){return dl},fl.EndPointBoundaryNodeRule.get=function(){return yl},fl.MultiValentEndPointBoundaryNodeRule.get=function(){return gl},fl.MonoValentEndPointBoundaryNodeRule.get=function(){return ml},fl.MOD2_BOUNDARY_RULE.get=function(){return new dl},fl.ENDPOINT_BOUNDARY_RULE.get=function(){return new yl},fl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new gl},fl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ml},fl.OGC_SFS_BOUNDARY_RULE.get=function(){return pl.MOD2_BOUNDARY_RULE},Object.defineProperties(pl,fl);var dl=function(){};dl.prototype.isInBoundary=function(t){return t%2==1},dl.prototype.interfaces_=function(){return[pl]},dl.prototype.getClass=function(){return dl};var yl=function(){};yl.prototype.isInBoundary=function(t){return t>0},yl.prototype.interfaces_=function(){return[pl]},yl.prototype.getClass=function(){return yl};var gl=function(){};gl.prototype.isInBoundary=function(t){return t>1},gl.prototype.interfaces_=function(){return[pl]},gl.prototype.getClass=function(){return gl};var ml=function(){};ml.prototype.isInBoundary=function(t){return 1===t},ml.prototype.interfaces_=function(){return[pl]},ml.prototype.getClass=function(){return ml};var vl=function(){};vl.prototype.add=function(){},vl.prototype.addAll=function(){},vl.prototype.isEmpty=function(){},vl.prototype.iterator=function(){},vl.prototype.size=function(){},vl.prototype.toArray=function(){},vl.prototype.remove=function(){};var _l=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),bl=function(){};bl.prototype.hasNext=function(){},bl.prototype.next=function(){},bl.prototype.remove=function(){};var xl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(vl);(Pi.prototype=new Error).name="NoSuchElementException";var wl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,vl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new El(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new _l;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(xl),El=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Pi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bl),Sl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof wu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof wu){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],m=arguments[3],v=1;g>m&&(v=-1);for(var _=g;_!==m;_+=v)this.add(d[_],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new wu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(wl),Il=function(){},Cl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Cl.ForwardComparator.get=function(){return Tl},Cl.BidirectionalComparator.get=function(){return Ml},Cl.coordArrayType.get=function(){return new Array(0).fill(null)},Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il},Il.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Il.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Il.indexOf(r,e)<0)return r}return null},Il.scroll=function(t,e){var n=Il.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);qu.arraycopy(t,n,r,0,t.length-n),qu.arraycopy(t,0,r,t.length-n,n),qu.arraycopy(r,0,t,0,t.length)},Il.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Il.intersection=function(t,e){for(var n=new Sl,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Il.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Il.removeRepeatedPoints=function(t){return Il.hasRepeatedPoints(t)?new Sl(t,!1).toCoordinateArray():t},Il.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Il.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Il.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new wu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new wu(r[i+u])},Il.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Il.envelope=function(t){for(var e=new Gu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Il.toCoordinateArray=function(t){return t.toArray(Il.coordArrayType)},Il.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Il.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Il.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Il.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Il.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Il.extract=function(t,e,n){e=ku.clamp(e,0,t.length);var r=(n=ku.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Il,Cl);var Tl=function(){};Tl.prototype.compare=function(t,e){return Il.compare(t,e)},Tl.prototype.interfaces_=function(){return[xu]},Tl.prototype.getClass=function(){return Tl};var Ml=function(){};Ml.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Il.compare(n,r);return Il.isEqualReversed(n,r)?0:i},Ml.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Il.increasingDirection(n),o=Il.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},Ml.prototype.interfaces_=function(){return[xu]},Ml.prototype.getClass=function(){return Ml};var kl=function(){};kl.prototype.get=function(){},kl.prototype.put=function(){},kl.prototype.size=function(){},kl.prototype.values=function(){},kl.prototype.entrySet=function(){};var Pl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(kl);(Ai.prototype=new Error).name="OperationNotSupported",(Oi.prototype=new vl).contains=function(){};var Al=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Ol(this)},e}(Oi),Ol=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Pi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Ai},e}(bl),Ll=0;(Fi.prototype=new Pl).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Fi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ll,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Ll,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Fi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ni(t)===Di(Ni(Ni(t)))){var e=zi(Ni(Ni(t)));1===Li(e)?(Ri(Ni(t),Ll),Ri(e,Ll),Ri(Ni(Ni(t)),1),t=Ni(Ni(t))):(t===zi(Ni(t))&&(t=Ni(t),this.rotateLeft(t)),Ri(Ni(t),Ll),Ri(Ni(Ni(t)),1),this.rotateRight(Ni(Ni(t))))}else{var n=Di(Ni(Ni(t)));1===Li(n)?(Ri(Ni(t),Ll),Ri(n,Ll),Ri(Ni(Ni(t)),1),t=Ni(Ni(t))):(t===Di(Ni(t))&&(t=Ni(t),this.rotateRight(t)),Ri(Ni(t),Ll),Ri(Ni(Ni(t)),1),this.rotateLeft(Ni(Ni(t))))}this.root_.color=Ll},Fi.prototype.values=function(){var t=new wl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Fi.successor(e));)t.add(e.value);return t},Fi.prototype.entrySet=function(){var t=new Al,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Fi.successor(e));)t.add(e);return t},Fi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Fi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Fi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Fi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Fi.prototype.size=function(){return this.size_};var Nl=function(){};Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Bi.prototype=new Oi,(ji.prototype=new Bi).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},ji.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},ji.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ji.prototype.remove=function(t){throw new Ai},ji.prototype.size=function(){return this.array_.length},ji.prototype.isEmpty=function(){return 0===this.array_.length},ji.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ji.prototype.iterator=function(){return new Rl(this)};var Rl=function(t){this.treeSet_=t,this.position_=0};Rl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Pi;return this.treeSet_.array_[this.position_++]},Rl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Rl.prototype.remove=function(){throw new Ai};var Dl=function(){};Dl.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Dl.asList=function(t){for(var e=new wl,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var zl=function(){},Fl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Fl.P.get=function(){return 0},Fl.L.get=function(){return 1},Fl.A.get=function(){return 2},Fl.FALSE.get=function(){return-1},Fl.TRUE.get=function(){return-2},Fl.DONTCARE.get=function(){return-3},Fl.SYM_FALSE.get=function(){return"F"},Fl.SYM_TRUE.get=function(){return"T"},Fl.SYM_DONTCARE.get=function(){return"*"},Fl.SYM_P.get=function(){return"0"},Fl.SYM_L.get=function(){return"1"},Fl.SYM_A.get=function(){return"2"},zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.toDimensionSymbol=function(t){switch(t){case zl.FALSE:return zl.SYM_FALSE;case zl.TRUE:return zl.SYM_TRUE;case zl.DONTCARE:return zl.SYM_DONTCARE;case zl.P:return zl.SYM_P;case zl.L:return zl.SYM_L;case zl.A:return zl.SYM_A}throw new gu("Unknown dimension value: "+t)},zl.toDimensionValue=function(t){switch(Lu.toUpperCase(t)){case zl.SYM_FALSE:return zl.FALSE;case zl.SYM_TRUE:return zl.TRUE;case zl.SYM_DONTCARE:return zl.DONTCARE;case zl.SYM_P:return zl.P;case zl.SYM_L:return zl.L;case zl.SYM_A:return zl.A}throw new gu("Unknown dimension symbol: "+t)},Object.defineProperties(zl,Fl);var Bl=function(){};Bl.prototype.filter=function(t){},Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl};var jl=function(){};jl.prototype.filter=function(t,e){},jl.prototype.isDone=function(){},jl.prototype.isGeometryChanged=function(){},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};var Vl=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new gu("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Gu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Dl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=zl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=zl.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new ji(Dl.asList(this._geometries)),n=new ji(Dl.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,i);if(0!==h)return h;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(Mu(arguments[0],hl))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Mu(arguments[0],jl)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Mu(arguments[0],Bl)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Mu(arguments[0],sl)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Qu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ul),ql=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ul.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zl.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ul(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Vl),Ul=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=pl.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ul.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ul.prototype.getBoundary=function(){return this._geom instanceof Wl?this.boundaryLineString(this._geom):this._geom instanceof ql?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ul.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ul.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ul.prototype.computeBoundaryCoordinates=function(t){var e=new wl;this._endpointMap=new Fi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Il.toCoordinateArray(e)},Ul.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Gl,this._endpointMap.put(t,e)),e.count++},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Ul(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Ul(e,n).getBoundary()}};var Gl=function(){this.count=null};Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};var Xl=function(){},Yl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Xl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Xl.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Xl.NEWLINE}catch(t){if(!(t instanceof Vi))throw t;Qu.shouldNeverReachHere()}return o}},Xl.split=function(t,e){for(var n=e.length,r=new wl,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xl.toString=function(){if(1===arguments.length){var t=arguments[0];return Xl.SIMPLE_ORDINATE_FORMAT.format(t)}},Xl.spaces=function(t){return Xl.chars(" ",t)},Yl.NEWLINE.get=function(){return qu.getProperty("line.separator")},Yl.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Xl,Yl);var Zl=function(){};Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl},Zl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Zl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Fu.X)===t.getOrdinate(e-1,Fu.X)&&t.getOrdinate(0,Fu.Y)===t.getOrdinate(e-1,Fu.Y)},Zl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!mu.isNaN(a)||!mu.isNaN(s)))return!1}return!0},Zl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Zl.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Zl.copy(e,i-1,r,o,1);return r},Zl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Zl.swap(t,r,e-r)},Zl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Zl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Zl.copyCoord(t,e+o,n,r+o)},Zl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Au;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Zl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zl.createClosedRing(t,e,4):e.getOrdinate(0,Fu.X)===e.getOrdinate(n-1,Fu.X)&&e.getOrdinate(0,Fu.Y)===e.getOrdinate(n-1,Fu.Y)?e:Zl.createClosedRing(t,e,n+1)},Zl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Zl.copy(e,0,r,0,i);for(var o=i;o<n;o++)Zl.copy(e,0,r,o,1);return r};var Wl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Gu:this._points.expandEnvelope(new Gu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Zl.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zl.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ol.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Mu(arguments[0],hl))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Mu(arguments[0],jl)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Mu(arguments[0],Bl)?arguments[0].filter(this):Mu(arguments[0],sl)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ul(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new gu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Nl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ul),$l=function(){};$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l};var Hl=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Gu;var t=new Gu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return zl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Mu(arguments[0],hl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Mu(arguments[0],jl)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Mu(arguments[0],Bl)?arguments[0].filter(this):Mu(arguments[0],sl)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Qu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ul),Kl=function(){};Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Jl=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new gu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new gu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(ol.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(ol.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o===(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Dl.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);qu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Il.minCoordinate(e.getCoordinates());Il.scroll(r,i),qu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],ol.isCCW(e.getCoordinates())===n&&Il.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var p=this.getInteriorRingN(h),f=o.getInteriorRingN(h),d=p.compareToSameClass(f,i);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){if(Mu(t,hl)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Mu(t,jl)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Mu(t,Bl))t.filter(this);else if(Mu(t,sl)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ul),Ql=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ul.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return zl.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Vl),tc=function(t){function e(e,n){e instanceof wu&&n instanceof gc&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ul.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return zl.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new gu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new gu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Wl),ec=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ul.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new wl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Vl),nc=function(t){this._factory=t||null,this._isUserDataCopied=!1},rc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};nc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},nc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},nc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Vl?this.editGeometryCollection(t,e):t instanceof Jl?this.editPolygon(t,e):t instanceof Hl?e.edit(t,this._factory):t instanceof Wl?e.edit(t,this._factory):(Qu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},nc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new wl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Ql?this._factory.createMultiPoint(r.toArray([])):n.getClass()===ql?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ec?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},nc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new wl,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc},nc.GeometryEditorOperation=function(){},rc.NoOpGeometryOperation.get=function(){return ic},rc.CoordinateOperation.get=function(){return oc},rc.CoordinateSequenceOperation.get=function(){return ac},Object.defineProperties(nc,rc);var ic=function(){};ic.prototype.edit=function(t,e){return t},ic.prototype.interfaces_=function(){return[nc.GeometryEditorOperation]},ic.prototype.getClass=function(){return ic};var oc=function(){};oc.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof tc?e.createLinearRing(n):t instanceof Wl?e.createLineString(n):t instanceof Hl?n.length>0?e.createPoint(n[0]):e.createPoint():t},oc.prototype.interfaces_=function(){return[nc.GeometryEditorOperation]},oc.prototype.getClass=function(){return oc};var ac=function(){};ac.prototype.edit=function(t,e){return t instanceof tc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Wl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Hl?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ac.prototype.interfaces_=function(){return[nc.GeometryEditorOperation]},ac.prototype.getClass=function(){return ac};var sc=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new wu}else if(Mu(arguments[0],Fu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new wu}},uc={serialVersionUID:{configurable:!0}};sc.prototype.setOrdinate=function(t,e,n){switch(e){case Fu.X:this._coordinates[t].x=n;break;case Fu.Y:this._coordinates[t].y=n;break;case Fu.Z:this._coordinates[t].z=n;break;default:throw new gu("invalid ordinateIndex")}},sc.prototype.size=function(){return this._coordinates.length},sc.prototype.getOrdinate=function(t,e){switch(e){case Fu.X:return this._coordinates[t].x;case Fu.Y:return this._coordinates[t].y;case Fu.Z:return this._coordinates[t].z}return mu.NaN},sc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},sc.prototype.getCoordinateCopy=function(t){return new wu(this._coordinates[t])},sc.prototype.getDimension=function(){return this._dimension},sc.prototype.getX=function(t){return this._coordinates[t].x},sc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new sc(t,this._dimension)},sc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},sc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new sc(t,this._dimension)},sc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Au(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},sc.prototype.getY=function(t){return this._coordinates[t].y},sc.prototype.toCoordinateArray=function(){return this._coordinates},sc.prototype.interfaces_=function(){return[Fu,ki]},sc.prototype.getClass=function(){return sc},uc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(sc,uc);var lc=function(){},cc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};lc.prototype.readResolve=function(){return lc.instance()},lc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new sc(t)}if(Mu(arguments[0],Fu)){var e=arguments[0];return new sc(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new sc(n):new sc(n,r)}},lc.prototype.interfaces_=function(){return[Iu,ki]},lc.prototype.getClass=function(){return lc},lc.instance=function(){return lc.instanceObject},cc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},cc.instanceObject.get=function(){return new lc},Object.defineProperties(lc,cc);var hc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new wl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Al;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(kl),pc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof dc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},fc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pc.prototype.equals=function(t){if(!(t instanceof pc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Ou(n).compareTo(new Ou(r))},pc.prototype.getScale=function(){return this._scale},pc.prototype.isFloating=function(){return this._modelType===pc.FLOATING||this._modelType===pc.FLOATING_SINGLE},pc.prototype.getType=function(){return this._modelType},pc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pc.FLOATING?t="Floating":this._modelType===pc.FLOATING_SINGLE?t="Floating-Single":this._modelType===pc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return mu.isNaN(t)?t:this._modelType===pc.FLOATING_SINGLE?t:this._modelType===pc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof wu){var e=arguments[0];if(this._modelType===pc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pc.FLOATING?t=16:this._modelType===pc.FLOATING_SINGLE?t=6:this._modelType===pc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pc.prototype.setScale=function(t){this._scale=Math.abs(t)},pc.prototype.interfaces_=function(){return[ki,_u]},pc.prototype.getClass=function(){return pc},pc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},fc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},fc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pc,fc);var dc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},yc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};dc.prototype.readResolve=function(){return dc.nameToTypeMap.get(this._name)},dc.prototype.toString=function(){return this._name},dc.prototype.interfaces_=function(){return[ki]},dc.prototype.getClass=function(){return dc},yc.serialVersionUID.get=function(){return-552860263173159e4},yc.nameToTypeMap.get=function(){return new hc},Object.defineProperties(dc,yc),pc.Type=dc,pc.FIXED=new dc("FIXED"),pc.FLOATING=new dc("FLOATING"),pc.FLOATING_SINGLE=new dc("FLOATING SINGLE");var gc=function t(){this._precisionModel=new pc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Mu(arguments[0],Iu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},mc={serialVersionUID:{configurable:!0}};gc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new wu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new wu(t.getMinX(),t.getMinY()),new wu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new wu(t.getMinX(),t.getMinY()),new wu(t.getMinX(),t.getMaxY()),new wu(t.getMaxX(),t.getMaxY()),new wu(t.getMaxX(),t.getMinY()),new wu(t.getMinX(),t.getMinY())]),null)},gc.prototype.createLineString=function(t){return t?t instanceof Array?new Wl(this.getCoordinateSequenceFactory().create(t),this):Mu(t,Fu)?new Wl(t,this):void 0:new Wl(this.getCoordinateSequenceFactory().create([]),this)},gc.prototype.createMultiLineString=function(){if(0===arguments.length)return new ql(null,this);if(1===arguments.length){var t=arguments[0];return new ql(t,this)}},gc.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(gc.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Jl)return this.createMultiPolygon(gc.toPolygonArray(t));if(s instanceof Wl)return this.createMultiLineString(gc.toLineStringArray(t));if(s instanceof Hl)return this.createMultiPoint(gc.toPointArray(t));Qu.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},gc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},gc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof wu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Mu(arguments[0],Fu)){var e=arguments[0];return new Hl(e,this)}}},gc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},gc.prototype.createPolygon=function(){if(0===arguments.length)return new Jl(null,null,this);if(1===arguments.length){if(Mu(arguments[0],Fu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof tc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Jl(r,i,this)}},gc.prototype.getSRID=function(){return this._SRID},gc.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Vl(null,this);if(1===arguments.length){var t=arguments[0];return new Vl(t,this)}},gc.prototype.createGeometry=function(t){return new nc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},gc.prototype.getPrecisionModel=function(){return this._precisionModel},gc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Mu(arguments[0],Fu)){var e=arguments[0];return new tc(e,this)}}},gc.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ec(null,this);if(1===arguments.length){var t=arguments[0];return new ec(t,this)}},gc.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ql(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Ql(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Mu(arguments[0],Fu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Zl.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},gc.prototype.interfaces_=function(){return[ki]},gc.prototype.getClass=function(){return gc},gc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.getDefaultCoordinateSequenceFactory=function(){return lc.instance()},gc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},mc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(gc,mc);var vc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_c=function(t){this.geometryFactory=t||new gc};_c.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!bc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==vc.indexOf(n)?bc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?bc[n].apply(this,[e.geometries]):bc[n].apply(this,[e])},_c.prototype.write=function(t){var e=t.getGeometryType();if(!xc[e])throw new Error("Geometry is not supported");return xc[e].apply(this,[t])};var bc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!bc[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=bc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new wu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new wu(t[0],t[1]),new wu(t[2],t[1]),new wu(t[2],t[3]),new wu(t[0],t[3]),new wu(t[0],t[1])])},Point:function(t){var e=new wu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(bc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=bc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(bc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=bc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=bc.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(bc.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},xc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:xc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xc.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(xc.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xc.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=xc.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=xc.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=xc.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(xc[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},wc=function(t){this.geometryFactory=t||new gc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _c(this.geometryFactory)};wc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pc.FIXED&&this.reducePrecision(e),e},wc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ec=function(){this.parser=new _c(this.geometryFactory)};Ec.prototype.write=function(t){return this.parser.write(t)};var Sc=function(){},Ic={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc},Sc.opposite=function(t){return t===Sc.LEFT?Sc.RIGHT:t===Sc.RIGHT?Sc.LEFT:t},Ic.ON.get=function(){return 0},Ic.LEFT.get=function(){return 1},Ic.RIGHT.get=function(){return 2},Object.defineProperties(Sc,Ic),(qi.prototype=new Error).name="EmptyStackException",(Ui.prototype=new xl).add=function(t){return this.array_.push(t),!0},Ui.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Ui.prototype.push=function(t){return this.array_.push(t),t},Ui.prototype.pop=function(t){if(0===this.array_.length)throw new qi;return this.array_.pop()},Ui.prototype.peek=function(){if(0===this.array_.length)throw new qi;return this.array_[this.array_.length-1]},Ui.prototype.empty=function(){return 0===this.array_.length},Ui.prototype.isEmpty=function(){return this.empty()},Ui.prototype.search=function(t){return this.array_.indexOf(t)},Ui.prototype.size=function(){return this.array_.length},Ui.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Cc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Cc.prototype.getCoordinate=function(){return this._minCoord},Cc.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Cc.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Qu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ol.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ol.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ol.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Cc.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Sc.LEFT;return n[e].y<n[e+1].y&&(r=Sc.RIGHT),r},Cc.prototype.getEdge=function(){return this._orientedDe},Cc.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Cc.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Cc.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Qu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Sc.LEFT&&(this._orientedDe=this._minDe.getSym())},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Tc=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new wu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Ku),Mc=function(){this.array_=[]};Mc.prototype.addLast=function(t){this.array_.push(t)},Mc.prototype.removeFirst=function(){return this.array_.shift()},Mc.prototype.isEmpty=function(){return 0===this.array_.length};var kc=function(){this._finder=null,this._dirEdgeList=new wl,this._nodes=new wl,this._rightMostCoord=null,this._env=null,this._finder=new Cc};kc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},kc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},kc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Tc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},kc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Sc.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},kc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},kc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Sc.RIGHT)>=1&&e.getDepth(Sc.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},kc.prototype.computeDepths=function(t){var e=new Al,n=new Mc,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},kc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},kc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Gu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},kc.prototype.addReachable=function(t){var e=new Ui;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},kc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Sc.LEFT,t.getDepth(Sc.RIGHT)),e.setDepth(Sc.RIGHT,t.getDepth(Sc.LEFT))},kc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},kc.prototype.getNodes=function(){return this._nodes},kc.prototype.getDirectedEdges=function(){return this._dirEdgeList},kc.prototype.interfaces_=function(){return[_u]},kc.prototype.getClass=function(){return kc};var Pc=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Sc.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Sc.ON]=o,this.location[Sc.LEFT]=a,this.location[Sc.RIGHT]=s}};Pc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Pc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Cu.NONE)return!1;return!0},Pc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Cu.NONE&&(this.location[e]=t)},Pc.prototype.isLine=function(){return 1===this.location.length},Pc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Sc.ON]=this.location[Sc.ON],e[Sc.LEFT]=Cu.NONE,e[Sc.RIGHT]=Cu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Cu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Pc.prototype.getLocations=function(){return this.location},Pc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Sc.LEFT];this.location[Sc.LEFT]=this.location[Sc.RIGHT],this.location[Sc.RIGHT]=t},Pc.prototype.toString=function(){var t=new Au;return this.location.length>1&&t.append(Cu.toLocationSymbol(this.location[Sc.LEFT])),t.append(Cu.toLocationSymbol(this.location[Sc.ON])),this.location.length>1&&t.append(Cu.toLocationSymbol(this.location[Sc.RIGHT])),t.toString()},Pc.prototype.setLocations=function(t,e,n){this.location[Sc.ON]=t,this.location[Sc.LEFT]=e,this.location[Sc.RIGHT]=n},Pc.prototype.get=function(t){return t<this.location.length?this.location[t]:Cu.NONE},Pc.prototype.isArea=function(){return this.location.length>1},Pc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Cu.NONE)return!0;return!1},Pc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Sc.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Pc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Cu.NONE)},Pc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Pc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc};var Ac=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Pc(e),this.elt[1]=new Pc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Pc(n.elt[0]),this.elt[1]=new Pc(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Pc(Cu.NONE),this.elt[1]=new Pc(Cu.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Pc(o,a,s),this.elt[1]=new Pc(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Pc(Cu.NONE,Cu.NONE,Cu.NONE),this.elt[1]=new Pc(Cu.NONE,Cu.NONE,Cu.NONE),this.elt[u].setLocations(l,c,h)}};Ac.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ac.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ac.prototype.isNull=function(t){return this.elt[t].isNull()},Ac.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Ac.prototype.isLine=function(t){return this.elt[t].isLine()},Ac.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Pc(t.elt[e]):this.elt[e].merge(t.elt[e])},Ac.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ac.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Sc.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Ac.prototype.toString=function(){var t=new Au;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ac.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ac.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ac.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Sc.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Ac.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ac.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ac.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Pc(this.elt[t].location[0]))},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.toLineLabel=function(t){for(var e=new Ac(Cu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Oc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new wl,this._pts=new wl,this._label=new Ac(Cu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new wl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Oc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ol.isCCW(this._ring.getCoordinates())},Oc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Oc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Tc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Tc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();Qu.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Oc.prototype.getLinearRing=function(){return this._ring},Oc.prototype.getCoordinate=function(t){return this._pts.get(t)},Oc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Oc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Oc.prototype.isHole=function(){return this._isHole},Oc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Oc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ol.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Oc.prototype.addHole=function(t){this._holes.add(t)},Oc.prototype.isShell=function(){return null===this._shell},Oc.prototype.getLabel=function(){return this._label},Oc.prototype.getEdges=function(){return this._edges},Oc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Oc.prototype.getShell=function(){return this._shell},Oc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Sc.RIGHT);if(r===Cu.NONE)return null;if(this._label.getLocation(n)===Cu.NONE)return this._label.setLocation(n,r),null}},Oc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Oc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc};var Lc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oc),Nc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new wl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Lc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oc),Rc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Rc.prototype.setVisited=function(t){this._isVisited=t},Rc.prototype.setInResult=function(t){this._isInResult=t},Rc.prototype.isCovered=function(){return this._isCovered},Rc.prototype.isCoveredSet=function(){return this._isCoveredSet},Rc.prototype.setLabel=function(t){this._label=t},Rc.prototype.getLabel=function(){return this._label},Rc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Rc.prototype.updateIM=function(t){Qu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Rc.prototype.isInResult=function(){return this._isInResult},Rc.prototype.isVisited=function(){return this._isVisited},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Dc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Ac(0,Cu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Cu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Cu.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ac(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ac)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===Cu.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Cu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Cu.BOUNDARY:n=Cu.INTERIOR;break;case Cu.INTERIOR:default:n=Cu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rc),zc=function(){this.nodeMap=new Fi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};zc.prototype.find=function(t){return this.nodeMap.get(t)},zc.prototype.addNode=function(){if(arguments[0]instanceof wu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Dc){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},zc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},zc.prototype.iterator=function(){return this.nodeMap.values().iterator()},zc.prototype.values=function(){return this.nodeMap.values()},zc.prototype.getBoundaryNodes=function(t){for(var e=new wl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Cu.BOUNDARY&&e.add(r)}return e},zc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Fc=function(){},Bc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc},Fc.isNorthern=function(t){return t===Fc.NE||t===Fc.NW},Fc.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Fc.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Fc.isInHalfPlane=function(t,e){return e===Fc.SE?t===Fc.SE||t===Fc.SW:t===e||t===e+1},Fc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new gu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Fc.NE:Fc.SE:e>=0?Fc.NW:Fc.SW}if(arguments[0]instanceof wu&&arguments[1]instanceof wu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new gu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Fc.NE:Fc.SE:r.y>=n.y?Fc.NW:Fc.SW}},Bc.NE.get=function(){return 0},Bc.NW.get=function(){return 1},Bc.SW.get=function(){return 2},Bc.SE.get=function(){return 3},Object.defineProperties(Fc,Bc);var jc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};jc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ol.computeOrientation(t._p0,t._p1,this._p1)},jc.prototype.getDy=function(){return this._dy},jc.prototype.getCoordinate=function(){return this._p0},jc.prototype.setNode=function(t){this._node=t},jc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},jc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},jc.prototype.getDirectedCoordinate=function(){return this._p1},jc.prototype.getDx=function(){return this._dx},jc.prototype.getLabel=function(){return this._label},jc.prototype.getEdge=function(){return this._edge},jc.prototype.getQuadrant=function(){return this._quadrant},jc.prototype.getNode=function(){return this._node},jc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},jc.prototype.computeLabel=function(t){},jc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Fc.quadrant(this._dx,this._dy),Qu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},jc.prototype.interfaces_=function(){return[_u]},jc.prototype.getClass=function(){return jc};var Vc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ac(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Tc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Sc.LEFT)===Cu.INTERIOR&&this._label.getLocation(e,Sc.RIGHT)===Cu.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Sc.LEFT]+"/"+this._depth[Sc.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Cu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Cu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Sc.LEFT&&(r=-1);var i=Sc.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Cu.EXTERIOR&&e===Cu.INTERIOR?1:t===Cu.INTERIOR&&e===Cu.EXTERIOR?-1:0},e}(jc),qc=function(){};qc.prototype.createNode=function(t){return new Dc(t,null)},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Uc=function(){if(this._edges=new wl,this._nodes=null,this._edgeEndList=new wl,0===arguments.length)this._nodes=new zc(new qc);else if(1===arguments.length){var t=arguments[0];this._nodes=new zc(t)}};Uc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Uc.prototype.find=function(t){return this._nodes.find(t)},Uc.prototype.addNode=function(){if(arguments[0]instanceof Dc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof wu){var e=arguments[0];return this._nodes.addNode(e)}},Uc.prototype.getNodeIterator=function(){return this._nodes.iterator()},Uc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Uc.prototype.debugPrintln=function(t){qu.out.println(t)},Uc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Cu.BOUNDARY},Uc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Uc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&ol.computeOrientation(t,e,r)===ol.COLLINEAR&&Fc.quadrant(t,e)===Fc.quadrant(n,r)},Uc.prototype.getEdgeEnds=function(){return this._edgeEndList},Uc.prototype.debugPrint=function(t){qu.out.print(t)},Uc.prototype.getEdgeIterator=function(){return this._edges.iterator()},Uc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Uc.prototype.insertEdge=function(t){this._edges.add(t)},Uc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Uc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Vc(n,!0),i=new Vc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Uc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Uc.prototype.getNodes=function(){return this._nodes.values()},Uc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Gc=function(){this._geometryFactory=null,this._shellList=new wl;var t=arguments[0];this._geometryFactory=t};Gc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Gc.prototype.computePolygons=function(t){for(var e=new wl,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Gc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Tc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Gc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new wl,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Gc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Gc.prototype.buildMaximalEdgeRings=function(t){for(var e=new wl,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Nc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Gc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Gc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Gc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&ol.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},Gc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Qu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Gc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Uc.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new wl,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var Xc=function(){};Xc.prototype.getBounds=function(){},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Yc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Yc.prototype.getItem=function(){return this._item},Yc.prototype.getBounds=function(){return this._bounds},Yc.prototype.interfaces_=function(){return[Xc,ki]},Yc.prototype.getClass=function(){return Yc};var Zc=function(){this._size=null,this._items=null,this._size=0,this._items=new wl,this._items.add(null)};Zc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Zc.prototype.size=function(){return this._size},Zc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Zc.prototype.clear=function(){this._size=0,this._items.clear()},Zc.prototype.isEmpty=function(){return 0===this._size},Zc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Wc=function(){};Wc.prototype.visitItem=function(t){},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var $c=function(){};$c.prototype.insert=function(t,e){},$c.prototype.remove=function(t,e){},$c.prototype.query=function(){},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c};var Hc=function(){if(this._childBoundables=new wl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Kc={serialVersionUID:{configurable:!0}};Hc.prototype.getLevel=function(){return this._level},Hc.prototype.size=function(){return this._childBoundables.size()},Hc.prototype.getChildBoundables=function(){return this._childBoundables},Hc.prototype.addChildBoundable=function(t){Qu.isTrue(null===this._bounds),this._childBoundables.add(t)},Hc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Hc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Hc.prototype.interfaces_=function(){return[Xc,ki]},Hc.prototype.getClass=function(){return Hc},Kc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Hc,Kc);var Jc=function(){};Jc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Jc.min=function(t){return Jc.sort(t),t.get(0)},Jc.sort=function(t,e){var n=t.toArray();e?Dl.sort(n,e):Dl.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Jc.singletonList=function(t){var e=new wl;return e.add(t),e};var Qc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Qc.prototype.expandToQueue=function(t,e){var n=Qc.isComposite(this._boundable1),r=Qc.isComposite(this._boundable2);if(n&&r)return Qc.area(this._boundable1)>Qc.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new gu("neither boundable is composite")},Qc.prototype.isLeaves=function(){return!(Qc.isComposite(this._boundable1)||Qc.isComposite(this._boundable2))},Qc.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Qc.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new Qc(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},Qc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Qc.prototype.getDistance=function(){return this._distance},Qc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Qc.prototype.interfaces_=function(){return[_u]},Qc.prototype.getClass=function(){return Qc},Qc.area=function(t){return t.getBounds().getArea()},Qc.isComposite=function(t){return t instanceof Hc};var th=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new wl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];Qu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},eh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};th.prototype.getNodeCapacity=function(){return this._nodeCapacity},th.prototype.lastNode=function(t){return t.get(t.size()-1)},th.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Hc?t+=this.size(n):n instanceof Yc&&(t+=1)}return t}},th.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Yc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},th.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new wl:t}if(1===arguments.length){for(var e=arguments[0],n=new wl,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Hc){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Yc?n.add(i.getItem()):Qu.shouldNeverReachHere()}return n.size()<=0?null:n}},th.prototype.insert=function(t,e){Qu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Yc(t,e))},th.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new wl;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(Qu.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Hc?this.boundablesAtLevel(n,a,i):(Qu.isTrue(a instanceof Yc),-1===n&&i.add(a))}return null}},th.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new wl;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Mu(arguments[2],Wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Hc)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Hc?this.query(i,l,a):l instanceof Yc?a.visitItem(l.getItem()):Qu.shouldNeverReachHere())}else if(Mu(arguments[2],xl)&&arguments[0]instanceof Object&&arguments[1]instanceof Hc)for(var c=arguments[0],h=arguments[1],p=arguments[2],f=h.getChildBoundables(),d=0;d<f.size();d++){var y=f.get(d);this.getIntersectsOp().intersects(y.getBounds(),c)&&(y instanceof Hc?this.query(c,y,p):y instanceof Yc?p.add(y.getItem()):Qu.shouldNeverReachHere())}},th.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},th.prototype.getRoot=function(){return this.build(),this._root},th.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Hc&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},th.prototype.createHigherLevels=function(t,e){Qu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},th.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Hc){var r=this.depth(n);r>t&&(t=r)}}return t+1}},th.prototype.createParentBoundables=function(t,e){Qu.isTrue(!t.isEmpty());var n=new wl;n.add(this.createNode(e));var r=new wl(t);Jc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},th.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},th.prototype.interfaces_=function(){return[ki]},th.prototype.getClass=function(){return th},th.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},eh.IntersectsOp.get=function(){return nh},eh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},eh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(th,eh);var nh=function(){},rh=function(){};rh.prototype.distance=function(t,e){},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh};var ih=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Qu.isTrue(t.length>0);for(var n=new wl,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new oh(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new wl;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Mu(arguments[2],Wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Hc){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(Mu(arguments[2],xl)&&arguments[0]instanceof Object&&arguments[1]instanceof Hc){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Qu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new wl(t);Jc.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Mu(arguments[0],rh)){var t=arguments[0],n=new Qc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Qc){var r=arguments[0];return this.nearestNeighbour(r,mu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Mu(arguments[1],rh)){var i=arguments[0],o=arguments[1],a=new Qc(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof Qc&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new Zc;for(c.add(s);!c.isEmpty()&&u>0;){var h=c.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],y=arguments[2],g=new Yc(f,d),m=new Qc(this.getRoot(),g,y);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[$c,ki]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return oh},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[xu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[xu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(th),oh=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Gu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hc),ah=function(){};ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah},ah.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ah.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ah.relativeSign(e.x,n.x),i=ah.relativeSign(e.y,n.y);switch(t){case 0:return ah.compareValue(r,i);case 1:return ah.compareValue(i,r);case 2:return ah.compareValue(i,-r);case 3:return ah.compareValue(-r,i);case 4:return ah.compareValue(-r,-i);case 5:return ah.compareValue(-i,-r);case 6:return ah.compareValue(-i,r);case 7:return ah.compareValue(r,-i)}return Qu.shouldNeverReachHere("invalid octant value"),0},ah.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var sh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new wu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};sh.prototype.getCoordinate=function(){return this.coord},sh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},sh.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ah.compare(this._segmentOctant,this.coord,e.coord)},sh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},sh.prototype.isInterior=function(){return this._isInterior},sh.prototype.interfaces_=function(){return[_u]},sh.prototype.getClass=function(){return sh};var uh=function(){this._nodeMap=new Fi,this._edge=null;var t=arguments[0];this._edge=t};uh.prototype.getSplitCoordinates=function(){var t=new Sl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},uh.prototype.addCollapsedNodes=function(){var t=new wl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},uh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},uh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Ou(e+1))}},uh.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new wu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new wu(e.coord))},uh.prototype.iterator=function(){return this._nodeMap.values().iterator()},uh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},uh.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},uh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Ou(e[0])),r=i}},uh.prototype.getEdge=function(){return this._edge},uh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},uh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new wu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new wu(e.coord)),new ph(o,this._edge.getData())},uh.prototype.add=function(t,e){var n=new sh(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Qu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},uh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Ku("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Ku("bad split edge end point at "+i)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var lh=function(){};lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},lh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new gu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof wu&&arguments[1]instanceof wu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new gu("Cannot compute the octant for two identical points "+i);return lh.octant(a,s)}};var ch=function(){};ch.prototype.getCoordinates=function(){},ch.prototype.size=function(){},ch.prototype.getCoordinate=function(t){},ch.prototype.isClosed=function(){},ch.prototype.setData=function(t){},ch.prototype.getData=function(){},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){};hh.prototype.addIntersection=function(t,e){},hh.prototype.interfaces_=function(){return[ch]},hh.prototype.getClass=function(){return hh};var ph=function(){this._nodeList=new uh(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};ph.prototype.getCoordinates=function(){return this._pts},ph.prototype.size=function(){return this._pts.length},ph.prototype.getCoordinate=function(t){return this._pts[t]},ph.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ph.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},ph.prototype.setData=function(t){this._data=t},ph.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:lh.octant(t,e)},ph.prototype.getData=function(){return this._data},ph.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new wu(n.getIntersection(i));this.addIntersection(o,r)}},ph.prototype.toString=function(){return Hu.toLineString(new sc(this._pts))},ph.prototype.getNodeList=function(){return this._nodeList},ph.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},ph.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},ph.prototype.interfaces_=function(){return[hh]},ph.prototype.getClass=function(){return ph},ph.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new wl;return ph.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var fh=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new wu,this.p1=new wu;else if(1===arguments.length){var t=arguments[0];this.p0=new wu(t.p0),this.p1=new wu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new wu(e,n),this.p1=new wu(r,i)}},dh={serialVersionUID:{configurable:!0}};fh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},fh.prototype.orientationIndex=function(){if(arguments[0]instanceof fh){var t=arguments[0],e=ol.orientationIndex(this.p0,this.p1,t.p0),n=ol.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof wu){var r=arguments[0];return ol.orientationIndex(this.p0,this.p1,r)}},fh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},fh.prototype.isVertical=function(){return this.p0.x===this.p1.x},fh.prototype.equals=function(t){if(!(t instanceof fh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},fh.prototype.intersection=function(t){var e=new nl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},fh.prototype.project=function(){if(arguments[0]instanceof wu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new wu(t);var e=this.projectionFactor(t),n=new wu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof fh){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new fh(a,s)}},fh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},fh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},fh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},fh.prototype.distancePerpendicular=function(t){return ol.distancePointLinePerpendicular(t,this.p0,this.p1)},fh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},fh.prototype.midPoint=function(){return fh.midPoint(this.p0,this.p1)},fh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?mu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},fh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=mu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},fh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},fh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},fh.prototype.getLength=function(){return this.p0.distance(this.p1)},fh.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},fh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},fh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},fh.prototype.lineIntersection=function(t){try{return Uu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Vu))throw t}return null},fh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},fh.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new wu(n-u,r+s)},fh.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},fh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||mu.isNaN(e))&&(e=1),e},fh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},fh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},fh.prototype.distance=function(){if(arguments[0]instanceof fh){var t=arguments[0];return ol.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof wu){var e=arguments[0];return ol.distancePointLine(e,this.p0,this.p1)}},fh.prototype.pointAlong=function(t){var e=new wu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},fh.prototype.hashCode=function(){var t=mu.doubleToLongBits(this.p0.x);t^=31*mu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=mu.doubleToLongBits(this.p1.x);return n^=31*mu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},fh.prototype.interfaces_=function(){return[_u,ki]},fh.prototype.getClass=function(){return fh},fh.midPoint=function(t,e){return new wu((t.x+e.x)/2,(t.y+e.y)/2)},dh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(fh,dh);var yh=function(){this.tempEnv1=new Gu,this.tempEnv2=new Gu,this._overlapSeg1=new fh,this._overlapSeg2=new fh};yh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var gh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};gh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},gh.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},gh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},gh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},gh.prototype.setId=function(t){this._id=t},gh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},gh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Gu(t,e)}return this._env},gh.prototype.getEndIndex=function(){return this._end},gh.prototype.getStartIndex=function(){return this._start},gh.prototype.getContext=function(){return this._context},gh.prototype.getId=function(){return this._id},gh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh};var mh=function(){};mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.getChainStartIndices=function(t){var e=0,n=new wl;n.add(new Ou(e));do{var r=mh.findChainEnd(t,e);n.add(new Ou(r)),e=r}while(e<t.length-1);return mh.toIntArray(n)},mh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Fc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Fc.quadrant(t[i-1],t[i])===r);)i++;return i-1},mh.getChains=function(){if(1===arguments.length){var t=arguments[0];return mh.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new wl,i=mh.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new gh(e,i[o],i[o+1],n);r.add(a)}return r}},mh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var vh=function(){};vh.prototype.computeNodes=function(t){},vh.prototype.getNodedSubstrings=function(){},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var _h=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};_h.prototype.setSegmentIntersector=function(t){this._segInt=t},_h.prototype.interfaces_=function(){return[vh]},_h.prototype.getClass=function(){return _h};var bh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new wl,this._index=new ih,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return ph.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=mh.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new xh(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return xh},Object.defineProperties(e,n),e}(_h),xh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yh),wh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Eh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};wh.prototype.getEndCapStyle=function(){return this._endCapStyle},wh.prototype.isSingleSided=function(){return this._isSingleSided},wh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=wh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=wh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==wh.JOIN_ROUND&&(this._quadrantSegments=wh.DEFAULT_QUADRANT_SEGMENTS)},wh.prototype.getJoinStyle=function(){return this._joinStyle},wh.prototype.setJoinStyle=function(t){this._joinStyle=t},wh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},wh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},wh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},wh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},wh.prototype.getMitreLimit=function(){return this._mitreLimit},wh.prototype.setMitreLimit=function(t){this._mitreLimit=t},wh.prototype.setSingleSided=function(t){this._isSingleSided=t},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},wh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Eh.CAP_ROUND.get=function(){return 1},Eh.CAP_FLAT.get=function(){return 2},Eh.CAP_SQUARE.get=function(){return 3},Eh.JOIN_ROUND.get=function(){return 1},Eh.JOIN_MITRE.get=function(){return 2},Eh.JOIN_BEVEL.get=function(){return 3},Eh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Eh.DEFAULT_MITRE_LIMIT.get=function(){return 5},Eh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(wh,Eh);var Sh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ol.COUNTERCLOCKWISE,this._inputLine=t||null},Ih={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Sh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Sh.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Sh.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Sh.prototype.isShallowConcavity=function(t,e,n,r){return ol.computeOrientation(t,e,n)===this._angleOrientation&&ol.distancePointLine(e,t,n)<r},Sh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Sh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Sh.prototype.isConcave=function(t,e,n){return ol.computeOrientation(t,e,n)===this._angleOrientation},Sh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ol.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Sh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Sh.DELETE;)e++;return e},Sh.prototype.isShallow=function(t,e,n,r){return ol.distancePointLine(e,t,n)<r},Sh.prototype.collapseLine=function(){for(var t=new Sl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Sh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Sh.simplify=function(t,e){return new Sh(t).simplify(e)},Ih.INIT.get=function(){return 0},Ih.DELETE.get=function(){return 1},Ih.KEEP.get=function(){return 1},Ih.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Sh,Ih);var Ch=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new wl},Th={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ch.prototype.getCoordinates=function(){return this._ptList.toArray(Ch.COORDINATE_ARRAY_TYPE)},Ch.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ch.prototype.addPt=function(t){var e=new wu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ch.prototype.revere=function(){},Ch.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Ch.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ch.prototype.toString=function(){return(new gc).createLineString(this.getCoordinates()).toString()},Ch.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new wu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ch.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Th.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ch,Th);var Mh=function(){},kh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.toDegrees=function(t){return 180*t/Math.PI},Mh.normalize=function(t){for(;t>Math.PI;)t-=Mh.PI_TIMES_2;for(;t<=-Math.PI;)t+=Mh.PI_TIMES_2;return t},Mh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Mh.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Mh.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Mh.interiorAngle=function(t,e,n){var r=Mh.angle(e,t),i=Mh.angle(e,n);return Math.abs(i-r)},Mh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Mh.PI_TIMES_2;t>=Mh.PI_TIMES_2&&(t=0)}else{for(;t>=Mh.PI_TIMES_2;)t-=Mh.PI_TIMES_2;t<0&&(t=0)}return t},Mh.angleBetween=function(t,e,n){var r=Mh.angle(e,t),i=Mh.angle(e,n);return Mh.diff(r,i)},Mh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Mh.toRadians=function(t){return t*Math.PI/180},Mh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Mh.COUNTERCLOCKWISE:n<0?Mh.CLOCKWISE:Mh.NONE},Mh.angleBetweenOriented=function(t,e,n){var r=Mh.angle(e,t),i=Mh.angle(e,n)-r;return i<=-Math.PI?i+Mh.PI_TIMES_2:i>Math.PI?i-Mh.PI_TIMES_2:i},kh.PI_TIMES_2.get=function(){return 2*Math.PI},kh.PI_OVER_2.get=function(){return Math.PI/2},kh.PI_OVER_4.get=function(){return Math.PI/4},kh.COUNTERCLOCKWISE.get=function(){return ol.COUNTERCLOCKWISE},kh.CLOCKWISE.get=function(){return ol.CLOCKWISE},kh.NONE.get=function(){return ol.COLLINEAR},Object.defineProperties(Mh,kh);var Ph=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new fh,this._seg1=new fh,this._offset0=new fh,this._offset1=new fh,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new nl,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===wh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Ah={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ph.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ol.computeOrientation(this._s0,this._s1,this._s2),r=n===ol.CLOCKWISE&&this._side===Sc.LEFT||n===ol.COUNTERCLOCKWISE&&this._side===Sc.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ph.prototype.addLineEndCap=function(t,e){var n=new fh(t,e),r=new fh;this.computeOffsetSegment(n,Sc.LEFT,this._distance,r);var i=new fh;this.computeOffsetSegment(n,Sc.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case wh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ol.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case wh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case wh.CAP_SQUARE:var u=new wu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new wu(r.p1.x+u.x,r.p1.y+u.y),c=new wu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Ph.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ph.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Uu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Vu))throw t;o=new wu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ph.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===ol.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Ph.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ph.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===wh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===wh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ph.prototype.createSquare=function(t){this._segList.addPt(new wu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new wu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new wu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new wu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ph.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ph.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ph.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ph.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ph.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Mh.angle(i,this._seg0.p0),a=Mh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Mh.normalize(o+a),u=Mh.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),f=new wu(h,p),d=new fh(i,f),y=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Sc.LEFT?(this._segList.addPt(y),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(y))},Ph.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Sc.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Ph.prototype.addFilletArc=function(t,e,n,r,i){var o=r===ol.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new wu;l<a;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Ph.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ph.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new wu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new wu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ph.prototype.createCircle=function(t){var e=new wu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ph.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ph.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ch,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ph.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ph.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===wh.JOIN_BEVEL||this._bufParams.getJoinStyle()===wh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ol.CLOCKWISE,this._distance))},Ph.prototype.closeRing=function(){this._segList.closeRing()},Ph.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ah.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ah.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ah.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ah.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ph,Ah);var Oh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Oh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Il.reverse(o),o},Oh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Sh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Sc.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Sh.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Sc.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},Oh.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Sc.RIGHT&&(r=-r);var i=Sh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Oh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Sh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Sc.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Sh.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Sc.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Oh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case wh.CAP_ROUND:e.createCircle(t);break;case wh.CAP_SQUARE:e.createSquare(t)}},Oh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Oh.prototype.getBufferParameters=function(){return this._bufParams},Oh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Oh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Oh.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Oh.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Sh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Sc.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Sh.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Sc.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},Oh.prototype.getSegGen=function(t){return new Ph(this._precisionModel,this._bufParams,t)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},Oh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new wu(t[n]);return e};var Lh=function(){this._subgraphs=null,this._seg=new fh,this._cga=new ol;var t=arguments[0];this._subgraphs=t},Nh={DepthSegment:{configurable:!0}};Lh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new wl,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Mu(arguments[2],xl)&&arguments[0]instanceof wu&&arguments[1]instanceof Vc){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ol.computeOrientation(this._seg.p0,this._seg.p1,o)===ol.RIGHT)){var c=a.getDepth(Sc.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Sc.RIGHT));var h=new Rh(this._seg,c);s.add(h)}}else if(Mu(arguments[2],xl)&&arguments[0]instanceof wu&&Mu(arguments[1],xl))for(var p=arguments[0],f=arguments[1],d=arguments[2],y=f.iterator();y.hasNext();){var g=y.next();g.isForward()&&this.findStabbedSegments(p,g,d)}},Lh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Jc.min(e)._leftDepth},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Nh.DepthSegment.get=function(){return Rh},Object.defineProperties(Lh,Nh);var Rh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new fh(t),this._leftDepth=e};Rh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Rh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Rh.prototype.toString=function(){return this._upwardSeg.toString()},Rh.prototype.interfaces_=function(){return[_u]},Rh.prototype.getClass=function(){return Rh};var Dh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Dh.prototype.area=function(){return Dh.area(this.p0,this.p1,this.p2)},Dh.prototype.signedArea=function(){return Dh.signedArea(this.p0,this.p1,this.p2)},Dh.prototype.interpolateZ=function(t){if(null===t)throw new gu("Supplied point is null.");return Dh.interpolateZ(t,this.p0,this.p1,this.p2)},Dh.prototype.longestSideLength=function(){return Dh.longestSideLength(this.p0,this.p1,this.p2)},Dh.prototype.isAcute=function(){return Dh.isAcute(this.p0,this.p1,this.p2)},Dh.prototype.circumcentre=function(){return Dh.circumcentre(this.p0,this.p1,this.p2)},Dh.prototype.area3D=function(){return Dh.area3D(this.p0,this.p1,this.p2)},Dh.prototype.centroid=function(){return Dh.centroid(this.p0,this.p1,this.p2)},Dh.prototype.inCentre=function(){return Dh.inCentre(this.p0,this.p1,this.p2)},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Dh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Dh.det=function(t,e,n,r){return t*r-e*n},Dh.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=t.x-i,p=t.y-o,f=(l*h-s*p)/c,d=(-u*h+a*p)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},Dh.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Dh.isAcute=function(t,e,n){return!!Mh.isAcute(t,e,n)&&!!Mh.isAcute(e,n,t)&&!!Mh.isAcute(n,t,e)},Dh.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*Dh.det(o,a,s,u),c=Dh.det(a,o*o+a*a,u,s*s+u*u),h=Dh.det(o,o*o+a*a,s,s*s+u*u);return new wu(r-c/l,i+h/l)},Dh.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Uu(t.x+n/2,t.y+r/2,1),o=new Uu(t.x-r+n/2,t.y+n+r/2,1);return new Uu(i,o)},Dh.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new wu(t.x+i*o,t.y+i*a)},Dh.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,p=l*l+c*c+h*h;return Math.sqrt(p)/2},Dh.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new wu(r,i)},Dh.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new wu(s,u)};var zh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new wl;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Cu.EXTERIOR,Cu.INTERIOR)},zh.prototype.addPolygon=function(t){var e=this._distance,n=Sc.LEFT;this._distance<0&&(e=-this._distance,n=Sc.RIGHT);var r=t.getExteriorRing(),i=Il.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Cu.EXTERIOR,Cu.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Il.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Sc.opposite(n),Cu.INTERIOR,Cu.EXTERIOR)}},zh.prototype.isTriangleErodedCompletely=function(t,e){var n=new Dh(t[0],t[1],t[2]),r=n.inCentre();return ol.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},zh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Il.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Cu.EXTERIOR,Cu.INTERIOR)},zh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new ph(t,new Ac(0,Cu.BOUNDARY,e,n));this._curveList.add(r)},zh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<tc.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=tc.MINIMUM_VALID_SIZE&&ol.isCCW(t)&&(o=i,a=r,n=Sc.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},zh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Jl?this.addPolygon(t):t instanceof Wl?this.addLineString(t):t instanceof Hl?this.addPoint(t):t instanceof Ql?this.addCollection(t):t instanceof ql?this.addCollection(t):t instanceof ec?this.addCollection(t):t instanceof Vl&&this.addCollection(t)},zh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},zh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Fh=function(){};Fh.prototype.locate=function(t){},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var Bh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Bh.prototype.next=function(){if(this._atStart)return this._atStart=!1,Bh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Pi;var t=this._parent.getGeometryN(this._index++);return t instanceof Vl?(this._subcollectionIterator=new Bh(t),this._subcollectionIterator.next()):t},Bh.prototype.remove=function(){throw new Error(this.getClass().getName())},Bh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Bh.prototype.interfaces_=function(){return[bl]},Bh.prototype.getClass=function(){return Bh},Bh.isAtomic=function(t){return!(t instanceof Vl)};var jh=function(){this._geom=null;var t=arguments[0];this._geom=t};jh.prototype.locate=function(t){return jh.locate(t,this._geom)},jh.prototype.interfaces_=function(){return[Fh]},jh.prototype.getClass=function(){return jh},jh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ol.isPointInRing(t,e.getCoordinates())},jh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(jh.isPointInRing(t,i))return!1}return!0},jh.containsPoint=function(t,e){if(e instanceof Jl)return jh.containsPointInPolygon(t,e);if(e instanceof Vl)for(var n=new Bh(e);n.hasNext();){var r=n.next();if(r!==e&&jh.containsPoint(t,r))return!0}return!1},jh.locate=function(t,e){return e.isEmpty()?Cu.EXTERIOR:jh.containsPoint(t,e)?Cu.INTERIOR:Cu.EXTERIOR};var Vh=function(){this._edgeMap=new Fi,this._edgeList=null,this._ptInAreaLocation=[Cu.NONE,Cu.NONE]};Vh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vh.prototype.propagateSideLabels=function(t){for(var e=Cu.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Sc.LEFT)!==Cu.NONE&&(e=r.getLocation(t,Sc.LEFT))}if(e===Cu.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Sc.ON)===Cu.NONE&&s.setLocation(t,Sc.ON,i),s.isArea(t)){var u=s.getLocation(t,Sc.LEFT),l=s.getLocation(t,Sc.RIGHT);if(l!==Cu.NONE){if(l!==i)throw new Tc("side location conflict",a.getCoordinate());u===Cu.NONE&&Qu.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else Qu.isTrue(s.getLocation(t,Sc.LEFT)===Cu.NONE,"found single null side"),s.setLocation(t,Sc.RIGHT,i),s.setLocation(t,Sc.LEFT,i)}}},Vh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vh.prototype.print=function(t){qu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Sc.LEFT);Qu.isTrue(r!==Cu.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Qu.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Sc.LEFT),u=a.getLocation(t,Sc.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Vh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vh.prototype.iterator=function(){return this.getEdges().iterator()},Vh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new wl(this._edgeMap.values())),this._edgeList},Vh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Cu.NONE&&(this._ptInAreaLocation[t]=jh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Vh.prototype.toString=function(){var t=new Au;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Vh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Cu.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=Cu.NONE;if(e[u])l=Cu.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},Vh.prototype.getDegree=function(){return this._edgeMap.size()},Vh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh};var qh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Tc("no outgoing dirEdge found",this.getCoordinate());Qu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Fc.isNorthern(i)&&Fc.isNorthern(o)?n:Fc.isNorthern(i)||Fc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Qu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){qu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new wl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Sc.LEFT),r=t.getDepth(Sc.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Tc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var l=this._edgeList.get(u);l.setEdgeDepths(Sc.RIGHT,s),s=l.getDepth(Sc.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(Qu.isTrue(null!==e,"found null for first outgoing dirEdge"),Qu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Cu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Cu.INTERIOR;break}if(r.isInResult()){t=Cu.EXTERIOR;break}}}if(t===Cu.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Cu.INTERIOR):(a.isInResult()&&(i=Cu.EXTERIOR),s.isInResult()&&(i=Cu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ac(Cu.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Cu.INTERIOR&&o!==Cu.BOUNDARY||this._label.setLocation(i,Cu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vh),Uh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Dc(t,new qh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qc),Gh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Gh.prototype.compareTo=function(t){var e=t;return Gh.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Gh.prototype.interfaces_=function(){return[_u]},Gh.prototype.getClass=function(){return Gh},Gh.orientation=function(t){return 1===Il.increasingDirection(t)},Gh.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,p=(l+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Xh=function(){this._edges=new wl,this._ocaMap=new Fi};Xh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Xh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Xh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Xh.prototype.iterator=function(){return this._edges.iterator()},Xh.prototype.getEdges=function(){return this._edges},Xh.prototype.get=function(t){return this._edges.get(t)},Xh.prototype.findEqualEdge=function(t){var e=new Gh(t.getCoordinates());return this._ocaMap.get(e)},Xh.prototype.add=function(t){this._edges.add(t);var e=new Gh(t.getCoordinates());this._ocaMap.put(e,t)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Yh=function(){};Yh.prototype.processIntersections=function(t,e,n,r){},Yh.prototype.isDone=function(){},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Zh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Zh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Zh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Zh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Zh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Zh.prototype.getLineIntersector=function(){return this._li},Zh.prototype.hasProperIntersection=function(){return this._hasProper},Zh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Zh.prototype.hasIntersection=function(){return this._hasIntersection},Zh.prototype.isDone=function(){return!1},Zh.prototype.hasInteriorIntersection=function(){return this._hasInterior},Zh.prototype.interfaces_=function(){return[Yh]},Zh.prototype.getClass=function(){return Zh},Zh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Wh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new wu(t),this.segmentIndex=e,this.dist=n};Wh.prototype.getSegmentIndex=function(){return this.segmentIndex},Wh.prototype.getCoordinate=function(){return this.coord},Wh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Wh.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Wh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Wh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Wh.prototype.getDistance=function(){return this.dist},Wh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Wh.prototype.interfaces_=function(){return[_u]},Wh.prototype.getClass=function(){return Wh};var $h=function(){this._nodeMap=new Fi,this.edge=null;var t=arguments[0];this.edge=t};$h.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},$h.prototype.iterator=function(){return this._nodeMap.values().iterator()},$h.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},$h.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},$h.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new wu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new tp(o,new Ac(this.edge._label))},$h.prototype.add=function(t,e,n){var r=new Wh(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},$h.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var Hh=function(){};Hh.prototype.getChainStartIndices=function(t){var e=0,n=new wl;n.add(new Ou(e));do{var r=this.findChainEnd(t,e);n.add(new Ou(r)),e=r}while(e<t.length-1);return Hh.toIntArray(n)},Hh.prototype.findChainEnd=function(t,e){for(var n=Fc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Fc.quadrant(t[r-1],t[r])===n;)r++;return r-1},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Kh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Gu,this.env2=new Gu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Hh;this.startIndex=e.getChainStartIndices(this.pts)};Kh.prototype.getCoordinates=function(){return this.pts},Kh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Kh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Kh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],p=a.pts[s],f=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((s+u)/2);i<d&&(s<y&&this.computeIntersectsForChain(i,d,a,s,y,l),y<u&&this.computeIntersectsForChain(i,d,a,y,u,l)),d<o&&(s<y&&this.computeIntersectsForChain(d,o,a,s,y,l),y<u&&this.computeIntersectsForChain(d,o,a,y,u,l))}},Kh.prototype.getStartIndexes=function(){return this.startIndex},Kh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Jh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Qh={NULL_VALUE:{configurable:!0}};Jh.prototype.getDepth=function(t,e){return this._depth[t][e]},Jh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Jh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Jh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Jh.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===Jh.NULL_VALUE}},Jh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Jh.prototype.getDelta=function(t){return this._depth[t][Sc.RIGHT]-this._depth[t][Sc.LEFT]},Jh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Cu.EXTERIOR:Cu.INTERIOR},Jh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Jh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Cu.EXTERIOR&&r!==Cu.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Jh.depthAtLocation(r):this._depth[e][n]+=Jh.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Cu.INTERIOR&&this._depth[i][o]++}},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},Jh.depthAtLocation=function(t){return t===Cu.EXTERIOR?0:t===Cu.INTERIOR?1:Jh.NULL_VALUE},Qh.NULL_VALUE.get=function(){return-1},Object.defineProperties(Jh,Qh);var tp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new $h(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Jh,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ac.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Kh(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Gu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new wu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new Au;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Sc.ON),e.getLocation(1,Sc.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Sc.LEFT),e.getLocation(1,Sc.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Sc.RIGHT),e.getLocation(1,Sc.RIGHT),2))},e}(Rc),ep=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xh,this._bufParams=t||null};ep.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ep.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ac(t.getLabel())).flip(),n.merge(r);var i=ep.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ep.depthDelta(t.getLabel()))},ep.prototype.buildSubgraphs=function(t,e){for(var n=new wl,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Lh(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},ep.prototype.createSubgraphs=function(t){for(var e=new wl,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new kc;i.create(r),e.add(i)}}return Jc.sort(e,Jc.reverseOrder()),e},ep.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ep.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new bh,n=new nl;return n.setPrecisionModel(t),e.setSegmentIntersector(new Zh(n)),e},ep.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Oh(n,this._bufParams),i=new zh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Uc(new Uh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Gc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},ep.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new tp(i.getCoordinates(),new Ac(a));this.insertUniqueEdge(s)}}},ep.prototype.setNoder=function(t){this._workingNoder=t},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.depthDelta=function(t){var e=t.getLocation(0,Sc.LEFT),n=t.getLocation(0,Sc.RIGHT);return e===Cu.INTERIOR&&n===Cu.EXTERIOR?1:e===Cu.EXTERIOR&&n===Cu.INTERIOR?-1:0},ep.convertSegStrings=function(t){for(var e=new gc,n=new wl;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var np=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};np.prototype.rescale=function(){if(Mu(arguments[0],vl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&qu.out.println(n)}},np.prototype.scale=function(){if(Mu(arguments[0],vl)){for(var t=arguments[0],e=new wl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new ph(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new wu(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Il.removeRepeatedPoints(o)}},np.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},np.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},np.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},np.prototype.interfaces_=function(){return[vh]},np.prototype.getClass=function(){return np};var rp=function(){this._li=new nl,this._segStrings=null;var t=arguments[0];this._segStrings=t},ip={fact:{configurable:!0}};rp.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Ku("found endpt/interior pt intersection at index "+o+" :pt "+n)},rp.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],y=c.getCoordinates()[h+1],g=p.getCoordinates()[f],m=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,y,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,g,m)))throw new Ku("found non-noded intersection at "+d+"-"+y+" and "+g+"-"+m)}},rp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},rp.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},rp.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},rp.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Ku("found non-noded collapse at "+rp.fact.createLineString([t,e,n]))},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},ip.fact.get=function(){return new gc},Object.defineProperties(rp,ip);var op=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new gu("Scale factor must be non-zero");1!==e&&(this._pt=new wu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new wu,this._p1Scaled=new wu),this.initCorners(this._pt)},ap={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};op.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return Qu.isTrue(!(a&&s),"Found bad envelope test"),s},op.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new wu(this._maxx,this._maxy),this._corner[1]=new wu(this._minx,this._maxy),this._corner[2]=new wu(this._minx,this._miny),this._corner[3]=new wu(this._maxx,this._miny)},op.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},op.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},op.prototype.getCoordinate=function(){return this._originalPt},op.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},op.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=op.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Gu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},op.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},op.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},op.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},ap.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(op,ap);var sp=function(){this.tempEnv1=new Gu,this.selectedSegment=new fh};sp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp};var up=function(){this._index=null;var t=arguments[0];this._index=t},lp={HotPixelSnapAction:{configurable:!0}};up.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new cp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Wc]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},lp.HotPixelSnapAction.get=function(){return cp},Object.defineProperties(up,lp);var cp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(sp),hp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new wl};hp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hp.prototype.isDone=function(){return!1},hp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hp.prototype.interfaces_=function(){return[Yh]},hp.prototype.getClass=function(){return hp};var pp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new nl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};pp.prototype.checkCorrectness=function(t){var e=ph.getNodedSubstrings(t),n=new rp(e);try{n.checkValid()}catch(t){if(!(t instanceof ju))throw t;t.printStackTrace()}},pp.prototype.getNodedSubstrings=function(){return ph.getNodedSubstrings(this._nodedSegStrings)},pp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},pp.prototype.findInteriorIntersections=function(t,e){var n=new hp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},pp.prototype.computeVertexSnaps=function(){if(Mu(arguments[0],vl))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof ph)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new op(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},pp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new bh,this._pointSnapper=new up(this._noder.getIndex()),this.snapRound(t,this._li)},pp.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new op(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},pp.prototype.interfaces_=function(){return[vh]},pp.prototype.getClass=function(){return pp};var fp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new wh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},dp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};fp.prototype.bufferFixedPrecision=function(t){var e=new np(new pp(new pc(1)),t.getScale()),n=new ep(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},fp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=fp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Tc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=fp.precisionScaleFactor(this._argGeom,this._distance,n),i=new pc(r);this.bufferFixedPrecision(i)}},fp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},fp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},fp.prototype.bufferOriginalPrecision=function(){try{var t=new ep(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ku))throw t;this._saveException=t}},fp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},fp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new fp(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ul&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new fp(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof wh&&arguments[0]instanceof ul&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new fp(a,u).getResultGeometry(s)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=new fp(l);return f.setQuadrantSegments(h),f.setEndCapStyle(p),f.getResultGeometry(c)}},fp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=ku.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},dp.CAP_ROUND.get=function(){return wh.CAP_ROUND},dp.CAP_BUTT.get=function(){return wh.CAP_FLAT},dp.CAP_FLAT.get=function(){return wh.CAP_FLAT},dp.CAP_SQUARE.get=function(){return wh.CAP_SQUARE},dp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(fp,dp);var yp=function(){this._pt=[new wu,new wu],this._distance=mu.NaN,this._isNull=!0};yp.prototype.getCoordinates=function(){return this._pt},yp.prototype.getCoordinate=function(t){return this._pt[t]},yp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yp.prototype.getDistance=function(){return this._distance},yp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp};var gp=function(){};gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.computeDistance=function(){if(arguments[2]instanceof yp&&arguments[0]instanceof Wl&&arguments[1]instanceof wu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new fh,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof yp&&arguments[0]instanceof Jl&&arguments[1]instanceof wu){var s=arguments[0],u=arguments[1],l=arguments[2];gp.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)gp.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof yp&&arguments[0]instanceof ul&&arguments[1]instanceof wu){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Wl)gp.computeDistance(h,p,f);else if(h instanceof Jl)gp.computeDistance(h,p,f);else if(h instanceof Vl)for(var d=h,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);gp.computeDistance(g,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof yp&&arguments[0]instanceof fh&&arguments[1]instanceof wu){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var mp=function(t){this._maxPtDist=new yp,this._inputGeom=t||null},vp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};mp.prototype.computeMaxMidpointDistance=function(t){var e=new bp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mp.prototype.computeMaxVertexDistance=function(t){var e=new _p(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},mp.prototype.getDistancePoints=function(){return this._maxPtDist},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},vp.MaxPointDistanceFilter.get=function(){return _p},vp.MaxMidpointDistanceFilter.get=function(){return bp},Object.defineProperties(mp,vp);var _p=function(t){this._maxPtDist=new yp,this._minPtDist=new yp,this._geom=t||null};_p.prototype.filter=function(t){this._minPtDist.initialize(),gp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_p.prototype.getMaxPointDistance=function(){return this._maxPtDist},_p.prototype.interfaces_=function(){return[hl]},_p.prototype.getClass=function(){return _p};var bp=function(t){this._maxPtDist=new yp,this._minPtDist=new yp,this._geom=t||null};bp.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new wu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),gp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bp.prototype.isDone=function(){return!1},bp.prototype.isGeometryChanged=function(){return!1},bp.prototype.getMaxPointDistance=function(){return this._maxPtDist},bp.prototype.interfaces_=function(){return[jl]},bp.prototype.getClass=function(){return bp};var xp=function(t){this._comps=t||null};xp.prototype.filter=function(t){t instanceof Jl&&this._comps.add(t)},xp.prototype.interfaces_=function(){return[Bl]},xp.prototype.getClass=function(){return xp},xp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return xp.getPolygons(t,new wl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jl?n.add(e):e instanceof Vl&&e.apply(new xp(n)),n}};var wp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};wp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof tc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Wl&&this._lines.add(t)},wp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},wp.prototype.interfaces_=function(){return[sl]},wp.prototype.getClass=function(){return wp},wp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(wp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(wp.getLines(e,n))}},wp.getLines=function(){if(1===arguments.length){var t=arguments[0];return wp.getLines(t,!1)}if(2===arguments.length){if(Mu(arguments[0],vl)&&Mu(arguments[1],vl)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();wp.getLines(i,n)}return n}if(arguments[0]instanceof ul&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new wl;return o.apply(new wp(s,a)),s}if(arguments[0]instanceof ul&&Mu(arguments[1],vl)){var u=arguments[0],l=arguments[1];return u instanceof Wl?l.add(u):u.apply(new wp(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Mu(arguments[0],vl)&&Mu(arguments[1],vl)){for(var c=arguments[0],h=arguments[1],p=arguments[2],f=c.iterator();f.hasNext();){var d=f.next();wp.getLines(d,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ul&&Mu(arguments[1],vl)){var y=arguments[0],g=arguments[1],m=arguments[2];return y.apply(new wp(g,m)),g}}};var Ep=function(){if(this._boundaryRule=pl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new gu("Rule must be non-null");this._boundaryRule=t}};Ep.prototype.locateInternal=function(){if(arguments[0]instanceof wu&&arguments[1]instanceof Jl){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Cu.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Cu.EXTERIOR)return Cu.EXTERIOR;if(r===Cu.BOUNDARY)return Cu.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===Cu.INTERIOR)return Cu.EXTERIOR;if(a===Cu.BOUNDARY)return Cu.BOUNDARY}return Cu.INTERIOR}if(arguments[0]instanceof wu&&arguments[1]instanceof Wl){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return Cu.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?ol.isOnLine(s,l)?Cu.INTERIOR:Cu.EXTERIOR:Cu.BOUNDARY}if(arguments[0]instanceof wu&&arguments[1]instanceof Hl){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Cu.INTERIOR:Cu.EXTERIOR}},Ep.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?ol.locatePointInRing(t,e.getCoordinates()):Cu.EXTERIOR},Ep.prototype.intersects=function(t,e){return this.locate(t,e)!==Cu.EXTERIOR},Ep.prototype.updateLocationInfo=function(t){t===Cu.INTERIOR&&(this._isIn=!0),t===Cu.BOUNDARY&&this._numBoundaries++},Ep.prototype.computeLocation=function(t,e){if(e instanceof Hl&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Wl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Jl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ql)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ec)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Vl)for(var u=new Bh(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Ep.prototype.locate=function(t,e){return e.isEmpty()?Cu.EXTERIOR:e instanceof Wl?this.locateInternal(t,e):e instanceof Jl?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Cu.BOUNDARY:this._numBoundaries>0||this._isIn?Cu.INTERIOR:Cu.EXTERIOR)},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep};var Sp=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Ip={INSIDE_AREA:{configurable:!0}};Sp.prototype.isInsideArea=function(){return this._segIndex===Sp.INSIDE_AREA},Sp.prototype.getCoordinate=function(){return this._pt},Sp.prototype.getGeometryComponent=function(){return this._component},Sp.prototype.getSegmentIndex=function(){return this._segIndex},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Ip.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Sp,Ip);var Cp=function(t){this._pts=t||null};Cp.prototype.filter=function(t){t instanceof Hl&&this._pts.add(t)},Cp.prototype.interfaces_=function(){return[Bl]},Cp.prototype.getClass=function(){return Cp},Cp.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Hl?Jc.singletonList(t):Cp.getPoints(t,new wl)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Hl?n.add(e):e instanceof Vl&&e.apply(new Cp(n)),n}};var Tp=function(){this._locations=null;var t=arguments[0];this._locations=t};Tp.prototype.filter=function(t){(t instanceof Hl||t instanceof Wl||t instanceof Jl)&&this._locations.add(new Sp(t,0,t.getCoordinate()))},Tp.prototype.interfaces_=function(){return[Bl]},Tp.prototype.getClass=function(){return Tp},Tp.getLocations=function(t){var e=new wl;return t.apply(new Tp(e)),e};var Mp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ep,this._minDistanceLocation=null,this._minDistance=mu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Mp.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=xp.getPolygons(this._geom[e]);if(i.size()>0){var o=Tp.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Mu(arguments[0],xl)&&Mu(arguments[1],xl)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Sp&&arguments[1]instanceof Jl){var p=arguments[0],f=arguments[1],d=arguments[2],y=p.getCoordinate();if(Cu.EXTERIOR!==this._ptLocator.locate(y,f))return this._minDistance=0,d[0]=p,d[1]=new Sp(f,y),null}},Mp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=wp.getLines(this._geom[0]),n=wp.getLines(this._geom[1]),r=Cp.getPoints(this._geom[0]),i=Cp.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Mp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Mp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Mp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Mp.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Wl&&arguments[1]instanceof Hl){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=ol.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new fh(r[o],r[o+1]).closestPoint(i);n[0]=new Sp(t,o,s),n[1]=new Sp(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Wl&&arguments[1]instanceof Wl){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var y=ol.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(y<this._minDistance){this._minDistance=y;var g=new fh(h[f],h[f+1]),m=new fh(p[d],p[d+1]),v=g.closestPoints(m);c[0]=new Sp(u,f,v[0]),c[1]=new Sp(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Mp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Sp(i,0,i.getCoordinate()),n[1]=new Sp(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Mp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new gu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Mp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Mp.distance=function(t,e){return new Mp(t,e).distance()},Mp.isWithinDistance=function(t,e,n){return new Mp(t,e,n).distance()<=n},Mp.nearestPoints=function(t,e){return new Mp(t,e).nearestPoints()};var kp=function(){this._pt=[new wu,new wu],this._distance=mu.NaN,this._isNull=!0};kp.prototype.getCoordinates=function(){return this._pt},kp.prototype.getCoordinate=function(t){return this._pt[t]},kp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},kp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},kp.prototype.toString=function(){return Hu.toLineString(this._pt[0],this._pt[1])},kp.prototype.getDistance=function(){return this._distance},kp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Pp=function(){};Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.computeDistance=function(){if(arguments[2]instanceof kp&&arguments[0]instanceof Wl&&arguments[1]instanceof wu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new fh,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof kp&&arguments[0]instanceof Jl&&arguments[1]instanceof wu){var s=arguments[0],u=arguments[1],l=arguments[2];Pp.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Pp.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof kp&&arguments[0]instanceof ul&&arguments[1]instanceof wu){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Wl)Pp.computeDistance(h,p,f);else if(h instanceof Jl)Pp.computeDistance(h,p,f);else if(h instanceof Vl)for(var d=h,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Pp.computeDistance(g,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof kp&&arguments[0]instanceof fh&&arguments[1]instanceof wu){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var Ap=function(){this._g0=null,this._g1=null,this._ptDist=new kp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Op={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ap.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ap.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new gu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ap.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ap.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ap.prototype.computeOrientedDistance=function(t,e,n){var r=new Lp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Np(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Ap.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ap(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Ap(n,r);return o.setDensifyFraction(i),o.distance()}},Op.MaxPointDistanceFilter.get=function(){return Lp},Op.MaxDensifiedByFractionDistanceFilter.get=function(){return Np},Object.defineProperties(Ap,Op);var Lp=function(){this._maxPtDist=new kp,this._minPtDist=new kp,this._euclideanDist=new Pp,this._geom=null;var t=arguments[0];this._geom=t};Lp.prototype.filter=function(t){this._minPtDist.initialize(),Pp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Lp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lp.prototype.interfaces_=function(){return[hl]},Lp.prototype.getClass=function(){return Lp};var Np=function(){this._maxPtDist=new kp,this._minPtDist=new kp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Np.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new wu(s,u);this._minPtDist.initialize(),Pp.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Np.prototype.isDone=function(){return!1},Np.prototype.isGeometryChanged=function(){return!1},Np.prototype.getMaxPointDistance=function(){return this._maxPtDist},Np.prototype.interfaces_=function(){return[jl]},Np.prototype.getClass=function(){return Np};var Rp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Dp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Rp.prototype.checkMaximumDistance=function(t,e,n){var r=new Ap(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Hu.toLineString(i[0],i[1])+")"}},Rp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Rp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Rp.VERBOSE&&qu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Rp.prototype.checkNegativeValid=function(){if(!(this._input instanceof Jl||this._input instanceof ec||this._input instanceof Vl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Rp.prototype.getErrorIndicator=function(){return this._errorIndicator},Rp.prototype.checkMinimumDistance=function(t,e,n){var r=new Mp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Hu.toLineString(i[0],i[1])+" )"}},Rp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Rp.prototype.getErrorLocation=function(){return this._errorLocation},Rp.prototype.getPolygonLines=function(t){for(var e=new wl,n=new wp(e),r=xp.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Rp.prototype.getErrorMessage=function(){return this._errMsg},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Dp.VERBOSE.get=function(){return!1},Dp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Rp,Dp);var zp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Fp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Gu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Gu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zp.prototype.checkDistance=function(){var t=new Rp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zp.prototype.checkPolygonal=function(){this._result instanceof Jl||this._result instanceof ec||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zp.prototype.getErrorIndicator=function(){return this._errorIndicator},zp.prototype.getErrorLocation=function(){return this._errorLocation},zp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zp.prototype.report=function(t){if(!zp.VERBOSE)return null;qu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zp.prototype.getErrorMessage=function(){return this._errorMsg},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.isValidMsg=function(t,e,n){var r=new zp(t,e,n);return r.isValid()?null:r.getErrorMessage()},zp.isValid=function(t,e,n){return!!new zp(t,e,n).isValid()},Fp.VERBOSE.get=function(){return!1},Fp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zp,Fp);var Bp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Bp.prototype.getCoordinates=function(){return this._pts},Bp.prototype.size=function(){return this._pts.length},Bp.prototype.getCoordinate=function(t){return this._pts[t]},Bp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Bp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:lh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Bp.prototype.setData=function(t){this._data=t},Bp.prototype.getData=function(){return this._data},Bp.prototype.toString=function(){return Hu.toLineString(new sc(this._pts))},Bp.prototype.interfaces_=function(){return[ch]},Bp.prototype.getClass=function(){return Bp};var jp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new wl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};jp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},jp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},jp.prototype.getIntersectionSegments=function(){return this._intSegments},jp.prototype.count=function(){return this._intersectionCount},jp.prototype.getIntersections=function(){return this._intersections},jp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},jp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},jp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},jp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},jp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},jp.prototype.interfaces_=function(){return[Yh]},jp.prototype.getClass=function(){return jp},jp.createAllIntersectionsFinder=function(t){var e=new jp(t);return e.setFindAllIntersections(!0),e},jp.createAnyIntersectionFinder=function(t){return new jp(t)},jp.createIntersectionCounter=function(t){var e=new jp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vp=function(){this._li=new nl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vp.prototype.isValid=function(){return this.execute(),this._isValid},Vp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new jp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new bh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Tc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Hu.toLineString(t[0],t[1])+" and "+Hu.toLineString(t[2],t[3])},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp},Vp.computeIntersections=function(t){var e=new Vp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qp=function t(){this._nv=null;var e=arguments[0];this._nv=new Vp(t.toSegmentStrings(e))};qp.prototype.checkValid=function(){this._nv.checkValid()},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp},qp.toSegmentStrings=function(t){for(var e=new wl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Bp(r.getCoordinates(),r))}return e},qp.checkValid=function(t){new qp(t).checkValid()};var Up=function(t){this._mapOp=t};Up.prototype.map=function(t){for(var e=new wl,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(gc.toGeometryArray(e))},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Up.map=function(t,e){return new Up(e).map(t)};var Gp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new wl,this._resultLineList=new wl;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Gp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Gp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Gp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Gp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!If.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Gp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Gp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Gp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Gp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(Qu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(If.isResultOfOp(r,e)&&e===If.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp};var Xp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new wl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===If.INTERSECTION)){var r=n.getLabel();If.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var Yp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Yp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Yp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof tc&&!r.isEmpty()||(n=!1);for(var i=new wl,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof tc||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new wl;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Yp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Yp.prototype.getInputGeometry=function(){return this._inputGeom},Yp.prototype.transformMultiLineString=function(t,e){for(var n=new wl,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Yp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Yp.prototype.transformMultiPoint=function(t,e){for(var n=new wl,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yp.prototype.transformMultiPolygon=function(t,e){for(var n=new wl,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yp.prototype.copy=function(t){return t.copy()},Yp.prototype.transformGeometryCollection=function(t,e){for(var n=new wl,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(gc.toGeometryArray(n)):this._factory.buildGeometry(n)},Yp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Hl)return this.transformPoint(t,null);if(t instanceof Ql)return this.transformMultiPoint(t,null);if(t instanceof tc)return this.transformLinearRing(t,null);if(t instanceof Wl)return this.transformLineString(t,null);if(t instanceof ql)return this.transformMultiLineString(t,null);if(t instanceof Jl)return this.transformPolygon(t,null);if(t instanceof ec)return this.transformMultiPolygon(t,null);if(t instanceof Vl)return this.transformGeometryCollection(t,null);throw new gu("Unknown Geometry subtype: "+t.getClass().getName())},Yp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};var Zp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new fh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Wl&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Zp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new wu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new wu(o)))}},Zp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Zp.prototype.snapTo=function(t){var e=new Sl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new wu(i),!1)}},Zp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=mu.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Zp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Wp=function(t){this._srcGeom=t||null},$p={SNAP_PRECISION_FACTOR:{configurable:!0}};Wp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Hp(e,n).transform(this._srcGeom)},Wp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Hp(t,n,!0).transform(this._srcGeom),i=r;return e&&Mu(i,Kl)&&(i=r.buffer(0)),i},Wp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Wp.prototype.extractTargetCoordinates=function(t){for(var e=new ji,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Wp.prototype.computeMinimumSegmentLength=function(t){for(var e=mu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Wp(t);r[0]=i.snapTo(e,n);var o=new Wp(e);return r[1]=o.snapTo(r[0],n),r},Wp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Wp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Wp.computeOverlaySnapTolerance(i),Wp.computeOverlaySnapTolerance(o))}},Wp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Wp.SNAP_PRECISION_FACTOR},Wp.snapToSelf=function(t,e,n){return new Wp(t).snapToSelf(e,n)},$p.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Wp,$p);var Hp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Zp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yp),Kp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Kp.prototype.getCommon=function(){return mu.longBitsToDouble(this._commonBits)},Kp.prototype.add=function(t){var e=mu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Kp.signExpBits(this._commonBits),this._isFirst=!1,null):Kp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Kp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Kp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Kp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=mu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+mu.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Kp.signExpBits=function(t){return t>>52},Kp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Kp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Kp.getBit(t,r)!==Kp.getBit(e,r))return n;n++}return 52};var Jp=function(){this._commonCoord=null,this._ccFilter=new tf},Qp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Jp.prototype.addCommonBits=function(t){var e=new ef(this._commonCoord);t.apply(e),t.geometryChanged()},Jp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new wu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ef(e);return t.apply(n),t.geometryChanged(),t},Jp.prototype.getCommonCoordinate=function(){return this._commonCoord},Jp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Qp.CommonCoordinateFilter.get=function(){return tf},Qp.Translater.get=function(){return ef},Object.defineProperties(Jp,Qp);var tf=function(){this._commonBitsX=new Kp,this._commonBitsY=new Kp};tf.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},tf.prototype.getCommonCoordinate=function(){return new wu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},tf.prototype.interfaces_=function(){return[hl]},tf.prototype.getClass=function(){return tf};var ef=function(){this.trans=null;var t=arguments[0];this.trans=t};ef.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ef.prototype.isDone=function(){return!1},ef.prototype.isGeometryChanged=function(){return!0},ef.prototype.interfaces_=function(){return[jl]},ef.prototype.getClass=function(){return ef};var nf=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};nf.prototype.selfSnap=function(t){return new Wp(t).snapTo(t,this._snapTolerance)},nf.prototype.removeCommonBits=function(t){this._cbr=new Jp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},nf.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},nf.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=If.overlayOp(e[0],e[1],t);return this.prepareResult(n)},nf.prototype.checkValid=function(t){t.isValid()||qu.out.println("Snapped geometry is invalid")},nf.prototype.computeSnapTolerance=function(){this._snapTolerance=Wp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},nf.prototype.snap=function(t){var e=this.removeCommonBits(t);return Wp.snap(e[0],e[1],this._snapTolerance)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.overlayOp=function(t,e,n){return new nf(t,e).getResultGeometry(n)},nf.union=function(t,e){return nf.overlayOp(t,e,If.UNION)},nf.intersection=function(t,e){return nf.overlayOp(t,e,If.INTERSECTION)},nf.symDifference=function(t,e){return nf.overlayOp(t,e,If.SYMDIFFERENCE)},nf.difference=function(t,e){return nf.overlayOp(t,e,If.DIFFERENCE)};var rf=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};rf.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=If.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Ku))throw t;r=t}if(!n)try{e=nf.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ku?r:t}return e},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.overlayOp=function(t,e,n){return new rf(t,e).getResultGeometry(n)},rf.union=function(t,e){return rf.overlayOp(t,e,If.UNION)},rf.intersection=function(t,e){return rf.overlayOp(t,e,If.INTERSECTION)},rf.symDifference=function(t,e){return rf.overlayOp(t,e,If.SYMDIFFERENCE)},rf.difference=function(t,e){return rf.overlayOp(t,e,If.DIFFERENCE)};var of=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};of.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var af=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},sf={INSERT:{configurable:!0},DELETE:{configurable:!0}};af.prototype.isDelete=function(){return this._eventType===af.DELETE},af.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},af.prototype.getObject=function(){return this._obj},af.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},af.prototype.getInsertEvent=function(){return this._insertEvent},af.prototype.isInsert=function(){return this._eventType===af.INSERT},af.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},af.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},af.prototype.interfaces_=function(){return[_u]},af.prototype.getClass=function(){return af},sf.INSERT.get=function(){return 1},sf.DELETE.get=function(){return 2},Object.defineProperties(af,sf);var uf=function(){};uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var lf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};lf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(lf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},lf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},lf.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},lf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},lf.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},lf.prototype.hasProperIntersection=function(){return this._hasProper},lf.prototype.hasIntersection=function(){return this._hasIntersection},lf.prototype.isDone=function(){return this._isDone},lf.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},lf.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},lf.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},lf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var cf=function(t){function e(){t.call(this),this.events=new wl,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Jc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof lf&&Mu(arguments[0],xl)&&Mu(arguments[1],xl)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Mu(arguments[0],xl)&&arguments[1]instanceof lf){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new of(n,i),a=new af(e,n.getMinX(i),o);this.events.add(a),this.events.add(new af(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uf),hf=function(){this._min=mu.POSITIVE_INFINITY,this._max=mu.NEGATIVE_INFINITY},pf={NodeComparator:{configurable:!0}};hf.prototype.getMin=function(){return this._min},hf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hf.prototype.getMax=function(){return this._max},hf.prototype.toString=function(){return Hu.toLineString(new wu(this._min,0),new wu(this._max,0))},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},pf.NodeComparator.get=function(){return ff},Object.defineProperties(hf,pf);var ff=function(){};ff.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},ff.prototype.interfaces_=function(){return[xu]},ff.prototype.getClass=function(){return ff};var df=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hf),yf=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hf),gf=function(){this._leaves=new wl,this._root=null,this._level=0};gf.prototype.buildTree=function(){Jc.sort(this._leaves,new hf.NodeComparator);for(var t=this._leaves,e=null,n=new wl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},gf.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new df(t,e,n))},gf.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},gf.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},gf.prototype.printNode=function(t){qu.out.println(Hu.toLineString(new wu(t._min,this._level),new wu(t._max,this._level)))},gf.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},gf.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yf(t.get(n),t.get(n+1));e.add(i)}}},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var mf=function(){this._items=new wl};mf.prototype.visitItem=function(t){this._items.add(t)},mf.prototype.getItems=function(){return this._items},mf.prototype.interfaces_=function(){return[Wc]},mf.prototype.getClass=function(){return mf};var vf=function(){this._index=null;var t=arguments[0];if(!Mu(t,Kl))throw new gu("Argument must be Polygonal");this._index=new xf(t)},_f={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vf.prototype.locate=function(t){var e=new il(t),n=new bf(e);return this._index.query(t.y,t.y,n),e.getLocation()},vf.prototype.interfaces_=function(){return[Fh]},vf.prototype.getClass=function(){return vf},_f.SegmentVisitor.get=function(){return bf},_f.IntervalIndexedGeometry.get=function(){return xf},Object.defineProperties(vf,_f);var bf=function(){this._counter=null;var t=arguments[0];this._counter=t};bf.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bf.prototype.interfaces_=function(){return[Wc]},bf.prototype.getClass=function(){return bf};var xf=function(){this._index=new gf;var t=arguments[0];this.init(t)};xf.prototype.init=function(t){for(var e=wp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},xf.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new fh(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},xf.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mf;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var wf=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new hc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ep,2===arguments.length){var e=arguments[0],n=arguments[1],r=pl.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;Cu.NONE,r.getLocation(t,Sc.ON)===Cu.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new lf(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof tc||this._parentGeom instanceof Jl||this._parentGeom instanceof ec,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new lf(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Hl){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Cu.INTERIOR)}else if(arguments[0]instanceof wu){var e=arguments[0];this.insertPoint(this._argIndex,e,Cu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Cu.EXTERIOR,Cu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Cu.INTERIOR,Cu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Cu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Cu.BOUNDARY)},e.prototype.addLineString=function(t){var e=Il.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new tp(e,new Ac(this._argIndex,Cu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Qu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Cu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Il.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;ol.isCCW(r)&&(i=n,o=e);var a=new tp(r,new Ac(this._argIndex,Cu.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Cu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Ac(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new cf},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ec&&(this._useBoundaryDeterminationRule=!1),e instanceof Jl)this.addPolygon(e);else if(e instanceof Wl)this.addLineString(e);else if(e instanceof Hl)this.addPoint(e);else if(e instanceof Ql)this.addCollection(e);else if(e instanceof ql)this.addCollection(e);else if(e instanceof ec)this.addCollection(e);else{if(!(e instanceof Vl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Mu(this._parentGeom,Kl)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vf(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Cu.BOUNDARY:Cu.INTERIOR},e}(Uc),Ef=function(){if(this._li=new nl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new wf(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=pl.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wf(0,e,r),this._arg[1]=new wf(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wf(0,i,a),this._arg[1]=new wf(1,o,a)}};Ef.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ef.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef};var Sf=function(){};Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.map=function(){if(arguments[0]instanceof ul&&Mu(arguments[1],Sf.MapOp)){for(var t=arguments[0],e=arguments[1],n=new wl,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Mu(arguments[0],vl)&&Mu(arguments[1],Sf.MapOp)){for(var o=arguments[0],a=arguments[1],s=new wl,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Sf.MapOp=function(){};var If=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ep,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xh,this._resultPolyList=new wl,this._resultLineList=new wl,this._resultPointList=new wl,this._graph=new Uc(new Uh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ac(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new wl;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Cu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new wl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new wl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Gc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Gp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Sc.RIGHT),i.getLocation(1,Sc.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Qu.isTrue(!r.isNull(i,Sc.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Sc.LEFT,r.getLocation(i,Sc.LEFT)),Qu.isTrue(!r.isNull(i,Sc.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Sc.RIGHT,r.getLocation(i,Sc.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ef);If.overlayOp=function(t,e,n){return new If(t,e).getResultGeometry(n)},If.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return If.createEmptyResult(If.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Up.map(t,{interfaces_:function(){return[Sf.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),rf.overlayOp(t,e,If.INTERSECTION)},If.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return If.createEmptyResult(If.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),rf.overlayOp(t,e,If.SYMDIFFERENCE)},If.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case If.INTERSECTION:o=Math.min(r,i);break;case If.UNION:o=Math.max(r,i);break;case If.DIFFERENCE:o=r;break;case If.SYMDIFFERENCE:o=Math.max(r,i)}return o},If.createEmptyResult=function(t,e,n,r){var i=null;switch(If.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},If.difference=function(t,e){return t.isEmpty()?If.createEmptyResult(If.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),rf.overlayOp(t,e,If.DIFFERENCE))},If.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return If.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Cu.BOUNDARY&&(i=Cu.INTERIOR),o===Cu.BOUNDARY&&(o=Cu.INTERIOR),a){case If.INTERSECTION:return i===Cu.INTERIOR&&o===Cu.INTERIOR;case If.UNION:return i===Cu.INTERIOR||o===Cu.INTERIOR;case If.DIFFERENCE:return i===Cu.INTERIOR&&o!==Cu.INTERIOR;case If.SYMDIFFERENCE:return i===Cu.INTERIOR&&o!==Cu.INTERIOR||i!==Cu.INTERIOR&&o===Cu.INTERIOR}return!1}},If.INTERSECTION=1,If.UNION=2,If.DIFFERENCE=3,If.SYMDIFFERENCE=4;var Cf=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ep,this._seg=new fh;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Cf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Cf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Cu.BOUNDARY:this._ptLocator.locate(t,this._g)},Cf.prototype.extractLinework=function(t){var e=new Tf;t.apply(e);var n=e.getLinework(),r=gc.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf};var Tf=function(){this._linework=null,this._linework=new wl};Tf.prototype.getLinework=function(){return this._linework},Tf.prototype.filter=function(t){if(t instanceof Jl){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Tf.prototype.interfaces_=function(){return[Bl]},Tf.prototype.getClass=function(){return Tf};var Mf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Mf.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Mf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Mf.prototype.getPoints=function(t){for(var e=new wl,n=wp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Mf.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new wu(l-u,c+s);r.add(h)}if(this._doRight){var p=new wu(l+u,c-s);r.add(p)}},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf};var kf=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new wl;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Cf(this._geom[0],this._boundaryDistanceTolerance),new Cf(this._geom[1],this._boundaryDistanceTolerance),new Cf(this._geom[2],this._boundaryDistanceTolerance)]},Pf={TOLERANCE:{configurable:!0}};kf.prototype.reportResult=function(t,e,n){qu.out.println("Overlay result invalid - A:"+Cu.toLocationSymbol(e[0])+" B:"+Cu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Cu.toLocationSymbol(e[2]))},kf.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},kf.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!kf.hasLocation(this._location,Cu.BOUNDARY)||this.isValidResult(r,this._location)}},kf.prototype.addTestPts=function(t){var e=new Mf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},kf.prototype.isValidResult=function(t,e){var n=If.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Cu.INTERIOR);return r||this.reportResult(t,e,n),r},kf.prototype.getInvalidLocation=function(){return this._invalidLocation},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},kf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Wp.computeSizeBasedSnapTolerance(t),Wp.computeSizeBasedSnapTolerance(e))},kf.isValid=function(t,e,n,r){return new kf(t,e,r).isValid(n)},Pf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(kf,Pf);var Af=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Af.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Af.prototype.combine=function(){for(var t=new wl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.combine=function(){if(1===arguments.length){var t=arguments[0];return new Af(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Af(Af.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Af(Af.createList(r,i,o)).combine()}},Af.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Af.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wl;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new wl;return a.add(r),a.add(i),a.add(o),a}};var Of=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new wl)},Lf={STRTREE_NODE_CAPACITY:{configurable:!0}};Of.prototype.reduceToGeometries=function(t){for(var e=new wl,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Mu(r,xl)?i=this.unionTree(r):r instanceof ul&&(i=r),e.add(i)}return e},Of.prototype.extractByEnvelope=function(t,e,n){for(var r=new wl,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Of.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Af.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Of.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ih(Of.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Of.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Of.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Of.getGeometry(e,n),Of.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Of.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Of.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Of.prototype.unionActual=function(t,e){return Of.restrictToPolygons(t.union(e))},Of.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Of.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new wl,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Af.combine(r)},Of.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Of.restrictToPolygons=function(t){if(Mu(t,Kl))return t;var e=xp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(gc.toPolygonArray(e))},Of.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Of.union=function(t){return new Of(t).union()},Lf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Of,Lf);var Nf=function(){};Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return If.createEmptyResult(If.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),rf.overlayOp(t,e,If.UNION)};var Rf=function(){return new Xi};Xi.prototype={constructor:Xi,reset:function(){this.s=this.t=0},add:function(t){Yi(Df,t,this.t),Yi(this,Df.s,this.s),this.s?this.t+=Df.t:this.s=Df.t},valueOf:function(){return this.s}};var Df=new Xi,zf=1e-6,Ff=Math.PI,Bf=Ff/2,jf=Ff/4,Vf=2*Ff,qf=180/Ff,Uf=Ff/180,Gf=Math.abs,Xf=Math.atan,Yf=Math.atan2,Zf=Math.cos,Wf=Math.exp,$f=Math.log,Hf=Math.sin,Kf=Math.sqrt,Jf=Math.tan,Qf={Feature:function(t,e){$i(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)$i(n[r].geometry,e)}},td={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Hi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Hi(n[r],e,0)},Polygon:function(t,e){Ki(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ki(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)$i(n[r],e)}},ed=function(t,e){t&&Qf.hasOwnProperty(t.type)?Qf[t.type](t,e):$i(t,e)},nd=(Rf(),Rf(),Rf(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});oo.invert=oo;var rd=function(t){function e(e){return e=t(e[0]*Uf,e[1]*Uf),e[0]*=qf,e[1]*=qf,e}return t=ao(t[0]*Uf,t[1]*Uf,t.length>2?t[2]*Uf:0),e.invert=function(e){return e=t.invert(e[0]*Uf,e[1]*Uf),e[0]*=qf,e[1]*=qf,e},e},id=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Wi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},od=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,p=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*p),c<1&&(e[0]=s+c*h,e[1]=u+c*p),!0}}}}},ad=function(t,e){return Gf(t[0]-e[0])<zf&&Gf(t[1]-e[1])<zf},sd=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(ad(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new ho(r,t,null,!0)),u.push(n.o=new ho(r,null,n,!1)),s.push(n=new ho(a,t,null,!1)),u.push(n.o=new ho(a,null,n,!0))}}),s.length){for(u.sort(e),po(s),po(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(l=p.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}},ud=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ld=(function(t){1===t.length&&(t=function(t){return function(e,n){return ud(t(e),n)}}(t))}(ud),function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}),cd=1e9,hd=-cd,pd=Rf(),fd=(Rf(),function(t){return t}),dd=(Rf(),Rf(),1/0),yd=dd,gd=-dd,md=gd,vd={point:function(t,e){t<dd&&(dd=t),t>gd&&(gd=t),e<yd&&(yd=e),e>md&&(md=e)},lineStart:Wi,lineEnd:Wi,polygonStart:Wi,polygonEnd:Wi,result:function(){var t=[[dd,yd],[gd,md]];return gd=md=-(yd=dd=1/0),t}},_d=(Rf(),function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);g.point(n[0],n[1])}function u(){x.point=s,g.lineStart()}function l(){x.point=a,g.lineEnd()}function c(t,e){y.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),y=[]}function p(){c(y[0][0],y[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),a=v.result(),s=a.length;if(y.pop(),f.push(y),y=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(yo))}var f,d,y,g=e(o),m=i.invert(r[0],r[1]),v=id(),_=e(v),b=!1,x={point:a,lineStart:u,lineEnd:l,polygonStart:function(){x.point=c,x.lineStart=h,x.lineEnd=p,d=[],f=[]},polygonEnd:function(){x.point=a,x.lineStart=u,x.lineEnd=l,d=ld(d);var t=function(t,e){var n=e[0],r=e[1],i=[Hf(n),-Zf(n),0],o=0,a=0;pd.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],p=h[0],f=h[1]/2+jf,d=Hf(f),y=Zf(f),g=0;g<c;++g,p=v,d=b,y=x,h=m){var m=l[g],v=m[0],_=m[1]/2+jf,b=Hf(_),x=Zf(_),w=v-p,E=w>=0?1:-1,S=E*w,I=S>Ff,C=d*b;if(pd.add(Yf(C*E*Hf(S),y*x+C*Zf(S))),o+=I?w+E*Vf:w,I^p>=n^v>=n){var T=eo(Qi(h),Qi(m));io(T);var M=eo(i,T);io(M);var k=(I^w>=0?-1:1)*Zi(M[2]);(r>k||r===k&&(T[0]||T[1]))&&(a+=I^w>=0?1:-1)}}return(o<-zf||o<zf&&pd<-zf)^1&a}(f,m);d.length?(b||(o.polygonStart(),b=!0),sd(d,go,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),bd=_d(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ff:-Ff,u=Gf(o-n);Gf(u-Ff)<zf?(t.point(n,r=(r+a)/2>0?Bf:-Bf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ff&&(Gf(n-i)<zf&&(n-=i*zf),Gf(o-s)<zf&&(o-=s*zf),r=function(t,e,n,r){var i,o,a=Hf(t-n);return Gf(a)>zf?Xf((Hf(e)*(o=Zf(r))*Hf(n)-Hf(r)*(i=Zf(e))*Hf(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Bf,r.point(-Ff,i),r.point(0,i),r.point(Ff,i),r.point(Ff,0),r.point(Ff,-i),r.point(0,-i),r.point(-Ff,-i),r.point(-Ff,0),r.point(-Ff,i);else if(Gf(t[0]-e[0])>zf){var o=t[0]<e[0]?Ff:-Ff;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-Ff,-Bf]),xd=function(t,e){function n(t,e){return Zf(t)*Zf(e)>o}function r(t,e,n){var r=[1,0,0],i=eo(Qi(t),Qi(e)),a=to(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var l=o*a/u,c=-o*s/u,h=eo(r,i),p=ro(r,l);no(p,ro(i,c));var f=h,d=to(p,f),y=to(f,f),g=d*d-y*(to(p,p)-1);if(!(g<0)){var m=Kf(g),v=ro(f,(-d-m)/y);if(no(v,p),v=Ji(v),!n)return v;var _,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(_=b,b=x,x=_);var S=x-b,I=Gf(S-Ff)<zf;if(!I&&E<w&&(_=w,w=E,E=_),I||S<zf?I?w+E>0^v[1]<(Gf(v[0]-b)<zf?w:E):w<=v[1]&&v[1]<=E:S>Ff^(b<=v[0]&&v[0]<=x)){var C=ro(f,(-d+m)/y);return no(C,p),[v,Ji(C)]}}}function i(e,n){var r=a?t:Ff-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Zf(t),a=o>0,s=Gf(o)>zf;return _d(n,function(t){var e,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,p){var f,d=[h,p],y=n(h,p),g=a?y?0:i(h,p):y?i(h+(h<0?Ff:-Ff),p):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(f=r(e,d))||ad(e,f)||ad(d,f))&&(d[0]+=zf,d[1]+=zf,y=n(d[0],d[1])),y!==u)c=0,y?(t.lineStart(),f=r(d,e),t.point(f[0],f[1])):(f=r(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(s&&e&&a^y){var m;g&o||!(m=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!y||e&&ad(e,d)||t.point(d[0],d[1]),e=d,u=y,o=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Zf(e),s=Hf(e),u=r*n;null==i?(i=e+r*Vf,o=e-u/2):(i=co(a,i),o=co(a,o),(r>0?i<o:i>o)&&(i+=r*Vf));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Ji([a,-s*Zf(c),-s*Hf(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)},a?[0,-t]:[-Ff,t-Ff])};vo.prototype={constructor:vo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wd=16,Ed=Zf(30*Uf),Sd=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,p,f,d,y,g){var m=l-r,v=c-i,_=m*m+v*v;if(_>4*e&&y--){var b=a+p,x=s+f,w=u+d,E=Kf(b*b+x*x+w*w),S=Zi(w/=E),I=Gf(Gf(w)-1)<zf||Gf(o-h)<zf?(o+h)/2:Yf(x,b),C=t(I,S),T=C[0],M=C[1],k=T-r,P=M-i,A=v*k-m*P;(A*A/_>e||Gf((m*k+v*P)/_-.5)>.3||a*p+s*f+u*d<Ed)&&(n(r,i,o,a,s,u,T,M,I,b/=E,x/=E,w,y,g),g.point(T,M),n(T,M,I,b,x,w,l,c,h,p,f,d,y,g))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){m=NaN,w.point=o,e.lineStart()}function o(r,i){var o=Qi([r,i]),a=t(r,i);n(m,v,g,_,b,x,m=a[0],v=a[1],g=r,_=o[0],b=o[1],x=o[2],wd,e),e.point(m,v)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=l}function u(t,e){o(c=t,e),h=m,p=v,f=_,d=b,y=x,w.point=o}function l(){n(m,v,g,_,b,x,h,p,c,f,d,y,wd,e),w.lineEnd=a,a()}var c,h,p,f,d,y,g,m,v,_,b,x,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return mo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Id=mo({point:function(t,e){this.stream.point(t*Uf,e*Uf)}});xo.invert=function(t,e){return[t,2*Xf(Wf(e))-Bf]},wo.invert=function(t,e){return[-e,2*Xf(Wf(t))-Bf]};var Cd=function(){var t=function(t){function e(){var e=Ff*s(),a=o(rd(o.rotate()).invert([0,0]));return l(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===xo?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,r),i]]:[[c,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=bo(t),a=o.center,s=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}(wo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.projection=Ca,t.random=fu,t.clusters=du,t.helpers=jo,t.invariant=qo,t.meta=Vo,t.isolines=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!S(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=rt(t,{zProperty:r,flip:!0});return l(function(t,e,n){var r=q(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,p=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach(function(t){T(t,p)}),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,i[a]);u[n]=s;var l=c(J(t,s),u);o.push(l)}return o}(a,e,r,i,o),a,t))},t.convex=kt,t.pointsWithinPolygon=Ot,t.concave=function(t,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!E(r))throw new Error("maxEdge is invalid");var i=Lt(function(t){var e=[],n={};return A(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),l(e)}(t));if(i.features=i.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=zt(e,i,n),s=zt(i,o,n),u=zt(e,o,n);return a<=r&&s<=r&&u<=r}),i.features.length<1)return null;var o=Qt(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Yo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=q(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Pt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),t},t.flip=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ft(t)),T(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Ft(t)),N(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;te(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=ae(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return ae(t,e,n)});break;case"Polygon":t.coordinates=se(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return se(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=ue,t.tag=function(t,e,n,r){return t=Ft(t),e=Ft(e),A(t,function(t){t.properties||(t.properties={}),A(e,function(e){void 0===t.properties[r]&&Pt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return l(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=ce,t.square=he,t.circle=fe,t.midpoint=function(t,e){return pe(t,zt(t,e)/2,de(t,e))},t.center=ye,t.centerOfMass=me,t.centroid=ge,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return A(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),l(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=zt,t.explode=ve,t.bbox=q,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Re(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Re(t))}),e},t.bboxPolygon=le,t.booleanPointInPolygon=Pt,t.nearestPoint=De,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return N(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==K(e))throw new Error("line must be a LineString");var o=1/0,a=null;return A(t,function(t){var n=dn(t,e,{units:r});n<o&&(o=n,a=t)}),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=U(t),r=$(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],d=r[1][1],y=void 0!==a?a:r[1][2],g=r[2][0],m=r[2][1],v=void 0!==s?s:r[2][2];return(v*(u-c)*(l-d)+p*(u-f)*(l-m)+y*(u-g)*(l-h)-y*(u-c)*(l-m)-v*(u-f)*(l-h)-p*(u-g)*(l-d))/((u-c)*(l-d)+(u-f)*(l-m)+(u-g)*(l-h)-(u-c)*(l-m)-(u-f)*(l-h)-(u-g)*(l-d))},t.tin=Lt,t.bearing=de,t.destination=pe,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,r,i,o,a,s){var u,l,c,h,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==f.x&&null!==f.y&&f:(l=e-o,c=t-i,h=(a-i)*l-(s-o)*c,p=(n-t)*l-(r-e)*c,l=h/u,c=p/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&i.features.push(r([a[0],a[1]]))}})}),i},t.pointOnFeature=gn,t.area=vn,t.along=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var u=de(i[a],i[a-1])-180;return pe(i[a],s,u,n)}return r(i[a])}o+=zt(i[a],i[a+1],n)}return r(i[i.length-1])},t.length=En,t.lineSlice=function(t,e,n){var r=G(n);if("LineString"!==K(n))throw new Error("line must be a LineString");for(var i,o=on(n,t),a=on(n,e),u=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)u.push(r[l]);return u.push(i[1].geometry.coordinates),s(u,n.properties)},t.lineSliceAlong=Sn,t.pointGrid=kn,t.truncate=Pn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return D(t,function(t){e.push(t)}),l(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return D(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=En(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){r(Sn(t,e*a,e*(a+1),{units:n}))}}(t,e,r,function(t){o.push(t)})}),l(o)},t.unkinkPolygon=function(t){var e=[];return D(t,function(t){"Polygon"===t.geometry.type&&A(ka(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),l(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=U(t),e=U(e),r=r||{},i=i||100,o=o||10,new za({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=K(t),r=K(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Pn(e,{precision:7});switch(r){case"Point":return Rn(t,i);case"MultiPoint":return Nn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Nn(t,nn(t,i))}},t.lineArc=Fn,t.polygonToLine=jn,t.lineToPolygon=qn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=G(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){Fa(t,e,a)}),1===a.length?s(a[0],i):c(a,i);case"Polygon":return o(Wn(r,e),i);case"MultiPolygon":return p(r.map(function(t){return Wn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Qn,t.sector=function(t,e,n,r,i){if(i=i||{},!S(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(er(n)===er(r))return fe(t,e,i);var a=G(t),s=[[a]];return T(Fn(t,e,n,r,i),function(t){s[0].push(t)}),s[0].push(a),o(s)},t.rhumbBearing=an,t.rhumbDistance=un,t.rhumbDestination=nr,t.polygonTangents=function(t,e){var n,i,o,a=G(t),s=G(e);switch(K(e)){case"Polygon":n=s[0][0],i=s[0][0],o=ir(s[0][0],s[0][s[0].length-1],a);var u=rr(s[0],a,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=s[0][0][0],i=s[0][0][0],o=ir(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach(function(t){var e=rr(t[0],a,o,void 0,n,i);n=e[0],i=e[1]})}return l([r(n),r(i)])},t.rewind=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ft(t));var i=[];switch(t.type){case"GeometryCollection":return N(t,function(t){ar(t,n)}),t;case"FeatureCollection":return A(t,function(t){A(ar(t,n),function(t){i.push(t)})}),l(i)}return ar(t,n)},t.isobands=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},a=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!S(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=lr(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var a=+e[i-1],s=+e[i],u=cr(t,a,s-a),l=function(t){var e=[],n=[];t.forEach(function(t){var r=vn(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}(u),c=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)if(!e[s].grouped){var u=o([e[s].lrCoordinates]);(function(t,e){for(var n=ve(t),r=0;r<n.features.length;r++)if(!Pt(n.features[r],e))return!1;return!0})(u,a)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(i)}return n}(l),h={};h.groupedRings=c,h[n]=a+"-"+s,r.push(h)}return r}(s,e,r);return l((u=function(t,e,n){var r=q(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,p=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}(u,s,t)).map(function(t,e){if(a[e]&&!S(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,a[e]);return n[r]=t[r],p(t.groupedRings,n)}))},t.transformRotate=fr,t.transformScale=dr,t.transformTranslate=function(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=Ft(t)),T(t,function(t){var r=G(nr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=K(t),o=t.properties;switch(i){case"LineString":return _r(t,e,r);case"MultiLineString":var a=[];return D(t,function(t){a.push(_r(t,e,r).geometry.coordinates)}),c(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=zs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){Rs.findEdgeRingContaining(t,r)&&r.push(t)}),l(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return D(t,function(t){D(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!wr(e,t);case"Polygon":return!Pt(t,e)}break;case"LineString":switch(e.type){case"Point":return!wr(t,e);case"LineString":return!function(t,e){return nn(t,e).features.length>0}(t,e);case"Polygon":return!Er(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Pt(e,t);case"LineString":return!Er(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Pt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(Pt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)})}),n},t.booleanContains=function(t,e){var n=K(t),r=K(e),i=$(t),o=$(e),a=G(t),s=G(e);switch(n){case"Point":switch(r){case"Point":return Ir(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Ir(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Ir(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return In(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(In({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!In({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(In(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!In(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Pt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Sr(q(t),q(e)))return!1;for(;r<e.coordinates.length-1;r++){if(Pt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){if(!Sr(q(t),q(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!Pt(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Pt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=K(t),r=K(e),i=$(t),o=$(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Cr(i,o);case"Polygon":return Mr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Cr(o,i);case"LineString":return function(t,e){if(nn(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),kr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return Tr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Mr(o,i);case"LineString":return Tr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=or,t.booleanOverlap=Lr,t.booleanPointOnLine=In,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return K(t)===K(e)&&new qs({precision:6}).compare(te(t),te(e))},t.booleanWithin=Cn,t.clone=Ft,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(W(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Ft(t),r=r||3;var o=new Zs.DBSCAN,a=-1;return o.run(L(t),x(e,i),r,zt).forEach(function(e){a++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;W(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Ft(t));var o=L(t),a=o.slice(0,n),s=tu(o,n,a),u={};return s.centroids.forEach(function(t,e){u[e]=t}),A(t,function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t},t.pointToLineDistance=dn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Rr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Rr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,r=en(te(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){return v(an(t[0],t[1]))===v(an(e[0],e[1]))}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.resolution,a=i.minDistance,u=i.obstacles||l([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var c=U(t),h=U(n);switch(t=r(c),n=r(h),K(u)){case"FeatureCollection":if(0===u.features.length)return s([c,h]);break;case"Polygon":u=l([e($(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=q(dr(le(q(p)),1.15));o||(o=zt([f[0],f[1]],[f[2],f[1]],i)/100),p.features.pop(),p.features.pop();for(var d=f[0],y=f[1],g=f[2],m=f[3],v=o/zt([d,y],[g,y],i)*(g-d),_=o/zt([d,y],[d,m],i)*(m-y),b=g-d,x=m-y,w=(b-Math.floor(b/v)*v)/2,I=[],C=[],T=[],M=[],k=1/0,P=1/0,A=m-(x-Math.floor(x/_)*_)/2,O=0;A>=y;){for(var L=[],N=[],R=d+w,D=0;R<=g;){var z=r([R,A]),F=function(t,e){for(var n=0;n<e.features.length;n++)if(Pt(t,e.features[n]))return!0;return!1}(z,u);L.push(F?0:1),N.push(R+"|"+A);var B=zt(z,t);!F&&B<k&&(k=B,T={x:D,y:O});var j=zt(z,n);!F&&j<P&&(P=j,M={x:D,y:O}),R+=v,D++}C.push(L),I.push(N),A-=_,O++}var V=new zr(C,{diagonal:!0}),G=V.grid[T.y][T.x],X=V.grid[M.y][M.x],Y=[c];return eu.search(V,G,X).forEach(function(t){var e=I[t.x][t.y].split("|");Y.push([+e[0],+e[1]])}),Y.push(h),te(s(Y))},t.voronoi=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return W(t,"Point","points"),l(pu().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(hi))},t.ellipse=pi,t.centerMean=di,t.centerMedian=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var r=e.weight,i=di(t,{weight:e.weight}),o=l([]);return A(t,function(t){o.features.push(ge(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},yi(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!S(i))throw new Error("properties must be a number");var o=L(t).length,a=di(t,{weight:r}),s=0,u=0,c=0;A(t,function(t){var e=t.properties[r]||1,n=gi(G(t),G(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e});var h=s-u,p=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),f=2*c,d=Math.atan((h+p)/f),y=180*d/Math.PI,g=0,m=0,v=0;A(t,function(t){var e=t.properties[r]||1,n=gi(G(t),G(a));g+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,m+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,v+=e});var _=Math.sqrt(2*g/v),b=Math.sqrt(2*m/v),x=pi(a,_,b,{units:"degrees",angle:y,steps:n,properties:i}),w=Ot(t,l([x])),I={meanCenterCoordinates:G(a),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:y,percentageWithinEllipse:100*L(w).length/o};return x.properties.standardDeviationalEllipse=I,x},t.difference=function(t,n){var r=$(t),i=$(n),o=t.properties||{};if(r=Gi(r),i=Gi(i),!r)return null;if(!i)return e(r,o);var a=new wc,s=a.read(r),u=a.read(i),l=If.difference(s,u);return l.isEmpty()?null:e((new Ec).write(l),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return N(t,function(t){var n=Eo(t,e,r,i);n&&o.push(n)}),l(o);case"FeatureCollection":return A(t,function(t){var n=Eo(t,e,r,i);n&&A(n,function(t){t&&o.push(t)})}),l(o)}return Eo(t,e,r,i)},t.union=Mo,t.intersect=ko,t.dissolve=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.propertyName;W(t,"Polygon","dissolve");var r=Ft(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var a=Je();a.load(r);for(var u in i){var l=i[u],c=!1;if(a.search(l).features.forEach(function(t){l=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Po(e,o);0!==r&&(e-=r)}if(e!==+u){var h=i[e];h&&l&&(void 0!==n&&h.properties[n]!==l.properties[n]||Lr(l,h)&&function(t,e){return nn(s(L(t)),s(L(e))).features.length>0}(l,h)&&(i[u]=Mo(l,h),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),a.remove(t),i.splice(e,1),l.properties.origIndexPosition=u,a.remove(l,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!l)continue;l.properties.origIndexPosition=u,a.insert(l),u--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.hexGrid=Ao,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],n=[];return D(t,function(t){var r=t.geometry.coordinates,i=r[0],a=r.slice(1);e.push(o([i])),a.forEach(function(t){n.push(o([t]))})}),[l(e),l(n)]}(t),i=r[0],a=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),D(e,function(t){r.push(t.geometry.coordinates[0])}),D(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}(n,i=Oo(i),a=Oo(a))},t.squareGrid=No,t.triangleGrid=Ro,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(W(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=q(t);switch(r){case"point":case"points":a=kn(s,e,n);break;case"square":case"squares":a=No(s,e,n);break;case"hex":case"hexes":a=Ao(s,e,n);break;case"triangle":case"triangles":a=Ro(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return A(a,function(e){var a=0,s=0;A(t,function(t){var u,l=zt("point"===r?e:ge(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(a=u);var c=1/Math.pow(l,o);s+=c,a+=c*u});var l=Ft(e);l.properties[i]=a/s,u.push(l)}),l(u)},t.pointOnSurface=gn,t.polygonToLineString=jn,t.lineStringToPolygon=qn,t.inside=Pt,t.within=Ot,t.bezier=ue,t.nearest=De,t.pointOnLine=on,t.lineDistance=En,t.radians2degrees=_,t.degrees2radians=b,t.distanceToDegrees=m,t.distanceToRadians=g,t.radiansToDistance=y,t.bearingToAngle=v,t.convertDistance=x,t.toMercator=ln,t.toWgs84=cn,t.randomPosition=mi,t.randomPoint=vi,t.randomPolygon=_i,t.randomLineString=bi,t.getCluster=wi,t.clusterEach=Ei,t.clusterReduce=Si,t.createBins=Ii,t.applyFilter=Ci,t.propertiesContainsFilter=Ti,t.filterProperties=Mi,t.earthRadius=Do,t.factors=zo,t.unitsFactors=Fo,t.areaFactors=Bo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=l,t.multiLineString=c,t.multiPoint=h,t.multiPolygon=p,t.geometryCollection=f,t.round=d,t.radiansToLength=y,t.lengthToRadians=g,t.lengthToDegrees=m,t.bearingToAzimuth=v,t.radiansToDegrees=_,t.degreesToRadians=b,t.convertLength=x,t.convertArea=w,t.isNumber=E,t.isObject=S,t.validateBBox=I,t.validateId=C,t.getCoord=U,t.getCoords=G,t.containsNumber=X,t.geojsonType=Y,t.featureOf=Z,t.collectionOf=W,t.getGeom=$,t.getGeomType=H,t.getType=K,t.coordEach=T,t.coordReduce=M,t.propEach=k,t.propReduce=P,t.featureEach=A,t.featureReduce=O,t.coordAll=L,t.geomEach=N,t.geomReduce=R,t.flattenEach=D,t.flattenReduce=z,t.segmentEach=F,t.segmentReduce=B,t.lineEach=j,t.lineReduce=V,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={MKEY:"pk.eyJ1IjoiZ2lvdmFyb21hMjciLCJhIjoiY2lrejEyOXloMGU3a3YybTN1aGFmazRteiJ9.IOmT_Y15wbxvtAk2GQudDA",IKEY:"2009c1af98b870da2b0bc9c39b0c4430"}},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(22),a=n(179),s=(n.n(a),function(t){return i.a.createElement("div",null,t.id1?i.a.createElement(o.b,{latitude:t.lat1,longitude:t.long1,closeButton:!0,closeOnClick:!1,anchor:"top"},i.a.createElement("div",{className:"TransactionPair__circle TransactionPair__circle--one"})):"",t.id2?i.a.createElement(o.b,{latitude:t.lat2,longitude:t.long2,closeButton:!0,closeOnClick:!1,anchor:"top"},i.a.createElement("div",{className:"TransactionPair__circle TransactionPair__circle--two"})):"")});e.a=s},function(t,e,n){n(102),t.exports=n(107)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(103).enable(),window.Promise=n(105)),n(106),Object.assign=n(21)},function(t,e,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(t){function e(e){(t.allRejections||a(h[e].error,t.whitelist||u))&&(h[e].displayId=c++,t.onUnhandled?(h[e].logged=!0,t.onUnhandled(h[e].displayId,h[e].error)):(h[e].logged=!0,o(h[e].displayId,h[e].error)))}function n(e){h[e].logged&&(t.onHandled?t.onHandled(h[e].displayId,h[e].error):h[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[e].displayId+".")))}t=t||{},l&&r(),l=!0;var i=0,c=0,h={};s._47=function(t){2===t._83&&h[t._56]&&(h[t._56].logged?n(t._56):clearTimeout(h[t._56].timeout),delete h[t._56])},s._71=function(t,n){0===t._75&&(t._56=i++,h[t._56]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._56),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(40),u=[ReferenceError,TypeError,RangeError],l=!1;e.disable=r,e.enable=i},function(t,e,n){"use strict";(function(e){function n(t){a.length||(o(),s=!0),a[a.length]=t}function r(){for(;u<a.length;){var t=u;if(u+=1,a[t].call(),u>l){for(var e=0,n=a.length-u;e<n;e++)a[e]=a[e+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof e?e:self,h=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof h?function(t){var e=1,n=new h(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(e,n(12))},function(t,e,n){"use strict";function r(t){var e=new i(i._44);return e._83=1,e._18=t,e}var i=n(40);t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return s;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return a;if(0===t)return l;if(""===t)return c;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,n){n(t)})}return r(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(t){r(a,t)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(t){r(a,t)},n)}}e[a]=s,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!==typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function l(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&_(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=p(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function g(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&v.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];g.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=f,t.Response=g,t.fetch=function(t,e){return new Promise(function(n,r){var i=new f(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new g(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(109),a=n.n(o),s=n(117),u=(n.n(s),n(118)),l=n(187);a.a.render(i.a.createElement(u.a,null),document.getElementById("root")),Object(l.a)()},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);v(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||O}function o(){}function a(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||O}function s(t,e,n){var r=void 0,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)R.call(e,r)&&!D.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:w,type:t,key:o,ref:a,props:i,_owner:N.current}}function u(t){return"object"===typeof t&&null!==t&&t.$$typeof===w}function l(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function c(t,e,n,r){if(F.length){var i=F.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function h(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>F.length&&F.push(t)}function p(t,e,n,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case w:case E:a=!0}}if(a)return n(i,t,""===e?"."+f(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){o=t[s];var u=e+f(o,s);a+=p(o,u,n,i)}else if(null===t||"undefined"===typeof t?u=null:(u=A&&t[A]||t["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=e+f(o,s++),a+=p(o,u,n,i);else"object"===o&&(n=""+t,r("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function f(t,e){return"object"===typeof t&&null!==t&&null!=t.key?l(t.key):e.toString(36)}function d(t,e){t.func.call(t.context,e,t.count++)}function y(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?g(t,r,n,b.thatReturnsArgument):null!=t&&(u(t)&&(e=i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(z,"$&/")+"/")+n,t={$$typeof:w,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),r.push(t))}function g(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(z,"$&/")+"/"),e=c(e,o,r,i),null==t||p(t,"",y,e),h(e)}var m=n(21),v=n(41),_=n(42),b=n(43),x="function"===typeof Symbol&&Symbol.for,w=x?Symbol.for("react.element"):60103,E=x?Symbol.for("react.portal"):60106,S=x?Symbol.for("react.fragment"):60107,I=x?Symbol.for("react.strict_mode"):60108,C=x?Symbol.for("react.profiler"):60114,T=x?Symbol.for("react.provider"):60109,M=x?Symbol.for("react.context"):60110,k=x?Symbol.for("react.async_mode"):60111,P=x?Symbol.for("react.forward_ref"):60112;x&&Symbol.for("react.timeout");var A="function"===typeof Symbol&&Symbol.iterator,O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&r("85"),this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=i.prototype;var L=a.prototype=new o;L.constructor=a,m(L,i.prototype),L.isPureReactComponent=!0;var N={current:null},R=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0},z=/\/+/g,F=[],B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return g(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=c(null,null,e,n),null==t||p(t,"",d,e),h(e)},count:function(t){return null==t?0:p(t,"",b.thatReturnsNull,null)},toArray:function(t){var e=[];return g(t,e,null,b.thatReturnsArgument),e},only:function(t){return u(t)||r("143"),t}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:M,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_currentValue2:t,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},t.Provider={$$typeof:T,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:P,render:t}},Fragment:S,StrictMode:I,unstable_AsyncMode:k,unstable_Profiler:C,createElement:s,cloneElement:function(t,e,n){(null===t||void 0===t)&&r("267",t);var i=void 0,o=m({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,u=N.current),void 0!==e.key&&(a=""+e.key);var l=void 0;t.type&&t.type.defaultProps&&(l=t.type.defaultProps);for(i in e)R.call(e,i)&&!D.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==l?l[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var c=0;c<i;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:w,type:t.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(t){var e=s.bind(null,t);return e.type=t,e},isValidElement:u,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:N,assign:m}},j={default:B},V=j&&B||j;t.exports=V.default?V.default:V},function(t,e,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}r(),t.exports=n(110)},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);Nr(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n,r,i,o,a,s,u){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this._caughtError=t,this._hasCaughtError=!0}}function o(){if(Ur._hasRethrowError){var t=Ur._rethrowError;throw Ur._rethrowError=null,Ur._hasRethrowError=!1,t}}function a(){if(Gr)for(var t in Xr){var e=Xr[t],n=Gr.indexOf(t);if(-1<n||r("96",t),!Yr[n]){e.extractEvents||r("97",t),Yr[n]=e,n=e.eventTypes;for(var i in n){var o=void 0,a=n[i],u=e,l=i;Zr.hasOwnProperty(l)&&r("99",l),Zr[l]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&s(c[o],u,l);o=!0}else a.registrationName?(s(a.registrationName,u,l),o=!0):o=!1;o||r("98",i,t)}}}}function s(t,e,n){Wr[t]&&r("100",t),Wr[t]=e,$r[t]=e.eventTypes[n].dependencies}function u(t){Gr&&r("101"),Gr=Array.prototype.slice.call(t),a()}function l(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];Xr.hasOwnProperty(e)&&Xr[e]===i||(Xr[e]&&r("102",e),Xr[e]=i,n=!0)}n&&a()}function c(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=Qr(r),Ur.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function h(t,e){return null==e&&r("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function p(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}function f(t,e){if(t){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)c(t,e,n[i],r[i]);else n&&c(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function d(t){return f(t,!0)}function y(t){return f(t,!1)}function g(t,e){var n=t.stateNode;if(!n)return null;var i=Kr(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(t=t.type,i=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&r("231",e,typeof n),n)}function m(t,e){null!==t&&(ti=h(ti,t)),t=ti,ti=null,t&&(e?p(t,d):p(t,y),ti&&r("95"),Ur.rethrowCaughtError())}function v(t,e,n,r){for(var i=null,o=0;o<Yr.length;o++){var a=Yr[o];a&&(a=a.extractEvents(t,e,n,r))&&(i=h(i,a))}m(i,!1)}function _(t){if(t[ii])return t[ii];for(;!t[ii];){if(!t.parentNode)return null;t=t.parentNode}return t=t[ii],5===t.tag||6===t.tag?t:null}function b(t){if(5===t.tag||6===t.tag)return t.stateNode;r("33")}function x(t){return t[oi]||null}function w(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function E(t,e,n){for(var r=[];t;)r.push(t),t=w(t);for(t=r.length;0<t--;)e(r[t],"captured",n);for(t=0;t<r.length;t++)e(r[t],"bubbled",n)}function S(t,e,n){(e=g(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=h(n._dispatchListeners,e),n._dispatchInstances=h(n._dispatchInstances,t))}function I(t){t&&t.dispatchConfig.phasedRegistrationNames&&E(t._targetInst,S,t)}function C(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;e=e?w(e):null,E(e,S,t)}}function T(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=g(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=h(n._dispatchListeners,e),n._dispatchInstances=h(n._dispatchInstances,t))}function M(t){t&&t.dispatchConfig.registrationName&&T(t._targetInst,null,t)}function k(t){p(t,I)}function P(t,e,n,r){if(n&&r)t:{for(var i=n,o=r,a=0,s=i;s;s=w(s))a++;s=0;for(var u=o;u;u=w(u))s++;for(;0<a-s;)i=w(i),a--;for(;0<s-a;)o=w(o),s--;for(;a--;){if(i===o||i===o.alternate)break t;i=w(i),o=w(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=w(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=w(r);for(r=0;r<i.length;r++)T(i[r],"bubbled",t);for(t=n.length;0<t--;)T(n[t],"captured",e)}function A(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function O(t){if(li[t])return li[t];if(!ui[t])return t;var e,n=ui[t];for(e in n)if(n.hasOwnProperty(e)&&e in ci)return li[t]=n[e];return t}function L(){return!gi&&Dr.canUseDOM&&(gi="textContent"in document.documentElement?"textContent":"innerText"),gi}function N(){if(mi._fallbackText)return mi._fallbackText;var t,e,n=mi._startText,r=n.length,i=R(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return mi._fallbackText=i.slice(t,1<e?1-e:void 0),mi._fallbackText}function R(){return"value"in mi._root?mi._root.value:mi._root[L()]}function D(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var i in t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Fr.thatReturnsTrue:Fr.thatReturnsFalse,this.isPropagationStopped=Fr.thatReturnsFalse,this}function z(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function F(t){t instanceof this||r("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function B(t){t.eventPool=[],t.getPooled=z,t.release=F}function j(t,e){switch(t){case"keyup":return-1!==wi.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function V(t){return t=t.detail,"object"===typeof t&&"data"in t?t.data:null}function q(t,e){switch(t){case"compositionend":return V(e);case"keypress":return 32!==e.which?null:(ki=!0,Ti);case"textInput":return t=e.data,t===Ti&&ki?null:t;default:return null}}function U(t,e){if(Pi)return"compositionend"===t||!Ei&&j(t,e)?(t=N(),mi._root=null,mi._startText=null,mi._fallbackText=null,Pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ci?null:e.data;default:return null}}function G(t){if(t=Jr(t)){Oi&&"function"===typeof Oi.restoreControlledState||r("194");var e=Kr(t.stateNode);Oi.restoreControlledState(t.stateNode,t.type,e)}}function X(t){Ni?Ri?Ri.push(t):Ri=[t]:Ni=t}function Y(){return null!==Ni||null!==Ri}function Z(){if(Ni){var t=Ni,e=Ri;if(Ri=Ni=null,G(t),e)for(t=0;t<e.length;t++)G(e[t])}}function W(t,e){return t(e)}function $(t,e,n){return t(e,n)}function H(){}function K(t,e){if(zi)return t(e);zi=!0;try{return W(t,e)}finally{zi=!1,Y()&&(H(),Z())}}function J(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Fi[t.type]:"textarea"===e}function Q(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function tt(t,e){return!(!Dr.canUseDOM||e&&!("addEventListener"in document))&&(t="on"+t,e=t in document,e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e)}function et(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function nt(t){var e=et(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rt(t){t._valueTracker||(t._valueTracker=nt(t))}function it(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=et(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function ot(t){return null===t||"undefined"===typeof t?null:(t=Ki&&t[Ki]||t["@@iterator"],"function"===typeof t?t:null)}function at(t){var e=t.type;if("function"===typeof e)return e.displayName||e.name;if("string"===typeof e)return e;switch(e){case Wi:return"AsyncMode";case Zi:return"Context.Consumer";case Ui:return"ReactFragment";case qi:return"ReactPortal";case Xi:return"Profiler("+t.pendingProps.id+")";case Yi:return"Context.Provider";case Gi:return"StrictMode";case Hi:return"Timeout"}if("object"===typeof e&&null!==e)switch(e.$$typeof){case $i:return t=e.render.displayName||e.render.name||"",""!==t?"ForwardRef("+t+")":"ForwardRef"}return null}function st(t){var e="";do{t:switch(t.tag){case 0:case 1:case 2:case 5:var n=t._debugOwner,r=t._debugSource,i=at(t),o=null;n&&(o=at(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break t;default:i=""}e+=i,t=t.return}while(t);return e}function ut(t){return!!to.hasOwnProperty(t)||!Qi.hasOwnProperty(t)&&(Ji.test(t)?to[t]=!0:(Qi[t]=!0,!1))}function lt(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}function ct(t,e,n,r){if(null===e||"undefined"===typeof e||lt(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}function pt(t){return t[1].toUpperCase()}function ft(t,e,n,r){var i=eo.hasOwnProperty(e)?eo[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(ct(e,n,i,r)&&(n=null),r||null===i?ut(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function dt(t,e){var n=e.checked;return zr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function yt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=bt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function gt(t,e){null!=(e=e.checked)&&ft(t,"checked",e,!1)}function mt(t,e){gt(t,e);var n=bt(e.value);null!=n&&("number"===e.type?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n)),e.hasOwnProperty("value")?_t(t,e.type,n):e.hasOwnProperty("defaultValue")&&_t(t,e.type,bt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function vt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){e=""+t._wrapperState.initialValue;var r=t.value;n||e===r||(t.value=e),t.defaultValue=e}n=t.name,""!==n&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==n&&(t.name=n)}function _t(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function bt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function xt(t,e,n){return t=D.getPooled(ro.change,t,e,n),t.type="change",X(n),k(t),t}function wt(t){m(t,!1)}function Et(t){if(it(b(t)))return t}function St(t,e){if("change"===t)return e}function It(){io&&(io.detachEvent("onpropertychange",Ct),oo=io=null)}function Ct(t){"value"===t.propertyName&&Et(oo)&&(t=xt(oo,t,Q(t)),K(wt,t))}function Tt(t,e,n){"focus"===t?(It(),io=e,oo=n,io.attachEvent("onpropertychange",Ct)):"blur"===t&&It()}function Mt(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Et(oo)}function kt(t,e){if("click"===t)return Et(e)}function Pt(t,e){if("input"===t||"change"===t)return Et(e)}function At(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=lo[t])&&!!e[t]}function Ot(){return At}function Lt(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(e=e.return,0!==(2&e.effectTag))return 1}return 3===e.tag?2:3}function Nt(t){2!==Lt(t)&&r("188")}function Rt(t){var e=t.alternate;if(!e)return e=Lt(t),3===e&&r("188"),1===e?null:t;for(var n=t,i=e;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Nt(o),t;if(s===i)return Nt(o),e;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?t:e}function Dt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function zt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Ft(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Bt(t,e){var n=t[0];t=t[1];var r="on"+(t[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},Co[t]=e,To[n]=e}function jt(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n;for(n=e;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(e),e=_(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],v(t.topLevelType,e,t.nativeEvent,Q(t.nativeEvent))}function Vt(t){Ao=!!t}function qt(t,e){if(!e)return null;var n=(ko(t)?Gt:Xt).bind(null,t);e.addEventListener(t,n,!1)}function Ut(t,e){if(!e)return null;var n=(ko(t)?Gt:Xt).bind(null,t);e.addEventListener(t,n,!0)}function Gt(t,e){$(Xt,t,e)}function Xt(t,e){if(Ao){var n=Q(e);if(n=_(n),null===n||"number"!==typeof n.tag||2===Lt(n)||(n=null),Po.length){var r=Po.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{K(jt,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Po.length&&Po.push(t)}}}function Yt(t){return Object.prototype.hasOwnProperty.call(t,Ro)||(t[Ro]=No++,Lo[t[Ro]]={}),Lo[t[Ro]]}function Zt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wt(t,e){var n=Zt(t);t=0;for(var r;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Zt(n)}}function $t(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Ht(t,e){if(Vo||null==Fo||Fo!==Br())return null;var n=Fo;return"selectionStart"in n&&$t(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,jo&&jr(jo,n)?null:(jo=n,t=D.getPooled(zo.select,Bo,t,e),t.type="select",t.target=Fo,k(t),t)}function Kt(t){var e="";return Rr.Children.forEach(t,function(t){null==t||"string"!==typeof t&&"number"!==typeof t||(e+=t)}),e}function Jt(t,e){return t=zr({children:void 0},e),(e=Kt(e.children))&&(t.children=e),t}function Qt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+n,e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function te(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}}function ee(t,e){return null!=e.dangerouslySetInnerHTML&&r("91"),zr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ne(t,e){var n=e.value;null==n&&(n=e.defaultValue,e=e.children,null!=e&&(null!=n&&r("92"),Array.isArray(e)&&(1>=e.length||r("93"),e=e[0]),n=""+e),null==n&&(n="")),t._wrapperState={initialValue:""+n}}function re(t,e){var n=e.value;null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)}function ie(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function oe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ae(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?oe(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function se(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function ue(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=e[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||da.hasOwnProperty(i)&&da[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}function le(t,e,n){e&&(ga[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&r("137",t,n()),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&r("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||r("61")),null!=e.style&&"object"!==typeof e.style&&r("62",n()))}function ce(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function he(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=Yt(t);e=$r[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Ut("scroll",t);break;case"focus":case"blur":Ut("focus",t),Ut("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":tt(i,!0)&&Ut(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===yi.indexOf(i)&&qt(i,t)}n[i]=!0}}}function pe(t,e,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===ha.html&&(r=oe(t)),r===ha.html?"script"===t?(t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):t="string"===typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(r,t),t}function fe(t,e){return(9===e.nodeType?e:e.ownerDocument).createTextNode(t)}function de(t,e,n,r){var i=ce(e,n);switch(e){case"iframe":case"object":qt("load",t);var o=n;break;case"video":case"audio":for(o=0;o<yi.length;o++)qt(yi[o],t);o=n;break;case"source":qt("error",t),o=n;break;case"img":case"image":case"link":qt("error",t),qt("load",t),o=n;break;case"form":qt("reset",t),qt("submit",t),o=n;break;case"details":qt("toggle",t),o=n;break;case"input":yt(t,n),o=dt(t,n),qt("invalid",t),he(r,"onChange");break;case"option":o=Jt(t,n);break;case"select":te(t,n),o=zr({},n,{value:void 0}),qt("invalid",t),he(r,"onChange");break;case"textarea":ne(t,n),o=ee(t,n),qt("invalid",t),he(r,"onChange");break;default:o=n}le(e,o,ma);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?ue(t,u,ma):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&fa(t,u):"children"===a?"string"===typeof u?("textarea"!==e||""!==u)&&se(t,u):"number"===typeof u&&se(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Wr.hasOwnProperty(a)?null!=u&&he(r,a):null!=u&&ft(t,a,u,i))}switch(e){case"input":rt(t),vt(t,n,!1);break;case"textarea":rt(t),ie(t,n);break;case"option":null!=n.value&&t.setAttribute("value",n.value);break;case"select":t.multiple=!!n.multiple,e=n.value,null!=e?Qt(t,!!n.multiple,e,!1):null!=n.defaultValue&&Qt(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Fr)}}function ye(t,e,n,r,i){var o=null;switch(e){case"input":n=dt(t,n),r=dt(t,r),o=[];break;case"option":n=Jt(t,n),r=Jt(t,r),o=[];break;case"select":n=zr({},n,{value:void 0}),r=zr({},r,{value:void 0}),o=[];break;case"textarea":n=ee(t,n),r=ee(t,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(t.onclick=Fr)}le(e,r,ma),e=t=void 0;var a=null;for(t in n)if(!r.hasOwnProperty(t)&&n.hasOwnProperty(t)&&null!=n[t])if("style"===t){var s=n[t];for(e in s)s.hasOwnProperty(e)&&(a||(a={}),a[e]="")}else"dangerouslySetInnerHTML"!==t&&"children"!==t&&"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&"autoFocus"!==t&&(Wr.hasOwnProperty(t)?o||(o=[]):(o=o||[]).push(t,null));for(t in r){var u=r[t];if(s=null!=n?n[t]:void 0,r.hasOwnProperty(t)&&u!==s&&(null!=u||null!=s))if("style"===t)if(s){for(e in s)!s.hasOwnProperty(e)||u&&u.hasOwnProperty(e)||(a||(a={}),a[e]="");for(e in u)u.hasOwnProperty(e)&&s[e]!==u[e]&&(a||(a={}),a[e]=u[e])}else a||(o||(o=[]),o.push(t,a)),a=u;else"dangerouslySetInnerHTML"===t?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(o=o||[]).push(t,""+u)):"children"===t?s===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(t,""+u):"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&(Wr.hasOwnProperty(t)?(null!=u&&he(i,t),o||s===u||(o=[])):(o=o||[]).push(t,u))}return a&&(o=o||[]).push("style",a),o}function ge(t,e,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&gt(t,i),ce(n,r),r=ce(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?ue(t,s,ma):"dangerouslySetInnerHTML"===a?fa(t,s):"children"===a?se(t,s):ft(t,a,s,r)}switch(n){case"input":mt(t,i);break;case"textarea":re(t,i);break;case"select":t._wrapperState.initialValue=void 0,e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?Qt(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Qt(t,!!i.multiple,i.defaultValue,!0):Qt(t,!!i.multiple,i.multiple?[]:"",!1))}}function me(t,e,n,r,i){switch(e){case"iframe":case"object":qt("load",t);break;case"video":case"audio":for(r=0;r<yi.length;r++)qt(yi[r],t);break;case"source":qt("error",t);break;case"img":case"image":case"link":qt("error",t),qt("load",t);break;case"form":qt("reset",t),qt("submit",t);break;case"details":qt("toggle",t);break;case"input":yt(t,n),qt("invalid",t),he(i,"onChange");break;case"select":te(t,n),qt("invalid",t),he(i,"onChange");break;case"textarea":ne(t,n),qt("invalid",t),he(i,"onChange")}le(e,n,ma),r=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"===typeof a?t.textContent!==a&&(r=["children",a]):"number"===typeof a&&t.textContent!==""+a&&(r=["children",""+a]):Wr.hasOwnProperty(o)&&null!=a&&he(i,o)}switch(e){case"input":rt(t),vt(t,n,!0);break;case"textarea":rt(t),ie(t,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(t.onclick=Fr)}return r}function ve(t,e){return t.nodeValue!==e}function _e(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function be(t,e){return"textarea"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&"string"===typeof e.dangerouslySetInnerHTML.__html}function xe(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function we(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Ee(t){return{current:t}}function Se(t){0>Ia||(t.current=Sa[Ia],Sa[Ia]=null,Ia--)}function Ie(t,e){Ia++,Sa[Ia]=t.current,t.current=e}function Ce(t){return Me(t)?Ma:Ca.current}function Te(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Me(t){return 2===t.tag&&null!=t.type.childContextTypes}function ke(t){Me(t)&&(Se(Ta,t),Se(Ca,t))}function Pe(t){Se(Ta,t),Se(Ca,t)}function Ae(t,e,n){Ca.current!==qr&&r("168"),Ie(Ca,e,t),Ie(Ta,n,t)}function Oe(t,e){var n=t.stateNode,i=t.type.childContextTypes;if("function"!==typeof n.getChildContext)return e;n=n.getChildContext();for(var o in n)o in i||r("108",at(t)||"Unknown",o);return zr({},e,n)}function Le(t){if(!Me(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||qr,Ma=Ca.current,Ie(Ca,e,t),Ie(Ta,Ta.current,t),!0}function Ne(t,e){var n=t.stateNode;if(n||r("169"),e){var i=Oe(t,Ma);n.__reactInternalMemoizedMergedChildContext=i,Se(Ta,t),Se(Ca,t),Ie(Ca,i,t)}else Se(Ta,t);Ie(Ta,e,t)}function Re(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=e,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function De(t,e,n){var r=t.alternate;return null===r?(r=new Re(t.tag,e,t.key,t.mode),r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ze(t,e,n){var i=t.type,o=t.key;if(t=t.props,"function"===typeof i)var a=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"===typeof i)a=5;else switch(i){case Ui:return Fe(t.children,e,n,o);case Wi:a=11,e|=3;break;case Gi:a=11,e|=2;break;case Xi:return i=new Re(15,t,o,4|e),i.type=Xi,i.expirationTime=n,i;case Hi:a=16,e|=2;break;default:t:{switch("object"===typeof i&&null!==i?i.$$typeof:null){case Yi:a=13;break t;case Zi:a=12;break t;case $i:a=14;break t;default:r("130",null==i?i:typeof i,"")}a=void 0}}return e=new Re(a,t,o,e),e.type=i,e.expirationTime=n,e}function Fe(t,e,n,r){return t=new Re(10,t,r,e),t.expirationTime=n,t}function Be(t,e,n){return t=new Re(6,t,null,e),t.expirationTime=n,t}function je(t,e,n){return e=new Re(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ve(t,e,n){return e=new Re(3,null,null,e?3:0),t={current:e,containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},e.stateNode=t}function qe(t){return function(e){try{return t(e)}catch(t){}}}function Ue(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);ka=qe(function(t){return e.onCommitFiberRoot(n,t)}),Pa=qe(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0}function Ge(t){"function"===typeof ka&&ka(t)}function Xe(t){"function"===typeof Pa&&Pa(t)}function Ye(t){return{expirationTime:0,baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ze(t){return{expirationTime:t.expirationTime,baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function We(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function $e(t,e,n){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e),(0===t.expirationTime||t.expirationTime>n)&&(t.expirationTime=n)}function He(t,e,n){var r=t.alternate;if(null===r){var i=t.updateQueue,o=null;null===i&&(i=t.updateQueue=Ye(t.memoizedState))}else i=t.updateQueue,o=r.updateQueue,null===i?null===o?(i=t.updateQueue=Ye(t.memoizedState),o=r.updateQueue=Ye(r.memoizedState)):i=t.updateQueue=Ze(o):null===o&&(o=r.updateQueue=Ze(i));null===o||i===o?$e(i,e,n):null===i.lastUpdate||null===o.lastUpdate?($e(i,e,n),$e(o,e,n)):($e(i,e,n),o.lastUpdate=e)}function Ke(t,e,n){var r=t.updateQueue;r=null===r?t.updateQueue=Ye(t.memoizedState):Je(t,r),null===r.lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=e:(r.lastCapturedUpdate.next=e,r.lastCapturedUpdate=e),(0===r.expirationTime||r.expirationTime>n)&&(r.expirationTime=n)}function Je(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Ze(e)),e}function Qe(t,e,n,r,i,o){switch(n.tag){case 1:return t=n.payload,"function"===typeof t?t.call(o,r,i):t;case 3:t.effectTag=-1025&t.effectTag|64;case 0:if(t=n.payload,null===(i="function"===typeof t?t.call(o,r,i):t)||void 0===i)break;return zr({},r,i);case 2:Aa=!0}return r}function tn(t,e,n,r,i){if(Aa=!1,!(0===e.expirationTime||e.expirationTime>i)){e=Je(t,e);for(var o=e.baseState,a=null,s=0,u=e.firstUpdate,l=o;null!==u;){var c=u.expirationTime;c>i?(null===a&&(a=u,o=l),(0===s||s>c)&&(s=c)):(l=Qe(t,e,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h>i?(null===c&&(c=u,null===a&&(o=l)),(0===s||s>h)&&(s=h)):(l=Qe(t,e,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===a&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===c&&(o=l),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=c,e.expirationTime=s,t.memoizedState=l}}function en(t,e){"function"!==typeof t&&r("191",t),t.call(e)}function nn(t,e,n){for(null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),t=e.firstEffect,e.firstEffect=e.lastEffect=null;null!==t;){var r=t.callback;null!==r&&(t.callback=null,en(r,n)),t=t.nextEffect}for(t=e.firstCapturedEffect,e.firstCapturedEffect=e.lastCapturedEffect=null;null!==t;)e=t.callback,null!==e&&(t.callback=null,en(e,n)),t=t.nextEffect}function rn(t,e){return{value:t,source:e,stack:st(e)}}function on(t){var e=t.type._context;Ie(Na,e._changedBits,t),Ie(La,e._currentValue,t),Ie(Oa,t,t),e._currentValue=t.pendingProps.value,e._changedBits=t.stateNode}function an(t){var e=Na.current,n=La.current;Se(Oa,t),Se(La,t),Se(Na,t),t=t.type._context,t._currentValue=n,t._changedBits=e}function sn(t){return t===Ra&&r("174"),t}function un(t,e){Ie(Fa,e,t),Ie(za,t,t),Ie(Da,Ra,t);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ae(null,"");break;default:n=8===n?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ae(e,n)}Se(Da,t),Ie(Da,e,t)}function ln(t){Se(Da,t),Se(za,t),Se(Fa,t)}function cn(t){za.current===t&&(Se(Da,t),Se(za,t))}function hn(t,e,n){var r=t.memoizedState;e=e(n,r),r=null===e||void 0===e?r:zr({},r,e),t.memoizedState=r,null!==(t=t.updateQueue)&&0===t.expirationTime&&(t.baseState=r)}function pn(t,e,n,r,i,o){var a=t.stateNode;return t=t.type,"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!jr(e,n)||!jr(r,i))}function fn(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function dn(t,e){var n=t.type,r=t.stateNode,i=t.pendingProps,o=Ce(t);r.props=i,r.state=t.memoizedState,r.refs=qr,r.context=Te(t,o),o=t.updateQueue,null!==o&&(tn(t,o,i,r,e),r.state=t.memoizedState),o=t.type.getDerivedStateFromProps,"function"===typeof o&&(hn(t,o,i),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(n=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&Ba.enqueueReplaceState(r,r.state,null),null!==(o=t.updateQueue)&&(tn(t,o,i,r,e),r.state=t.memoizedState)),"function"===typeof r.componentDidMount&&(t.effectTag|=4)}function yn(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var i=void 0;n&&(2!==n.tag&&r("110"),i=n.stateNode),i||r("147",t);var o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs===qr?i.refs={}:i.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}"string"!==typeof t&&r("148"),n._owner||r("254",t)}return t}function gn(t,e){"textarea"!==t.type&&r("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function mn(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,n){return t=De(t,e,n),t.index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=2,n):r):(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?(e=Be(n,t.mode,r),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function l(t,e,n,r){return null!==e&&e.type===n.type?(r=o(e,n.props,r),r.ref=yn(t,e,n),r.return=t,r):(r=ze(n,t.mode,r),r.ref=yn(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=je(n,t.mode,r),e.return=t,e):(e=o(e,n.children||[],r),e.return=t,e)}function h(t,e,n,r,i){return null===e||10!==e.tag?(e=Fe(n,t.mode,r,i),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function p(t,e,n){if("string"===typeof e||"number"===typeof e)return e=Be(""+e,t.mode,n),e.return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Vi:return n=ze(e,t.mode,n),n.ref=yn(t,null,e),n.return=t,n;case qi:return e=je(e,t.mode,n),e.return=t,e}if(ja(e)||ot(e))return e=Fe(e,t.mode,n,null),e.return=t,e;gn(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Vi:return n.key===i?n.type===Ui?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case qi:return n.key===i?c(t,e,n,r):null}if(ja(n)||ot(n))return null!==i?null:h(t,e,n,r,null);gn(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return t=t.get(n)||null,u(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Vi:return t=t.get(null===r.key?n:r.key)||null,r.type===Ui?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case qi:return t=t.get(null===r.key?n:r.key)||null,c(e,t,r,i)}if(ja(r)||ot(r))return t=t.get(n)||null,h(e,t,r,i,null);gn(e,r)}return null}function y(r,o,s,u){for(var l=null,c=null,h=o,y=o=0,g=null;null!==h&&y<s.length;y++){h.index>y?(g=h,h=null):g=h.sibling;var m=f(r,h,s[y],u);if(null===m){null===h&&(h=g);break}t&&h&&null===m.alternate&&e(r,h),o=a(m,o,y),null===c?l=m:c.sibling=m,c=m,h=g}if(y===s.length)return n(r,h),l;if(null===h){for(;y<s.length;y++)(h=p(r,s[y],u))&&(o=a(h,o,y),null===c?l=h:c.sibling=h,c=h);return l}for(h=i(r,h);y<s.length;y++)(g=d(h,r,y,s[y],u))&&(t&&null!==g.alternate&&h.delete(null===g.key?y:g.key),o=a(g,o,y),null===c?l=g:c.sibling=g,c=g);return t&&h.forEach(function(t){return e(r,t)}),l}function g(o,s,u,l){var c=ot(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var h=c=null,y=s,g=s=0,m=null,v=u.next();null!==y&&!v.done;g++,v=u.next()){y.index>g?(m=y,y=null):m=y.sibling;var _=f(o,y,v.value,l);if(null===_){y||(y=m);break}t&&y&&null===_.alternate&&e(o,y),s=a(_,s,g),null===h?c=_:h.sibling=_,h=_,y=m}if(v.done)return n(o,y),c;if(null===y){for(;!v.done;g++,v=u.next())null!==(v=p(o,v.value,l))&&(s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return c}for(y=i(o,y);!v.done;g++,v=u.next())null!==(v=d(y,o,g,v.value,l))&&(t&&null!==v.alternate&&y.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return t&&y.forEach(function(t){return e(o,t)}),c}return function(t,i,a,u){var l="object"===typeof a&&null!==a&&a.type===Ui&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case Vi:t:{for(c=a.key,l=i;null!==l;){if(l.key===c){if(10===l.tag?a.type===Ui:l.type===a.type){n(t,l.sibling),i=o(l,a.type===Ui?a.props.children:a.props,u),i.ref=yn(t,l,a),i.return=t,t=i;break t}n(t,l);break}e(t,l),l=l.sibling}a.type===Ui?(i=Fe(a.props.children,t.mode,u,a.key),i.return=t,t=i):(u=ze(a,t.mode,u),u.ref=yn(t,i,a),u.return=t,t=u)}return s(t);case qi:t:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),i=o(i,a.children||[],u),i.return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}i=je(a,t.mode,u),i.return=t,t=i}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),i=o(i,a,u),i.return=t,t=i):(n(t,i),i=Be(a,t.mode,u),i.return=t,t=i),s(t);if(ja(a))return y(t,i,a,u);if(ot(a))return g(t,i,a,u);if(c&&gn(t,a),"undefined"===typeof a&&!l)switch(t.tag){case 2:case 1:u=t.type,r("152",u.displayName||u.name||"Component")}return n(t,i)}}function vn(t,e){var n=new Re(5,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function _n(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function bn(t){if(Xa){var e=Ga;if(e){var n=e;if(!_n(t,e)){if(!(e=xe(n))||!_n(t,e))return t.effectTag|=2,Xa=!1,void(Ua=t);vn(Ua,n)}Ua=t,Ga=we(e)}else t.effectTag|=2,Xa=!1,Ua=t}}function xn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;Ua=t}function wn(t){if(t!==Ua)return!1;if(!Xa)return xn(t),Xa=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!be(e,t.memoizedProps))for(e=Ga;e;)vn(t,e),e=xe(e);return xn(t),Ga=Ua?xe(t.stateNode):null,!0}function En(){Ga=Ua=null,Xa=!1}function Sn(t,e,n){In(t,e,n,e.expirationTime)}function In(t,e,n,r){e.child=null===t?qa(e,null,n,r):Va(e,t.child,n,r)}function Cn(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Tn(t,e,n,r,i){Cn(t,e);var o=0!==(64&e.effectTag);if(!n&&!o)return r&&Ne(e,!1),An(t,e);n=e.stateNode,Bi.current=e;var a=o?null:n.render();return e.effectTag|=1,o&&(In(t,e,null,i),e.child=null),In(t,e,a,i),e.memoizedState=n.state,e.memoizedProps=n.props,r&&Ne(e,!0),e.child}function Mn(t){var e=t.stateNode;e.pendingContext?Ae(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ae(t,e.context,!1),un(t,e.containerInfo)}function kn(t,e,n,r){var i=t.child;for(null!==i&&(i.return=t);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===e&&0!==(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===t.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Pn(t,e,n){var r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=!0;if(Ta.current)a=!1;else if(o===i)return e.stateNode=0,on(e),An(t,e);var s=i.value;if(e.memoizedProps=i,null===o)s=1073741823;else if(o.value===i.value){if(o.children===i.children&&a)return e.stateNode=0,on(e),An(t,e);s=0}else{var u=o.value;if(u===s&&(0!==u||1/u===1/s)||u!==u&&s!==s){if(o.children===i.children&&a)return e.stateNode=0,on(e),An(t,e);s=0}else if(s="function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,s):1073741823,0===(s|=0)){if(o.children===i.children&&a)return e.stateNode=0,on(e),An(t,e)}else kn(e,r,s,n)}return e.stateNode=s,on(e),Sn(t,e,i.children),e.child}function An(t,e){if(null!==t&&e.child!==t.child&&r("153"),null!==e.child){t=e.child;var n=De(t,t.pendingProps,t.expirationTime);for(e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=De(t,t.pendingProps,t.expirationTime),n.return=e;n.sibling=null}return e.child}function On(t,e,n){if(0===e.expirationTime||e.expirationTime>n){switch(e.tag){case 3:Mn(e);break;case 2:Le(e);break;case 4:un(e,e.stateNode.containerInfo);break;case 13:on(e)}return null}switch(e.tag){case 0:null!==t&&r("155");var i=e.type,o=e.pendingProps,a=Ce(e);return a=Te(e,a),i=i(o,a),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(a=e.type,e.tag=2,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,a=a.getDerivedStateFromProps,"function"===typeof a&&hn(e,a,o),o=Le(e),i.updater=Ba,e.stateNode=i,i._reactInternalFiber=e,dn(e,n),t=Tn(t,e,!0,o,n)):(e.tag=1,Sn(t,e,i),e.memoizedProps=o,t=e.child),t;case 1:return o=e.type,n=e.pendingProps,Ta.current||e.memoizedProps!==n?(i=Ce(e),i=Te(e,i),o=o(n,i),e.effectTag|=1,Sn(t,e,o),e.memoizedProps=n,t=e.child):t=An(t,e),t;case 2:if(o=Le(e),null===t)if(null===e.stateNode){var s=e.pendingProps,u=e.type;i=Ce(e);var l=2===e.tag&&null!=e.type.contextTypes;a=l?Te(e,i):qr,s=new u(s,a),e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Ba,e.stateNode=s,s._reactInternalFiber=e,l&&(l=e.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=i,l.__reactInternalMemoizedMaskedChildContext=a),dn(e,n),i=!0}else{u=e.type,i=e.stateNode,l=e.memoizedProps,a=e.pendingProps,i.props=l;var c=i.context;s=Ce(e),s=Te(e,s);var h=u.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==a||c!==s)&&fn(e,i,a,s),Aa=!1;var p=e.memoizedState;c=i.state=p;var f=e.updateQueue;null!==f&&(tn(e,f,a,i,n),c=e.memoizedState),l!==a||p!==c||Ta.current||Aa?("function"===typeof h&&(hn(e,h,a),c=e.memoizedState),(l=Aa||pn(e,l,a,p,c,s))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(e.effectTag|=4)):("function"===typeof i.componentDidMount&&(e.effectTag|=4),e.memoizedProps=a,e.memoizedState=c),i.props=a,i.state=c,i.context=s,i=l):("function"===typeof i.componentDidMount&&(e.effectTag|=4),i=!1)}else u=e.type,i=e.stateNode,a=e.memoizedProps,l=e.pendingProps,i.props=a,c=i.context,s=Ce(e),s=Te(e,s),h=u.getDerivedStateFromProps,(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==l||c!==s)&&fn(e,i,l,s),Aa=!1,c=e.memoizedState,p=i.state=c,f=e.updateQueue,null!==f&&(tn(e,f,l,i,n),p=e.memoizedState),a!==l||c!==p||Ta.current||Aa?("function"===typeof h&&(hn(e,h,l),p=e.memoizedState),(h=Aa||pn(e,a,l,c,p,s))?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(l,p,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(l,p,s)),"function"===typeof i.componentDidUpdate&&(e.effectTag|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof i.componentDidUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),e.memoizedProps=l,e.memoizedState=p),i.props=l,i.state=p,i.context=s,i=h):("function"!==typeof i.componentDidUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),i=!1);return Tn(t,e,i,o,n);case 3:return Mn(e),o=e.updateQueue,null!==o?(i=e.memoizedState,i=null!==i?i.element:null,tn(e,o,e.pendingProps,null,n),(o=e.memoizedState.element)===i?(En(),t=An(t,e)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(Ga=we(e.stateNode.containerInfo),Ua=e,i=Xa=!0),i?(e.effectTag|=2,e.child=qa(e,null,o,n)):(En(),Sn(t,e,o)),t=e.child)):(En(),t=An(t,e)),t;case 5:return sn(Fa.current),o=sn(Da.current),i=ae(o,e.type),o!==i&&(Ie(za,e,e),Ie(Da,i,e)),null===t&&bn(e),o=e.type,l=e.memoizedProps,i=e.pendingProps,a=null!==t?t.memoizedProps:null,Ta.current||l!==i||((l=1&e.mode&&!!i.hidden)&&(e.expirationTime=1073741823),l&&1073741823===n)?(l=i.children,be(o,i)?l=null:a&&be(o,a)&&(e.effectTag|=16),Cn(t,e),1073741823!==n&&1&e.mode&&i.hidden?(e.expirationTime=1073741823,e.memoizedProps=i,t=null):(Sn(t,e,l),e.memoizedProps=i,t=e.child)):t=An(t,e),t;case 6:return null===t&&bn(e),e.memoizedProps=e.pendingProps,null;case 16:return null;case 4:return un(e,e.stateNode.containerInfo),o=e.pendingProps,Ta.current||e.memoizedProps!==o?(null===t?e.child=Va(e,null,o,n):Sn(t,e,o),e.memoizedProps=o,t=e.child):t=An(t,e),t;case 14:return o=e.type.render,n=e.pendingProps,i=e.ref,Ta.current||e.memoizedProps!==n||i!==(null!==t?t.ref:null)?(o=o(n,i),Sn(t,e,o),e.memoizedProps=n,t=e.child):t=An(t,e),t;case 10:return n=e.pendingProps,Ta.current||e.memoizedProps!==n?(Sn(t,e,n),e.memoizedProps=n,t=e.child):t=An(t,e),t;case 11:return n=e.pendingProps.children,Ta.current||null!==n&&e.memoizedProps!==n?(Sn(t,e,n),e.memoizedProps=n,t=e.child):t=An(t,e),t;case 15:return n=e.pendingProps,e.memoizedProps===n?t=An(t,e):(Sn(t,e,n.children),e.memoizedProps=n,t=e.child),t;case 13:return Pn(t,e,n);case 12:t:if(i=e.type,a=e.pendingProps,l=e.memoizedProps,o=i._currentValue,s=i._changedBits,Ta.current||0!==s||l!==a){if(e.memoizedProps=a,u=a.unstable_observedBits,void 0!==u&&null!==u||(u=1073741823),e.stateNode=u,0!==(s&u))kn(e,i,s,n);else if(l===a){t=An(t,e);break t}n=a.children,n=n(o),e.effectTag|=1,Sn(t,e,n),t=e.child}else t=An(t,e);return t;default:r("156")}}function Ln(t){t.effectTag|=4}function Nn(t,e){var n=e.pendingProps;switch(e.tag){case 1:return null;case 2:return ke(e),null;case 3:ln(e),Pe(e);var i=e.stateNode;return i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(wn(e),e.effectTag&=-3),Ya(e),null;case 5:cn(e),i=sn(Fa.current);var o=e.type;if(null!==t&&null!=e.stateNode){var a=t.memoizedProps,s=e.stateNode,u=sn(Da.current);s=ye(s,o,a,n,i),Za(t,e,s,o,a,n,i,u),t.ref!==e.ref&&(e.effectTag|=128)}else{if(!n)return null===e.stateNode&&r("166"),null;if(t=sn(Da.current),wn(e))n=e.stateNode,o=e.type,a=e.memoizedProps,n[ii]=e,n[oi]=a,i=me(n,o,a,t,i),e.updateQueue=i,null!==i&&Ln(e);else{t=pe(o,n,i,t),t[ii]=e,t[oi]=n;t:for(a=e.child;null!==a;){if(5===a.tag||6===a.tag)t.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}de(t,o,n,i),_e(o,n)&&Ln(e),e.stateNode=t}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Wa(t,e,t.memoizedProps,n);else{if("string"!==typeof n)return null===e.stateNode&&r("166"),null;i=sn(Fa.current),sn(Da.current),wn(e)?(i=e.stateNode,n=e.memoizedProps,i[ii]=e,ve(i,n)&&Ln(e)):(i=fe(n,i),i[ii]=e,e.stateNode=i)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return ln(e),Ya(e),null;case 13:return an(e),null;case 12:return null;case 0:r("167");default:r("156")}}function Rn(t,e){var n=e.source;null===e.stack&&null!==n&&st(n),null!==n&&at(n),e=e.value,null!==t&&2===t.tag&&at(t);try{e&&e.suppressReactErrorLogging||console.error(e)}catch(t){t&&t.suppressReactErrorLogging||console.error(t)}}function Dn(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(e){Hn(t,e)}else e.current=null}function zn(t){switch("function"===typeof Xe&&Xe(t),t.tag){case 2:Dn(t);var e=t.stateNode;if("function"===typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Hn(t,e)}break;case 5:Dn(t);break;case 4:jn(t)}}function Fn(t){return 5===t.tag||3===t.tag||4===t.tag}function Bn(t){t:{for(var e=t.return;null!==e;){if(Fn(e)){var n=e;break t}e=e.return}r("160"),n=void 0}var i=e=void 0;switch(n.tag){case 5:e=n.stateNode,i=!1;break;case 3:case 4:e=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(se(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||Fn(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var o=t;;){if(5===o.tag||6===o.tag)if(n)if(i){var a=e,s=o.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else e.insertBefore(o.stateNode,n);else i?(a=e,s=o.stateNode,8===a.nodeType?a.parentNode.insertBefore(s,a):a.appendChild(s)):e.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function jn(t){for(var e=t,n=!1,i=void 0,o=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,o=!1;break t;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var a=e,s=a;;)if(zn(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=i,s=e.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):i.removeChild(e.stateNode)}else if(4===e.tag?i=e.stateNode.containerInfo:zn(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return,4===e.tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function Vn(t,e){switch(e.tag){case 2:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var o=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&(n[oi]=i,ge(n,a,o,t,i))}break;case 6:null===e.stateNode&&r("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 15:case 16:break;default:r("163")}}function qn(t,e,n){n=We(n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dr(r),Rn(t,e)},n}function Un(t,e,n){n=We(n),n.tag=3;var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){null===ls?ls=new Set([this]):ls.add(this);var n=e.value,r=e.stack;Rn(t,e),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function Gn(t,e,n,r,i,o){n.effectTag|=512,n.firstEffect=n.lastEffect=null,r=rn(r,n),t=e;do{switch(t.tag){case 3:return t.effectTag|=1024,r=qn(t,r,o),void Ke(t,r,o);case 2:if(e=r,n=t.stateNode,0===(64&t.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&(null===ls||!ls.has(n)))return t.effectTag|=1024,r=Un(t,e,o),void Ke(t,r,o)}t=t.return}while(null!==t)}function Xn(t){switch(t.tag){case 2:ke(t);var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return ln(t),Pe(t),e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 5:return cn(t),null;case 16:return e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 4:return ln(t),null;case 13:return an(t),null;default:return null}}function Yn(){if(null!==es)for(var t=es.return;null!==t;){var e=t;switch(e.tag){case 2:ke(e);break;case 3:ln(e),Pe(e);break;case 5:cn(e);break;case 4:ln(e);break;case 13:an(e)}t=t.return}ns=null,rs=0,is=-1,os=!1,es=null,us=!1}function Zn(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(512&t.effectTag)){e=Nn(e,t,rs);var i=t;if(1073741823===rs||1073741823!==i.expirationTime){var o=0;switch(i.tag){case 3:case 2:var a=i.updateQueue;null!==a&&(o=a.expirationTime)}for(a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==e)return e;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==r)return r;if(null===n){us=!0;break}t=n}else{if(null!==(t=Xn(t,os,rs)))return t.effectTag&=511,t;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;t=n}}return null}function Wn(t){var e=On(t.alternate,t,rs);return null===e&&(e=Zn(t)),Bi.current=null,e}function $n(t,e,n){ts&&r("243"),ts=!0,e===rs&&t===ns&&null!==es||(Yn(),ns=t,rs=e,is=-1,es=De(ns.current,null,rs),t.pendingCommitExpirationTime=0);var i=!1;for(os=!n||rs<=Ha;;){try{if(n)for(;null!==es&&!fr();)es=Wn(es);else for(;null!==es;)es=Wn(es)}catch(e){if(null===es)i=!0,dr(e);else{null===es&&r("271"),n=es;var o=n.return;if(null===o){i=!0,dr(e);break}Gn(t,o,n,e,os,rs,Ka),es=Zn(n)}}break}if(ts=!1,i)return null;if(null===es){if(us)return t.pendingCommitExpirationTime=e,t.current.alternate;os&&r("262"),0<=is&&setTimeout(function(){var e=t.current.expirationTime;0!==e&&(0===t.remainingExpirationTime||t.remainingExpirationTime<e)&&ir(t,e)},is),yr(t.current.expirationTime)}return null}function Hn(t,e){var n;t:{for(ts&&!ss&&r("263"),n=t.return;null!==n;){switch(n.tag){case 2:var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof i.componentDidCatch&&(null===ls||!ls.has(i))){t=rn(e,t),t=Un(n,t,1),He(n,t,1),Qn(n,1),n=void 0;break t}break;case 3:t=rn(e,t),t=qn(n,t,1),He(n,t,1),Qn(n,1),n=void 0;break t}n=n.return}3===t.tag&&(n=rn(e,t),n=qn(t,n,1),He(t,n,1),Qn(t,1)),n=void 0}return n}function Kn(){var t=2+25*(1+((tr()-2+500)/25|0));return t<=Ja&&(t=Ja+1),Ja=t}function Jn(t,e){return t=0!==Qa?Qa:ts?ss?1:rs:1&e.mode?Ss?2+10*(1+((t-2+15)/10|0)):2+25*(1+((t-2+500)/25|0)):1,Ss&&(0===ms||t>ms)&&(ms=t),t}function Qn(t,e){for(;null!==t;){if((0===t.expirationTime||t.expirationTime>e)&&(t.expirationTime=e),null!==t.alternate&&(0===t.alternate.expirationTime||t.alternate.expirationTime>e)&&(t.alternate.expirationTime=e),null===t.return){if(3!==t.tag)break;var n=t.stateNode;!ts&&0!==rs&&e<rs&&Yn();var i=n.current.expirationTime;ts&&!ss&&ns===n||ir(n,i),Ts>Cs&&r("185")}t=t.return}}function tr(){return Ka=xa()-$a,Ha=2+(Ka/10|0)}function er(t){var e=Qa;Qa=2+25*(1+((tr()-2+500)/25|0));try{return t()}finally{Qa=e}}function nr(t,e,n,r,i){var o=Qa;Qa=1;try{return t(e,n,r,i)}finally{Qa=o}}function rr(t){if(0!==ps){if(t>ps)return;null!==fs&&Ea(fs)}var e=xa()-$a;ps=t,fs=wa(ar,{timeout:10*(t-2)-e})}function ir(t,e){if(null===t.nextScheduledRoot)t.remainingExpirationTime=e,null===hs?(cs=hs=t,t.nextScheduledRoot=t):(hs=hs.nextScheduledRoot=t,hs.nextScheduledRoot=cs);else{var n=t.remainingExpirationTime;(0===n||e<n)&&(t.remainingExpirationTime=e)}ds||(ws?Es&&(ys=t,gs=1,hr(t,1,!1)):1===e?sr():rr(e))}function or(){var t=0,e=null;if(null!==hs)for(var n=hs,i=cs;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===hs)&&r("244"),i===i.nextScheduledRoot){cs=hs=i.nextScheduledRoot=null;break}if(i===cs)cs=o=i.nextScheduledRoot,hs.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===hs){hs=n,hs.nextScheduledRoot=cs,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===t||o<t)&&(t=o,e=i),i===hs)break;n=i,i=i.nextScheduledRoot}}n=ys,null!==n&&n===e&&1===t?Ts++:Ts=0,ys=e,gs=t}function ar(t){ur(0,!0,t)}function sr(){ur(1,!1,null)}function ur(t,e,n){if(xs=n,or(),e)for(;null!==ys&&0!==gs&&(0===t||t>=gs)&&(!vs||tr()>=gs);)tr(),hr(ys,gs,!vs),or();else for(;null!==ys&&0!==gs&&(0===t||t>=gs);)hr(ys,gs,!1),or();null!==xs&&(ps=0,fs=null),0!==gs&&rr(gs),xs=null,vs=!1,cr()}function lr(t,e){ds&&r("253"),ys=t,gs=e,hr(t,e,!1),sr(),cr()}function cr(){if(Ts=0,null!==Is){var t=Is;Is=null;for(var e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){_s||(_s=!0,bs=t)}}}if(_s)throw t=bs,bs=null,_s=!1,t}function hr(t,e,n){ds&&r("245"),ds=!0,n?(n=t.finishedWork,null!==n?pr(t,n,e):null!==(n=$n(t,e,!0))&&(fr()?t.finishedWork=n:pr(t,n,e))):(n=t.finishedWork,null!==n?pr(t,n,e):null!==(n=$n(t,e,!1))&&pr(t,n,e)),ds=!1}function pr(t,e,n){var i=t.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===Is?Is=[i]:Is.push(i),i._defer))return t.finishedWork=e,void(t.remainingExpirationTime=0);if(t.finishedWork=null,ss=ts=!0,n=e.stateNode,n.current===e&&r("177"),i=n.pendingCommitExpirationTime,0===i&&r("261"),n.pendingCommitExpirationTime=0,tr(),Bi.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var o=e.firstEffect}else o=e;else o=e.firstEffect;_a=Ao;var a=Br();if($t(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else t:{var u=window.getSelection&&window.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var l=u.anchorOffset,c=u.focusNode;u=u.focusOffset;try{s.nodeType,c.nodeType}catch(t){s=null;break t}var h=0,p=-1,f=-1,d=0,y=0,g=a,m=null;e:for(;;){for(var v;g!==s||0!==l&&3!==g.nodeType||(p=h+l),g!==c||0!==u&&3!==g.nodeType||(f=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)m=g,g=v;for(;;){if(g===a)break e;if(m===s&&++d===l&&(p=h),m===c&&++y===u&&(f=h),null!==(v=g.nextSibling))break;g=m,m=g.parentNode}g=v}s=-1===p||-1===f?null:{start:p,end:f}}else s=null}s=s||{start:0,end:0}}else s=null;for(ba={focusedElem:a,selectionRange:s},Vt(!1),as=o;null!==as;){a=!1,s=void 0;try{for(;null!==as;){if(256&as.effectTag){var _=as.alternate;switch(l=as,l.tag){case 2:if(256&l.effectTag&&null!==_){var b=_.memoizedProps,x=_.memoizedState,w=l.stateNode;w.props=l.memoizedProps,w.state=l.memoizedState;var E=w.getSnapshotBeforeUpdate(b,x);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:case 5:case 6:case 4:break;default:r("163")}}as=as.nextEffect}}catch(t){a=!0,s=t}a&&(null===as&&r("178"),Hn(as,s),null!==as&&(as=as.nextEffect))}for(as=o;null!==as;){_=!1,b=void 0;try{for(;null!==as;){var S=as.effectTag;if(16&S&&se(as.stateNode,""),128&S){var I=as.alternate;if(null!==I){var C=I.ref;null!==C&&("function"===typeof C?C(null):C.current=null)}}switch(14&S){case 2:Bn(as),as.effectTag&=-3;break;case 6:Bn(as),as.effectTag&=-3,Vn(as.alternate,as);break;case 4:Vn(as.alternate,as);break;case 8:x=as,jn(x),x.return=null,x.child=null,x.alternate&&(x.alternate.child=null,x.alternate.return=null)}as=as.nextEffect}}catch(t){_=!0,b=t}_&&(null===as&&r("178"),Hn(as,b),null!==as&&(as=as.nextEffect))}if(C=ba,I=Br(),S=C.focusedElem,_=C.selectionRange,I!==S&&Vr(document.documentElement,S)){null!==_&&$t(S)&&(I=_.start,C=_.end,void 0===C&&(C=I),"selectionStart"in S?(S.selectionStart=I,S.selectionEnd=Math.min(C,S.value.length)):window.getSelection&&(I=window.getSelection(),b=S[L()].length,C=Math.min(_.start,b),_=void 0===_.end?C:Math.min(_.end,b),!I.extend&&C>_&&(b=_,_=C,C=b),b=Wt(S,C),x=Wt(S,_),b&&x&&(1!==I.rangeCount||I.anchorNode!==b.node||I.anchorOffset!==b.offset||I.focusNode!==x.node||I.focusOffset!==x.offset)&&(w=document.createRange(),w.setStart(b.node,b.offset),I.removeAllRanges(),C>_?(I.addRange(w),I.extend(x.node,x.offset)):(w.setEnd(x.node,x.offset),I.addRange(w))))),I=[];for(C=S;C=C.parentNode;)1===C.nodeType&&I.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<I.length;S++)C=I[S],C.element.scrollLeft=C.left,C.element.scrollTop=C.top}for(ba=null,Vt(_a),_a=null,n.current=e,as=o;null!==as;){o=!1,S=void 0;try{for(I=i;null!==as;){var T=as.effectTag;if(36&T){var M=as.alternate;switch(C=as,_=I,C.tag){case 2:var k=C.stateNode;if(4&C.effectTag)if(null===M)k.props=C.memoizedProps,k.state=C.memoizedState,k.componentDidMount();else{var P=M.memoizedProps,A=M.memoizedState;k.props=C.memoizedProps,k.state=C.memoizedState,k.componentDidUpdate(P,A,k.__reactInternalSnapshotBeforeUpdate)}var O=C.updateQueue;null!==O&&(k.props=C.memoizedProps,k.state=C.memoizedState,nn(C,O,k,_));break;case 3:var N=C.updateQueue;if(null!==N){if(b=null,null!==C.child)switch(C.child.tag){case 5:b=C.child.stateNode;break;case 2:b=C.child.stateNode}nn(C,N,b,_)}break;case 5:var R=C.stateNode;null===M&&4&C.effectTag&&_e(C.type,C.memoizedProps)&&R.focus();break;case 6:case 4:case 15:case 16:break;default:r("163")}}if(128&T){C=void 0;var D=as.ref;if(null!==D){var z=as.stateNode;switch(as.tag){case 5:C=z;break;default:C=z}"function"===typeof D?D(C):D.current=C}}var F=as.nextEffect;as.nextEffect=null,as=F}}catch(t){o=!0,S=t}o&&(null===as&&r("178"),Hn(as,S),null!==as&&(as=as.nextEffect))}ts=ss=!1,"function"===typeof Ge&&Ge(e.stateNode),e=n.current.expirationTime,0===e&&(ls=null),t.remainingExpirationTime=e}function fr(){return!(null===xs||xs.timeRemaining()>Ms)&&(vs=!0)}function dr(t){null===ys&&r("246"),ys.remainingExpirationTime=0,_s||(_s=!0,bs=t)}function yr(t){null===ys&&r("246"),ys.remainingExpirationTime=t}function gr(t,e){var n=ws;ws=!0;try{return t(e)}finally{(ws=n)||ds||sr()}}function mr(t,e){if(ws&&!Es){Es=!0;try{return t(e)}finally{Es=!1}}return t(e)}function vr(t,e){ds&&r("187");var n=ws;ws=!0;try{return nr(t,e)}finally{ws=n,sr()}}function _r(t,e,n){if(Ss)return t(e,n);ws||ds||0===ms||(ur(ms,!1,null),ms=0);var r=Ss,i=ws;ws=Ss=!0;try{return t(e,n)}finally{Ss=r,(ws=i)||ds||sr()}}function br(t){var e=ws;ws=!0;try{nr(t)}finally{(ws=e)||ds||ur(1,!1,null)}}function xr(t,e,n,i,o){var a=e.current;if(n){n=n._reactInternalFiber;var s;t:{for(2===Lt(n)&&2===n.tag||r("170"),s=n;3!==s.tag;){if(Me(s)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}(s=s.return)||r("171")}s=s.stateNode.context}n=Me(n)?Oe(n,s):s}else n=qr;return null===e.context?e.context=n:e.pendingContext=n,e=o,o=We(i),o.payload={element:t},e=void 0===e?null:e,null!==e&&(o.callback=e),He(a,o,i),Qn(a,i),i}function wr(t){var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?r("188"):r("268",Object.keys(t))),t=Dt(e),null===t?null:t.stateNode}function Er(t,e,n,r){var i=e.current;return i=Jn(tr(),i),xr(t,e,n,i,r)}function Sr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ir(t){var e=t.findFiberByHostInstance;return Ue(zr({},t,{findHostInstanceByFiber:function(t){return t=Dt(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}function Cr(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:qi,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Tr(t){this._expirationTime=Kn(),this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Mr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function kr(t,e,n){this._internalRoot=Ve(t,e,n)}function Pr(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ar(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new kr(t,!1,e)}function Or(t,e,n,i,o){Pr(n)||r("200");var a=n._reactRootContainer;if(a){if("function"===typeof o){var s=o;o=function(){var t=Sr(a._internalRoot);s.call(t)}}null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)}else{if(a=n._reactRootContainer=Ar(n,i),"function"===typeof o){var u=o;o=function(){var t=Sr(a._internalRoot);u.call(t)}}mr(function(){null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)})}return Sr(a._internalRoot)}function Lr(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Pr(e)||r("200"),Cr(t,e,null,n)}var Nr=n(41),Rr=n(0),Dr=n(111),zr=n(21),Fr=n(43),Br=n(112),jr=n(113),Vr=n(114),qr=n(42);Rr||r("227");var Ur={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(t,e,n,r,o,a,s,u,l){i.apply(Ur,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,r,i,o,a,s,u){if(Ur.invokeGuardedCallback.apply(this,arguments),Ur.hasCaughtError()){var l=Ur.clearCaughtError();Ur._hasRethrowError||(Ur._hasRethrowError=!0,Ur._rethrowError=l)}},rethrowCaughtError:function(){return o.apply(Ur,arguments)},hasCaughtError:function(){return Ur._hasCaughtError},clearCaughtError:function(){if(Ur._hasCaughtError){var t=Ur._caughtError;return Ur._caughtError=null,Ur._hasCaughtError=!1,t}r("198")}},Gr=null,Xr={},Yr=[],Zr={},Wr={},$r={},Hr={plugins:Yr,eventNameDispatchConfigs:Zr,registrationNameModules:Wr,registrationNameDependencies:$r,possibleRegistrationNames:null,injectEventPluginOrder:u,injectEventPluginsByName:l},Kr=null,Jr=null,Qr=null,ti=null,ei={injectEventPluginOrder:u,injectEventPluginsByName:l},ni={injection:ei,getListener:g,runEventsInBatch:m,runExtractedEventsInBatch:v},ri=Math.random().toString(36).slice(2),ii="__reactInternalInstance$"+ri,oi="__reactEventHandlers$"+ri,ai={precacheFiberNode:function(t,e){e[ii]=t},getClosestInstanceFromNode:_,getInstanceFromNode:function(t){return t=t[ii],!t||5!==t.tag&&6!==t.tag?null:t},getNodeFromInstance:b,getFiberCurrentPropsFromNode:x,updateFiberProps:function(t,e){t[oi]=e}},si={accumulateTwoPhaseDispatches:k,accumulateTwoPhaseDispatchesSkipTarget:function(t){p(t,C)},accumulateEnterLeaveDispatches:P,accumulateDirectDispatches:function(t){p(t,M)}},ui={animationend:A("Animation","AnimationEnd"),animationiteration:A("Animation","AnimationIteration"),animationstart:A("Animation","AnimationStart"),transitionend:A("Transition","TransitionEnd")},li={},ci={};Dr.canUseDOM&&(ci=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);var hi=O("animationend"),pi=O("animationiteration"),fi=O("animationstart"),di=O("transitionend"),yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gi=null,mi={_root:null,_startText:null,_fallbackText:null},vi="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),_i={type:null,target:null,currentTarget:Fr.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};zr(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Fr.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Fr.thatReturnsTrue)},persist:function(){this.isPersistent=Fr.thatReturnsTrue},isPersistent:Fr.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<vi.length;e++)this[vi[e]]=null}}),D.Interface=_i,D.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return zr(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=zr({},r.Interface,t),n.extend=r.extend,B(n),n},B(D);var bi=D.extend({data:null}),xi=D.extend({data:null}),wi=[9,13,27,32],Ei=Dr.canUseDOM&&"CompositionEvent"in window,Si=null;Dr.canUseDOM&&"documentMode"in document&&(Si=document.documentMode);var Ii=Dr.canUseDOM&&"TextEvent"in window&&!Si,Ci=Dr.canUseDOM&&(!Ei||Si&&8<Si&&11>=Si),Ti=String.fromCharCode(32),Mi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ki=!1,Pi=!1,Ai={eventTypes:Mi,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(Ei)t:{switch(t){case"compositionstart":i=Mi.compositionStart;break t;case"compositionend":i=Mi.compositionEnd;break t;case"compositionupdate":i=Mi.compositionUpdate;break t}i=void 0}else Pi?j(t,n)&&(i=Mi.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=Mi.compositionStart);return i?(Ci&&(Pi||i!==Mi.compositionStart?i===Mi.compositionEnd&&Pi&&(o=N()):(mi._root=r,mi._startText=R(),Pi=!0)),i=bi.getPooled(i,e,n,r),o?i.data=o:null!==(o=V(n))&&(i.data=o),k(i),o=i):o=null,(t=Ii?q(t,n):U(t,n))?(e=xi.getPooled(Mi.beforeInput,e,n,r),e.data=t,k(e)):e=null,null===o?e:null===e?o:[o,e]}},Oi=null,Li={injectFiberControlledHostComponent:function(t){Oi=t}},Ni=null,Ri=null,Di={injection:Li,enqueueStateRestore:X,needsStateRestore:Y,restoreStateIfNeeded:Z},zi=!1,Fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Bi=Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ji="function"===typeof Symbol&&Symbol.for,Vi=ji?Symbol.for("react.element"):60103,qi=ji?Symbol.for("react.portal"):60106,Ui=ji?Symbol.for("react.fragment"):60107,Gi=ji?Symbol.for("react.strict_mode"):60108,Xi=ji?Symbol.for("react.profiler"):60114,Yi=ji?Symbol.for("react.provider"):60109,Zi=ji?Symbol.for("react.context"):60110,Wi=ji?Symbol.for("react.async_mode"):60111,$i=ji?Symbol.for("react.forward_ref"):60112,Hi=ji?Symbol.for("react.timeout"):60113,Ki="function"===typeof Symbol&&Symbol.iterator,Ji=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qi={},to={},eo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){eo[t]=new ht(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];eo[e]=new ht(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){eo[t]=new ht(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(t){eo[t]=new ht(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){eo[t]=new ht(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){eo[t]=new ht(t,3,!0,t.toLowerCase(),null)}),["capture","download"].forEach(function(t){eo[t]=new ht(t,4,!1,t.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(t){eo[t]=new ht(t,6,!1,t.toLowerCase(),null)}),["rowSpan","start"].forEach(function(t){eo[t]=new ht(t,5,!1,t.toLowerCase(),null)});var no=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(no,pt);eo[e]=new ht(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(no,pt);eo[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(no,pt);eo[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),eo.tabIndex=new ht("tabIndex",1,!1,"tabindex",null);var ro={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},io=null,oo=null,ao=!1;Dr.canUseDOM&&(ao=tt("input")&&(!document.documentMode||9<document.documentMode));var so={eventTypes:ro,_isInputEventSupported:ao,extractEvents:function(t,e,n,r){var i=e?b(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=St:J(i)?ao?o=Pt:(o=Mt,a=Tt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=kt),o&&(o=o(t,e)))return xt(o,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&_t(i,"number",i.value)}},uo=D.extend({view:null,detail:null}),lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},co=uo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ot,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}}),ho=co.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),po={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},fo={eventTypes:po,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?_(e):null):o=null,o===e)return null;var a=void 0,s=void 0,u=void 0,l=void 0;return"mouseout"===t||"mouseover"===t?(a=co,s=po.mouseLeave,u=po.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=ho,s=po.pointerLeave,u=po.pointerEnter,l="pointer"),t=null==o?i:b(o),i=null==e?i:b(e),s=a.getPooled(s,o,n,r),s.type=l+"leave",s.target=t,s.relatedTarget=i,n=a.getPooled(u,e,n,r),n.type=l+"enter",n.target=i,n.relatedTarget=t,P(s,n,o,e),[s,n]}},yo=D.extend({animationName:null,elapsedTime:null,pseudoElement:null}),go=D.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mo=uo.extend({relatedTarget:null}),vo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bo=uo.extend({key:function(t){if(t.key){var e=vo[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=Ft(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?_o[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ot,charCode:function(t){return"keypress"===t.type?Ft(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Ft(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),xo=co.extend({dataTransfer:null}),wo=uo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ot}),Eo=D.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),So=co.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),Io=[["abort","abort"],[hi,"animationEnd"],[pi,"animationIteration"],[fi,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[di,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Co={},To={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){Bt(t,!0)}),Io.forEach(function(t){Bt(t,!1)});var Mo={eventTypes:Co,isInteractiveTopLevelEventType:function(t){return void 0!==(t=To[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=To[t];if(!i)return null;switch(t){case"keypress":if(0===Ft(n))return null;case"keydown":case"keyup":t=bo;break;case"blur":case"focus":t=mo;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=xo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=wo;break;case hi:case pi:case fi:t=yo;break;case di:t=Eo;break;case"scroll":t=uo;break;case"wheel":t=So;break;case"copy":case"cut":case"paste":t=go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=ho;break;default:t=D}return e=t.getPooled(i,e,n,r),k(e),e}},ko=Mo.isInteractiveTopLevelEventType,Po=[],Ao=!0,Oo={get _enabled(){return Ao},setEnabled:Vt,isEnabled:function(){return Ao},trapBubbledEvent:qt,trapCapturedEvent:Ut,dispatchEvent:Xt},Lo={},No=0,Ro="_reactListenersID"+(""+Math.random()).slice(2),Do=Dr.canUseDOM&&"documentMode"in document&&11>=document.documentMode,zo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Fo=null,Bo=null,jo=null,Vo=!1,qo={eventTypes:zo,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Yt(o),i=$r.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?b(e):window,t){case"focus":(J(o)||"true"===o.contentEditable)&&(Fo=o,Bo=e,jo=null);break;case"blur":jo=Bo=Fo=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":return Vo=!1,Ht(n,r);case"selectionchange":if(Do)break;case"keydown":case"keyup":return Ht(n,r)}return null}};ei.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Kr=ai.getFiberCurrentPropsFromNode,Jr=ai.getInstanceFromNode,Qr=ai.getNodeFromInstance,ei.injectEventPluginsByName({SimpleEventPlugin:Mo,EnterLeaveEventPlugin:fo,ChangeEventPlugin:so,SelectEventPlugin:qo,BeforeInputEventPlugin:Ai});var Uo="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,Go=Date,Xo=setTimeout,Yo=clearTimeout,Zo=void 0;if("object"===typeof performance&&"function"===typeof performance.now){var Wo=performance;Zo=function(){return Wo.now()}}else Zo=function(){return Go.now()};var $o=void 0,Ho=void 0;if(Dr.canUseDOM){var Ko="function"===typeof Uo?Uo:function(){r("276")},Jo=null,Qo=null,ta=-1,ea=!1,na=!1,ra=0,ia=33,oa=33,aa={didTimeout:!1,timeRemaining:function(){var t=ra-Zo();return 0<t?t:0}},sa=function(t,e){var n=t.scheduledCallback,r=!1;try{n(e),r=!0}finally{Ho(t),r||(ea=!0,window.postMessage(ua,"*"))}},ua="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===ua&&(ea=!1,null!==Jo)){if(null!==Jo){var e=Zo();if(!(-1===ta||ta>e)){t=-1;for(var n=[],r=Jo;null!==r;){var i=r.timeoutTime;-1!==i&&i<=e?n.push(r):-1!==i&&(-1===t||i<t)&&(t=i),r=r.next}if(0<n.length)for(aa.didTimeout=!0,e=0,r=n.length;e<r;e++)sa(n[e],aa);ta=t}}for(t=Zo();0<ra-t&&null!==Jo;)t=Jo,aa.didTimeout=!1,sa(t,aa),t=Zo();null===Jo||na||(na=!0,Ko(la))}},!1);var la=function(t){na=!1;var e=t-ra+oa;e<oa&&ia<oa?(8>e&&(e=8),oa=e<ia?ia:e):ia=e,ra=t+oa,ea||(ea=!0,window.postMessage(ua,"*"))};$o=function(t,e){var n=-1;return null!=e&&"number"===typeof e.timeout&&(n=Zo()+e.timeout),(-1===ta||-1!==n&&n<ta)&&(ta=n),t={scheduledCallback:t,timeoutTime:n,prev:null,next:null},null===Jo?Jo=t:null!==(e=t.prev=Qo)&&(e.next=t),Qo=t,na||(na=!0,Ko(la)),t},Ho=function(t){if(null!==t.prev||Jo===t){var e=t.next,n=t.prev;t.next=null,t.prev=null,null!==e?null!==n?(n.next=e,e.prev=n):(e.prev=null,Jo=e):null!==n?(n.next=null,Qo=n):Qo=Jo=null}}}else{var ca=new Map;$o=function(t){var e={scheduledCallback:t,timeoutTime:0,next:null,prev:null},n=Xo(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})});return ca.set(t,n),e},Ho=function(t){var e=ca.get(t.scheduledCallback);ca.delete(t),Yo(e)}}var ha={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},pa=void 0,fa=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n)})}:t}(function(t,e){if(t.namespaceURI!==ha.svg||"innerHTML"in t)t.innerHTML=e;else{for(pa=pa||document.createElement("div"),pa.innerHTML="<svg>"+e+"</svg>",e=pa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}),da={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ya=["Webkit","ms","Moz","O"];Object.keys(da).forEach(function(t){ya.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),da[e]=da[t]})});var ga=zr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ma=Fr.thatReturns(""),va={createElement:pe,createTextNode:fe,setInitialProperties:de,diffProperties:ye,updateProperties:ge,diffHydratedProperties:me,diffHydratedText:ve,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":if(mt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=x(i);o||r("90"),it(i),mt(i,o)}}}break;case"textarea":re(t,n);break;case"select":null!=(e=n.value)&&Qt(t,!!n.multiple,e,!1)}}},_a=null,ba=null,xa=Zo,wa=$o,Ea=Ho;new Set;var Sa=[],Ia=-1,Ca=Ee(qr),Ta=Ee(!1),Ma=qr,ka=null,Pa=null,Aa=!1,Oa=Ee(null),La=Ee(null),Na=Ee(0),Ra={},Da=Ee(Ra),za=Ee(Ra),Fa=Ee(Ra),Ba={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===Lt(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=tr();r=Jn(r,t);var i=We(r);i.payload=e,void 0!==n&&null!==n&&(i.callback=n),He(t,i,r),Qn(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=tr();r=Jn(r,t);var i=We(r);i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),He(t,i,r),Qn(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=tr();n=Jn(n,t);var r=We(n);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),He(t,r,n),Qn(t,n)}},ja=Array.isArray,Va=mn(!0),qa=mn(!1),Ua=null,Ga=null,Xa=!1,Ya=void 0,Za=void 0,Wa=void 0;Ya=function(){},Za=function(t,e,n){(e.updateQueue=n)&&Ln(e)},Wa=function(t,e,n,r){n!==r&&Ln(e)};var $a=xa(),Ha=2,Ka=$a,Ja=0,Qa=0,ts=!1,es=null,ns=null,rs=0,is=-1,os=!1,as=null,ss=!1,us=!1,ls=null,cs=null,hs=null,ps=0,fs=void 0,ds=!1,ys=null,gs=0,ms=0,vs=!1,_s=!1,bs=null,xs=null,ws=!1,Es=!1,Ss=!1,Is=null,Cs=1e3,Ts=0,Ms=1,ks={updateContainerAtExpirationTime:xr,createContainer:function(t,e,n){return Ve(t,e,n)},updateContainer:Er,flushRoot:lr,requestWork:ir,computeUniqueAsyncExpiration:Kn,batchedUpdates:gr,unbatchedUpdates:mr,deferredUpdates:er,syncUpdates:nr,interactiveUpdates:_r,flushInteractiveUpdates:function(){ds||0===ms||(ur(ms,!1,null),ms=0)},flushControlled:br,flushSync:vr,getPublicRootInstance:Sr,findHostInstance:wr,findHostInstanceWithNoPortals:function(t){return t=zt(t),null===t?null:t.stateNode},injectIntoDevTools:Ir};Li.injectFiberControlledHostComponent(va),Tr.prototype.render=function(t){this._defer||r("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new Mr;return xr(t,e,null,n,i._onCommit),i},Tr.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Tr.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||r("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,o=e;o!==this;)i=o,o=o._next;null===i&&r("251"),i._next=o._next,this._next=e,t.firstBatch=this}this._defer=!1,lr(t,n),e=this._next,this._next=null,e=t.firstBatch=e,null!==e&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Tr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Mr.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Mr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&r("191",n),n()}}},kr.prototype.render=function(t,e){var n=this._internalRoot,r=new Mr;return e=void 0===e?null:e,null!==e&&r.then(e),Er(t,n,null,r._onCommit),r},kr.prototype.unmount=function(t){var e=this._internalRoot,n=new Mr;return t=void 0===t?null:t,null!==t&&n.then(t),Er(null,e,null,n._onCommit),n},kr.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new Mr;return n=void 0===n?null:n,null!==n&&i.then(n),Er(e,r,t,i._onCommit),i},kr.prototype.createBatch=function(){var t=new Tr(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime<=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},W=ks.batchedUpdates,$=ks.interactiveUpdates,H=ks.flushInteractiveUpdates;var Ps={createPortal:Lr,findDOMNode:function(t){return null==t?null:1===t.nodeType?t:wr(t)},hydrate:function(t,e,n){return Or(null,t,e,!0,n)},render:function(t,e,n){return Or(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return(null==t||void 0===t._reactInternalFiber)&&r("38"),Or(t,e,n,!1,i)},unmountComponentAtNode:function(t){return Pr(t)||r("40"),!!t._reactRootContainer&&(mr(function(){Or(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Lr.apply(void 0,arguments)},unstable_batchedUpdates:gr,unstable_deferredUpdates:er,unstable_interactiveUpdates:_r,flushSync:vr,unstable_flushControlled:br,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:ni,EventPluginRegistry:Hr,EventPropagators:si,ReactControlledComponent:Di,ReactDOMComponentTree:ai,ReactDOMEventListener:Oo},unstable_createRoot:function(t,e){return new kr(t,!0,null!=e&&!0===e.hydrate)}};Ir({findFiberByHostInstance:_,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var As={default:Ps},Os=As&&Ps||As;t.exports=Os.default?Os.default:Os},function(t,e,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},function(t,e,n){"use strict";function r(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(115);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(116);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"===typeof n.Node?t instanceof n.Node:"object"===typeof t&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName))}t.exports=r},function(t,e){},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(0),u=n.n(s),l=n(119),c=n.n(l),h=n(121),p=n(123),f=n(182),d=n(186),y=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),g=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.state={formattedPeers:null,timerID:0,formattedTransactions:null,windowWidth:0},r.updateWindowDimensions=function(){0===r.state.windowWidth?r.setState({windowWidth:window.innerWidth}):window.innerWidth<=1145?r.setState({windowWidth:window.innerWidth}):r.state.windowWidth<1145&&r.state.windowWidth<window.innerWidth&&r.setState({windowWidth:window.innerWidth})},a=n,o(r,a)}return a(e,t),y(e,[{key:"fetchData",value:function(){var t=this,e=void 0;fetch("http://dashboard.dag.works/api").then(function(t){return t.json()}).then(function(t){return e=t}).then(function(e){var n=Math.min(e.transactions.length,20);t.formatPeers(e.peers,e.transactions.slice(0,n))}).catch(function(t){return console.error(t)})}},{key:"formatPeers",value:function(t,e){var n=this;if(this.state.formattedPeers){var i=0,o=0,a=Object.assign({},this.state.formattedPeers),s=t.length;t.forEach(function(t,u){n.state.formattedPeers[t.address]||(i++,a=c()(a,r({},t.address,{$set:{ip:t.geolocationData.ip,city:t.geolocationData.city,country_name:t.geolocationData.country_name,lat:t.geolocationData.latitude,long:t.geolocationData.longitude}})),++o===i&&(n.setState({formattedTransactions:[]}),n.setState({formattedPeers:a,formattedTransactions:n.formatTransactions(a,e)}))),u===s-1&&(n.setState({formattedTransactions:[]}),n.setState({formattedTransactions:n.formatTransactions(n.state.formattedPeers,e)}))})}else{var u=t.length,l=0,h={};t.forEach(function(t){h=c()(h,r({},t.address,{$set:{ip:t.geolocationData.ip,city:t.geolocationData.city,country_name:t.geolocationData.country_name,lat:t.geolocationData.latitude,long:t.geolocationData.longitude}})),++l===u&&(n.setState({formattedTransactions:[]}),n.setState({formattedPeers:h,formattedTransactions:n.formatTransactions(h,e)}))})}}},{key:"formatTransactions",value:function(t,e){return e.map(function(e){return{id:e.hash,hash:e.hash,sender:e.sender,receiver:e.receiver,signers:e.signers,amount:e.amount,ip1:t[e.sender]?t[e.sender].ip:"Error",ip2:t[e.receiver]?t[e.receiver].ip:"Error",lat1:t[e.sender]?t[e.sender].lat:"Error",lat2:t[e.receiver]?t[e.receiver].lat:"Error",long1:t[e.sender]?t[e.sender].long:"Error",long2:t[e.receiver]?t[e.receiver].long:"Error",city1:t[e.sender]?t[e.sender].city:"Error",country_name1:t[e.sender]?t[e.sender].country_name:"Error",city2:t[e.receiver]?t[e.receiver].city:"Error",country_name2:t[e.receiver]?t[e.receiver].country_name:"Error"}})}},{key:"componentDidMount",value:function(){var t=this;this.fetchData(),this.setState({timerID:setInterval(function(){t.fetchData()},5e3)}),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timerID),window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){return u.a.createElement("div",{className:"App"},u.a.createElement("div",{className:"App__container"},u.a.createElement(h.a,null),u.a.createElement("div",{className:"App__oval"}),u.a.createElement(f.a,{formattedTransactions:this.state.formattedTransactions,windowWidth:this.state.windowWidth}),u.a.createElement(p.a,{formattedTransactions:this.state.formattedTransactions,windowWidth:this.state.windowWidth})))}}]),e}(s.Component);e.a=g},function(t,e,n){function r(t){if(Array.isArray(t))return v(t.constructor(t.length),t);if("Map"===m(t))return new Map(t);if("Set"===m(t))return new Set(t);if(t&&"object"===typeof t){var e=Object.getPrototypeOf(t);return v(Object.create(e),t)}return t}function i(){function t(n,i){"function"===typeof i&&(i={$apply:i}),Array.isArray(n)&&Array.isArray(i)||f(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),f("object"===typeof i&&null!==i,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var o=n;return _(i).forEach(function(a){if(d.call(e,a)){var s=n===o;o=e[a](i[a],o,i,n),s&&t.isEquals(o,n)&&(o=n)}else{var u="Map"===m(n)?t(n.get(a),i[a]):t(n[a],i[a]);t.isEquals(u,o[a])&&("undefined"!==typeof u||d.call(n,a))||(o===n&&(o=r(n)),"Map"===m(o)?o.set(a,u):o[a]=u)}}),o}var e=v({},b);return t.extend=function(t,n){e[t]=n},t.isEquals=function(t,e){return t===e},t}function o(t,e,n){f(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t),a(e[n],n)}function a(t,e){f(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function s(t,e){f(Array.isArray(t),"Expected $splice target to be an array; got %s",t),u(e.$splice)}function u(t){f(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function l(t){f("function"===typeof t,"update(): expected spec of $apply to be a function; got %s.",t)}function c(t){f(1===Object.keys(t).length,"Cannot have more than one key in an object with $set")}function h(t,e){f(e&&"object"===typeof e,"update(): $merge expects a spec of type 'object'; got %s",e),f(t&&"object"===typeof t,"update(): $merge expects a target of type 'object'; got %s",t)}function p(t,e){var n=m(t);f("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",e,n)}var f=n(120),d=Object.prototype.hasOwnProperty,y=Array.prototype.splice,g=Object.prototype.toString,m=function(t){return g.call(t).slice(8,-1)},v=Object.assign||function(t,e){return _(e).forEach(function(n){d.call(e,n)&&(t[n]=e[n])}),t},_="function"===typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)},b={$push:function(t,e,n){return o(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return o(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,i){return s(e,n),t.forEach(function(t){u(t),e===i&&t.length&&(e=r(i)),y.apply(e,t)}),e},$set:function(t,e,n){return c(n),t},$toggle:function(t,e){a(t,"$toggle");var n=t.length?r(e):e;return t.forEach(function(t){n[t]=!e[t]}),n},$unset:function(t,e,n,i){return a(t,"$unset"),t.forEach(function(t){Object.hasOwnProperty.call(e,t)&&(e===i&&(e=r(i)),delete e[t])}),e},$add:function(t,e,n,i){return p(e,"$add"),a(t,"$add"),"Map"===m(e)?t.forEach(function(t){var n=t[0],o=t[1];e===i&&e.get(n)!==o&&(e=r(i)),e.set(n,o)}):t.forEach(function(t){e!==i||e.has(t)||(e=r(i)),e.add(t)}),e},$remove:function(t,e,n,i){return p(e,"$remove"),a(t,"$remove"),t.forEach(function(t){e===i&&e.has(t)&&(e=r(i)),e.delete(t)}),e},$merge:function(t,e,n,i){return h(e,t),_(t).forEach(function(n){t[n]!==e[n]&&(e===i&&(e=r(i)),e[n]=t[n])}),e},$apply:function(t,e){return l(t),t(e)}},x=i();t.exports=x,t.exports.default=x,t.exports.newContext=i},function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n.n(r),o=n(122),a=(n.n(o),function(){return i.a.createElement("header",{className:"Header"},i.a.createElement("a",{className:"Header__link",href:"https://constellationlabs.io"},i.a.createElement("h1",{className:"Header__brand"},"Constellation")),i.a.createElement("div",{className:"Header__oval"}),i.a.createElement("nav",null))});e.a=a},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(124),l=n(180),c=n(181),h=(n.n(c),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),p=function(){return s.a.createElement("div",{className:"Legend"},s.a.createElement("div",{className:"Legend__row"},s.a.createElement("div",{className:"Legend__circle Legend__circle--one"}),s.a.createElement("p",{className:"Legend__text"},"Sender")),s.a.createElement("div",{className:"Legend__row"},s.a.createElement("div",{className:"Legend__circle Legend__circle--two"}),s.a.createElement("p",{className:"Legend__text"},"Receiver")))},f=function(t){function e(){var t,n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o.state={mapHeight:0,mapWidth:0,mapZoom:0,mapLatitude:37.7577,mapLongitude:15},o.onViewportChange=function(t){o.setState({mapHeight:t.height,mapWidth:t.width,mapZoom:t.zoom,mapLatitude:t.latitude,mapLongitude:t.longitude})},o.setMapBoxViewProps=function(){var t=o.props.windowWidth;if(t)if(t>=1145)o.setState({mapHeight:700,mapWidth:1145,mapZoom:1});else if(t>=520&&t<1145){var e=700*t/1145+50,n=t/1145;o.setState({mapHeight:e,mapWidth:t,mapZoom:n})}else{var r=700*t/1145+50;o.setState({mapHeight:r,mapWidth:t,mapZoom:0})}else o.setState({mapHeight:700,mapWidth:1145,mapZoom:1})},a=n,i(o,a)}return o(e,t),h(e,[{key:"componentDidMount",value:function(){this.setMapBoxViewProps()}},{key:"componentDidUpdate",value:function(t){this.props.windowWidth!==t.windowWidth&&this.setMapBoxViewProps(),this.props.windowWidth!==t.windowWidth&&this.setMapBoxViewProps()}},{key:"render",value:function(){return s.a.createElement("section",{className:"NodeMap"},s.a.createElement("h1",{className:"NodeMap__header"},"Associated Global Node Transactions"),s.a.createElement("div",{className:"NodeMap__map-container"},this.props.windowWidth<1145?s.a.createElement(l.a,{mapWidth:this.state.mapWidth,mapHeight:this.state.mapHeight,mapZoom:this.state.mapZoom,mapLatitude:this.state.mapLatitude,mapLongitude:this.state.mapLongitude,formattedTransactions:this.props.formattedTransactions,onViewportChange:this.onViewportChange}):s.a.createElement(u.a,{mapWidth:this.state.mapWidth,mapHeight:this.state.mapHeight,mapZoom:this.state.mapZoom,mapLatitude:this.state.mapLatitude,mapLongitude:this.state.mapLongitude,formattedTransactions:this.props.formattedTransactions}),s.a.createElement(p,null)))}}]),e}(s.a.Component);e.a=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(22),l=n(98),c=(n.n(l),n(99)),h=n(100),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.createSingleArc=function(t){for(var e=Object(l.distance)(t.geometry.coordinates[0],t.geometry.coordinates[1],{units:"kilometers"}),n=[],r=0;r<e;r+=e/500){var i=Object(l.along)(t,r,{units:"kilometers"});n.push(i.geometry.coordinates)}return n},n.reactMap=s.a.createRef(),n}return o(e,t),p(e,[{key:"componentDidUpdate",value:function(t,e){var n=this;if(this.props.formattedTransactions!==t.formattedTransactions){var r=[];this.props.formattedTransactions&&this.props.formattedTransactions.forEach(function(t){var e=t.long1,n=t.long2;n-e<-180?n+=360:e-n<-180&&(e+=360),t.long1!==t.long2&&t.lat1!==t.lat2&&r.push({type:"Feature",geometry:{type:"LineString",coordinates:[[e,t.lat1],[n,t.lat2]]}})});var i={type:"FeatureCollection",features:r};i.features.forEach(function(t){t.geometry.coordinates=n.createSingleArc(t)});var o=this.reactMap.getMap();o.getLayer("route")&&o.removeLayer("route"),o.getSource("route")&&o.removeSource("route"),o.addSource("route",{type:"geojson",data:i}),o.addLayer({id:"route",source:"route",type:"line",paint:{"line-width":1,"line-color":"rgba(0, 241, 183, 0.39)"}})}}},{key:"render",value:function(){var t=this,e=this.props,n=e.formattedTransactions,r=e.mapWidth,i=e.mapHeight,o=e.mapLatitude,a=e.mapLongitude,l=e.mapZoom;return s.a.createElement(u.c,{mapboxApiAccessToken:c.a.MKEY,mapStyle:"mapbox://styles/giovaroma27/cjjrdybad1b1r2rk8gvy8rsgo",width:r,height:i,latitude:o,longitude:a,zoom:l,ref:function(e){t.reactMap=e}},n?n.map(function(t){return s.a.createElement(h.a,{key:t.hash,id1:t.ip1,id2:t.ip2,lat1:t.lat1,lat2:t.lat2,long1:t.long1,long2:t.long2})}):"")}}]),e}(s.a.Component);e.a=f},function(t,e,n){"use strict";function r(){}var i=n(126);t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function r(t){var e=null;return Object(u.a)(t)&&t.has("layers")?e=t.get("layers").filter(function(t){return t.get("interactive")}).map(function(t){return t.get("id")}).toJS():Array.isArray(t.layers)&&(e=t.layers.filter(function(t){return t.interactive}).map(function(t){return t.id})),e}function i(t,e,n){function r(t){return t.map(function(){return!0}).delete("layers").delete("sources").toJS()}var i=t&&r(t)||{},o=r(e);if(!t||function(){var n=Object.keys(i),r=Object.keys(o);return n.length!==r.length||!!r.some(function(n){return t.get(n)!==e.get(n)})}())return void n.setStyle(e.toJS());var u=Object(l.a)(t,e),c=u.sourcesDiff,h=u.layersDiff;s(c.exit,e.get("layers")),a(n,e,c,h)}function o(t,e){var n=e.source.toJS();if("geojson"===n.type){var r=t.getSource(e.id);if("geojson"===r.type){var i=r.workerOptions,o=i.geojsonVtOptions.extent/512;if((void 0===n.maxzoom||n.maxzoom===i.geojsonVtOptions.maxZoom)&&(void 0===n.buffer||n.buffer===i.geojsonVtOptions.buffer/o)&&(void 0===n.tolerance||n.tolerance===i.geojsonVtOptions.tolerance/o)&&(void 0===n.cluster||n.cluster===i.cluster)&&(void 0===n.clusterRadius||n.clusterRadius===i.superclusterOptions.radius/o)&&(void 0===n.clusterMaxZoom||n.clusterMaxZoom===i.superclusterOptions.maxZoom))return void r.setData(n.data)}}t.removeSource(e.id),t.addSource(e.id,n)}function a(t,e,n,r){if(r.updates.some(function(t){return t.layer.get("ref")}))return void t.setStyle(e.toJS());var i=!0,a=!1,s=void 0;try{for(var u,l,c=n.enter[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)l=u.value,t.addSource(l.id,l.source.toJS())}catch(t){a=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}var h=!0,p=!1,f=void 0;try{for(var d,y,g=n.update[Symbol.iterator]();!(h=(d=g.next()).done);h=!0)y=d.value,o(t,y)}catch(t){p=!0,f=t}finally{try{h||null==g.return||g.return()}finally{if(p)throw f}}var m=!0,v=!1,_=void 0;try{for(var b,x,w=r.exiting[Symbol.iterator]();!(m=(b=w.next()).done);m=!0)x=b.value,t.style.getLayer(x.id)&&t.removeLayer(x.id)}catch(t){v=!0,_=t}finally{try{m||null==w.return||w.return()}finally{if(v)throw _}}var E=!0,S=!1,I=void 0;try{for(var C,T,M=r.updates[Symbol.iterator]();!(E=(C=M.next()).done);E=!0)T=C.value,T.enter||t.removeLayer(T.id),t.addLayer(T.layer.toJS(),T.before)}catch(t){S=!0,I=t}finally{try{E||null==M.return||M.return()}finally{if(S)throw I}}var k=!0,P=!1,A=void 0;try{for(var O,L,N=n.exit[Symbol.iterator]();!(k=(O=N.next()).done);k=!0)L=O.value,t.removeSource(L.id)}catch(t){P=!0,A=t}finally{try{k||null==N.return||N.return()}finally{if(P)throw A}}}function s(t,e){var n=t.map(function(t){return t.id}),r=e.filter(function(t){return n.includes(t.get("source"))});if(r.size)throw new Error("You must remove any layers associated with sources you are removing: ".concat(r.map(function(t){return t.get("id")}).toJS().join("")))}e.a=r,e.b=i;var u=n(46),l=n(128)},function(t,e,n){"use strict";function r(t,e){var n=t.get("sources"),r=e.get("sources"),i=[],o=[],a=[],s=n.keySeq().toArray(),u=r.keySeq().toArray(),l=!0,c=!1,h=void 0;try{for(var p,f=s[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var d=p.value,y=r.get(d);y?!y.equals(n.get(d))&&o.push({id:d,source:r.get(d)}):a.push({id:d,source:n.get(d)})}}catch(t){c=!0,h=t}finally{try{l||null==f.return||f.return()}finally{if(c)throw h}}var g=!0,m=!1,v=void 0;try{for(var _,b=u[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var x=_.value;n.get(x)||i.push({id:x,source:r.get(x)})}}catch(t){m=!0,v=t}finally{try{g||null==b.return||b.return()}finally{if(m)throw v}}return{enter:i,update:o,exit:a}}function i(t,e){var n=t.get("layers"),r=e.get("layers"),i=[],o=[],a={},s={};r.forEach(function(t,e){var n=t.get("id"),i=r.get(e+1);s[n]={layer:t,id:n,before:i?i.get("id"):null,enter:!0}}),n.forEach(function(t,e){var r=t.get("id"),i=n.get(e+1);a[r]={layer:t,id:r,before:i?i.get("id"):null},s[r]?s[r].enter=!1:o.push(a[r])});var u=!0,l=!1,c=void 0;try{for(var h,p=r.reverse()[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value,d=f.get("id");a[d]&&a[d].layer.equals(s[d].layer)&&a[d].before===s[d].before||i.push(s[d])}}catch(t){l=!0,c=t}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return{updates:i,exiting:o}}function o(t,e){return{sourcesDiff:r(t,e),layersDiff:i(t,e)}}e.a=o},function(t,e,n){"use strict";function r(t,e){return a(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(t){if(Array.isArray(t))return t}function s(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function u(t,e){if(!s(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"a",function(){return E});var h=n(23),p=n(16),f=n(8),d=n(14),y=n.n(d),g=n(15),m=n.n(g),v=n(29),_=n.n(v),b=n(28),x=n.n(b),w=Object(p.a)(),E=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,o=void 0===i?w:i,a=e.projectionMatrix,s=void 0===a?w:a;u(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.viewMatrix=o,this.projectionMatrix=s;var l=Object(p.a)();_()(l,l,this.projectionMatrix),_()(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var c=Object(p.a)();y()(c,c,[this.width/2,-this.height/2,1]),m()(c,c,[1,-1,0]),_()(c,c,this.viewProjectionMatrix);var h=x()(Object(p.a)(),c);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=h,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return c(t,[{key:"equals",value:function(e){return!!s(e,t)&&e.width===this.width&&e.height===this.height&&Object(h.c)(e.projectionMatrix,this.projectionMatrix)&&Object(h.c)(e.viewMatrix,this.viewMatrix)}},{key:"project",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=r(t,3),o=i[0],a=i[1],s=i[2],u=this.projectFlat([o,a]),l=r(u,2),c=l[0],h=l[1],p=Object(f.h)([c,h,s],this.pixelProjectionMatrix),d=r(p,2),y=d[0],g=d[1],m=void 0===n||n?g:this.height-g;return 2===t.length?[y,m]:[y,m,p[2]]}},{key:"unproject",value:function(t){var e=Number.isFinite,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=n.topLeft,o=n.targetZ,a=r(t,3),s=a[0],u=a[1],l=a[2],c=void 0===i||i?u:this.height-u,h=Object(f.e)([s,c,l],this.pixelUnprojectionMatrix,o),p=this.unprojectFlat(h),d=r(p,2),y=d[0],g=d[1];return e(l)?[y,g,h[2]]:e(o)?[y,g,o]:[y,g]}},{key:"projectFlat",value:function(t){return 1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale,t}},{key:"unprojectFlat",value:function(t){return 1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale,t}}]),t}()},function(t,e){function n(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}t.exports=n},function(t,e){function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}t.exports=n},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}t.exports=n},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}t.exports=n},function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}t.exports=n},function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}t.exports=n},function(t,e){function n(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}t.exports=n},function(t,e){function n(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}t.exports=n},function(t,e,n){"use strict";var r=(n(1),n(7),n(33));n.n(r)},function(t,e,n){"use strict";n(26),n(7),n(86)},function(t,e,n){"use strict";n(1)},function(t,e){function n(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}t.exports=n},function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}t.exports=n},function(t,e){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t}t.exports=n},function(t,e,n){"use strict";function r(t){var e=t.width,n=t.height,r=t.longitude,u=t.latitude,l=t.zoom,c=t.pitch,h=void 0===c?0:c,p=t.bearing,f=void 0===p?0:p;(-180>r||180<r)&&(r=Object(o.c)(r+180,360)-180),(-180>f||180<f)&&(f=Object(o.c)(f+180,360)-180);var d=new i.a({width:e,height:n,longitude:r,latitude:u,zoom:l}),y=d.project([r,a])[1],g=d.project([r,s])[1],m=0;return g-y<n&&(l+=Math.log2(n/(g-y)),d=new i.a({width:e,height:n,longitude:r,latitude:u,zoom:l}),y=d.project([r,a])[1],g=d.project([r,s])[1]),0<y?m=y:g<n&&(m=g-n),m&&(u=d.unproject([e/2,n/2+m])[1]),{width:e,height:n,longitude:r,latitude:u,zoom:l,pitch:h,bearing:f}}e.a=r;var i=n(6),o=n(16),a=85.05113,s=-85.05113},function(t,e,n){"use strict";function r(t,e,n){var r=Math.cosh,l=Math.log,c=Math.sqrt,h={},p=t.zoom,f=[t.longitude,t.latitude],d=Object(a.i)(p),y=e.zoom,g=[e.longitude,e.latitude],m=Object(a.i)(y-p),v=new i.a(Object(a.d)(f,d)),_=new i.a(Object(a.d)(g,d)),b=_.subtract(v),x=Math.max(t.width,t.height),w=x/m,E=c(b.x*b.x+b.y*b.y);if(Math.abs(E)<s){for(var S=0;S<u.length;S++){var I=u[S],C=t[I],T=e[I];h[I]=Object(o.b)(C,T,n)}return h}var M=1.414*1.414,k=(w*w-x*x+M*M*E*E)/(2*x*M*E),P=(w*w-x*x-M*M*E*E)/(2*w*M*E),A=l(c(k*k+1)-k),O=l(c(P*P+1)-P),L=n*((O-A)/1.414),N=r(A)/r(A+1.414*L),R=x*((r(A)*Math.tanh(A+1.414*L)-Math.sinh(A))/M)/E,D=1/N,z=p+Object(a.f)(D),F=Object(a.g)(v.add(b.scale(R)).scale(D),Object(a.i)(z));return h.longitude=F[0],h.latitude=F[1],h.zoom=z,h}e.a=r;var i=n(23),o=n(16),a=n(8),s=.01,u=["longitude","latitude","zoom"]},function(t,e,n){"use strict";(function(t){function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(){}function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&c.a.checkPropTypes(h,t,"prop",e)}n.d(e,"a",function(){return f});var l=n(3),c=n.n(l),h={container:c.a.object,mapboxApiAccessToken:c.a.string,attributionControl:c.a.bool,preserveDrawingBuffer:c.a.bool,onLoad:c.a.func,onError:c.a.func,reuseMaps:c.a.bool,reuseMap:c.a.bool,transformRequest:c.a.func,mapStyle:c.a.string,visible:c.a.bool,width:c.a.number,height:c.a.number,viewState:c.a.object,longitude:c.a.number,latitude:c.a.number,zoom:c.a.number,bearing:c.a.number,pitch:c.a.number,altitude:c.a.number},p={mapboxApiAccessToken:function(){var e=null;if("undefined"!=typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);e=n&&n[1]}return e||"undefined"==typeof t||(e=e||Object({NODE_ENV:"production",PUBLIC_URL:""}).MapboxAccessToken),e||null}(),preserveDrawingBuffer:!1,attributionControl:!0,preventStyleDiffing:!1,onLoad:s,onError:s,reuseMaps:!1,reuseMap:!1,transformRequest:null,mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,bearing:0,pitch:0,altitude:1.5,width:0,height:0},f=function(){function t(e){if(i(this,t),!e.mapboxgl)throw new Error("Mapbox not available");!t.initialized&&console.debug&&(t.initialized=!0,console.debug("react-map-gl: ".concat("3.3.0"," using mapbox-gl v").concat(e.mapboxgl.version))),this.props={},this._initialize(e)}return a(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"resize",value:function(){return this._map.resize(),this}},{key:"getMap",value:function(){return this._map}},{key:"_create",value:function(e){if((e.reuseMaps||e.reuseMap)&&t.savedMap){this._map=this.map=t.savedMap;var n=this._map.getContainer(),r=e.container;for(r.classList.add("mapboxgl-map");0<n.childNodes.length;)r.appendChild(n.childNodes[0]);this._map._container=r,t.savedMap=null,e.mapStyle&&this._map.setStyle(e.mapStyle),e.onLoad()}else{var i={container:e.container||document.body,center:[0,0],zoom:8,pitch:0,bearing:0,style:e.mapStyle,interactive:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(i.transformRequest=e.transformRequest),this._map=this.map=new e.mapboxgl.Map(i),this.map.once("load",e.onLoad),this.map.on("error",e.onError)}return this}},{key:"_destroy",value:function(){this._map&&(t.savedMap?this._map.remove():t.savedMap=this._map,this._map=null)}},{key:"_initialize",value:function(t){t=Object.assign({},p,t),u(t,"Mapbox"),this.accessToken=t.mapboxApiAccessToken||p.mapboxApiAccessToken,t.mapboxgl&&(this.accessToken?t.mapboxgl.accessToken=this.accessToken:t.mapboxgl.accessToken="no-token"),this._create(t);var e=this.map.getCanvas();e&&(e.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t,this._checkStyleSheet()}},{key:"_update",value:function(t,e){this._map&&(e=Object.assign({},this.props,e),u(e,"Mapbox"),this._updateMapViewport(t,e),this._updateMapSize(t,e),this.props=e)}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&this._map.resize()}},{key:"_updateMapViewport",value:function(t,e){var n=this._getViewState(t),r=this._getViewState(e);(r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude)&&(this._map.jumpTo(this._getMapboxViewStateProps(e)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude))}},{key:"_getViewState",value:function(t){var e=t.viewState||t,n=e.longitude,r=e.latitude,i=e.zoom,o=e.pitch,a=void 0===o?0:o,s=e.bearing,u=void 0===s?0:s,l=e.altitude;return{longitude:n,latitude:r,zoom:i,pitch:a,bearing:u,altitude:void 0===l?1.5:l}}},{key:"_checkStyleSheet",value:function(){if("undefined"!=typeof document)try{var t=document.querySelector(".mapboxgl-missing-css");if(!("none"===window.getComputedStyle(t).display)){var e=this.props.mapboxgl.version,n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(e,"/mapbox-gl.css")),document.head.append(n)}}catch(t){}}},{key:"_getMapboxViewStateProps",value:function(t){var e=this._getViewState(t);return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch,width:t.width,height:t.height}}}]),t}();f.propTypes=h,f.defaultProps=p}).call(e,n(9))},function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(149),o="object"===("undefined"==typeof t?"undefined":r(t))&&"[object process]"===t+""&&!t.browser,a=!o||i.a;e.a=a}).call(e,n(9))},function(t,e,n){"use strict";(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(){return!("undefined"==typeof window||"object"!==n(window.process)||"renderer"!==window.process.type)||"undefined"!=typeof t&&"object"===n(t.versions)&&t.versions.electron||!!("object"===("undefined"==typeof navigator?"undefined":n(navigator))&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron"))}()}).call(e,n(9))},function(t,e,n){(function(e){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e){if(n)if(r){var o="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",a={};n(a),i=e(a),i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else r=e;else n=e}var n,r,i;return t(["exports"],function(t){function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function o(t,e){this.x=t,this.y=e}function a(t,e,n,r){var i=new zn(t,e,n,r);return function(t){return i.solve(t)}}function s(t,e,n){return Math.min(n,Math.max(e,t))}function u(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function l(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function c(t,e){return-1!==t.indexOf(e,t.length-e.length)}function h(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function p(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function f(t){return Array.isArray(t)?t.map(f):"object"==typeof t&&t?h(t,f):t}function d(t){qn[t]||("undefined"!=typeof console&&console.warn(t),qn[t]=!0)}function y(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function g(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}function m(t){var e=new self.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function v(t,e,n){n[t]=n[t]||[],n[t].push(e)}function _(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}function b(t){var e=t.key,n=t.value;return n?[new Hn(e,n,"constants have been deprecated as of v8")]:[]}function x(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function w(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function E(t){return Array.isArray(t)?t.map(E):w(t)}function S(t,e){return{kind:"array",itemType:t,N:e}}function I(t){if("array"===t.kind){var e=I(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function C(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!C(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=sr;n<r.length;n+=1)if(!C(r[n],e))return null}return"Expected "+I(t)+" but found "+I(e)+" instead."}function T(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function M(t){if(null===t)return Qn;if("string"==typeof t)return er;if("boolean"==typeof t)return nr;if("number"==typeof t)return tr;if(t instanceof lr)return rr;if(t instanceof cr)return ar;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=M(i[r]);if(e){if(e===o)continue;e=or;break}e=o}return S(e||or,n)}return ir}function k(t){if(t instanceof wr){if("get"===t.name&&1===t.args.length)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!k(t)&&(e=!1)}),e}function P(t,e){if(t instanceof wr&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!P(t,e)&&(n=!1)}),n}function A(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)],r=t[a+1],e===n||e>n&&e<r)return a;if(n<e)i=a+1;else{if(!(n>e))throw new fr("Input is not a number.");o=a-1}}return Math.max(a-1,0)}function O(t,e,n){return t*(1-n)+e*n}function L(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function N(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function R(t,e){return function(){function n(t,e,n){this.type=nr,this.lhs=t,this.rhs=e,this.collator=n}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=e.parse(t[1],1,or);if(!r)return null;var i=e.parse(t[2],2,or);if(!i)return null;if(!N(r.type)&&!N(i.type))return e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+I(r.type)+", "+I(i.type)+") instead.");if(r.type.kind!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare "+I(r.type)+" and "+I(i.type)+".");var o=null;if(4===t.length){if("string"!==r.type.kind&&"string"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,ar)))return null}return new n(r,i,o)},n.prototype.evaluate=function(t){var n=this.collator?0===this.collator.evaluate(t).compare(this.lhs.evaluate(t),this.rhs.evaluate(t)):this.lhs.evaluate(t)===this.rhs.evaluate(t);return e?!n:n},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.possibleOutputs=function(){return[!0,!1]},n.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},n}()}function D(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=T(n,r,i,a);if(s)throw new fr(s);return new lr(n/255*a,r/255*a,i/255*a,a)}function z(t,e){return t in e}function F(t,e){var n=e[t];return void 0===n?null:n}function B(t,e){var n=e[0],r=e[1];return n.evaluate(t)<r.evaluate(t)}function j(t,e){var n=e[0],r=e[1];return n.evaluate(t)>r.evaluate(t)}function V(t,e){var n=e[0],r=e[1];return n.evaluate(t)<=r.evaluate(t)}function q(t,e){var n=e[0],r=e[1];return n.evaluate(t)>=r.evaluate(t)}function U(t){return{type:t}}function G(t){return{result:"success",value:t}}function X(t){return{result:"error",value:t}}function Y(t){return t>Ur?Math.pow(t,1/3):t/qr+jr}function Z(t){return t>Vr?t*t*t:qr*(t-jr)}function W(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function H(t){var e=$(t.r),n=$(t.g),r=$(t.b),i=Y((.4124564*e+.3575761*n+.1804375*r)/zr),o=Y((.2126729*e+.7151522*n+.072175*r)/Fr);return{l:116*o-16,a:500*(i-o),b:200*(o-Y((.0193339*e+.119192*n+.9503041*r)/Br)),alpha:t.a}}function K(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=Fr*Z(e),n=zr*Z(n),r=Br*Z(r),new lr(W(3.2404542*n-1.5371385*e-.4985314*r),W(-.969266*n+1.8760108*e+.041556*r),W(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function J(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Q(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function tt(t){return t}function et(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function nt(t,e,n,r,i){return et(typeof n===i?r[n]:void 0,t.default,e.default)}function rt(t,e,n){if("number"!==J(n))return et(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=at(t.stops,n);return t.stops[i][1]}function it(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==J(n))return et(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=at(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Cr[e.type]||tt;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Wr[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function ot(t,e,n){return"color"===e.type?n=lr.parse(n):J(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),et(n,t.default,e.default)}function at(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)][0],r=t[a+1][0],e===n||e>n&&e<r)return a;n<e?i=a+1:n>e&&(o=a-1)}return Math.max(a-1,0)}function st(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Dr}function ut(t,e){var n=new Sr(Dr,[],function(t){var e={color:rr,string:er,number:tr,enum:er,boolean:nr};return"array"===t.type?S(e[t.value]||or,t.length):e[t.type]||null}(e)),r=n.parse(t);return r?G(new $r(r,e)):X(n.errors)}function lt(t,e){if("error"===(t=ut(t,e)).result)return t;var n=t.value.expression,r=k(n);if(!r&&!e["property-function"])return X([new Kn("","property expressions not supported")]);var i=P(n,["zoom"]);if(!i&&!1===e["zoom-function"])return X([new Kn("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof kr)n=t(e.result);else if(e instanceof Mr)for(var r=0,i=e.args;r<i.length;r+=1){var o=i[r];if(n=t(o))break}else(e instanceof Ir||e instanceof Tr)&&e.input instanceof wr&&"zoom"===e.input.name&&(n=e);return n instanceof Kn?n:(e.eachChild(function(e){var r=t(e);r instanceof Kn?n=r:!n&&r?n=new Kn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Kn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof Kn?X([o]):o instanceof Tr&&"piecewise-constant"===e.function?X([new Kn("",'"interpolate" expressions cannot be used with this property')]):G(o?new Kr(r?"camera":"composite",t.value,o):new Hr(r?"constant":"source",t.value)):X([new Kn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function ct(t,e){if(Q(t))return new Jr(t,e);if(st(t)){var n=lt(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=lr.parse(t)),{kind:"constant",evaluate:function(){return r}}}function ht(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=J(n);if("object"!==u)return[new Hn(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=Lt;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new Hn(e,n[l],'unknown property "'+l+'"'));continue}p=Lt}s=s.concat(p({key:(e?e+".":e)+l,value:n[l],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new Hn(e,n,'missing required property "'+f+'"'));return s}function pt(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Lt;if("array"!==J(e))return[new Hn(o,e,"array expected, "+J(e)+" found")];if(n.length&&e.length!==n.length)return[new Hn(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new Hn(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===J(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function ft(t){var e=t.key,n=t.value,r=t.valueSpec,i=J(n);return"number"!==i?[new Hn(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new Hn(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Hn(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function dt(t){function e(t){var e=[],r=t.value,s=t.key;if("array"!==J(r))return[new Hn(s,r,"array expected, "+J(r)+" found")];if(2!==r.length)return[new Hn(s,r,"array length 2 expected, length "+r.length+" found")];if(h){if("object"!==J(r[0]))return[new Hn(s,r,"object expected, "+J(r[0])+" found")];if(void 0===r[0].zoom)return[new Hn(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Hn(s,r,"object stop key must have value")];if(o&&o>w(r[0].zoom))return[new Hn(s,r[0].zoom,"stop zoom values must appear in ascending order")];w(r[0].zoom)!==o&&(o=w(r[0].zoom),i=void 0,u={}),e=e.concat(ht({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:ft,value:n}}))}else e=e.concat(n({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return e.concat(Lt({key:s+"[1]",value:r[1],valueSpec:a,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=J(t.value),o=w(t.value),l=null!==t.value?t.value:e;if(r){if(n!==r)return[new Hn(t.key,l,n+" stop domain type must match previous stop domain type "+r)]}else r=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new Hn(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==s){var c="number expected, "+n+" found";return a["property-function"]&&void 0===s&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Hn(t.key,l,c)]}return"categorical"!==s||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==s&&"number"===n&&void 0!==i&&o<i?[new Hn(t.key,l,"stop domain values must appear in ascending order")]:(i=o,"categorical"===s&&o in u?[new Hn(t.key,l,"stop domain values must be unique")]:(u[o]=!0,[])):[new Hn(t.key,l,"integer expected, found "+o)]}var r,i,o,a=t.valueSpec,s=w(t.value.type),u={},l="categorical"!==s&&void 0===t.value.property,c=!l,h="array"===J(t.value.stops)&&"array"===J(t.value.stops[0])&&"object"===J(t.value.stops[0][0]),p=ht({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===s)return[new Hn(t.key,t.value,'identity function may not have a "stops" property')];var n=[],r=t.value;return n=n.concat(pt({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===J(r)&&0===r.length&&n.push(new Hn(t.key,r,"array must have at least one stop")),n},default:function(t){return Lt({key:t.key,value:t.value,valueSpec:a,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===s&&l&&p.push(new Hn(t.key,t.value,'missing required property "property"')),"identity"===s||t.value.stops||p.push(new Hn(t.key,t.value,'missing required property "stops"')),"exponential"===s&&"piecewise-constant"===t.valueSpec.function&&p.push(new Hn(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!t.valueSpec["property-function"]?p.push(new Hn(t.key,t.value,"property functions not supported")):l&&!t.valueSpec["zoom-function"]&&"heatmap-color"!==t.objectKey&&"line-gradient"!==t.objectKey&&p.push(new Hn(t.key,t.value,"zoom functions not supported"))),"categorical"!==s&&!h||void 0!==t.value.property||p.push(new Hn(t.key,t.value,'"property" property is required')),p}function yt(t){var e=("property"===t.expressionContext?lt:ut)(E(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new Hn(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new Hn(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}function gt(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(w(n))&&i.push(new Hn(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(w(n))&&i.push(new Hn(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function mt(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!mt(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function vt(t){if(!t)return function(){return!0};mt(t)||(t=bt(t));var e=ut(t,Qr);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function _t(t,e){return t<e?-1:t>e?1:0}function bt(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?xt(t[1],t[2],"=="):"!="===n?St(xt(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?xt(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(bt))):"all"===n?["all"].concat(t.slice(1).map(bt)):"none"===n?["all"].concat(t.slice(1).map(bt).map(St)):"in"===n?wt(t[1],t.slice(2)):"!in"===n?St(wt(t[1],t.slice(2))):"has"===n?Et(t[1]):"!has"!==n||St(Et(t[1]))}function xt(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function wt(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(_t)]]:["filter-in-small",t,["literal",e]]}}function Et(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function St(t){return["!",t]}function It(t){return mt(E(t.value))?yt(x({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==J(n))return[new Hn(r,n,"array expected, "+J(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new Hn(r,n,"filter array must have at least 1 element")];switch(a=a.concat(gt({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),w(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===w(n[1])&&a.push(new Hn(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Hn(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=J(n[1]))&&a.push(new Hn(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=J(n[s]),"$type"===w(n[1])?a=a.concat(gt({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Hn(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=J(n[1]),2!==n.length?a.push(new Hn(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Hn(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function Ct(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Lt({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new Hn(n,o,'unknown property "'+a+'"')];if("string"===J(o)&&c["property-function"]&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Hn(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new Hn(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Q(E(o))&&"identity"===w(o.type)&&h.push(new Hn(n,o,'"text-font" does not support identity functions'))),h.concat(Lt({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyKey:a}))}function Tt(t){return Ct(t,"paint")}function Mt(t){return Ct(t,"layout")}function kt(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Hn(r,n,'either "type" or "ref" is required'));var a,s=w(n.type),u=w(n.ref);if(n.id)for(var l=w(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];w(h.id)===l&&e.push(new Hn(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new Hn(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){w(t.id)===u&&(a=t)}),a?a.ref?e.push(new Hn(r,n.ref,"ref cannot reference another ref layer")):s=w(a.type):e.push(new Hn(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],f=p&&w(p.type);p?"vector"===f&&"raster"===s?e.push(new Hn(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Hn(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Hn(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&p.lineMetrics||e.push(new Hn(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Hn(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new Hn(r,n.source,'source "'+n.source+'" not found'))}else e.push(new Hn(r,n,'missing required property "source"'));return e=e.concat(ht({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Lt({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:It,layout:function(t){return ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Mt(x({layerType:s},t))}}})},paint:function(t){return ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Tt(x({layerType:s},t))}}})}}}))}function Pt(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new Hn(n,e,'"type" is required')];var o=w(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(ht({key:n,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new Hn(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return ht({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r});case"video":return ht({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ht({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return a.push(new Hn(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return gt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function At(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=J(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Hn("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=u&&r[u[1]]&&r[u[1]].transition?o.concat(Lt({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(Lt({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new Hn(s,e[s],'unknown property "'+s+'"')])}return o}function Ot(t){var e=t.value,n=t.key,r=J(e);return"string"!==r?[new Hn(n,e,"string expected, "+r+" found")]:[]}function Lt(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.function&&Q(w(e))?dt(t):n.function&&st(E(e))?yt(t):n.type&&ti[n.type]?ti[n.type](t):ht(x({},t,{valueSpec:n.type?r[n.type]:n}))}function Nt(t){var e=t.value,n=t.key,r=Ot(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new Hn(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Hn(n,e,'"glyphs" url must include a "{range}" token')),r)}function Rt(t,e){e=e||$n;var n=[];return n=n.concat(Lt({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Nt,"*":function(){return[]}}})),t.constants&&(n=n.concat(b({key:"constants",value:t.constants,style:t,styleSpec:e}))),Dt(n)}function Dt(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function zt(t){return function(){return Dt(t.apply(this,arguments))}}function Ft(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1){var o=i[r];t.fire(new Zn(new Error(o.message))),n=!0}return n}function Bt(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[ai+o],s=i[ai+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[ai+r.length],l=i[ai+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}function jt(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ui[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function Vt(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof si)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(Vt(a,e))}return r}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l={};if(s.serialize)l._serialized=s.serialize(t,e);else{for(var c in t)if(t.hasOwnProperty(c)&&!(ui[u].omit.indexOf(c)>=0)){var h=t[c];l[c]=ui[u].shallow.indexOf(c)>=0?h:Vt(h,e)}t instanceof Error&&(l.message=t.message)}return{name:u,properties:l}}throw new Error("can't serialize object of type "+typeof t)}function qt(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof si)return t;if(Array.isArray(t))return t.map(function(t){return qt(t)});if("object"==typeof t){var e=t,n=e.name,r=e.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=ui[n].klass;if(!i)throw new Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r._serialized);for(var o=Object.create(i.prototype),a=0,s=Object.keys(r);a<s.length;a+=1){var u=s[a];o[u]=ui[n].shallow.indexOf(u)>=0?r[u]:qt(r[u])}return o}throw new Error("can't deserialize object of type "+typeof t)}function Ut(t){for(var e=0,n=t;e<n.length;e+=1)if(Xt(n[e].charCodeAt(0)))return!0;return!1}function Gt(t){return!pi.Arabic(t)&&!pi["Arabic Supplement"](t)&&!pi["Arabic Extended-A"](t)&&!pi["Arabic Presentation Forms-A"](t)&&!pi["Arabic Presentation Forms-B"](t)}function Xt(t){return 746===t||747===t||!(t<4352)&&(!!pi["Bopomofo Extended"](t)||!!pi.Bopomofo(t)||!(!pi["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||!!pi["CJK Compatibility Ideographs"](t)||!!pi["CJK Compatibility"](t)||!!pi["CJK Radicals Supplement"](t)||!!pi["CJK Strokes"](t)||!(!pi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!pi["CJK Unified Ideographs Extension A"](t)||!!pi["CJK Unified Ideographs"](t)||!!pi["Enclosed CJK Letters and Months"](t)||!!pi["Hangul Compatibility Jamo"](t)||!!pi["Hangul Jamo Extended-A"](t)||!!pi["Hangul Jamo Extended-B"](t)||!!pi["Hangul Jamo"](t)||!!pi["Hangul Syllables"](t)||!!pi.Hiragana(t)||!!pi["Ideographic Description Characters"](t)||!!pi.Kanbun(t)||!!pi["Kangxi Radicals"](t)||!!pi["Katakana Phonetic Extensions"](t)||!(!pi.Katakana(t)||12540===t)||!(!pi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!pi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!pi["Unified Canadian Aboriginal Syllabics"](t)||!!pi["Unified Canadian Aboriginal Syllabics Extended"](t)||!!pi["Vertical Forms"](t)||!!pi["Yijing Hexagram Symbols"](t)||!!pi["Yi Syllables"](t)||!!pi["Yi Radicals"](t))}function Yt(t){return!(Xt(t)||function(t){return!!(pi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||pi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||pi["Letterlike Symbols"](t)||pi["Number Forms"](t)||pi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||pi["Control Pictures"](t)&&9251!==t||pi["Optical Character Recognition"](t)||pi["Enclosed Alphanumerics"](t)||pi["Geometric Shapes"](t)||pi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||pi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||pi["CJK Symbols and Punctuation"](t)||pi.Katakana(t)||pi["Private Use Area"](t)||pi["CJK Compatibility Forms"](t)||pi["Small Form Variants"](t)||pi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Zt(t,e){return!(!e&&(t>=1424&&t<=2303||pi["Arabic Presentation Forms-A"](t)||pi["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||pi.Khmer(t))}function Wt(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i,o=(i=t.type,Li[i].BYTES_PER_ELEMENT),a=n=$t(n,Math.max(e,o)),s=t.components||1;return r=Math.max(r,o),n+=o*s,{name:t.name,type:t.type,components:s,offset:a}}),size:$t(n,Math.max(r,e)),alignment:e}}function $t(t,e){return Math.ceil(t/e)*e}function Ht(t){return[po(255*t.r,255*t.g),po(255*t.b,255*t.a)]}function Kt(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}function Jt(t){for(var e=bo/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<xo.min||a.x>xo.max||a.y<xo.min||a.y>xo.max)&&d("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Qt(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function te(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(le(i,e))return!0;if(ae(e,i,n))return!0}return!1}function ee(t,e){if(1===t.length&&1===t[0].length)return ue(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(ue(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(ue(e,a[s]))return!0;for(var u=0;u<e.length;u++)if(ie(a,e[u]))return!0}return!1}function ne(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var s=0;s<i.length;s++)if(le(a,i[s]))return!0;if(re(a,i,n))return!0}return!1}function re(t,e,n){if(t.length>1){if(ie(t,e))return!0;for(var r=0;r<e.length;r++)if(ae(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(ae(t[i],e,n))return!0;return!1}function ie(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(oe(r,i,e[o],e[o+1]))return!0;return!1}function oe(t,e,n,r){return y(t,n,r)!==y(e,n,r)&&y(t,e,n)!==y(t,e,r)}function ae(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(se(t,e[i-1],e[i])<r)return!0;return!1}function se(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function ue(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function le(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ce(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].statistics.max}function he(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function pe(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=Bn.convert(e);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++){for(var u=t[s],l=[],c=0;c<u.length;c++)l.push(u[c].sub(o._mult(i)));a.push(l)}return a}function fe(t,e,n){var r=Io.transformMat4([],[t.x,t.y,0,1],e);return new Bn((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}function de(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function ye(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=de({},{width:r,height:i},n);ge(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function ge(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[l+h];return e}function me(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Po({width:256,height:1},n)}function ve(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,p=_e(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,r){var i,o,a,s,u,l=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=_e(t,a,s,r,!1))===u.next&&(u.steiner=!0),l.push(ke(u));for(l.sort(Ce),i=0;i<l.length;i++)Te(l[i],n),n=be(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return xe(p,f,n,r,i,l),f}function _e(t,e,n,r,i){var o,a;if(i===je(t,e,n,r)>0)for(o=e;o<n;o+=r)a=ze(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=ze(o,t[o],t[o+1],a);return a&&Le(a,a.next)&&(Fe(a),a=a.next),a}function be(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Le(r,r.next)&&0!==Oe(r.prev,r,r.next))r=r.next;else{if(Fe(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function xe(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Me(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Ee(t,r,i,o):we(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Fe(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?xe(t=Se(t,e,n),e,n,r,i,o,2):2===a&&Ie(t,e,n,r,i,o):xe(be(t),e,n,r,i,o,1);break}}}function we(t){var e=t.prev,n=t,r=t.next;if(Oe(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Pe(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Oe(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ee(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Oe(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Me(s,u,e,n,r),p=Me(l,c,e,n,r),f=t.prevZ,d=t.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&Pe(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Oe(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&Pe(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Oe(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Pe(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Oe(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&Pe(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Oe(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Se(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Le(i,o)&&Ne(i,r,r.next,o)&&Re(i,o)&&Re(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Fe(r),Fe(r.next),r=t=o),r=r.next}while(r!==t);return r}function Ie(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ae(a,s)){var u=De(a,s);return a=be(a,a.next),u=be(u,u.next),xe(a,e,n,r,i,o),void xe(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Ce(t,e){return t.x-e.x}function Te(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Pe(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Re(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=De(e,t);be(n,n.next)}}function Me(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ke(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Pe(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ae(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ne(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Re(t,e)&&Re(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Oe(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Le(t,e){return t.x===e.x&&t.y===e.y}function Ne(t,e,n,r){return!!(Le(t,e)&&Le(n,r)||Le(t,r)&&Le(n,e))||Oe(t,e,n)>0!=Oe(t,e,r)>0&&Oe(n,r,t)>0!=Oe(n,r,e)>0}function Re(t,e){return Oe(t.prev,t,t.next)<0?Oe(t,e,t.next)>=0&&Oe(t,t.prev,e)>=0:Oe(t,e,t.prev)<0||Oe(t,t.next,e)<0}function De(t,e){var n=new Be(t.i,t.x,t.y),r=new Be(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ze(t,e,n,r){var i=new Be(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Fe(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Be(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function je(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Ve(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],p=r,f=i;for(qe(e,r,n),o(e[i],h)>0&&qe(e,r,i);p<f;){for(qe(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[r],h)?qe(e,r,f):qe(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||Ue)}function qe(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ue(t,e){return t<e?-1:t>e?1:0}function Ge(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=g(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Fo(o[u],e,1,o[u].length-1,Xe),o[u]=o[u].slice(0,e));return o}function Xe(t,e){return e.area-t.area}function Ye(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Go)+a,i*Go*2,o*Go*2,Math.round(s))}function Ze(t,e){return t.x===e.x&&(t.x<0||t.x>bo)||t.y===e.y&&(t.y<0||t.y>bo)}function We(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>bo})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>bo})}function $e(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(He,this,e)}function He(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Ke(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}function Je(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Qe,this,e),this.length=this._features.length}function Qe(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function tn(t,e,n){if(3===t){var r=new Ho(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function en(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(Qo*n.x)+128,Math.round(Qo*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*ea&63)<<2,a*ea>>6)}function nn(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(na-1)}function rn(t,e){return e>0?e+2*t:t}function on(t,e,n){var r=e.layout.get("text-transform").evaluate(n);return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),mi.applyArabicShaping&&(t=mi.applyArabicShaping(t)),t}function an(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new vi(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new vi(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new vi(a.min)),max:n.evaluate(new vi(a.max))},propertyValue:e.value}}function sn(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function un(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function ln(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function cn(t){return t.type===ln.Bytes?t.readVarint()+t.pos:t.pos+1}function hn(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function pn(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function fn(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function dn(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function yn(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function gn(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function mn(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function vn(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function _n(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function bn(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function xn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function wn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function En(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Sn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function In(t,e,n){1===t&&n.readMessage(Cn,e)}function Cn(t,e,n){if(3===t){var r=n.readMessage(Tn,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;e.push({id:i,bitmap:new ko({width:a+2*Na,height:s+2*Na},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function Tn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Mn(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}function kn(t,e){return e-t}function Pn(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function An(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function On(t,e,n,r,i,o){for(var a=null,s=Pn(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],h=Pn(e-c.x,n,i,o)+c.badness;h<=s&&(a=c,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function Ln(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length;o++){var a=r[t.charCodeAt(o)];a&&(i+=a.metrics.advance+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),s=0,u=0;u<t.length;u++){var l=t.charCodeAt(u),c=r[l];c&&!Wa[l]&&(s+=c.metrics.advance+e),u<t.length-1&&($a[l]||!((i=l)<11904)&&(pi["Bopomofo Extended"](i)||pi.Bopomofo(i)||pi["CJK Compatibility Forms"](i)||pi["CJK Compatibility Ideographs"](i)||pi["CJK Compatibility"](i)||pi["CJK Radicals Supplement"](i)||pi["CJK Strokes"](i)||pi["CJK Symbols and Punctuation"](i)||pi["CJK Unified Ideographs Extension A"](i)||pi["CJK Unified Ideographs"](i)||pi["Enclosed CJK Letters and Months"](i)||pi["Halfwidth and Fullwidth Forms"](i)||pi.Hiragana(i)||pi["Ideographic Description Characters"](i)||pi["Kangxi Radicals"](i)||pi["Katakana Phonetic Extensions"](i)||pi.Katakana(i)||pi["Vertical Forms"](i)||pi["Yi Radicals"](i)||pi["Yi Syllables"](i)))&&o.push(On(u+1,s,a,o,An(l,t.charCodeAt(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(On(t.length,s,a,o,0,!0))}function Nn(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Rn(t,e,n,r,i){if(i){var o=e[t[r].glyph];if(o)for(var a=o.metrics.advance,s=(t[r].x+a)*i,u=n;u<=r;u++)t[u].x-=s}}var Dn="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},zn=i;i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Fn=function(t,e,n){this.column=t,this.row=e,this.zoom=n};Fn.prototype.clone=function(){return new Fn(this.column,this.row,this.zoom)},Fn.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},Fn.prototype.sub=function(t){return this.clone()._sub(t)},Fn.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},Fn.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var Bn=o;o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var jn=a(.25,.1,.25,1),Vn=1,qn={},Un={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Un);var Gn=function(t){function e(e,n,r){t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),Xn=function(t,e){var n=m(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new Gn(n.statusText,n.status,t.url))},n.send(),n},Yn=function(t,e){void 0===e&&(e={}),u(this,e),this.type=t},Zn=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",u({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Yn),Wn=function(){};Wn.prototype.on=function(t,e){return this._listeners=this._listeners||{},v(t,e,this._listeners),this},Wn.prototype.off=function(t,e){return _(t,e,this._listeners),_(t,e,this._oneTimeListeners),this},Wn.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},v(t,e,this._oneTimeListeners),this},Wn.prototype.fire=function(t){"string"==typeof t&&(t=new Yn(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var n=0,r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var i=0,o=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];i<o.length;i+=1){var a=o[i];_(e,a,this._oneTimeListeners),a.call(this,t)}var s=this._eventedParent;s&&(u(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else c(e,"error")?console.error(t&&t.error||t||"Empty error event"):c(e,"warning")&&console.warn(t&&t.warning||t||"Empty warning event");return this},Wn.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Wn.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var $n={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"line-gradient":{type:"color",function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}]}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}}},Hn=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)},Kn=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Jn=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};Jn.prototype.concat=function(t){return new Jn(this,t)},Jn.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Jn.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Qn={kind:"null"},tr={kind:"number"},er={kind:"string"},nr={kind:"boolean"},rr={kind:"color"},ir={kind:"object"},or={kind:"value"},ar={kind:"collator"},sr=[Qn,tr,er,nr,rr,ir,S(or)],ur=r(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return r("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in s)return s[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=r.indexOf("("),l=r.indexOf(")");if(-1!==u&&l+1===r.length){var c=r.substr(0,u),h=r.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),y=o(h[2]),g=y<=.5?y*(d+1):y+d-y*d,m=2*y-g;return[n(255*a(m,g,f+1/3)),n(255*a(m,g,f)),n(255*a(m,g,f-1/3)),p];default:return null}}return null}}catch(t){}}).parseCSSColor,lr=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};lr.parse=function(t){if(t){if(t instanceof lr)return t;if("string"==typeof t){var e=ur(t);if(e)return new lr(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},lr.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},lr.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]},lr.black=new lr(0,0,0,1),lr.white=new lr(1,1,1,1),lr.transparent=new lr(0,0,0,0);var cr=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};cr.prototype.compare=function(t,e){return this.collator.compare(t,e)},cr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var hr=function(t,e,n){this.type=ar,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};hr.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,nr);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,nr);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,er))?null:new hr(r,i,o)},hr.prototype.evaluate=function(t){return new cr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},hr.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},hr.prototype.possibleOutputs=function(){return[void 0]},hr.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var pr=function(t,e){this.type=t,this.value=e};pr.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof lr)return!0;if(e instanceof cr)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=M(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new pr(r,n)},pr.prototype.evaluate=function(){return this.value},pr.prototype.eachChild=function(){},pr.prototype.possibleOutputs=function(){return[this.value]},pr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof lr?["rgba"].concat(this.value.toArray()):this.value};var fr=function(t){this.name="ExpressionEvaluationError",this.message=t};fr.prototype.toJSON=function(){return this.message};var dr={string:er,number:tr,boolean:nr,object:ir},yr=function(t,e){this.type=t,this.args=e};yr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],r=dr[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,or);if(!a)return null;i.push(a)}return new yr(r,i)},yr.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!C(this.type,M(n)))return n;if(e===this.args.length-1)throw new fr("Expected value to be of type "+I(this.type)+", but found "+I(M(n))+" instead.")}return null},yr.prototype.eachChild=function(t){this.args.forEach(t)},yr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},yr.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(t){return t.serialize()}))};var gr={string:er,number:tr,boolean:nr},mr=function(t,e){this.type=t,this.input=e};mr.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var n,r;if(t.length>2){var i=t[1];if("string"!=typeof i||!(i in gr))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=gr[i]}else n=or;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2]}var o=S(n,r),a=e.parse(t[t.length-1],t.length-1,or);return a?new mr(o,a):null},mr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(C(this.type,M(e)))throw new fr("Expected value to be of type "+I(this.type)+", but found "+I(M(e))+" instead.");return e},mr.prototype.eachChild=function(t){t(this.input)},mr.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},mr.prototype.serialize=function(){var t=["array"],e=this.type.itemType;if("string"===e.kind||"number"===e.kind||"boolean"===e.kind){t.push(e.kind);var n=this.type.N;"number"==typeof n&&t.push(n)}return t.push(this.input.serialize()),t};var vr={"to-number":tr,"to-color":rr},_r=function(t,e){this.type=t,this.args=e};_r.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],r=vr[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,or);if(!a)return null;i.push(a)}return new _r(r,i)},_r.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1)if(n=null,"string"==typeof(e=i[r].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":T(e[0],e[1],e[2],e[3])))return new lr(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new fr(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,u=this.args;s<u.length;s+=1)if(null!==(a=u[s].evaluate(t))){var l=Number(a);if(!isNaN(l))return l}throw new fr("Could not convert "+JSON.stringify(a)+" to number.")},_r.prototype.eachChild=function(t){this.args.forEach(t)},_r.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},_r.prototype.serialize=function(){var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var br=["Unknown","Point","LineString","Polygon"],xr=function(){this._parseColorCache={}};xr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},xr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?br[this.feature.type]:this.feature.type:null},xr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},xr.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=lr.parse(t)),e};var wr=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};wr.prototype.evaluate=function(t){return this._evaluate(t,this.args)},wr.prototype.eachChild=function(t){this.args.forEach(t)},wr.prototype.possibleOutputs=function(){return[void 0]},wr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},wr.parse=function(t,e){var n=t[0],r=wr.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),s=[],u=1;u<t.length;u++){var l=t[u],c=void 0;if(1===a.length){var h=a[0][0];c=Array.isArray(h)?h[u-1]:h.type}var p=e.parse(l,1+s.length,c);if(!p)return null;s.push(p)}for(var f=null,d=0,y=a;d<y.length;d+=1){var g=y[d],m=g[0],v=g[1];if(f=new Sr(e.registry,e.path,null,e.scope),Array.isArray(m)&&m.length!==s.length)f.error("Expected "+m.length+" arguments, but found "+s.length+" instead.");else{for(var _=0;_<s.length;_++){var b=Array.isArray(m)?m[_]:m.type,x=s[_];f.concat(_+1).checkSubtype(b,x.type)}if(0===f.errors.length)return new wr(n,i,v,s)}}if(1===a.length)e.errors.push.apply(e.errors,f.errors);else{var w=(a.length?a:o).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(I).join(", ")+")":"("+I(e.type)+"...)"}).join(" | "),E=s.map(function(t){return I(t.type)}).join(", ");e.error("Expected arguments of type "+w+", but found ("+E+") instead.")}return null},wr.register=function(t,e){for(var n in wr.definitions=e,e)t[n]=wr};var Er=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Er.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Er(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Er.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Er.prototype.eachChild=function(){},Er.prototype.possibleOutputs=function(){return[void 0]},Er.prototype.serialize=function(){return["var",this.name]};var Sr=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new Jn),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};Sr.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Sr.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var i=r.parse(t,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,a=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind||"value"!==a.kind)if("array"===o.kind&&"value"===a.kind)e.omitTypeAnnotations||(i=new mr(o,i));else if("color"!==o.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(this.expectedType,i.type))return null}else e.omitTypeAnnotations||(i=new _r(o,[i]));else e.omitTypeAnnotations||(i=new yr(o,[i]))}if(!(i instanceof pr)&&function t(e){if(e instanceof Er)return t(e.boundExpression);if(e instanceof wr&&"error"===e.name)return!1;if(e instanceof hr)return!1;var n=e instanceof _r||e instanceof yr||e instanceof mr,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof pr}),!!r&&(k(e)&&P(e,["zoom","heatmap-density","line-progress","is-supported-script"]))}(i)){var s=new xr;try{i=new pr(i.type,i.evaluate(s))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Sr.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Sr(this.registry,r,e||null,i,this.errors)},Sr.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Kn(r,t))},Sr.prototype.checkSubtype=function(t,e){var n=C(t,e);return n&&this.error(n),n};var Ir=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};Ir.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,tr)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=e.parse(u,c,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new Ir(o,n,i)},Ir.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[A(e,r)].evaluate(t)},Ir.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ir.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Ir.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Cr=Object.freeze({number:O,color:function(t,e,n){return new lr(O(t.r,e.r,n),O(t.g,e.g,n),O(t.b,e.b,n),O(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return O(t,e[r],n)})}}),Tr=function(t,e,n,r){this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var i=0,o=r;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}};Tr.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=L(e,t.base,n,r);else if("linear"===t.name)i=L(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new zn(o[0],o[1],o[2],o[3]).solve(L(e,1,n,r))}return i},Tr.parse=function(t,e){var n=t[1],r=t[2],i=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,tr)))return null;var s=[],u=null;e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var l=0;l<i.length;l+=2){var c=i[l],h=i[l+1],p=l+3,f=l+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(s.length&&s[s.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var d=e.parse(h,f,u);if(!d)return null;u=u||d.type,s.push([c,d])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Tr(u,n,r,s):e.error("Type "+I(u)+" is not interpolatable.")},Tr.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=A(e,r),a=e[o],s=e[o+1],u=Tr.interpolationFactor(this.interpolation,r,a,s),l=n[o].evaluate(t),c=n[o+1].evaluate(t);return Cr[this.type.kind.toLowerCase()](l,c,u)},Tr.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Tr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Tr.prototype.serialize=function(){for(var t=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t};var Mr=function(t,e){this.type=t,this.args=e};Mr.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],u=e.parse(s,1+i.length,n,void 0,{omitTypeAnnotations:!0});if(!u)return null;n=n||u.type,i.push(u)}var l=r&&i.some(function(t){return C(r,t.type)});return new Mr(l?or:n,i)},Mr.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},Mr.prototype.eachChild=function(t){this.args.forEach(t)},Mr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Mr.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var kr=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};kr.prototype.evaluate=function(t){return this.result.evaluate(t)},kr.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},kr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,void 0,n);return a?new kr(n,a):null},kr.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},kr.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};var Pr=function(t,e,n){this.type=t,this.index=e,this.input=n};Pr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,tr),r=e.parse(t[2],2,S(e.expectedType||or));if(!n||!r)return null;var i=r.type;return new Pr(i.itemType,n,r)},Pr.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new fr("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new fr("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new fr("Array index must be an integer, but found "+e+" instead.");return n[e]},Pr.prototype.eachChild=function(t){t(this.index),t(this.input)},Pr.prototype.possibleOutputs=function(){return[void 0]},Pr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ar=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Ar.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return l.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,M(p)))return null}else n=M(p);if(void 0!==i[String(p)])return l.error("Branch labels must be unique.");i[String(p)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,n);if(!d)return null;var y=e.parse(t[t.length-1],t.length-1,r);return y?new Ar(n,r,d,i,o,y):null},Ar.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ar.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ar.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Ar.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i],s=r[t.cases[a]];void 0===s?(r[t.cases[a]]=n.length,n.push([t.cases[a],[a]])):n[s][1].push(a)}for(var u=function(e){return"number"===t.input.type.kind?Number(e):e},l=0,c=n;l<c.length;l+=1){var h=c[l],p=h[0],f=h[1];1===f.length?e.push(u(f[0])):e.push(f.map(u)),e.push(t.outputs[p].serialize())}return e.push(this.otherwise.serialize()),e};var Or=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};Or.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,nr);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new Or(n,r,s):null},Or.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Or.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},Or.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Or.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Lr=R("==",!1),Nr=R("!=",!0),Rr=function(t){this.type=tr,this.input=t};Rr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+I(n.type)+" instead."):new Rr(n):null},Rr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new fr("Expected value to be of type string or array, but found "+I(M(e))+" instead.")},Rr.prototype.eachChild=function(t){t(this.input)},Rr.prototype.possibleOutputs=function(){return[void 0]},Rr.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Dr={"==":Lr,"!=":Nr,array:mr,at:Pr,boolean:yr,case:Or,coalesce:Mr,collator:hr,interpolate:Tr,length:Rr,let:kr,literal:pr,match:Ar,number:yr,object:yr,step:Ir,string:yr,"to-color":_r,"to-number":_r,var:Er};wr.register(Dr,{error:[{kind:"error"},[er],function(t,e){var n=e[0];throw new fr(n.evaluate(t))}],typeof:[er,[or],function(t,e){return I(M(e[0].evaluate(t)))}],"to-string":[er,[or],function(t,e){var n=e[0],r=typeof(n=n.evaluate(t));return null===n?"":"string"===r||"number"===r||"boolean"===r?String(n):n instanceof lr?n.toString():JSON.stringify(n)}],"to-boolean":[nr,[or],function(t,e){var n=e[0];return Boolean(n.evaluate(t))}],"to-rgba":[S(tr,4),[rr],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[rr,[tr,tr,tr],D],rgba:[rr,[tr,tr,tr,tr],D],has:{type:nr,overloads:[[[er],function(t,e){return z(e[0].evaluate(t),t.properties())}],[[er,ir],function(t,e){var n=e[0],r=e[1];return z(n.evaluate(t),r.evaluate(t))}]]},get:{type:or,overloads:[[[er],function(t,e){return F(e[0].evaluate(t),t.properties())}],[[er,ir],function(t,e){var n=e[0],r=e[1];return F(n.evaluate(t),r.evaluate(t))}]]},properties:[ir,[],function(t){return t.properties()}],"geometry-type":[er,[],function(t){return t.geometryType()}],id:[or,[],function(t){return t.id()}],zoom:[tr,[],function(t){return t.globals.zoom}],"heatmap-density":[tr,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[tr,[],function(t){return t.globals.lineProgress||0}],"+":[tr,U(tr),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[tr,U(tr),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:tr,overloads:[[[tr,tr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[tr],function(t,e){return-e[0].evaluate(t)}]]},"/":[tr,[tr,tr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[tr,[tr,tr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[tr,[],function(){return Math.LN2}],pi:[tr,[],function(){return Math.PI}],e:[tr,[],function(){return Math.E}],"^":[tr,[tr,tr],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[tr,[tr],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[tr,[tr],function(t,e){var n=e[0];return Math.log10(n.evaluate(t))}],ln:[tr,[tr],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[tr,[tr],function(t,e){var n=e[0];return Math.log2(n.evaluate(t))}],sin:[tr,[tr],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[tr,[tr],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[tr,[tr],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[tr,[tr],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[tr,[tr],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[tr,[tr],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[tr,U(tr),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[tr,U(tr),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[tr,[tr],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[tr,[tr],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[tr,[tr],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[tr,[tr],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[nr,[er,or],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[nr,[or],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[nr,[er],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[nr,[er,or],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[nr,[or],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[nr,[er,or],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[nr,[or],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[nr,[er,or],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[nr,[or],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[nr,[er,or],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[nr,[or],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[nr,[or],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[nr,[],function(t){return null!==t.id()}],"filter-type-in":[nr,[S(er)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[nr,[S(or)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[nr,[er,S(or)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[nr,[er,S(or)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:nr,overloads:[[[tr,tr],j],[[er,er],j],[[er,er,ar],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))>0}]]},"<":{type:nr,overloads:[[[tr,tr],B],[[er,er],B],[[er,er,ar],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<0}]]},">=":{type:nr,overloads:[[[tr,tr],q],[[er,er],q],[[er,er,ar],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))>=0}]]},"<=":{type:nr,overloads:[[[tr,tr],V],[[er,er],V],[[er,er,ar],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<=0}]]},all:{type:nr,overloads:[[[nr,nr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[U(nr),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:nr,overloads:[[[nr,nr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[U(nr),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[nr,[nr],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[nr,[er],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[er,[er],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[er,[er],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[er,U(er),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}],"resolved-locale":[er,[ar],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var zr=.95047,Fr=1,Br=1.08883,jr=4/29,Vr=6/29,qr=3*Vr*Vr,Ur=Vr*Vr*Vr,Gr=Math.PI/180,Xr=180/Math.PI,Yr={forward:H,reverse:K,interpolate:function(t,e,n){return{l:O(t.l,e.l,n),a:O(t.a,e.a,n),b:O(t.b,e.b,n),alpha:O(t.alpha,e.alpha,n)}}},Zr={forward:function(t){var e=H(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*Xr;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Gr,n=t.c;return K({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(t.h,e.h,n),c:O(t.c,e.c,n),l:O(t.l,e.l,n),alpha:O(t.alpha,e.alpha,n)}}},Wr=Object.freeze({lab:Yr,hcl:Zr}),$r=function(t,e){var n;this.expression=t,this._warningHistory={},this._defaultValue="color"===(n=e).type&&Q(n.default)?new lr(0,0,0,0):"color"===n.type?lr.parse(n.default)||null:void 0===n.default?null:n.default,"enum"===e.type&&(this._enumValues=e.values)};$r.prototype.evaluateWithoutErrorHandling=function(t,e){return this._evaluator||(this._evaluator=new xr),this._evaluator.globals=t,this._evaluator.feature=e,this.expression.evaluate(this._evaluator)},$r.prototype.evaluate=function(t,e){this._evaluator||(this._evaluator=new xr),this._evaluator.globals=t,this._evaluator.feature=e;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new fr("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Hr=function(t,e){this.kind=t,this._styleExpression=e};Hr.prototype.evaluateWithoutErrorHandling=function(t,e){return this._styleExpression.evaluateWithoutErrorHandling(t,e)},Hr.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)};var Kr=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,n instanceof Tr&&(this._interpolationType=n.interpolation)};Kr.prototype.evaluateWithoutErrorHandling=function(t,e){return this._styleExpression.evaluateWithoutErrorHandling(t,e)},Kr.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)},Kr.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Tr.interpolationFactor(this._interpolationType,t,e,n):0};var Jr=function(t,e){this._parameters=t,this._specification=e,x(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,c=e.type||("interpolated"===n.function?"exponential":"interval");if(a&&((e=x({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],lr.parse(t[1])]})),e.default?e.default=lr.parse(e.default):e.default=lr.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Wr[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=it;else if("interval"===c)r=rt;else if("categorical"===c){r=nt,i=Object.create(null);for(var h=0,p=e.stops;h<p.length;h+=1){var f=p[h];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=ot}if(s){for(var d={},y=[],g=0;g<e.stops.length;g++){var m=e.stops[g],v=m[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},y.push(v)),d[v].stops.push([m[0].value,m[1]])}for(var _=[],b=0,w=y;b<w.length;b+=1){var E=w[b];_.push([d[E].zoom,t(d[E],n)])}return{kind:"composite",interpolationFactor:Tr.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return it({stops:_,base:e.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?Tr.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var a=t.zoom;return r(e,n,a,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?et(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};Jr.deserialize=function(t){return new Jr(t._parameters,t._specification)},Jr.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Qr={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0},ti={"*":function(){return[]},array:pt,boolean:function(t){var e=t.value,n=t.key,r=J(e);return"boolean"!==r?[new Hn(n,e,"boolean expected, "+r+" found")]:[]},number:ft,color:function(t){var e=t.key,n=t.value,r=J(n);return"string"!==r?[new Hn(e,n,"color expected, "+r+" found")]:null===ur(n)?[new Hn(e,n,'color expected, "'+n+'" found')]:[]},constants:b,enum:gt,filter:It,function:dt,layer:kt,object:ht,source:Pt,light:At,string:Ot};Rt.source=zt(Pt),Rt.light=zt(At),Rt.layer=zt(kt),Rt.filter=zt(It),Rt.paintProperty=zt(Tt),Rt.layoutProperty=zt(Mt);var ei=Rt,ni=Rt.light,ri=Rt.paintProperty,ii=Rt.layoutProperty,oi=Bt,ai=3;Bt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Bt.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Bt.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Bt.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{}),a},Bt.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(void 0===a[h]){var p=4*h;t<=l[p+2]&&e<=l[p+3]&&n>=l[p+0]&&r>=l[p+1]?(a[h]=!0,o.push(u[h])):a[h]=!1}}},Bt.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),h=s;h<=l;h++)for(var p=u;p<=c;p++){var f=this.d*p+h;if(i.call(this,t,e,n,r,f,o,a))return}},Bt.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Bt.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=ai+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[ai+a]=o,i.set(s,o),o+=s.length}return i[ai+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[ai+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var si=self.ImageData,ui={};for(var li in jt("Object",Object),oi.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),n},oi.deserialize=function(t){return new oi(t)},jt("Grid",oi),jt("Color",lr),jt("Error",Error),jt("StylePropertyFunction",Jr),jt("StyleExpression",$r,{omit:["_evaluator"]}),jt("ZoomDependentExpression",Kr),jt("ZoomConstantExpression",Hr),jt("CompoundExpression",wr,{omit:["_evaluate"]}),Dr)Dr[li]._classRegistryKey||jt("Expression_"+li,Dr[li]);var ci=function(){this.first=!0};ci.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var hi,pi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},fi=!1,di=null,yi=!1,gi=new Wn,mi={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return yi||null!=mi.applyArabicShaping}},vi=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ci,this.transition={})};vi.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Zt(r[n].charCodeAt(0),e))return!1;return!0}(t,mi.isLoaded())},vi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var _i=function(t,e){this.property=t,this.value=e,this.expression=ct(void 0===e?t.specification.default:e,t.specification)};_i.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},_i.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var bi=function(t){this.property=t,this.value=new _i(t,void 0)};bi.prototype.transitioned=function(t,e){return new wi(this.property,this.value,e,u({},t.transition,this.transition),t.now)},bi.prototype.untransitioned=function(){return new wi(this.property,this.value,null,{},0)};var xi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};xi.prototype.getValue=function(t){return f(this._values[t].value.value)},xi.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new bi(this._values[t].property)),this._values[t].value=new _i(this._values[t].property,null===e?void 0:f(e))},xi.prototype.getTransition=function(t){return f(this._values[t].transition)},xi.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new bi(this._values[t].property)),this._values[t].transition=f(e)||void 0},xi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},xi.prototype.transitioned=function(t,e){for(var n=new Ei(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},xi.prototype.untransitioned=function(){for(var t=new Ei(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var wi=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};wi.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(i))}return n};var Ei=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Ei.prototype.possiblyEvaluate=function(t){for(var e=new Ci(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},Ei.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};var Si=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Si.prototype.getValue=function(t){return f(this._values[t].value)},Si.prototype.setValue=function(t,e){this._values[t]=new _i(this._values[t].property,null===e?void 0:f(e))},Si.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Si.prototype.possiblyEvaluate=function(t){for(var e=new Ci(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Ii=function(t,e,n){this.property=t,this.value=e,this.globals=n};Ii.prototype.isConstant=function(){return"constant"===this.value.kind},Ii.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Ii.prototype.evaluate=function(t){return this.property.evaluate(this.value,this.globals,t)};var Ci=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Ci.prototype.get=function(t){return this._values[t]};var Ti=function(t){this.specification=t};Ti.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Ti.prototype.interpolate=function(t,e,n){var r=Cr[this.specification.type];return r?r(t,e,n):t};var Mi=function(t){this.specification=t};Mi.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Ii(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Ii(this,t.expression,e)},Mi.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Ii(this,{kind:"constant",value:void 0},t.globals);var r=Cr[this.specification.type];return r?new Ii(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.globals):t},Mi.prototype.evaluate=function(t,e,n){return"constant"===t.kind?t.value:t.evaluate(e,n)};var ki=function(t){this.specification=t};ki.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new vi(Math.floor(e.zoom-1),e)),t.expression.evaluate(new vi(Math.floor(e.zoom),e)),t.expression.evaluate(new vi(Math.floor(e.zoom+1),e)),e)}},ki.prototype._calculate=function(t,e,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},ki.prototype.interpolate=function(t){return t};var Pi=function(t){this.specification=t};Pi.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Pi.prototype.interpolate=function(){return!1};var Ai=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new _i(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new bi(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};jt("DataDrivenProperty",Mi),jt("DataConstantProperty",Ti),jt("CrossFadedProperty",ki),jt("ColorRampProperty",Pi);var Oi=function(t){function e(e,n){for(var r in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new Si(n.layout)),this._transitionablePaint=new xi(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(null!=e){var r="layers."+this.id+".layout."+t;if(this._validate(ii,r,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return c(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(null!=e){var r="layers."+this.id+".paint."+t;if(this._validate(ri,r,t,e,n))return}c(t,"-transition")?this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0):this._transitionablePaint.setValue(t,e)},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),p(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&Ft(this,t.call(ei,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:$n,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e}(Wn),Li={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ni=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ri=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ri.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Ri.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Ri.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ri.prototype.clear=function(){this.length=0},Ri.prototype.resize=function(t){this.reserve(t),this.length=t},Ri.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Ri.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=t,this.int16[r+1]=e,n},e}(Ri);Di.prototype.bytesPerElement=4,jt("StructArrayLayout2i4",Di);var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=r,i},e}(Ri);zi.prototype.bytesPerElement=8,jt("StructArrayLayout4i8",zi);var Fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e}(Ri);Fi.prototype.bytesPerElement=12,jt("StructArrayLayout2i4i12",Fi);var Bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},e}(Ri);Bi.prototype.bytesPerElement=12,jt("StructArrayLayout4i4ub12",Bi);var ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e}(Ri);ji.prototype.bytesPerElement=16,jt("StructArrayLayout4i4ui16",ji);var Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=n,r},e}(Ri);Vi.prototype.bytesPerElement=12,jt("StructArrayLayout3f12",Vi);var qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint32[n+0]=t,e},e}(Ri);qi.prototype.bytesPerElement=4,jt("StructArrayLayout1ul4",qi);var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var h=this.length;this.resize(h+1);var p=12*h,f=6*h;return this.int16[p+0]=t,this.int16[p+1]=e,this.int16[p+2]=n,this.int16[p+3]=r,this.int16[p+4]=i,this.int16[p+5]=o,this.uint32[f+3]=a,this.uint16[p+8]=s,this.uint16[p+9]=u,this.int16[p+10]=l,this.int16[p+11]=c,h},e}(Ri);Ui.prototype.bytesPerElement=24,jt("StructArrayLayout6i1ul2ui2i24",Ui);var Gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e}(Ri);Gi.prototype.bytesPerElement=12,jt("StructArrayLayout2i2i2i12",Gi);var Xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=t,this.uint8[r+1]=e,n},e}(Ri);Xi.prototype.bytesPerElement=4,jt("StructArrayLayout2ub4",Xi);var Yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f){var d=this.length;this.resize(d+1);var y=20*d,g=10*d,m=40*d;return this.int16[y+0]=t,this.int16[y+1]=e,this.uint16[y+2]=n,this.uint16[y+3]=r,this.uint32[g+2]=i,this.uint32[g+3]=o,this.uint32[g+4]=a,this.uint16[y+10]=s,this.uint16[y+11]=u,this.uint16[y+12]=l,this.float32[g+7]=c,this.float32[g+8]=h,this.uint8[m+36]=p,this.uint8[m+37]=f,d},e}(Ri);Yi.prototype.bytesPerElement=40,jt("StructArrayLayout2i2ui3ul3ui2f2ub40",Yi);var Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.float32[n+0]=t,e},e}(Ri);Zi.prototype.bytesPerElement=4,jt("StructArrayLayout1f4",Zi);var Wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=n,r},e}(Ri);Wi.prototype.bytesPerElement=6,jt("StructArrayLayout3i6",Wi);var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=n,r},e}(Ri);$i.prototype.bytesPerElement=8,jt("StructArrayLayout1ul2ui8",$i);var Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=n,r},e}(Ri);Hi.prototype.bytesPerElement=6,jt("StructArrayLayout3ui6",Hi);var Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=t,this.uint16[r+1]=e,n},e}(Ri);Ki.prototype.bytesPerElement=4,jt("StructArrayLayout2ui4",Ki);var Ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=t,this.float32[r+1]=e,n},e}(Ri);Ji.prototype.bytesPerElement=8,jt("StructArrayLayout2f8",Ji);var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=r,i},e}(Ri);Qi.prototype.bytesPerElement=16,jt("StructArrayLayout4f16",Qi);var to=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new Bn(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Ni);to.prototype.size=24;var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new to(this,t)},e}(Ui);jt("CollisionBoxArray",eo);var no=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(Ni);no.prototype.size=40;var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new no(this,t)},e}(Yi);jt("PlacedSymbolArray",ro);var io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(Ni);io.prototype.size=4;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new io(this,t)},e}(Zi);jt("GlyphOffsetArray",oo);var ao=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(Ni);ao.prototype.size=6;var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new ao(this,t)},e}(Wi);jt("SymbolLineVertexArray",so);var uo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(Ni);uo.prototype.size=8;var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new uo(this,t)},e}($i);jt("FeatureIndexArray",lo);var co=Wt([{name:"a_pos",components:2,type:"Int16"}],4).members,ho=function(t){void 0===t&&(t=[]),this.segments=t};ho.prototype.prepareSegment=function(t,e,n){var r=this.segments[this.segments.length-1];return t>ho.MAX_VERTEX_ARRAY_LENGTH&&d("Max vertices per segment is "+ho.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>ho.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},ho.prototype.get=function(){return this.segments},ho.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},ho.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,jt("SegmentVector",ho);var po=function(t,e){return 256*(t=s(Math.floor(t),0,255))+(e=s(Math.floor(e),0,255))},fo=function(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-1/0}};fo.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},fo.prototype.populatePaintArray=function(){},fo.prototype.upload=function(){},fo.prototype.destroy=function(){},fo.prototype.setUniforms=function(t,e,n,r){var i=r.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(e.uniforms["u_"+this.name],i)};var yo=function(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-1/0};var r="color"===n?Ji:Zi;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};yo.prototype.defines=function(){return[]},yo.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new vi(0),e);if("color"===this.type)for(var o=Ht(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.statistics.max=Math.max(this.statistics.max,i)}},yo.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},yo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},yo.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var go=function(t,e,n,r,i){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var o="color"===n?Qi:Ji;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};go.prototype.defines=function(){return[]},go.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new vi(this.zoom),e),o=this.expression.evaluate(new vi(this.zoom+1),e);if("color"===this.type)for(var a=Ht(i),s=Ht(o),u=r;u<t;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<t;l++)n.emplaceBack(i,o);this.statistics.max=Math.max(this.statistics.max,i,o)}},go.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},go.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},go.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},go.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var mo=function(){this.binders={},this.cacheKey="",this._buffers=[]};mo.createDynamic=function(t,e,n){var r=new mo,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Ii&&a.property.specification["property-function"]){var s=Kt(o,t.type),u=a.property.specification.type,l=a.property.useIntegerZoom;"constant"===a.value.kind?(r.binders[o]=new fo(a.value,s,u),i.push("/u_"+s)):"source"===a.value.kind?(r.binders[o]=new yo(a.value,s,u),i.push("/a_"+s)):(r.binders[o]=new go(a.value,s,u,l,e),i.push("/z_"+s))}}return r.cacheKey=i.sort().join(""),r},mo.prototype.populatePaintArrays=function(t,e){for(var n in this.binders)this.binders[n].populatePaintArray(t,e)},mo.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},mo.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)this.binders[i].setUniforms(t,e,r,n.get(i))},mo.prototype.getPaintVertexBuffers=function(){return this._buffers},mo.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof yo||i instanceof go)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},mo.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var vo=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=mo.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}};vo.prototype.populatePaintArrays=function(t,e){for(var n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e)},vo.prototype.get=function(t){return this.programConfigurations[t]},vo.prototype.upload=function(t){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t)},vo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},jt("ConstantBinder",fo),jt("SourceExpressionBinder",yo),jt("CompositeExpressionBinder",go),jt("ProgramConfiguration",mo,{omit:["_buffers"]}),jt("ProgramConfigurationSet",vo);var _o,bo=8192,xo=(_o=16,{min:-1*Math.pow(2,_o-1),max:Math.pow(2,_o-1)-1}),wo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Di,this.indexArray=new Hi,this.segments=new ho,this.programConfigurations=new vo(co,t.layers,t.zoom)};wo.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new vi(this.zoom),o)){var u=Jt(o);this.addFeature(o,u),e.featureIndex.insert(o,u,a,s,this.index)}}},wo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},wo.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,co),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},wo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wo.prototype.addFeature=function(t,e){for(var n=0,r=e;n<r.length;n+=1)for(var i=0,o=r[n];i<o.length;i+=1){var a=o[i],s=a.x,u=a.y;if(!(s<0||s>=bo||u<0||u>=bo)){var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=l.vertexLength;Qt(this.layoutVertexArray,s,u,-1,-1),Qt(this.layoutVertexArray,s,u,1,-1),Qt(this.layoutVertexArray,s,u,1,1),Qt(this.layoutVertexArray,s,u,-1,1),this.indexArray.emplaceBack(c,c+1,c+2),this.indexArray.emplaceBack(c,c+3,c+2),l.vertexLength+=4,l.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},jt("CircleBucket",wo,{omit:["layers"]});var Eo={paint:new Ai({"circle-radius":new Mi($n.paint_circle["circle-radius"]),"circle-color":new Mi($n.paint_circle["circle-color"]),"circle-blur":new Mi($n.paint_circle["circle-blur"]),"circle-opacity":new Mi($n.paint_circle["circle-opacity"]),"circle-translate":new Ti($n.paint_circle["circle-translate"]),"circle-translate-anchor":new Ti($n.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ti($n.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ti($n.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mi($n.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mi($n.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mi($n.paint_circle["circle-stroke-opacity"])})},So=r(function(t,e){var n;t.exports=((n=new Float32Array(3))[0]=0,n[1]=0,n[2]=0,function(){var t=new Float32Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0}(),{vec3:{transformMat3:function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},vec4:{transformMat4:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},mat2:{create:function(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},scale:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}},mat3:{create:function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},mat4:{create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},translate:function(t,e,n){var r,i,o,a,s,u,l,c,h,p,f,d,y=n[0],g=n[1],m=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*m+e[12],t[13]=e[1]*y+e[5]*g+e[9]*m+e[13],t[14]=e[2]*y+e[6]*g+e[10]*m+e[14],t[15]=e[3]*y+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*y+s*g+h*m+e[12],t[13]=i*y+u*g+p*m+e[13],t[14]=o*y+l*g+f*m+e[14],t[15]=a*y+c*g+d*m+e[15]),t},scale:function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},multiply:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],g=e[13],m=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*y,t[1]=_*i+b*u+x*p+w*g,t[2]=_*o+b*l+x*f+w*m,t[3]=_*a+b*c+x*d+w*v,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*h+w*y,t[5]=_*i+b*u+x*p+w*g,t[6]=_*o+b*l+x*f+w*m,t[7]=_*a+b*c+x*d+w*v,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*h+w*y,t[9]=_*i+b*u+x*p+w*g,t[10]=_*o+b*l+x*f+w*m,t[11]=_*a+b*c+x*d+w*v,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*h+w*y,t[13]=_*i+b*u+x*p+w*g,t[14]=_*o+b*l+x*f+w*m,t[15]=_*a+b*c+x*d+w*v,t},perspective:function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},rotateX:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t},rotateZ:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],g=e[14],m=e[15],v=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*y-h*d,I=c*g-p*d,C=c*m-f*d,T=h*g-p*y,M=h*m-f*y,k=p*m-f*g,P=v*k-_*M+b*T+x*C-w*I+E*S;return P?(P=1/P,t[0]=(s*k-u*M+l*T)*P,t[1]=(i*M-r*k-o*T)*P,t[2]=(y*E-g*w+m*x)*P,t[3]=(p*w-h*E-f*x)*P,t[4]=(u*C-a*k-l*I)*P,t[5]=(n*k-i*C+o*I)*P,t[6]=(g*b-d*E-m*_)*P,t[7]=(c*E-p*b+f*_)*P,t[8]=(a*M-s*C+l*S)*P,t[9]=(r*C-n*M-o*S)*P,t[10]=(d*w-y*b+m*v)*P,t[11]=(h*b-c*w-f*v)*P,t[12]=(s*I-a*T-u*S)*P,t[13]=(n*T-r*I+i*S)*P,t[14]=(y*_-d*x-g*v)*P,t[15]=(c*x-h*_+p*v)*P,t):null},ortho:function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}}})}),Io=(So.vec3,So.vec4),Co=(So.mat2,So.mat3,So.mat4),To=function(t){function e(e){t.call(this,e,Eo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new wo(t)},e.prototype.queryRadius=function(t){var e=t;return ce("circle-radius",this,e)+ce("circle-stroke-width",this,e)+he(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){for(var s=pe(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,o),u=this.paint.get("circle-radius").evaluate(e)+this.paint.get("circle-stroke-width").evaluate(e),l="map"===this.paint.get("circle-pitch-alignment"),c=l?s:function(t,e,n){return t.map(function(t){return t.map(function(t){return fe(t,e,n)})})}(s,a,i),h=l?u*o:u,p=0,f=n;p<f.length;p+=1)for(var d=0,y=f[p];d<y.length;d+=1){var g=y[d],m=l?g:fe(g,a,i),v=h,_=Io.transformMat4([],[g.x,g.y,0,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=_[3]/i.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=i.cameraToCenterDistance/_[3]),te(c,m,v))return!0}return!1},e}(Oi),Mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(wo);jt("HeatmapBucket",Mo,{omit:["layers"]});var ko=function(t,e){de(this,t,1,e)};ko.prototype.resize=function(t){ye(this,t,1)},ko.prototype.clone=function(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))},ko.copy=function(t,e,n,r,i){ge(t,e,n,r,i,1)};var Po=function(t,e){de(this,t,4,e)};Po.prototype.resize=function(t){ye(this,t,4)},Po.prototype.clone=function(){return new Po({width:this.width,height:this.height},new Uint8Array(this.data))},Po.copy=function(t,e,n,r,i){ge(t,e,n,r,i,4)},jt("AlphaImage",ko),jt("RGBAImage",Po);var Ao={paint:new Ai({"heatmap-radius":new Mi($n.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mi($n.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ti($n.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pi($n.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ti($n.paint_heatmap["heatmap-opacity"])})},Oo=function(t){function e(e){t.call(this,e,Ao),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Mo(t)},e.prototype.setPaintProperty=function(e,n,r){t.prototype.setPaintProperty.call(this,e,n,r),"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=me(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Oi),Lo={paint:new Ai({"hillshade-illumination-direction":new Ti($n.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ti($n.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ti($n.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ti($n.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ti($n.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ti($n.paint_hillshade["hillshade-accent-color"])})},No=function(t){function e(e){t.call(this,e,Lo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Oi),Ro=Wt([{name:"a_pos",components:2,type:"Int16"}],4).members,Do=ve,zo=ve;ve.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(je(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(je(t,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},ve.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Do.default=zo;var Fo=Ve,Bo=Ve;Fo.default=Bo;var jo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Di,this.indexArray=new Hi,this.indexArray2=new Ki,this.programConfigurations=new vo(Ro,t.layers,t.zoom),this.segments=new ho,this.segments2=new ho};jo.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new vi(this.zoom),o)){var u=Jt(o);this.addFeature(o,u),e.featureIndex.insert(o,u,a,s,this.index)}}},jo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},jo.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ro),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(t)},jo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},jo.prototype.addFeature=function(t,e){for(var n=0,r=Ge(e,500);n<r.length;n+=1){for(var i=r[n],o=0,a=0,s=i;a<s.length;a+=1)o+=s[a].length;for(var u=this.segments.prepareSegment(o,this.layoutVertexArray,this.indexArray),l=u.vertexLength,c=[],h=[],p=0,f=i;p<f.length;p+=1){var d=f[p];if(0!==d.length){d!==i[0]&&h.push(c.length/2);var y=this.segments2.prepareSegment(d.length,this.layoutVertexArray,this.indexArray2),g=y.vertexLength;this.layoutVertexArray.emplaceBack(d[0].x,d[0].y),this.indexArray2.emplaceBack(g+d.length-1,g),c.push(d[0].x),c.push(d[0].y);for(var m=1;m<d.length;m++)this.layoutVertexArray.emplaceBack(d[m].x,d[m].y),this.indexArray2.emplaceBack(g+m-1,g+m),c.push(d[m].x),c.push(d[m].y);y.vertexLength+=d.length,y.primitiveLength+=d.length}}for(var v=Do(c,h),_=0;_<v.length;_+=3)this.indexArray.emplaceBack(l+v[_],l+v[_+1],l+v[_+2]);u.vertexLength+=o,u.primitiveLength+=v.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},jt("FillBucket",jo,{omit:["layers"]});var Vo={paint:new Ai({"fill-antialias":new Ti($n.paint_fill["fill-antialias"]),"fill-opacity":new Mi($n.paint_fill["fill-opacity"]),"fill-color":new Mi($n.paint_fill["fill-color"]),"fill-outline-color":new Mi($n.paint_fill["fill-outline-color"]),"fill-translate":new Ti($n.paint_fill["fill-translate"]),"fill-translate-anchor":new Ti($n.paint_fill["fill-translate-anchor"]),"fill-pattern":new ki($n.paint_fill["fill-pattern"])})},qo=function(t){function e(e){t.call(this,e,Vo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t);var e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new jo(t)},e.prototype.queryRadius=function(){return he(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o){return ee(pe(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,o),n)},e}(Oi),Uo=Wt([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Go=Math.pow(2,13),Xo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Fi,this.indexArray=new Hi,this.programConfigurations=new vo(Uo,t.layers,t.zoom),this.segments=new ho};Xo.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new vi(this.zoom),o)){var u=Jt(o);this.addFeature(o,u),e.featureIndex.insert(o,u,a,s,this.index)}}},Xo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xo.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Uo),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},Xo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xo.prototype.addFeature=function(t,e){for(var n=0,r=Ge(e,500);n<r.length;n+=1){for(var i=r[n],o=0,a=0,s=i;a<s.length;a+=1)o+=s[a].length;for(var u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),l=0,c=i;l<c.length;l+=1){var h=c[l];if(0!==h.length&&!We(h))for(var p=0,f=0;f<h.length;f++){var d=h[f];if(f>=1){var y=h[f-1];if(!Ze(d,y)){u.vertexLength+4>ho.MAX_VERTEX_ARRAY_LENGTH&&(u=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=d.sub(y)._perp()._unit(),m=y.dist(d);p+m>32768&&(p=0),Ye(this.layoutVertexArray,d.x,d.y,g.x,g.y,0,0,p),Ye(this.layoutVertexArray,d.x,d.y,g.x,g.y,0,1,p),p+=m,Ye(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,p),Ye(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,p);var v=u.vertexLength;this.indexArray.emplaceBack(v,v+1,v+2),this.indexArray.emplaceBack(v+1,v+2,v+3),u.vertexLength+=4,u.primitiveLength+=2}}}}u.vertexLength+o>ho.MAX_VERTEX_ARRAY_LENGTH&&(u=this.segments.prepareSegment(o,this.layoutVertexArray,this.indexArray));for(var _=[],b=[],x=u.vertexLength,w=0,E=i;w<E.length;w+=1){var S=E[w];if(0!==S.length){S!==i[0]&&b.push(_.length/2);for(var I=0;I<S.length;I++){var C=S[I];Ye(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),_.push(C.x),_.push(C.y)}}}for(var T=Do(_,b),M=0;M<T.length;M+=3)this.indexArray.emplaceBack(x+T[M],x+T[M+1],x+T[M+2]);u.primitiveLength+=T.length/3,u.vertexLength+=o}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},jt("FillExtrusionBucket",Xo,{omit:["layers"]});var Yo={paint:new Ai({"fill-extrusion-opacity":new Ti($n["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mi($n["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ti($n["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ti($n["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ki($n["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mi($n["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mi($n["paint_fill-extrusion"]["fill-extrusion-base"])})},Zo=function(t){function e(e){t.call(this,e,Yo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Xo(t)},e.prototype.queryRadius=function(){return he(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o){return ee(pe(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i.angle,o),n)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Oi),Wo=Wt([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,$o=$e;$e.types=["Unknown","Point","LineString","Polygon"],$e.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Bn(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},$e.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},$e.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+u)/a;t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*t,u=this.extent*e,l=this.loadGeometry(),c=$e.types[this.type];switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];r(l=h);break;case 2:for(i=0;i<l.length;i++)r(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Ke(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)r(l[i][o])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Ho=Je;Je.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new $o(this._pbf,e,this.extent,this._keys,this._values)};var Ko={VectorTile:function(t,e){this.layers=t.readFields(tn,{},e)},VectorTileFeature:$o,VectorTileLayer:Ho},Jo=Ko.VectorTileFeature.types,Qo=63,ta=Math.cos(Math.PI/180*37.5),ea=.5,na=Math.pow(2,14)/ea,ra=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new Bi,this.indexArray=new Hi,this.programConfigurations=new vo(Wo,t.layers,t.zoom),this.segments=new ho};ra.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new vi(this.zoom),o)){var u=Jt(o);this.addFeature(o,u),e.featureIndex.insert(o,u,a,s,this.index)}}},ra.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ra.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wo),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},ra.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ra.prototype.addFeature=function(t,e){for(var n=this.layers[0].layout,r=n.get("line-join").evaluate(t),i=n.get("line-cap"),o=n.get("line-miter-limit"),a=n.get("line-round-limit"),s=0,u=e;s<u.length;s+=1){var l=u[s];this.addLine(l,t,r,i,o,a)}},ra.prototype.addLine=function(t,e,n,r,i,o){var a=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(a={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var s="Polygon"===Jo[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){a&&(a.tileTotal=function(t,e,n){for(var r,i,o=0,a=e;a<n-1;a++)r=t[a],i=t[a+1],o+=r.dist(i);return o}(t,l,u)),"bevel"===n&&(i=1.05);var c=bo/(512*this.overscaling)*15,h=t[l],p=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var f,d,y,g=r,m=s?"butt":r,v=!0,_=void 0,b=void 0,x=void 0,w=void 0;this.e1=this.e2=this.e3=-1,s&&(f=t[u-2],w=h.sub(f)._unit()._perp());for(var E=l;E<u;E++)if(!(b=s&&E===u-1?t[l+1]:t[E+1])||!t[E].equals(b)){w&&(x=w),f&&(_=f),f=t[E],w=b?b.sub(f)._unit()._perp():x;var S=(x=x||w).add(w);0===S.x&&0===S.y||S._unit();var I=S.x*w.x+S.y*w.y,C=0!==I?1/I:1/0,T=I<ta&&_&&b;if(T&&E>l){var M=f.dist(_);if(M>2*c){var k=f.sub(f.sub(_)._mult(c/M)._round());this.distance+=k.dist(_),this.addCurrentVertex(k,this.distance,x.mult(1),0,0,!1,p,a),_=k}}var P=_&&b,A=P?n:b?g:m;if(P&&"round"===A&&(C<o?A="miter":C<=2&&(A="fakeround")),"miter"===A&&C>i&&(A="bevel"),"bevel"===A&&(C>2&&(A="flipbevel"),C<i&&(A="miter")),_&&(this.distance+=f.dist(_)),"miter"===A)S._mult(C),this.addCurrentVertex(f,this.distance,S,0,0,!1,p,a);else if("flipbevel"===A){if(C>100)S=w.clone().mult(-1);else{var O=x.x*w.y-x.y*w.x>0?-1:1,L=C*x.add(w).mag()/x.sub(w).mag();S._perp()._mult(L*O)}this.addCurrentVertex(f,this.distance,S,0,0,!1,p,a),this.addCurrentVertex(f,this.distance,S.mult(-1),0,0,!1,p,a)}else if("bevel"===A||"fakeround"===A){var N=x.x*w.y-x.y*w.x>0,R=-Math.sqrt(C*C-1);if(N?(y=0,d=R):(d=0,y=R),v||this.addCurrentVertex(f,this.distance,x,d,y,!1,p,a),"fakeround"===A){for(var D=Math.floor(8*(.5-(I-.5))),z=void 0,F=0;F<D;F++)z=w.mult((F+1)/(D+1))._add(x)._unit(),this.addPieSliceVertex(f,this.distance,z,N,p,a);this.addPieSliceVertex(f,this.distance,S,N,p,a);for(var B=D-1;B>=0;B--)z=x.mult((B+1)/(D+1))._add(w)._unit(),this.addPieSliceVertex(f,this.distance,z,N,p,a)}b&&this.addCurrentVertex(f,this.distance,w,-d,-y,!1,p,a)}else"butt"===A?(v||this.addCurrentVertex(f,this.distance,x,0,0,!1,p,a),b&&this.addCurrentVertex(f,this.distance,w,0,0,!1,p,a)):"square"===A?(v||(this.addCurrentVertex(f,this.distance,x,1,1,!1,p,a),this.e1=this.e2=-1),b&&this.addCurrentVertex(f,this.distance,w,-1,-1,!1,p,a)):"round"===A&&(v||(this.addCurrentVertex(f,this.distance,x,0,0,!1,p,a),this.addCurrentVertex(f,this.distance,x,1,1,!0,p,a),this.e1=this.e2=-1),b&&(this.addCurrentVertex(f,this.distance,w,-1,-1,!0,p,a),this.addCurrentVertex(f,this.distance,w,0,0,!1,p,a)));if(T&&E<u-1){var j=f.dist(b);if(j>2*c){var V=f.add(b.sub(f)._mult(c/j)._round());this.distance+=V.dist(f),this.addCurrentVertex(V,this.distance,w.mult(1),0,0,!1,p,a),f=V}}v=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)}},ra.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(e=nn(e,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),en(l,t,u,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),en(l,t,u,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>na/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},ra.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=nn(e,o)),en(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},jt("LineBucket",ra,{omit:["layers"]});var ia=new Ai({"line-cap":new Ti($n.layout_line["line-cap"]),"line-join":new Mi($n.layout_line["line-join"]),"line-miter-limit":new Ti($n.layout_line["line-miter-limit"]),"line-round-limit":new Ti($n.layout_line["line-round-limit"])}),oa={paint:new Ai({"line-opacity":new Mi($n.paint_line["line-opacity"]),"line-color":new Mi($n.paint_line["line-color"]),"line-translate":new Ti($n.paint_line["line-translate"]),"line-translate-anchor":new Ti($n.paint_line["line-translate-anchor"]),"line-width":new Mi($n.paint_line["line-width"]),"line-gap-width":new Mi($n.paint_line["line-gap-width"]),"line-offset":new Mi($n.paint_line["line-offset"]),"line-blur":new Mi($n.paint_line["line-blur"]),"line-dasharray":new ki($n.paint_line["line-dasharray"]),"line-pattern":new ki($n.paint_line["line-pattern"]),"line-gradient":new Pi($n.paint_line["line-gradient"])}),layout:ia},aa=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new vi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r){return n=u({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r)},e}(Mi))(oa.paint.properties["line-width"].specification);aa.useIntegerZoom=!0;var sa=function(t){function e(e){t.call(this,e,oa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setPaintProperty=function(e,n,r){t.prototype.setPaintProperty.call(this,e,n,r),"line-gradient"===e&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=me(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=aa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ra(t)},e.prototype.queryRadius=function(t){var e=t,n=rn(ce("line-width",this,e),ce("line-gap-width",this,e)),r=ce("line-offset",this,e);return n/2+Math.abs(r)+he(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o){var a=pe(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),i.angle,o),s=o/2*rn(this.paint.get("line-width").evaluate(e),this.paint.get("line-gap-width").evaluate(e)),u=this.paint.get("line-offset").evaluate(e);return u&&(n=function(t,e){for(var n=[],r=new Bn(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s-1],l=o[s],c=o[s+1],h=0===s?r:l.sub(u)._unit()._perp(),p=s===o.length-1?r:c.sub(l)._unit()._perp(),f=h._add(p)._unit(),d=f.x*p.x+f.y*p.y;f._mult(1/d),a.push(f._mult(e)._add(l))}n.push(a)}return n}(n,u*o)),ne(a,n,s)},e}(Oi),ua=Wt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),la=Wt([{name:"a_projected_pos",components:3,type:"Float32"}],4),ca=(Wt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Wt([{name:"a_placed",components:2,type:"Uint8"}],4)),ha=(Wt([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Wt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),pa=Wt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Wt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Wt([{type:"Float32",name:"offsetX"}]),Wt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var fa={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},da=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(Bn);jt("Anchor",da);var ya=Ko.VectorTileFeature.types,ga=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],ma=function(t){this.layoutVertexArray=new ji,this.indexArray=new Hi,this.programConfigurations=t,this.segments=new ho,this.dynamicLayoutVertexArray=new Vi,this.opacityVertexArray=new qi,this.placedSymbolArray=new ro};ma.prototype.upload=function(t,e){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ua.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.programConfigurations.upload(t),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,la.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ga,!0),this.opacityVertexBuffer.itemSize=1},ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},jt("SymbolBuffers",ma);var va=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new ho,this.collisionVertexArray=new Xi};va.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ca.members,!0)},va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},jt("CollisionBuffers",va);var _a=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=an(this.zoom,e["text-size"]),this.iconSizeData=an(this.zoom,e["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")};_a.prototype.createArrays=function(){this.text=new ma(new vo(ua.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new ma(new vo(ua.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new va(Gi,ha.members,Ki),this.collisionCircle=new va(Gi,pa.members,Hi),this.glyphOffsetArray=new oo,this.lineVertexArray=new so},_a.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,h=new vi(this.zoom),p=0,f=t;p<f.length;p+=1){var d=f[p],y=d.feature,g=d.index,m=d.sourceLayerIndex;if(n._featureFilter(h,y)){var v=void 0;s&&(v=on(v=n.getValueAndResolveTokens("text-field",y),n,y));var _=void 0;if(u&&(_=n.getValueAndResolveTokens("icon-image",y)),v||_){var b={text:v,icon:_,index:g,sourceLayerIndex:m,geometry:Jt(y),properties:y.properties,type:ya[y.type]};if(void 0!==y.id&&(b.id=y.id),this.features.push(b),_&&(l[_]=!0),v)for(var x=i.evaluate(y).join(","),w=c[x]=c[x]||{},E="map"===r.get("text-rotation-alignment")&&"line"===r.get("symbol-placement"),S=Ut(v),I=0;I<v.length;I++)if(w[v.charCodeAt(I)]=!0,E&&S){var C=fa[v.charAt(I)];C&&(w[C.charCodeAt(0)]=!0)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,p=c.text;if(p){var f=i(p,h),d=i(p,h,!0);if(f in a&&d in o&&a[f]!==o[d]){var y=r(f,d,h),g=n(f,d,s[y].geometry);delete o[f],delete a[d],a[i(p,s[g].geometry,!0)]=g,s[y].geometry=null}else f in a?n(f,d,h):d in o?r(f,d,h):(e(l),o[f]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}(this.features))}},_a.prototype.isEmpty=function(){return 0===this.symbolInstances.length},_a.prototype.upload=function(t){this.text.upload(t,this.sortFeaturesByY),this.icon.upload(t,this.sortFeaturesByY),this.collisionBox.upload(t),this.collisionCircle.upload(t)},_a.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},_a.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},_a.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l){for(var c=t.indexArray,h=t.layoutVertexArray,p=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),d=this.glyphOffsetArray.length,y=f.vertexLength,g=0,m=e;g<m.length;g+=1){var v=m[g],_=v.tl,b=v.tr,x=v.bl,w=v.br,E=v.tex,S=f.vertexLength,I=v.glyphOffset[1];sn(h,s.x,s.y,_.x,I+_.y,E.x,E.y,n),sn(h,s.x,s.y,b.x,I+b.y,E.x+E.w,E.y,n),sn(h,s.x,s.y,x.x,I+x.y,E.x,E.y+E.h,n),sn(h,s.x,s.y,w.x,I+w.y,E.x+E.w,E.y+E.h,n),un(p,s,0),c.emplaceBack(S,S+1,S+2),c.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,y,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o)},_a.prototype._addCollisionDebugVertex=function(t,e,n,r,i){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},_a.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,h=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,h,o,a.anchor,new Bn(t,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new Bn(n,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new Bn(n,r)),this._addCollisionDebugVertex(c,h,o,a.anchor,new Bn(t,r)),u.vertexLength+=4,s){var p=i.indexArray;p.emplaceBack(l,l+1,l+2),p.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var f=i.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4}},_a.prototype.generateCollisionDebugBuffers=function(){for(var t=0,e=this.symbolInstances;t<e.length;t+=1){var n=e[t];n.textCollisionFeature={boxStartIndex:n.textBoxStartIndex,boxEndIndex:n.textBoxEndIndex},n.iconCollisionFeature={boxStartIndex:n.iconBoxStartIndex,boxEndIndex:n.iconBoxEndIndex};for(var r=0;r<2;r++){var i=n[0===r?"textCollisionFeature":"iconCollisionFeature"];if(i)for(var o=i.boxStartIndex;o<i.boxEndIndex;o++){var a=this.collisionBoxArray.get(o),s=a.x1,u=a.y1,l=a.x2,c=a.y2,h=a.radius>0;this.addCollisionDebugVertices(s,u,l,c,h?this.collisionCircle:this.collisionBox,a.anchorPoint,n,h)}}}},_a.prototype.deserializeCollisionBoxes=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},_a.prototype.hasTextData=function(){return this.text.segments.get().length>0},_a.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_a.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},_a.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},_a.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(t),o=Math.cos(t);n.sort(function(t,n){var r=e.symbolInstances[t],a=e.symbolInstances[n];return(i*r.anchor.x+o*r.anchor.y|0)-(i*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var a=0,s=n;a<s.length;a+=1){var u=s[a],l=e.symbolInstances[u];e.featureSortOrder.push(l.featureIndex);for(var c=0,h=l.placedTextSymbolIndices;c<h.length;c+=1)for(var p=h[c],f=e.text.placedSymbolArray.get(p),d=f.vertexStartIndex+4*f.numGlyphs,y=f.vertexStartIndex;y<d;y+=4)e.text.indexArray.emplaceBack(y,y+1,y+2),e.text.indexArray.emplaceBack(y+1,y+2,y+3);var g=e.icon.placedSymbolArray.get(u);if(g.numGlyphs){var m=g.vertexStartIndex;e.icon.indexArray.emplaceBack(m,m+1,m+2),e.icon.indexArray.emplaceBack(m+1,m+2,m+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},jt("SymbolBucket",_a,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),_a.MAX_GLYPHS=65535,_a.addDynamicAttributes=un;var ba=new Ai({"symbol-placement":new Ti($n.layout_symbol["symbol-placement"]),"symbol-spacing":new Ti($n.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ti($n.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Ti($n.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ti($n.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ti($n.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ti($n.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mi($n.layout_symbol["icon-size"]),"icon-text-fit":new Ti($n.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ti($n.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mi($n.layout_symbol["icon-image"]),"icon-rotate":new Mi($n.layout_symbol["icon-rotate"]),"icon-padding":new Ti($n.layout_symbol["icon-padding"]),"icon-keep-upright":new Ti($n.layout_symbol["icon-keep-upright"]),"icon-offset":new Mi($n.layout_symbol["icon-offset"]),"icon-anchor":new Mi($n.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ti($n.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ti($n.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ti($n.layout_symbol["text-rotation-alignment"]),"text-field":new Mi($n.layout_symbol["text-field"]),"text-font":new Mi($n.layout_symbol["text-font"]),"text-size":new Mi($n.layout_symbol["text-size"]),"text-max-width":new Mi($n.layout_symbol["text-max-width"]),"text-line-height":new Ti($n.layout_symbol["text-line-height"]),"text-letter-spacing":new Mi($n.layout_symbol["text-letter-spacing"]),"text-justify":new Mi($n.layout_symbol["text-justify"]),"text-anchor":new Mi($n.layout_symbol["text-anchor"]),"text-max-angle":new Ti($n.layout_symbol["text-max-angle"]),"text-rotate":new Mi($n.layout_symbol["text-rotate"]),"text-padding":new Ti($n.layout_symbol["text-padding"]),"text-keep-upright":new Ti($n.layout_symbol["text-keep-upright"]),"text-transform":new Mi($n.layout_symbol["text-transform"]),"text-offset":new Mi($n.layout_symbol["text-offset"]),"text-allow-overlap":new Ti($n.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ti($n.layout_symbol["text-ignore-placement"]),"text-optional":new Ti($n.layout_symbol["text-optional"])}),xa={paint:new Ai({"icon-opacity":new Mi($n.paint_symbol["icon-opacity"]),"icon-color":new Mi($n.paint_symbol["icon-color"]),"icon-halo-color":new Mi($n.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mi($n.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mi($n.paint_symbol["icon-halo-blur"]),"icon-translate":new Ti($n.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ti($n.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mi($n.paint_symbol["text-opacity"]),"text-color":new Mi($n.paint_symbol["text-color"]),"text-halo-color":new Mi($n.paint_symbol["text-halo-color"]),"text-halo-width":new Mi($n.paint_symbol["text-halo-width"]),"text-halo-blur":new Mi($n.paint_symbol["text-halo-blur"]),"text-translate":new Ti($n.paint_symbol["text-translate"]),"text-translate-anchor":new Ti($n.paint_symbol["text-translate-anchor"])}),layout:ba},wa=function(t){function e(e){t.call(this,e,xa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||st(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new _a(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Oi),Ea={paint:new Ai({"background-color":new Ti($n.paint_background["background-color"]),"background-pattern":new ki($n.paint_background["background-pattern"]),"background-opacity":new Ti($n.paint_background["background-opacity"])})},Sa=function(t){function e(e){t.call(this,e,Ea)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oi),Ia={paint:new Ai({"raster-opacity":new Ti($n.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ti($n.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ti($n.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ti($n.paint_raster["raster-brightness-max"]),"raster-saturation":new Ti($n.paint_raster["raster-saturation"]),"raster-contrast":new Ti($n.paint_raster["raster-contrast"]),"raster-fade-duration":new Ti($n.paint_raster["raster-fade-duration"])})},Ca={circle:To,heatmap:Oo,hillshade:No,fill:qo,"fill-extrusion":Zo,line:sa,symbol:wa,background:Sa,raster:function(t){function e(e){t.call(this,e,Ia)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Oi)},Ta=r(function(t,e){t.exports=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o,a=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,r=t[s].h||t[s].height,i=t[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,n,r){var i,o,a,s,u,l,c,h,p={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(n===(i=this.freebins[s]).maxh&&t===i.maxw)return this.allocFreebin(s,t,n,r);n>i.maxh||t>i.maxw||n<=i.maxh&&t<=i.maxw&&(a=i.maxw*i.maxh-t*n)<p.waste&&(p.waste=a,p.freebin=s)}for(s=0;s<this.shelves.length;s++)if(f+=(o=this.shelves[s]).h,!(t>o.free)){if(n===o.h)return this.allocShelf(s,t,n,r);n>o.h||n<o.h&&(a=(o.h-n)*t)<p.waste&&(p.freebin=-1,p.waste=a,p.shelf=s)}return-1!==p.freebin?this.allocFreebin(p.freebin,t,n,r):-1!==p.shelf?this.allocShelf(p.shelf,t,n,r):n<=this.h-f&&t<=this.w?(o=new e(f,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,r)):this.autoResize?(u=l=this.h,((c=h=this.w)<=u||t>c)&&(h=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(h,l),this.packOne(t,n,r)):null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t].alloc(e,n,r);return this.bins[r]=i,this.ref(i),i},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];e+=r.h,t=Math.max(r.w-r.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new function(t,e,n,r,i,o,a){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}(n,r,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t}()}),Ma=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},ka={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};ka.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},ka.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},ka.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ma.prototype,ka);var Pa=function(t){var e=new Po({width:0,height:0}),n={},r=new Ta(0,0,{autoResize:!0});for(var i in t){var o=t[i],a=r.packOne(o.data.width+2,o.data.height+2);e.resize({width:r.w,height:r.h}),Po.copy(o.data,e,{x:0,y:0},{x:a.x+1,y:a.y+1},o.data),n[i]=new Ma(a,o)}r.shrink(),e.resize({width:r.w,height:r.h}),this.image=e,this.positions=n};jt("ImagePosition",Ma),jt("ImageAtlas",Pa);var Aa=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},Oa=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=d,a/=256,l-=8);t[n+f-d]|=128*y},La=ln;ln.Varint=0,ln.Fixed64=1,ln.Bytes=2,ln.Fixed32=5,ln.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=wn(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Sn(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=wn(this.buf,this.pos)+4294967296*wn(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=wn(this.buf,this.pos)+4294967296*Sn(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Aa(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Aa(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return hn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return hn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return hn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return hn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return hn(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return hn(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=cn(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=cn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===ln.Varint)for(;this.buf[this.pos++]>127;);else if(e===ln.Bytes)this.pos=this.readVarint()+this.pos;else if(e===ln.Fixed32)this.pos+=4;else{if(e!==ln.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),En(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),En(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),En(this.buf,-1&t,this.pos),En(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),En(this.buf,-1&t,this.pos),En(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&pn(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Oa(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Oa(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&pn(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,ln.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,fn,e)},writePackedSVarint:function(t,e){this.writeMessage(t,dn,e)},writePackedBoolean:function(t,e){this.writeMessage(t,mn,e)},writePackedFloat:function(t,e){this.writeMessage(t,yn,e)},writePackedDouble:function(t,e){this.writeMessage(t,gn,e)},writePackedFixed32:function(t,e){this.writeMessage(t,vn,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,_n,e)},writePackedFixed64:function(t,e){this.writeMessage(t,bn,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,xn,e)},writeBytesField:function(t,e){this.writeTag(t,ln.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,ln.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,ln.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,ln.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,ln.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,ln.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,ln.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,ln.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,ln.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,ln.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Na=3,Ra=Na,Da=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,l(["receive"],this),this.target.addEventListener("message",this.receive,!1)};Da.prototype.send=function(t,e,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(i),data:Vt(e,o)},o)},Da.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?Vt(t):null,data:Vt(e,r)},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(qt(r.error)):e&&e(null,qt(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,qt(r.data),o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,a[0],a[1])[a[2]](qt(r.data),o)}else this.parent[r.type](qt(r.data))}},Da.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var za=n(r(function(t,e){!function(t){function e(t,e,r){e=Math.pow(2,r)-e-1;var i=n(256*t,256*e,r),o=n(256*(t+1),256*(e+1),r);return i[0]+","+i[1]+","+o[0]+","+o[1]}function n(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=function(t,n,r,i,o,a){return a=a||{},t+"?"+["bbox="+e(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+n].join("&")},t.getTileBBox=e,t.getMercCoords=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),Fa=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Mn(0,t,e,n)};Fa.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Fa.prototype.url=function(t,e){var n=za.getTileBBox(this.x,this.y,this.z),r=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var Ba=function(t,e){this.wrap=t,this.canonical=e,this.key=Mn(t,e.z,e.x,e.y)},ja=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Fa(n,+r,+i),this.key=Mn(e,t,r,i)};ja.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ja.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new ja(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ja(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},ja.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},ja.prototype.children=function(t){if(this.overscaledZ>=t)return[new ja(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new ja(e,this.wrap,e,n,r),new ja(e,this.wrap,e,n+1,r),new ja(e,this.wrap,e,n,r+1),new ja(e,this.wrap,e,n+1,r+1)]},ja.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ja.prototype.wrapped=function(){return new ja(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ja.prototype.unwrapTo=function(t){return new ja(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ja.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ja.prototype.toUnwrapped=function(){return new Ba(this.wrap,this.canonical)},ja.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ja.prototype.toCoordinate=function(){return new Fn(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},jt("CanonicalTileID",Fa),jt("OverscaledTileID",ja,{omit:["posMatrix"]});var Va=function(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};Va.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},Va.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},Va.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},jt("Level",Va);var qa=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new Va(256,512),this.loaded=!!n};qa.prototype.loadFromImage=function(t,e){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");if(e&&"mapbox"!==e&&"terrarium"!==e)return d('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.level=new Va(t.width,t.width/2),r=t.data;this._unpackData(n,r,e||"mapbox");for(var i=0;i<n.dim;i++)n.set(-1,i,n.get(0,i)),n.set(n.dim,i,n.get(n.dim-1,i)),n.set(i,-1,n.get(i,0)),n.set(i,n.dim,n.get(i,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},qa.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},qa.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},qa.prototype._unpackData=function(t,e,n){for(var r={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[n],i=0;i<t.dim;i++)for(var o=0;o<t.dim;o++){var a=4*(i*t.dim+o);t.set(o,i,this.scale*r(e[a],e[a+1],e[a+2]))}},qa.prototype.getPixels=function(){return new Po({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},qa.prototype.backfillBorder=function(t,e,n){var r=this.level,i=t.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var o=e*r.dim,a=e*r.dim+r.dim,u=n*r.dim,l=n*r.dim+r.dim;switch(e){case-1:o=a-1;break;case 1:a=o+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=s(o,-r.border,r.dim+r.border),h=s(a,-r.border,r.dim+r.border),p=s(u,-r.border,r.dim+r.border),f=s(l,-r.border,r.dim+r.border),d=-e*r.dim,y=-n*r.dim,g=p;g<f;g++)for(var m=c;m<h;m++)r.set(m,g,i.get(m+d,g+y))},jt("DEMData",qa);var Ua=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Ua.prototype.encode=function(t){return this._stringToNumber[t]},Ua.prototype.decode=function(t){return this._numberToString[t]};var Ga=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Xa={geometry:{configurable:!0}};Xa.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xa.geometry.set=function(t){this._geometry=t},Ga.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Ga.prototype,Xa);var Ya=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new oi(bo,16,0),this.featureIndexArray=n||new lo};Ya.prototype.insert=function(t,e,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=0;a<e.length;a++){for(var s=e[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}u[0]<bo&&u[1]<bo&&u[2]>=0&&u[3]>=0&&this.grid.insert(o,u[0],u[1],u[2],u[3])}},Ya.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ko.VectorTile(new La(this.rawTileData)).layers,this.sourceLayerCoder=new Ua(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ya.prototype.query=function(t,e){var n=this;this.loadVTLayers();for(var r=t.params||{},i=bo/t.tileSize/t.scale,o=vt(r.filter),a=t.queryGeometry,s=t.queryPadding*i,u=1/0,l=1/0,c=-1/0,h=-1/0,p=0;p<a.length;p++)for(var f=a[p],d=0;d<f.length;d++){var y=f[d];u=Math.min(u,y.x),l=Math.min(l,y.y),c=Math.max(c,y.x),h=Math.max(h,y.y)}var g=this.grid.query(u-s,l-s,c+s,h+s);g.sort(kn);for(var m,v={},_=0;_<g.length;_++)!function(s){var u=g[s];if(u!==m){m=u;var l=n.featureIndexArray.get(u),c=null;n.loadMatchingFeature(v,l.bucketIndex,l.sourceLayerIndex,l.featureIndex,o,r.layers,e,function(e,r){return c||(c=Jt(e)),r.queryIntersectsFeature(a,e,c,n.z,t.transform,i,t.posMatrix)})}}(_);return v},Ya.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new vi(this.tileID.overscaledZ),c))for(var h=0;h<u.length;h++){var p=u[h];if(!(o&&o.indexOf(p)<0)){var f=a[p];if(f&&(!s||s(c,f))){var d=new Ga(c,this.z,this.x,this.y);d.layer=f.serialize();var y=t[p];void 0===y&&(y=t[p]=[]),y.push({featureIndex:r,feature:d})}}}}},Ya.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var s=vt(r),u=0,l=t;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,e,n,c,s,i,o)}return a},Ya.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},jt("FeatureIndex",Ya,{omit:["rawTileData","sourceLayerCoder"]});var Za={horizontal:1,vertical:2,horizontalOnly:3},Wa={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$a={};$a[10]=!0,$a[32]=!0,$a[38]=!0,$a[40]=!0,$a[41]=!0,$a[43]=!0,$a[45]=!0,$a[47]=!0,$a[173]=!0,$a[183]=!0,$a[8203]=!0,$a[8208]=!0,$a[8211]=!0,$a[8231]=!0,t.commonjsGlobal=Dn,t.unwrapExports=n,t.createCommonjsModule=r,t.default=self,t.default$1=Bn,t.getJSON=function(t,e){var n=m(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var r;try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r)}else e(401===n.status&&t.url.match(/mapbox.com/)?new Gn(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url):new Gn(n.statusText,n.status,t.url))},n.send(),n},t.getImage=function(t,e){return Xn(t,function(t,n){if(t)e(t);else if(n){var r=new self.Image,i=self.URL||self.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var o=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=Un,t.RGBAImage=Po,t.default$2=Ta,t.ImagePosition=Ma,t.getArrayBuffer=Xn,t.default$3=function(t){return new La(t).readFields(In,[])},t.default$4=pi,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.AlphaImage=ko,t.default$5=$n,t.endsWith=c,t.extend=u,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.Evented=Wn,t.validateStyle=ei,t.validateLight=ni,t.emitValidationErrors=Ft,t.default$6=lr,t.number=O,t.Properties=Ai,t.Transitionable=xi,t.Transitioning=Ei,t.PossiblyEvaluated=Ci,t.DataConstantProperty=Ti,t.warnOnce=d,t.uniqueId=function(){return Vn++},t.default$7=Da,t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},t.clamp=s,t.Event=Yn,t.ErrorEvent=Zn,t.OverscaledTileID=ja,t.default$8=bo,t.createLayout=Wt,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<t.length;o++)e=Math.min(e,t[o].column),n=Math.min(n,t[o].row),r=Math.max(r,t[o].column),i=Math.max(i,t[o].row);var a=r-e,s=i-n,u=Math.max(a,s),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new Fn((e+r)/2,(n+i)/2,0).zoomTo(l)},t.CanonicalTileID=Fa,t.RasterBoundsArray=zi,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return i},t.default$9=Hn,t.bindAll=l,t.default$10=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.parseCacheControl=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e},t.default$11=Ya,t.default$12=Ga,t.default$13=vt,t.default$14=_a,t.CollisionBoxArray=eo,t.default$15=ho,t.TriangleIndexArray=Hi,t.default$16=vi,t.default$17=Fn,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.default$18=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.mat4=Co,t.vec4=Io,t.getSizeData=an,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?O(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=s(ct(r,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var u=t.propertyValue,l=t.zoomRange;return{uSizeT:s(ct(u,n.specification).interpolationFactor(e,l.min,l.max),0,1),uSize:0}},t.addDynamicAttributes=un,t.default$19=xa,t.WritingMode=Za,t.multiPolygonIntersectsBufferedPoint=te,t.multiPolygonIntersectsMultiPolygon=ee,t.multiPolygonIntersectsBufferedMultiLine=ne,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(le(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(le(t,e[r]))return!0;return!!ie(t,e)},t.distToSegmentSquared=se,t.default$20=So,t.default$21=Oi,t.default$22=function(t){return new Ca[t.type](t)},t.clone=f,t.filterObject=p,t.mapObject=h,t.registerForPluginAvailability=function(t){return di?t({pluginURL:di,completionCallback:hi}):gi.once("pluginAvailable",t),t},t.evented=gi,t.default$23=ci,t.default$24=mo,t.PosArray=Di,t.UnwrappedTileID=Ba,t.ease=jn,t.bezier=a,t.setRTLTextPlugin=function(t,e){if(fi)throw new Error("setRTLTextPlugin cannot be called multiple times.");fi=!0,di=t,hi=function(t){t?(fi=!1,di=null,e&&e(t)):yi=!0},gi.fire(new Yn("pluginAvailable",{pluginURL:di,completionCallback:hi}))},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.default$25=da,t.register=jt,t.GLYPH_PBF_BORDER=Ra,t.shapeText=function(t,e,n,r,i,o,a,s,u,l){var c=t.trim();l===Za.vertical&&(c=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&Yt(r)&&!fa[t[n+1]]||i&&Yt(i)&&!fa[t[n-1]]||!fa[t[n]]?e+=t[n]:e+=fa[t[n]]}return e}(c));var h=[],p={positionedGlyphs:h,text:c,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:l},f=mi.processBidirectionalText;return function(t,e,n,r,i,o,a,s,u){for(var l=0,c=-17,h=0,p=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,y=n;d<y.length;d+=1){var g=y[d];if((g=g.trim()).length){for(var m=p.length,v=0;v<g.length;v++){var _=g.charCodeAt(v),b=e[_];b&&(Xt(_)&&a!==Za.horizontal?(p.push({glyph:_,x:l,y:0,vertical:!0}),l+=u+s):(p.push({glyph:_,x:l,y:c,vertical:!1}),l+=b.metrics.advance+s))}if(p.length!==m){var x=l-s;h=Math.max(x,h),Rn(p,e,m,p.length-1,f)}l=0,c+=r}else c+=r}var w=Nn(i),E=w.horizontalAlign,S=w.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(e-n)*i,u=(-r*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(p,f,E,S,h,r,n.length);var I=n.length*r;t.top+=-S*I,t.bottom=t.top+I,t.left+=-E*h,t.right=t.left+h}(p,e,f?f(c,Ln(c,a,n,e)):function(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}(c,Ln(c,a,n,e)),r,i,o,l,a,u),!!h.length&&p},t.shapeIcon=function(t,e,n){var r=Nn(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0],s=e[1],u=a-t.displaySize[0]*i,l=u+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:u,right:l}},t.allowsVerticalWritingMode=Ut,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Gt(n[e].charCodeAt(0)))return!1;return!0},t.default$26=Ge,t.default$27=Ua,t.default$28=Pa,t.default$29=Ko,t.default$30=La,t.default$31=qa,t.__moduleExports=Ko,t.default$32=Bn,t.__moduleExports$1=La,t.plugin=mi}),t(["./chunk1.js"],function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.default$18;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}function r(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return!1;var f=c.angleTo(h)-h.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=h.dist(p)}return!0}function i(e,n,i,o,a,s,u,l,c){var h=o?.6*s*u:0,p=Math.max(o?o.right-o.left:0,a?a.right-a.left:0),f=0===e[0].x||e[0].x===c||0===e[0].y||e[0].y===c;return n-p*u<n/4&&(n=p*u+n/4),function e(n,i,o,a,s,u,l,c,h){for(var p=u/2,f=0,d=0;d<n.length-1;d++)f+=n[d].dist(n[d+1]);for(var y=0,g=i-o,m=[],v=0;v<n.length-1;v++){for(var _=n[v],b=n[v+1],x=_.dist(b),w=b.angleTo(_);g+o<y+x;){var E=((g+=o)-y)/x,S=t.number(_.x,b.x,E),I=t.number(_.y,b.y,E);if(S>=0&&S<h&&I>=0&&I<h&&g-p>=0&&g+p<=f){var C=new t.default$25(S,I,w,v);C._round(),a&&!r(n,C,u,a,s)||m.push(C)}}y+=x}return c||m.length||l||(m=e(n,y/2,o,a,s,u,l,!0,h)),m}(e,f?n/2*l%n:(p/2+2*s)*u*l%n,n,h,i,p*u,f,!1,c)}function o(t,e){if(!(this instanceof o))return new o(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||a,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function a(t,e){return t<e?-1:t>e?1:0}function s(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,c=e[0],h=0;h<c.length;h++){var p=c[h];(!h||p.x<i)&&(i=p.x),(!h||p.y<o)&&(o=p.y),(!h||p.x>a)&&(a=p.x),(!h||p.y>s)&&(s=p.y)}var f=a-i,d=s-o,y=Math.min(f,d),g=y/2,m=new St(null,u);if(0===y)return new t.default$1(i,o);for(var v=i;v<a;v+=y)for(var _=o;_<s;_+=y)m.push(new l(v+g,_+g,g,e));for(var b=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],c=i[s],h=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*h,r+=(u.y+c.y)*h,e+=3*h}return new l(n/e,r/e,0,t)}(e),x=m.length;m.length;){var w=m.pop();(w.d>b.d||!b.d)&&(b=w,r&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,x)),w.max-b.d<=n||(g=w.h/2,m.push(new l(w.p.x-g,w.p.y-g,g,e)),m.push(new l(w.p.x+g,w.p.y-g,g,e)),m.push(new l(w.p.x-g,w.p.y+g,g,e)),m.push(new l(w.p.x+g,w.p.y+g,g,e)),x+=4)}return r&&(console.log("num probes: "+x),console.log("best distance: "+b.d)),b.p}function u(t,e){return e.max-t.max}function l(e,n,r,i){this.p=new t.default$1(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,l=u-1;s<u;l=s++){var c=a[s],h=a[l];c.y>e.y!=h.y>e.y&&e.x<(h.x-c.x)*(e.y-c.y)/(h.y-c.y)+c.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,c,h))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}function c(e,n,r,i,o,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=t.default$8/s,e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,f=p.min,d=p.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new t.default$16(f)),l["text-size"].possiblyEvaluate(new t.default$16(d))]}if("composite"===e.iconSizeData.functionType){var y=e.iconSizeData.zoomRange,g=y.min,m=y.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new t.default$16(g)),l["icon-size"].possiblyEvaluate(new t.default$16(m))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new t.default$16(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new t.default$16(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new t.default$16(18));for(var v=24*u.get("text-line-height"),_="map"===u.get("text-rotation-alignment")&&"line"===u.get("symbol-placement"),b=u.get("text-keep-upright"),x=0,w=e.features;x<w.length;x+=1){var E=w[x],S=u.get("text-font").evaluate(E).join(","),I=n[S]||{},C=r[S]||{},T={},M=E.text;if(M){var k=u.get("text-offset").evaluate(E).map(function(t){return 24*t}),P=24*u.get("text-letter-spacing").evaluate(E),A=t.allowsLetterSpacing(M)?P:0,O=u.get("text-anchor").evaluate(E),L=u.get("text-justify").evaluate(E),N="line"!==u.get("symbol-placement")?24*u.get("text-max-width").evaluate(E):0;T.horizontal=t.shapeText(M,I,N,v,O,L,A,k,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(M)&&_&&b&&(T.vertical=t.shapeText(M,I,N,v,O,L,A,k,24,t.WritingMode.vertical))}var R=void 0;if(E.icon){var D=i[E.icon];D&&(R=t.shapeIcon(o[E.icon],u.get("icon-offset").evaluate(E),u.get("icon-anchor").evaluate(E)),void 0===e.sdfIcons?e.sdfIcons=D.sdf:e.sdfIcons!==D.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),D.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(T.horizontal||R)&&h(e,E,T,R,C,c)}a&&e.generateCollisionDebugBuffers()}function h(e,n,r,o,a,u){var l=u.layoutTextSize.evaluate(n),c=u.layoutIconSize.evaluate(n),h=u.textMaxSize.evaluate(n);void 0===h&&(h=l);var d=e.layers[0].layout,y=d.get("text-offset").evaluate(n),g=d.get("icon-offset").evaluate(n),m=l/24,v=e.tilePixelRatio*m,_=e.tilePixelRatio*h/24,b=e.tilePixelRatio*c,x=e.tilePixelRatio*d.get("symbol-spacing"),w=d.get("text-padding")*e.tilePixelRatio,E=d.get("icon-padding")*e.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,I="map"===d.get("text-rotation-alignment")&&"line"===d.get("symbol-placement"),C="map"===d.get("icon-rotation-alignment")&&"line"===d.get("symbol-placement"),T=x/2,M=function(i,s){s.x<0||s.x>=t.default$8||s.y<0||s.y>=t.default$8||e.symbolInstances.push(function(e,n,r,i,o,a,s,u,l,c,h,f,d,y,g,m,v,_,b,x,w){var E,S,I=e.addToLineVertexArray(n,r),C=0,T=0,M=0,k=i.horizontal?i.horizontal.text:"",P=[];i.horizontal&&(E=new Et(s,r,n,u,l,c,i.horizontal,h,f,d,e.overscaling),T+=p(e,n,i.horizontal,a,d,b,y,I,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,P,x,w),i.vertical&&(M+=p(e,n,i.vertical,a,d,b,y,I,t.WritingMode.vertical,P,x,w)));var A=E?E.boxStartIndex:e.collisionBoxArray.length,O=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var L=function(e,n,r,i,o,a){var s,u,l,c,h=n.image,p=r.layout,f=n.top-1/h.pixelRatio,d=n.left-1/h.pixelRatio,y=n.bottom+1/h.pixelRatio,g=n.right+1/h.pixelRatio;if("none"!==p.get("icon-text-fit")&&o){var m=g-d,v=y-f,_=p.get("text-size").evaluate(a)/24,b=o.left*_,x=o.right*_,w=o.top*_,E=x-b,S=o.bottom*_-w,I=p.get("icon-text-fit-padding")[0],C=p.get("icon-text-fit-padding")[1],T=p.get("icon-text-fit-padding")[2],M=p.get("icon-text-fit-padding")[3],k="width"===p.get("icon-text-fit")?.5*(S-v):0,P="height"===p.get("icon-text-fit")?.5*(E-m):0,A="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?E:m,O="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?S:v;s=new t.default$1(b+P-M,w+k-I),u=new t.default$1(b+P+C+A,w+k-I),l=new t.default$1(b+P+C+A,w+k+T+O),c=new t.default$1(b+P-M,w+k+T+O)}else s=new t.default$1(d,f),u=new t.default$1(g,f),l=new t.default$1(g,y),c=new t.default$1(d,y);var L=r.layout.get("icon-rotate").evaluate(a)*Math.PI/180;if(L){var N=Math.sin(L),R=Math.cos(L),D=[R,-N,N,R];s._matMult(D),u._matMult(D),c._matMult(D),l._matMult(D)}return[{tl:s,tr:u,bl:c,br:l,tex:h.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,b);S=new Et(s,r,n,u,l,c,o,g,m,!1,e.overscaling),C=4*L.length;var N=e.iconSizeData,R=null;"source"===N.functionType?R=[10*a.layout.get("icon-size").evaluate(b)]:"composite"===N.functionType&&(R=[10*w.compositeIconSizes[0].evaluate(b),10*w.compositeIconSizes[1].evaluate(b)]),e.addSymbols(e.icon,L,R,_,v,b,!1,n,I.lineStartIndex,I.lineLength)}var D=S?S.boxStartIndex:e.collisionBoxArray.length,z=S?S.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=t.default$14.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:k,textBoxStartIndex:A,textBoxEndIndex:O,iconBoxStartIndex:D,iconBoxEndIndex:z,textOffset:y,iconOffset:_,anchor:n,line:r,featureIndex:u,feature:b,numGlyphVertices:T,numVerticalGlyphVertices:M,numIconVertices:C,textOpacityState:new wt,iconOpacityState:new wt,isDuplicate:!1,placedTextSymbolIndices:P,crossTileID:0}}(e,s,i,r,o,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,v,w,I,y,b,E,C,g,n,a,u))};if("line"===d.get("symbol-placement"))for(var k=0,P=function(e,n,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],p=u[c+1];h.x<0&&p.x<0||(h.x<0?h=new t.default$1(0,h.y+(p.y-h.y)*((0-h.x)/(p.x-h.x)))._round():p.x<0&&(p=new t.default$1(0,h.y+(p.y-h.y)*((0-h.x)/(p.x-h.x)))._round()),h.y<0&&p.y<0||(h.y<0?h=new t.default$1(h.x+(p.x-h.x)*((0-h.y)/(p.y-h.y)),0)._round():p.y<0&&(p=new t.default$1(h.x+(p.x-h.x)*((0-h.y)/(p.y-h.y)),0)._round()),h.x>=i&&p.x>=i||(h.x>=i?h=new t.default$1(i,h.y+(p.y-h.y)*((i-h.x)/(p.x-h.x)))._round():p.x>=i&&(p=new t.default$1(i,h.y+(p.y-h.y)*((i-h.x)/(p.x-h.x)))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new t.default$1(h.x+(p.x-h.x)*((o-h.y)/(p.y-h.y)),o)._round():p.y>=o&&(p=new t.default$1(h.x+(p.x-h.x)*((o-h.y)/(p.y-h.y)),o)._round()),l&&h.equals(l[l.length-1])||(l=[h],a.push(l)),l.push(p)))))}return a}(n.geometry,0,0,t.default$8,t.default$8);k<P.length;k+=1)for(var A=P[k],O=0,L=i(A,x,S,r.vertical||r.horizontal,o,24,_,e.overscaling,t.default$8);O<L.length;O+=1){var N=L[O],R=r.horizontal;R&&f(e,R.text,T,N)||M(A,N)}else if("Polygon"===n.type)for(var D=0,z=t.default$26(n.geometry,0);D<z.length;D+=1){var F=z[D],B=s(F,16);M(F[0],new t.default$25(B.x,B.y,0))}else if("LineString"===n.type)for(var j=0,V=n.geometry;j<V.length;j+=1){var q=V[j];M(q,new t.default$25(q[0].x,q[0].y,0))}else if("Point"===n.type)for(var U=0,G=n.geometry;U<G.length;U+=1)for(var X=0,Y=G[U];X<Y.length;X+=1){var Z=Y[X];M([Z],new t.default$25(Z.x,Z.y,0))}}function p(e,n,r,i,o,a,s,u,l,c,h,p){var f=function(e,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o)*Math.PI/180,u=r.layout.get("text-offset").evaluate(o).map(function(t){return 24*t}),l=n.positionedGlyphs,c=[],h=0;h<l.length;h++){var p=l[h],f=a[p.glyph];if(f){var d=f.rect;if(d){var y=t.GLYPH_PBF_BORDER+1,g=f.metrics.advance/2,m=i?[p.x+g,p.y]:[0,0],v=i?[0,0]:[p.x+g+u[0],p.y+u[1]],_=f.metrics.left-y-g+v[0],b=-f.metrics.top-y+v[1],x=_+d.w,w=b+d.h,E=new t.default$1(_,b),S=new t.default$1(x,b),I=new t.default$1(_,w),C=new t.default$1(x,w);if(i&&p.vertical){var T=new t.default$1(-g,g),M=-Math.PI/2,k=new t.default$1(5,0);E._rotateAround(M,T)._add(k),S._rotateAround(M,T)._add(k),I._rotateAround(M,T)._add(k),C._rotateAround(M,T)._add(k)}if(s){var P=Math.sin(s),A=Math.cos(s),O=[A,-P,P,A];E._matMult(O),S._matMult(O),I._matMult(O),C._matMult(O)}c.push({tl:E,tr:S,bl:I,br:C,tex:d,writingMode:n.writingMode,glyphOffset:m})}}}return c}(0,r,i,o,a,h),d=e.textSizeData,y=null;return"source"===d.functionType?y=[10*i.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(y=[10*p.compositeTextSizes[0].evaluate(a),10*p.compositeTextSizes[1].evaluate(a)]),e.addSymbols(e.text,f,y,s,o,a,l,n,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function f(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function d(e,n){for(var r=new t.default$16(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}function y(e,n){var r=t.getArrayBuffer(e.request,function(e,r){e?n(e):r&&n(null,{vectorTile:new t.default$29.VectorTile(new t.default$30(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires})});return function(){r.abort(),n()}}function g(t){var e=0;if(t&&t.length>0){e+=Math.abs(m(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(m(t[n]))}return e}function m(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(v(t[o][0])-v(e[0]))*Math.sin(v(n[1]));s=s*At.RADIUS*At.RADIUS/2}return s}function v(t){return t*Math.PI/180}function _(t,e){return function(n){return t(n,e)}}function b(t,e){e=!!e,t[0]=x(t[0],e);for(var n=1;n<t.length;n++)t[n]=x(t[n],!e);return t}function x(t,e){return function(t){return Ot.ring(t)>=0}(t)===e?t:t.reverse()}function w(t,e){this.options=e||{},this.features=t,this.length=t.length}function E(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function S(e){var n=new t.__moduleExports$1;return function(t,e){for(var n in t.layers)e.writeMessage(3,I,t.layers[n])}(e,n),n.finish()}function I(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,C,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,A,o[n])}function C(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,T,t),e.writeVarintField(3,n.type),e.writeMessage(4,P,n)}function T(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,p=a[h];void 0===p&&(i.push(l),p=i.length-1,a[h]=p),e.writeVarint(p)}}function M(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function P(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(M(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(M(2,c-1));var p=u[h].x-i,f=u[h].y-o;e.writeVarint(k(p)),e.writeVarint(k(f)),i+=p,o+=f}3===r&&e.writeVarint(M(7,0))}}function A(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function O(t,e,n,r){L(t,n,r),L(e,2*n,2*r),L(e,2*n+1,2*r+1)}function L(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function N(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function R(t,e,n,r,i){e=e||D,n=n||z,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);Ut(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function D(t){return t[0]}function z(t){return t[1]}function F(t){this.options=X(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function B(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function j(t,e){var n=t.geometry.coordinates;return{x:U(n[0]),y:G(n[1]),zoom:1/0,id:e,parentId:-1}}function V(t){return{type:"Feature",properties:q(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function q(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return X(X({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function U(t){return t/360+.5}function G(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function X(t,e){for(var n in e)t[n]=e[n];return t}function Y(t){return t.x}function Z(t){return t.y}function W(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function $(t,e,n,r){var i={id:t||null,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)H(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)H(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)H(t,e[r][i])}(i),i}function H(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function K(t,e,n){if(e.geometry){var r=e.geometry.coordinates,i=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[];if("Point"===i)J(r,a);else if("MultiPoint"===i)for(var s=0;s<r.length;s++)J(r[s],a);else if("LineString"===i)Q(r,a,o,!1);else if("MultiLineString"===i)if(n.lineMetrics)for(s=0;s<r.length;s++)return a=[],Q(r[s],a,o,!1),void t.push($(e.id,"LineString",a,e.properties));else tt(r,a,o,!1);else if("Polygon"===i)tt(r,a,o,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(s=0;s<e.geometry.geometries.length;s++)K(t,{id:e.id,geometry:e.geometry.geometries[s],properties:e.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(s=0;s<r.length;s++){var u=[];tt(r[s],u,o,!0),a.push(u)}}t.push($(e.id,i,a,e.properties))}}function J(t,e){e.push(et(t[0])),e.push(nt(t[1])),e.push(0)}function Q(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=et(t[s][0]),l=nt(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=e[n],u=e[n+1],l=e[r],c=e[r+1],h=n+3;h<r;h+=3){var p=W(e[h],e[h+1],s,u,l,c);p>a&&(o=h,a=p)}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function tt(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Q(t[i],o,n,r),e.push(o)}}function et(t){return t/360+.5}function nt(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function rt(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<=r)return t;if(o>r||a<n)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<=r)u.push(c);else if(!(f>r||d<n)){var y=[];if("Point"===p||"MultiPoint"===p)it(h,y,n,r,i);else if("LineString"===p)ot(h,y,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)st(h,y,n,r,i,!1);else if("Polygon"===p)st(h,y,n,r,i,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var m=[];st(h[g],m,n,r,i,!0),m.length&&y.push(m)}if(y.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<y.length;g++)u.push($(c.id,p,y[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===y.length?(p="LineString",y=y[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===y.length?"Point":"MultiPoint"),u.push($(c.id,p,y,c.tags))}}}return u.length?u:null}function it(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function ot(t,e,n,r,i,o,a){for(var s,u,l=at(t),c=0===i?lt:ct,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],y=t[p+2],g=t[p+3],m=t[p+4],v=0===i?f:d,_=0===i?g:m,b=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(d-m,2))),v<n?_>=n&&(u=c(l,f,d,g,m,n),a&&(l.start=h+s*u)):v>r?_<=r&&(u=c(l,f,d,g,m,r),a&&(l.start=h+s*u)):ut(l,f,d,y),_<n&&v>=n&&(u=c(l,f,d,g,m,n),b=!0),_>r&&v<=r&&(u=c(l,f,d,g,m,r),b=!0),!o&&b&&(a&&(l.end=h+s*u),e.push(l),l=at(t)),a&&(h+=s)}var x=t.length-3;f=t[x],d=t[x+1],y=t[x+2],(v=0===i?f:d)>=n&&v<=r&&ut(l,f,d,y),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&ut(l,l[0],l[1],l[2]),l.length&&e.push(l)}function at(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function st(t,e,n,r,i,o){for(var a=0;a<t.length;a++)ot(t[a],e,n,r,i,o,!1)}function ut(t,e,n,r){t.push(e),t.push(n),t.push(r)}function lt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function ct(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function ht(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=pt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(pt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(pt(o.geometry[s][l],e));i.push(u)}n.push($(o.id,a,i,o.tags))}return n}function pt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function ft(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(dt(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push(dt(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(h)}}return t.transformed=!0,t}function dt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function yt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,gt(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,h=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function gt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)mt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)mt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)mt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function mt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function vt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)K(n,t.features[r],e);else"Feature"===t.type?K(n,t,e):K(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=rt(t,1,-1-n,n,0,-1,2,e),o=rt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=rt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=ht(i,1).concat(r)),o&&(r=r.concat(ht(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _t(t,e,n){return 32*((1<<t)*n+e)+t}function bt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new Dt(r.features),o=Bt(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}var xt=function(t){t&&this.replace(t)};xt.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},xt.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];i._layerConfigs[s.id]=s;var u=i._layers[s.id]=t.default$22(s);u._featureFilter=t.default$13(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var h=c[l];delete i._layerConfigs[h],delete i._layers[h]}this.familiesBySource={};for(var p=0,f=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}(t.values(this._layerConfigs));p<f.length;p+=1){var d=f[p].map(function(t){return i._layers[t.id]}),y=d[0];if("none"!==y.visibility){var g=y.source||"",m=i.familiesBySource[g];m||(m=i.familiesBySource[g]={});var v=y.sourceLayer||"_geojsonTileLayer",_=m[v];_||(_=m[v]=[]),_.push(d)}}};var wt=function(){this.opacity=0,this.targetOpacity=0,this.time=0};wt.prototype.clone=function(){var t=new wt;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},t.register("OpacityState",wt);var Et=function(t,e,n,r,i,o,a,s,u,l,c){var h=a.top*s-u,p=a.bottom*s+u,f=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=t.length,l){var y=p-h,g=d-f;y>0&&(y=Math.max(10*s,y),this._addLineCollisionCircles(t,e,n,n.segment,g,y,r,i,o,c))}else t.emplaceBack(n.x,n.y,f,h,d,p,r,i,o,0,0);this.boxEndIndex=t.length};Et.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,h=Math.floor(i/c),p=1+.4*Math.log(l)/Math.LN2,f=Math.floor(h*p/2),d=-o/2,y=n,g=r+1,m=d,v=-i/2,_=v-i/4;do{if(--g<0){if(m>v)return;g=0;break}m-=e[g].dist(y),y=e[g]}while(m>_);for(var b=e[g].dist(e[g+1]),x=-f;x<h+f;x++){var w=x*c,E=v+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<m)){for(;m+b<E;){if(m+=b,++g+1>=e.length)return;b=e[g].dist(e[g+1])}var S=E-m,I=e[g],C=e[g+1].sub(I)._unit()._mult(S)._add(I)._round(),T=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(C.x,C.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,T)}}};var St=o,It=o;o.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},St.default=It;var Ct=function(e){var n=new t.AlphaImage({width:0,height:0}),r={},i=new t.default$2(0,0,{autoResize:!0});for(var o in e){var a=e[o],s=r[o]={};for(var u in a){var l=a[+u];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c=i.packOne(l.bitmap.width+2,l.bitmap.height+2);n.resize({width:i.w,height:i.h}),t.AlphaImage.copy(l.bitmap,n,{x:0,y:0},{x:c.x+1,y:c.y+1},l.bitmap),s[u]={rect:c,metrics:l.metrics}}}}i.shrink(),n.resize({width:i.w,height:i.h}),this.image=n,this.positions=r};t.register("GlyphAtlas",Ct);var Tt=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};Tt.prototype.parse=function(e,n,r,i){function o(){if(l)return i(l);if(h&&p){var e=new Ct(h),n=new t.default$28(p);for(var r in f){var o=f[r];o instanceof t.default$14&&(d(o.layers,this.zoom),c(o,h,e.positions,p,n.positions,this.showCollisionBoxes))}this.status="done",i(null,{buckets:t.values(f).filter(function(t){return!t.isEmpty()}),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,iconAtlasImage:n.image})}}var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var s=new t.default$27(Object.keys(e.layers).sort()),u=new t.default$11(this.tileID);u.bucketLayerIDs=[];var l,h,p,f={},y={featureIndex:u,iconDependencies:{},glyphDependencies:{}},g=n.familiesBySource[this.source];for(var m in g){var v=e.layers[m];if(v){1===v.version&&t.warnOnce('Vector tile source "'+a.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=s.encode(m),b=[],x=0;x<v.length;x++){var w=v.feature(x);b.push({feature:w,index:x,sourceLayerIndex:_})}for(var E=0,S=g[m];E<S.length;E+=1){var I=S[E],C=I[0];C.minzoom&&a.zoom<Math.floor(C.minzoom)||C.maxzoom&&a.zoom>=C.maxzoom||"none"!==C.visibility&&(d(I,a.zoom),(f[C.id]=C.createBucket({index:u.bucketLayerIDs.length,layers:I,zoom:a.zoom,pixelRatio:a.pixelRatio,overscaling:a.overscaling,collisionBoxArray:a.collisionBoxArray,sourceLayerIndex:_})).populate(b,y),u.bucketLayerIDs.push(I.map(function(t){return t.id})))}}}var T=t.mapObject(y.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(T).length?r.send("getGlyphs",{uid:this.uid,stacks:T},function(t,e){l||(l=t,h=e,o.call(a))}):h={};var M=Object.keys(y.iconDependencies);M.length?r.send("getImages",{icons:M},function(t,e){l||(l=t,p=e,o.call(a))}):p={},o.call(this)};var Mt=function(t){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(t)},kt=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||y,this.loading={},this.loaded={}};kt.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=this.loading[i]=new Tt(e);o.abort=this.loadVectorData(e,function(a,s){if(delete r.loading[i],a||!s)return n(a);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(e.request&&e.request.collectResourceTiming){var h=Mt(e.request.url);h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=o})},kt.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,a)}},kt.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},kt.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var Pt=function(){this.loading={},this.loaded={}};Pt.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=new t.default$31(r);this.loading[r]=o,o.loadFromImage(e.rawImageData,i),delete this.loading[r],this.loaded=this.loaded||{},this.loaded[r]=o,n(null,o)},Pt.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var At={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},Ot={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return g(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=g(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:m},Lt=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(_(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=b(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(_(b,e))),t}(e,n);default:return e}},Nt=t.default$29.VectorTileFeature.prototype.toGeoJSON,Rt=function(e){this._feature=e,this.extent=t.default$8,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};Rt.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.default$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var h=c[l];u.push(new t.default$1(h[0],h[1]))}o.push(u)}return o},Rt.prototype.toGeoJSON=function(t,e,n){return Nt.call(this,t,e,n)};var Dt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.default$8,this.length=e.length,this._features=e};Dt.prototype.feature=function(t){return new Rt(this._features[t])};var zt=t.__moduleExports.VectorTileFeature,Ft=w;w.prototype.feature=function(t){return new E(this.features[t],this.options.extent)},E.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.default$32(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},E.prototype.toGeoJSON=zt.prototype.toGeoJSON;var Bt=S,jt=S,Vt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new Ft(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return S({layers:n})},qt=Ft;Bt.fromVectorTileJs=jt,Bt.fromGeojsonVt=Vt,Bt.GeoJSONWrapper=qt;var Ut=function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=Math.floor((i+o)/2);!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(o,Math.floor(r+(s-u)*c/s+h)),a)}var p=n[2*r+a],f=i,d=o;for(O(e,n,i,r),n[2*o+a]>p&&O(e,n,i,o);f<d;){for(O(e,n,f,d),f++,d--;n[2*f+a]<p;)f++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?O(e,n,i,d):O(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}},Gt=function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),p=l.pop(),f=l.pop();if(p-f<=a)for(var d=f;d<=p;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var y=Math.floor((f+p)/2);s=e[2*y],u=e[2*y+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[y]);var g=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(f),l.push(y-1),l.push(g)),(0===h?i>=s:o>=u)&&(l.push(y+1),l.push(p),l.push(g))}}return c},Xt=function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)N(e[2*p],e[2*p+1],n,r)<=u&&s.push(t[p]);else{var f=Math.floor((h+c)/2),d=e[2*f],y=e[2*f+1];N(d,y,n,r)<=u&&s.push(t[f]);var g=(l+1)%2;(0===l?n-i<=d:r-i<=y)&&(a.push(h),a.push(f-1),a.push(g)),(0===l?n+i>=d:r+i>=y)&&(a.push(f+1),a.push(c),a.push(g))}}return s},Yt=function(t,e,n,r,i){return new R(t,e,n,r,i)};R.prototype={range:function(t,e,n,r){return Gt(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return Xt(this.ids,this.coords,t,e,n,this.nodeSize)}};var Zt=function(t){return new F(t)};F.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var r=t.map(j);e&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var o=+Date.now();this.trees[i+1]=Yt(r,Y,Z,this.options.nodeSize,Float32Array),r=this._cluster(r,i),e&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=Yt(r,Y,Z,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],r=n.range(U(t[0]),G(t[3]),U(t[2]),G(t[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.numPoints?V(a):this.points[a.id])}return i},getChildren:function(t,e){for(var n=this.trees[e+1].points[t],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=this.trees[e+1].within(n.x,n.y,r),o=[],a=0;a<i.length;a++){var s=this.trees[e+1].points[i[a]];s.parentId===t&&o.push(s.numPoints?V(s):this.points[s.id])}return o},getLeaves:function(t,e,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,t,e,n,r,0),i},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var n=this.getChildren(t,e);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i,o){for(var a=this.getChildren(e,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(t,u.cluster_id,n+1,r,i,o):o<i?o++:t.push(a[s]),t.length===r)break}return o},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?q(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var o=t[i];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,r),u=o.numPoints||1,l=o.x*u,c=o.y*u,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,o));for(var p=0;p<s.length;p++){var f=a.points[s[p]];if(e<f.zoom){var d=f.numPoints||1;f.zoom=e,l+=f.x*d,c+=f.y*d,u+=d,f.parentId=i,this.options.reduce&&this._accumulate(h,f)}}1===u?n.push(o):(o.parentId=i,n.push(B(l/u,c/u,u,i,h)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}},vt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0},vt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=_t(e,n,r),p=this.tiles[h];if(!p&&(l>1&&console.time("creation"),p=this.tiles[h]=yt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==t.length){l>1&&console.time("clipping");var y,g,m,v,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;y=g=m=v=null,_=rt(t,c,n-x,n+E,0,p.minX,p.maxX,u),b=rt(t,c,n+w,n+S,0,p.minX,p.maxX,u),t=null,_&&(y=rt(_,c,r-x,r+E,1,p.minY,p.maxY,u),g=rt(_,c,r+w,r+S,1,p.minY,p.maxY,u),_=null),b&&(m=rt(b,c,r-x,r+E,1,p.minY,p.maxY,u),v=rt(b,c,r+w,r+S,1,p.minY,p.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(y||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(m||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},vt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=_t(t,e=(e%a+a)%a,n);if(this.tiles[s])return ft(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[_t(l,c,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,h),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ft(this.tiles[s],i):null):null};var Wt=function(e){function n(t,n,r){e.call(this,t,n,bt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams,this.loadGeoJSON(n,function(r,i){if(r||!i)return e(r);if("object"!=typeof i)return e(new Error("Input data is not a valid GeoJSON object."));Lt(i,!0);try{t._geoJSONIndex=n.cluster?Zt(n.superclusterOptions).load(i.features):function(t,e){return new vt(t,e)}(i,n.geojsonVtOptions)}catch(r){return e(r)}t.loaded={};var o={};if(n.request&&n.request.collectResourceTiming){var a=Mt(n.request.url);a&&(o.resourceTiming={},o.resourceTiming[n.source]=JSON.parse(JSON.stringify(a)))}e(null,o)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded,i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n}(kt),$t=function(e){var n=this;this.self=e,this.actor=new t.default$7(e,this),this.layerIndexes={},this.workerSourceTypes={vector:kt,geojson:Wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText}};return $t.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},$t.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},$t.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},$t.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},$t.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},$t.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},$t.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},$t.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},$t.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},$t.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},$t.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},$t.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new xt),e},$t.prototype.getWorkerSource=function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e][n]},$t.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new Pt),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new $t(self),$t}),t(["./chunk1.js"],function(t){function e(t){if(!bt)return null;for(var e=0;e<t.length;e++)if(t[e]in bt)return t[e];return t[0]}function n(t,e){var n=i(Ct.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!Ct.REQUIRE_ACCESS_TOKEN)return o(t);if(!(e=e||Ct.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Tt);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Tt);return t.params.push("access_token="+e),o(t)}function r(t){return 0===t.indexOf("mapbox:")}function i(t){var e=t.match(Lt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function o(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function a(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function s(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)r[l]=t[l*e+s];for(u(r,i,o,a,n),l=0;l<n;l++)t[l*e+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)r[s]=t[l*e+s];for(u(r,i,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(i[s])}}function u(t,e,n,r,i){n[0]=0,r[0]=-Vt,r[1]=+Vt;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+Vt}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}function l(e,n,r){var i=function(e,n){if(e)return r(e);if(n){var i=t.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),r(null,i)}};e.url?t.getJSON(n(kt(e.url),t.ResourceType.Source),i):gt.frame(function(){return i(null,e)})}function c(t,e,n,r,i){var o=i.maxPitchScaleFactor(),a=t.tilesIn(n,o);a.sort(h);for(var s=[],u=0,l=a;u<l.length;u+=1){var c=l[u];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(e,c.queryGeometry,c.scale,r,i,o,t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}return function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],h=u[l]=u[l]||{},p=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var y=d[f];h[y.featureIndex]||(h[y.featureIndex]=!0,p.push(y.feature))}}return e}(s)}function h(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function p(e,n){var r=n.zoomTo(e.canonical.z);return new t.default$1((r.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.default$8,(r.row-e.canonical.y)*t.default$8)}function f(t){return"raster"===t||"image"===t||"video"===t}function d(){return new t.default.Worker(kr.workerUrl)}function y(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.default$18.forEach(function(t){t in n&&(r[t]=n[t])}),r}function g(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=y(t[r],e[t[r].ref]));return t}function m(t,e,n){n.push({command:Ke.addSource,args:[t,e[t]]})}function v(t,e,n){e.push({command:Ke.removeSource,args:[t]}),n[t]=!0}function _(t,e,n,r){v(t,n,r),m(t,e,n)}function b(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.default$10(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.default$10(e[r][i],n[r][i]))return!1;return!0}function x(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.default$10(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.default$10(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function w(t){return t.id}function E(t,e){return t[e.id]=e,t}function S(e,n){if(!e)return[{command:Ke.setStyle,args:[n]}];var r=[];try{if(!t.default$10(e.version,n.version))return[{command:Ke.setStyle,args:[n]}];t.default$10(e.center,n.center)||r.push({command:Ke.setCenter,args:[n.center]}),t.default$10(e.zoom,n.zoom)||r.push({command:Ke.setZoom,args:[n.zoom]}),t.default$10(e.bearing,n.bearing)||r.push({command:Ke.setBearing,args:[n.bearing]}),t.default$10(e.pitch,n.pitch)||r.push({command:Ke.setPitch,args:[n.pitch]}),t.default$10(e.sprite,n.sprite)||r.push({command:Ke.setSprite,args:[n.sprite]}),t.default$10(e.glyphs,n.glyphs)||r.push({command:Ke.setGlyphs,args:[n.glyphs]}),t.default$10(e.transition,n.transition)||r.push({command:Ke.setTransition,args:[n.transition]}),t.default$10(e.light,n.light)||r.push({command:Ke.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||v(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.default$10(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&b(e,n,o)?r.push({command:Ke.setGeoJSONSourceData,args:[o,n[o].data]}):_(o,n,r,i)):m(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Ke.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,h=(e=e||[]).map(w),p=n.map(w),f=e.reduce(E,{}),d=n.reduce(E,{}),y=h.slice(),g=Object.create(null);for(i=0,o=0;i<h.length;i++)a=h[i],d.hasOwnProperty(a)?o++:(r.push({command:Ke.removeLayer,args:[a]}),y.splice(y.indexOf(a,o),1));for(i=0,o=0;i<p.length;i++)a=p[p.length-1-i],y[y.length-1-i]!==a&&(f.hasOwnProperty(a)?(r.push({command:Ke.removeLayer,args:[a]}),y.splice(y.lastIndexOf(a,y.length-o),1)):o++,l=y[y.length-i],r.push({command:Ke.addLayer,args:[d[a],l]}),y.splice(y.length-i,0,a),g[a]=!0);for(i=0;i<p.length;i++)if(s=f[a=p[i]],u=d[a],!g[a]&&!t.default$10(s,u))if(t.default$10(s.source,u.source)&&t.default$10(s["source-layer"],u["source-layer"])&&t.default$10(s.type,u.type)){for(c in x(s.layout,u.layout,r,a,null,Ke.setLayoutProperty),x(s.paint,u.paint,r,a,null,Ke.setPaintProperty),t.default$10(s.filter,u.filter)||r.push({command:Ke.setFilter,args:[a,u.filter]}),t.default$10(s.minzoom,u.minzoom)&&t.default$10(s.maxzoom,u.maxzoom)||r.push({command:Ke.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?x(s[c],u[c],r,a,c.slice(6),Ke.setPaintProperty):t.default$10(s[c],u[c])||r.push({command:Ke.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?x(s[c],u[c],r,a,c.slice(6),Ke.setPaintProperty):t.default$10(s[c],u[c])||r.push({command:Ke.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:Ke.removeLayer,args:[a]}),l=y[y.lastIndexOf(a)+1],r.push({command:Ke.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Ke.setStyle,args:[n]}]}return r}function I(e,n,r,i,o){var a=t.mat4.identity(new Float32Array(16));return n?(t.mat4.identity(a),t.mat4.scale(a,a,[1/o,1/o,1]),r||t.mat4.rotateZ(a,a,i.angle)):(t.mat4.scale(a,a,[i.width/2,-i.height/2,1]),t.mat4.translate(a,a,[1,-1,0]),t.mat4.multiply(a,a,e)),a}function C(e,n,r,i,o){var a=t.mat4.identity(new Float32Array(16));return n?(t.mat4.multiply(a,a,e),t.mat4.scale(a,a,[o,o,1]),r||t.mat4.rotateZ(a,a,-i.angle)):(t.mat4.scale(a,a,[1,-1,1]),t.mat4.translate(a,a,[-1,-1,0]),t.mat4.scale(a,a,[2/i.width,2/i.height,1])),a}function T(e,n){var r=[e.x,e.y,0,1];D(r,r,n);var i=r[3];return{point:new t.default$1(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function M(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function k(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom,Qe.properties[i?"text-size":"icon-size"]),h=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=r.transform.width/r.transform.height,g=!1,m=0;m<d.length;m++){var v=d.get(m);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!g)R(v.numGlyphs,p);else{g=!1;var _=[v.anchorX,v.anchorY,0,1];if(t.vec4.transformMat4(_,_,n),M(_,h)){var b=.5+_[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,v),w=s?x*b:x/b,E=new t.default$1(v.anchorX,v.anchorY),S=T(E,o).point,I={},C=O(v,w,!1,u,n,o,a,e.glyphOffsetArray,f,p,S,E,I,y);g=C.useVertical,(C.notEnoughRoom||g||C.needsFlipping&&O(v,w,!0,u,n,o,a,e.glyphOffsetArray,f,p,S,E,I,y).notEnoughRoom)&&R(v.numGlyphs,p)}else R(v.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function P(t,e,n,r,i,o,a,s,u,l,c,h){var p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(p-1),m=N(t*y,n,r,i,o,a,s.segment,f,d,u,l,c,h);if(!m)return null;var v=N(t*g,n,r,i,o,a,s.segment,f,d,u,l,c,h);return v?{first:m,last:v}:null}function A(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function O(e,n,r,i,o,a,s,u,l,c,h,p,f,d){var y,g=n/24,m=e.lineOffsetX*n,v=e.lineOffsetY*n;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=P(g,u,m,v,r,h,p,e,l,a,f,!1);if(!w)return{notEnoughRoom:!0};var E=T(w.first.point,s).point,S=T(w.last.point,s).point;if(i&&!r){var I=A(e.writingMode,E,S,d);if(I)return I}y=[w.first];for(var C=e.glyphStartIndex+1;C<_-1;C++)y.push(N(g*u.getoffsetX(C),m,v,r,h,p,e.segment,b,x,l,a,f,!1));y.push(w.last)}else{if(i&&!r){var M=T(p,o).point,k=e.lineStartIndex+e.segment+1,O=new t.default$1(l.getx(k),l.gety(k)),R=T(O,o),D=R.signedDistanceFromCamera>0?R.point:L(p,O,M,1,o),z=A(e.writingMode,M,D,d);if(z)return z}var F=N(g*u.getoffsetX(e.glyphStartIndex),m,v,r,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,f,!1);if(!F)return{notEnoughRoom:!0};y=[F]}for(var B=0,j=y;B<j.length;B+=1){var V=j[B];t.addDynamicAttributes(c,V.point,V.angle)}return{}}function L(t,e,n,r,i){var o=T(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function N(e,n,r,i,o,a,s,u,l,c,h,p,f){var d=i?e-n:e+n,y=d>0?1:-1,g=0;i&&(y*=-1,g=Math.PI),y<0&&(g+=Math.PI);for(var m=y>0?u+s:u+s+1,v=m,_=o,b=o,x=0,w=0,E=Math.abs(d);x+w<=E;){if((m+=y)<u||m>=l)return null;if(b=_,void 0===(_=p[m])){var S=new t.default$1(c.getx(m),c.gety(m)),I=T(S,h);if(I.signedDistanceFromCamera>0)_=p[m]=I.point;else{var C=m-y;_=L(0===x?a:new t.default$1(c.getx(C),c.gety(C)),S,b,E-x+1,h)}}x+=w,w=b.dist(_)}var M=(E-x)/w,k=_.sub(b),P=k.mult(M)._add(b);return P._add(k._unit()._perp()._mult(r*y)),{point:P,angle:g+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:f?{prevTileDistance:m-y===v?0:c.gettileUnitDistanceFromAnchor(m-y),lastSegmentViewportDistance:E-x}:null}}function R(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(tn,3*r)}}function D(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}function z(t,e,n){t[e+4]=n?1:0}function F(e,n,r){return n*(t.default$8/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}function B(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function j(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*un+e*ln+n*cn+e*hn+n*pn+e*fn+n*dn+e}function V(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)V(e,u[l],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[h.key]=o[h.key]||h}function q(t,e,n,r,i){var o=t.context,a=o.gl,s=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox");o.setDepthMode(Ge.disabled),o.setStencilMode(Xe.disabled),o.setColorMode(t.colorModeForRenderPass());for(var u=0;u<r.length;u++){var l=r[u],c=e.getTile(l),h=c.getBucket(n);if(h){var p=i?h.collisionCircle:h.collisionBox;if(p){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,l.posMatrix),i||o.lineWidth.set(1),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var f=F(c,1,t.transform.zoom),d=Math.pow(2,t.transform.zoom-c.tileID.overscaledZ);a.uniform1f(s.uniforms.u_pixels_to_tile_units,f),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(f*d),t.transform.pixelsToGLUnits[1]/(f*d)),a.uniform1f(s.uniforms.u_overscale_factor,c.tileID.overscaleFactor()),s.draw(o,i?a.TRIANGLES:a.LINES,n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,p.collisionVertexBuffer,null)}}}}function U(t,e,n,r,i,o,a,s,u,l){var c,h=t.context,p=h.gl,f=t.transform,d="map"===s,y="map"===u,g=d&&"line"===n.layout.get("symbol-placement"),m=d&&!y&&!g,v=y;h.setDepthMode(v?t.depthModeForSublayer(0,Ge.ReadOnly):Ge.disabled);for(var _=0,b=r;_<b.length;_+=1){var x=b[_],w=e.getTile(x),E=w.getBucket(n);if(E){var S=i?E.text:E.icon;if(S&&S.segments.get().length){var T=S.programConfigurations.get(n.id),M=i||E.sdfIcons,P=i?E.textSizeData:E.iconSizeData;if(c||(c=t.useProgram(M?"symbolSDF":"symbolIcon",T),T.setUniforms(t.context,c,n.paint,{zoom:t.transform.zoom}),G(c,t,n,i,m,y,P)),h.activeTexture.set(p.TEXTURE0),p.uniform1i(c.uniforms.u_texture,0),i)w.glyphAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.uniform2fv(c.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var A=1!==n.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear,O=y||0!==f.pitch;w.iconAtlasTexture.bind(M||t.options.rotating||t.options.zooming||A||O?p.LINEAR:p.NEAREST,p.CLAMP_TO_EDGE),p.uniform2fv(c.uniforms.u_texsize,w.iconAtlasTexture.size)}p.uniformMatrix4fv(c.uniforms.u_matrix,!1,t.translatePosMatrix(x.posMatrix,w,o,a));var L=F(w,1,t.transform.zoom),N=I(x.posMatrix,y,d,t.transform,L),R=C(x.posMatrix,y,d,t.transform,L);p.uniformMatrix4fv(c.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(R,w,o,a,!0)),g?(p.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,On),k(E,x.posMatrix,t,i,N,R,y,l)):p.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,N),p.uniform1f(c.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),X(c,T,t,n,w,S,i,M,y)}}}}function G(e,n,r,i,o,a,s){var u=n.context.gl,l=n.transform;u.uniform1i(e.uniforms.u_pitch_with_map,a?1:0),u.uniform1f(e.uniforms.u_is_text,i?1:0),u.uniform1f(e.uniforms.u_pitch,l.pitch/360*2*Math.PI);var c="constant"===s.functionType||"source"===s.functionType,h="constant"===s.functionType||"camera"===s.functionType;u.uniform1i(e.uniforms.u_is_size_zoom_constant,c?1:0),u.uniform1i(e.uniforms.u_is_size_feature_constant,h?1:0),u.uniform1f(e.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var p=t.evaluateSizeForZoom(s,l.zoom,Ln.properties[i?"text-size":"icon-size"]);void 0!==p.uSizeT&&u.uniform1f(e.uniforms.u_size_t,p.uSizeT),void 0!==p.uSize&&u.uniform1f(e.uniforms.u_size,p.uSize),u.uniform1f(e.uniforms.u_aspect_ratio,l.width/l.height),u.uniform1i(e.uniforms.u_rotate_symbol,o?1:0)}function X(t,e,n,r,i,o,a,s,u){var l=n.context,c=l.gl,h=n.transform;if(s){var p=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),f=u?Math.cos(h._pitch)*h.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,f),p&&(c.uniform1f(t.uniforms.u_is_halo,1),Y(o,r,l,t)),c.uniform1f(t.uniforms.u_is_halo,0)}Y(o,r,l,t)}function Y(t,e,n,r){r.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Z(t,e,n,r,i,o,a,s,u){var l,c,h,p,f=e.context,d=f.gl,y=i.paint.get("line-dasharray"),g=i.paint.get("line-pattern");if(s||u){var m=1/F(n,1,e.transform.tileZoom);if(y){l=e.lineAtlas.getDash(y.from,"round"===i.layout.get("line-cap")),c=e.lineAtlas.getDash(y.to,"round"===i.layout.get("line-cap"));var v=l.width*y.fromScale,_=c.width*y.toScale;d.uniform2f(t.uniforms.u_patternscale_a,m/v,-l.height/2),d.uniform2f(t.uniforms.u_patternscale_b,m/_,-c.height/2),d.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(v,_)*gt.devicePixelRatio)/2)}else if(g){if(h=e.imageManager.getPattern(g.from),p=e.imageManager.getPattern(g.to),!h||!p)return;d.uniform2f(t.uniforms.u_pattern_size_a,h.displaySize[0]*g.fromScale/m,h.displaySize[1]),d.uniform2f(t.uniforms.u_pattern_size_b,p.displaySize[0]*g.toScale/m,p.displaySize[1]);var b=e.imageManager.getPixelSize(),x=b.width,w=b.height;d.uniform2fv(t.uniforms.u_texsize,[x,w])}d.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}s&&(y?(d.uniform1i(t.uniforms.u_image,0),f.activeTexture.set(d.TEXTURE0),e.lineAtlas.bind(f),d.uniform1f(t.uniforms.u_tex_y_a,l.y),d.uniform1f(t.uniforms.u_tex_y_b,c.y),d.uniform1f(t.uniforms.u_mix,y.t)):g&&(d.uniform1i(t.uniforms.u_image,0),f.activeTexture.set(d.TEXTURE0),e.imageManager.bind(f),d.uniform2fv(t.uniforms.u_pattern_tl_a,h.tl),d.uniform2fv(t.uniforms.u_pattern_br_a,h.br),d.uniform2fv(t.uniforms.u_pattern_tl_b,p.tl),d.uniform2fv(t.uniforms.u_pattern_br_b,p.br),d.uniform1f(t.uniforms.u_fade,g.t))),f.setStencilMode(e.stencilModeForClipping(o));var E=e.translatePosMatrix(o.posMatrix,n,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"));if(d.uniformMatrix4fv(t.uniforms.u_matrix,!1,E),d.uniform1f(t.uniforms.u_ratio,1/F(n,1,e.transform.zoom)),i.paint.get("line-gradient")){f.activeTexture.set(d.TEXTURE0);var S=i.gradientTexture;if(!i.gradient)return;S||(S=i.gradientTexture=new Ft(f,i.gradient,d.RGBA)),S.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.uniform1i(t.uniforms.u_image,0)}t.draw(f,d.TRIANGLES,i.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,a)}function W(t,e,n,r,i){if(!Nn(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u),c=l.getBucket(n);c&&(t.context.setStencilMode(t.stencilModeForClipping(u)),i(t,e,n,l,u,c,o),o=!1)}}function $(t,e,n,r,i,o,a){var s=t.context.gl,u=o.programConfigurations.get(n.id);K("fill",n.paint.get("fill-pattern"),t,u,n,r,i,a).draw(t.context,s.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,u)}function H(t,e,n,r,i,o,a){var s=t.context.gl,u=o.programConfigurations.get(n.id),l=K("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,u,n,r,i,a);s.uniform2f(l.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),l.draw(t.context,s.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,u)}function K(t,e,n,r,i,o,a,s){var u,l=n.context.program.get();return e?(u=n.useProgram(t+"Pattern",r),(s||u.program!==l)&&(r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom}),Rn(e,n,u)),Dn(o,n,u)):(u=n.useProgram(t,r),(s||u.program!==l)&&r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),u}function J(t,e,n,r,i,o,a){var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=t.context.program.get(),h=o.programConfigurations.get(n.id),p=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",h);if((a||p.program!==c)&&h.setUniforms(s,p,n.paint,{zoom:t.transform.zoom}),l){if(Nn(l,t))return;Rn(l,t,p),Dn(r,t,p),u.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/r.tileSize/8)}t.context.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(i.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),function(t,e){var n=e.context.gl,r=e.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=zn.create();"viewport"===r.properties.get("anchor")&&zn.fromRotation(a,-e.transform.angle),Bn.transformMat3(o,o,a);var s=r.properties.get("color");n.uniform3fv(t.uniforms.u_lightpos,o),n.uniform1f(t.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(t.uniforms.u_lightcolor,s.r,s.g,s.b)}(p,t),p.draw(s,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,h)}function Q(e,n,r){var i=e.context,o=i.gl,a=n.fbo;if(a){var s=e.useProgram("hillshade"),u=e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0);!function(t,e,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}(s,e,r);var l=function(e,n){var r=n.toCoordinate(),i=new t.default$17(r.column,r.row+1,r.zoom);return[e.transform.coordinateLocation(r).lat,e.transform.coordinateLocation(i).lat]}(e,n.tileID);i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.colorAttachment.get()),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,u),o.uniform2fv(s.uniforms.u_latrange,l),o.uniform1i(s.uniforms.u_image,0);var c=r.paint.get("hillshade-shadow-color");o.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var h=r.paint.get("hillshade-highlight-color");o.uniform4f(s.uniforms.u_highlight,h.r,h.g,h.b,h.a);var p=r.paint.get("hillshade-accent-color");if(o.uniform4f(s.uniforms.u_accent,p.r,p.g,p.b,p.a),n.maskedBoundsBuffer&&n.maskedIndexBuffer&&n.segments)s.draw(i,o.TRIANGLES,r.id,n.maskedBoundsBuffer,n.maskedIndexBuffer,n.segments);else{var f=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(i,s,f,[]),o.drawArrays(o.TRIANGLE_STRIP,0,f.length)}}}function tt(e,n,r){var i=e.context,o=i.gl;if(n.dem&&n.dem.level){var a=n.dem.level.dim,s=n.dem.getPixels();if(i.activeTexture.set(o.TEXTURE1),i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(n.tileSize),n.demTexture){var u=n.demTexture;u.update(s,{premultiply:!1}),u.bind(o.NEAREST,o.CLAMP_TO_EDGE)}else n.demTexture=new Ft(i,s,o.RGBA,{premultiply:!1}),n.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE);i.activeTexture.set(o.TEXTURE0);var l=n.fbo;if(!l){var c=new Ft(i,{width:a,height:a,data:null},o.RGBA);c.bind(o.LINEAR,o.CLAMP_TO_EDGE),(l=n.fbo=i.createFramebuffer(a,a)).colorAttachment.set(c.texture)}i.bindFramebuffer.set(l.framebuffer),i.viewport.set([0,0,a,a]);var h=t.mat4.create();t.mat4.ortho(h,0,t.default$8,-t.default$8,0,0,1),t.mat4.translate(h,h,[0,-t.default$8,0]);var p=e.useProgram("hillshadePrepare");o.uniformMatrix4fv(p.uniforms.u_matrix,!1,h),o.uniform1f(p.uniforms.u_zoom,n.tileID.overscaledZ),o.uniform2fv(p.uniforms.u_dimension,[2*a,2*a]),o.uniform1i(p.uniforms.u_image,1),o.uniform1f(p.uniforms.u_maxzoom,r);var f=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(i,p,f,[]),o.drawArrays(o.TRIANGLE_STRIP,0,f.length),n.needsHillshadePrepare=!1}}function et(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=gt.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),f=p&&e.refreshedUponExpiration?1:t.clamp(p?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function nt(e,n,r){var i=e.context,o=i.gl;i.lineWidth.set(1*gt.devicePixelRatio);var a=r.posMatrix,s=e.useProgram("debug");i.setDepthMode(Ge.disabled),i.setStencilMode(Xe.disabled),i.setColorMode(e.colorModeForRenderPass()),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),o.uniform4f(s.uniforms.u_color,1,0,0,1),e.debugVAO.bind(i,s,e.debugBuffer,[]),o.drawArrays(o.LINE_STRIP,0,e.debugBuffer.length);for(var u=function(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,h,p=[];for(i=0,o=t.length;i<o;i++)if(u=jn[t[i]]){for(h=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?h=null:(l=e+u[1][a]*r,c=200-u[1][a+1]*r,h&&p.push(h.x,h.y,l,c),h={x:l,y:c});e+=u[0]*r}return p}(r.toString(),50,0,5),l=new t.PosArray,c=0;c<u.length;c+=2)l.emplaceBack(u[c],u[c+1]);var h=i.createVertexBuffer(l,Cn.members);(new ne).bind(i,s,h,[]),o.uniform4f(s.uniforms.u_color,1,1,1,1);for(var p=n.getTile(r).tileSize,f=t.default$8/(Math.pow(2,e.transform.zoom-r.overscaledZ)*p),d=[[-1,-1],[-1,1],[1,-1],[1,1]],y=0;y<d.length;y++){var g=d[y];o.uniformMatrix4fv(s.uniforms.u_matrix,!1,t.mat4.translate([],a,[f*g[0],f*g[1],0])),o.drawArrays(o.LINES,0,h.length)}o.uniform4f(s.uniforms.u_color,0,0,0,1),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),o.drawArrays(o.LINES,0,h.length)}function rt(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function it(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=o;p<a;p++){var f=u*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),p)}}function ot(t,e,n,r,i,o){var a,s=rt(t,e),u=rt(e,n),l=rt(n,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&it(l,s,r,i,o),u.dy&&it(l,u,r,i,o)}function at(t){return t*(2-t)}function st(t){t.parentNode&&t.parentNode.removeChild(t)}function ut(t,e,n){if(t=new Wt(t.lng,t.lat),e){var r=new Wt(t.lng-360,t.lat),i=new Wt(t.lng+360,t.lat),o=n.locationPoint(t).distSqr(e);n.locationPoint(r).distSqr(e)<o?t=r:n.locationPoint(i).distSqr(e)<o&&(t=i)}for(;Math.abs(t.lng-n.center.lng)>180;){var a=n.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}function lt(t,e,n){var r=t.classList;for(var i in _r)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}function ct(t,e,n){var r,i,o,a,s,u,l=n&&n.maxWidth||100,c=t._container.clientHeight/2,h=(r=t.unproject([0,c]),i=t.unproject([l,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var p=3.2808*h;p>5280?ht(e,l,p/5280,"mi"):ht(e,l,p,"ft")}else n&&"nautical"===n.unit?ht(e,l,h/1852,"nm"):ht(e,l,h,"m")}function ht(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:1)),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),t.style.width=e*u+"px",t.innerHTML=s+r}var pt=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),ft=t.default.performance&&t.default.performance.now?t.default.performance.now.bind(t.default.performance):Date.now.bind(Date),dt=t.default.requestAnimationFrame||t.default.mozRequestAnimationFrame||t.default.webkitRequestAnimationFrame||t.default.msRequestAnimationFrame,yt=t.default.cancelAnimationFrame||t.default.mozCancelAnimationFrame||t.default.webkitCancelAnimationFrame||t.default.msCancelAnimationFrame,gt={now:ft,frame:function(t){return dt(t)},cancelFrame:function(t){return yt(t)},getImageData:function(e){var n=t.default.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height)},hardwareConcurrency:t.default.navigator.hardwareConcurrency||4,get devicePixelRatio(){return t.default.devicePixelRatio},supportsWebp:!1};if(t.default.document){var mt=t.default.document.createElement("img");mt.onload=function(){gt.supportsWebp=!0},mt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var vt,_t={create:function(e,n,r){var i=t.default.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.default.document.createElementNS(e,n)}},bt=t.default.document?t.default.document.documentElement.style:null,xt=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);_t.disableDrag=function(){bt&&xt&&(vt=bt[xt],bt[xt]="none")},_t.enableDrag=function(){bt&&xt&&(bt[xt]=vt)};var wt=e(["transform","WebkitTransform"]);_t.setTransform=function(t,e){t.style[wt]=e};var Et=!1;try{var St=Object.defineProperty({},"passive",{get:function(){Et=!0}});t.default.addEventListener("test",St,St),t.default.removeEventListener("test",St,St)}catch(t){Et=!1}_t.addEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&Et?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},_t.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&Et?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var It=function(e){e.preventDefault(),e.stopPropagation(),t.default.removeEventListener("click",It,!0)};_t.suppressClick=function(){t.default.addEventListener("click",It,!0),t.default.setTimeout(function(){t.default.removeEventListener("click",It,!0)},0)},_t.mousePos=function(e,n){var r=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.default$1(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},_t.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.default$1(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},_t.mouseButton=function(e){return void 0!==t.default.InstallTrigger&&2===e.button&&e.ctrlKey&&t.default.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},_t.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var Ct={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},Tt="See https://www.mapbox.com/api-documentation/#access-tokens",Mt=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/fonts/v1"+o.path,n(o,e)},kt=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/v4/"+o.authority+".json",o.params.push("secure"),n(o,e)},Pt=function(t,e,a,s){var u=i(t);return r(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+a,n(u,s)):(u.path+=""+e+a,o(u))},At=/(\.(png|jpg)\d*)(?=$)/,Ot=function(t,e,n){if(!e||!r(e))return t;var a=i(t),s=gt.devicePixelRatio>=2||512===n?"@2x":"",u=gt.supportsWebp?".webp":"$1";return a.path=a.path.replace(At,""+s+u),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(Ct.ACCESS_TOKEN||""))}(a.params),o(a)},Lt=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,Nt=t.default.HTMLImageElement,Rt=t.default.HTMLCanvasElement,Dt=t.default.HTMLVideoElement,zt=t.default.ImageData,Ft=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};Ft.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),i?(this.size=[n,r],o.pixelStoreUnpack.set(1),this.format!==a.RGBA||e&&!1===e.premultiply||o.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof Nt||t instanceof Rt||t instanceof Dt||t instanceof zt?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Nt||t instanceof Rt||t instanceof Dt||t instanceof zt?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},Ft.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Ft.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ft.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Bt=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new t.default$2(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new t.RGBAImage({width:64,height:64}),this.dirty=!0};Bt.prototype.isLoaded=function(){return this.loaded},Bt.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},Bt.prototype.getImage=function(t){return this.images[t]},Bt.prototype.addImage=function(t,e){this.images[t]=e},Bt.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},Bt.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},Bt.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},Bt.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},Bt.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i=r.data.width+2,o=r.data.height+2,a=this.shelfPack.packOne(i,o);if(!a)return null;this.atlasImage.resize(this.getPixelSize());var s=r.data,u=this.atlasImage,l=a.x+1,c=a.y+1,h=s.width,p=s.height;t.RGBAImage.copy(s,u,{x:0,y:0},{x:l,y:c},{width:h,height:p}),t.RGBAImage.copy(s,u,{x:0,y:p-1},{x:l,y:c-1},{width:h,height:1}),t.RGBAImage.copy(s,u,{x:0,y:0},{x:l,y:c+p},{width:h,height:1}),t.RGBAImage.copy(s,u,{x:h-1,y:0},{x:l-1,y:c},{width:1,height:p}),t.RGBAImage.copy(s,u,{x:0,y:0},{x:l+h,y:c},{width:1,height:p}),this.dirty=!0;var f=new t.ImagePosition(a,r);return this.patterns[e]={bin:a,position:f},f},Bt.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ft(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)};var jt=a,Vt=1e20;a.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?Vt:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?Vt:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(s(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),s(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var qt=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};qt.prototype.setURL=function(t){this.url=t},qt.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var u=s[a];i.push({stack:o,id:u})}t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],qt.loadGlyphRange(n,s,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},qt.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.default$4["CJK Unified Ideographs"](r)||t.default$4["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new qt.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},qt.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i(Mt(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.default$3(n.data);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},qt.TinySDF=jt;var Ut=function(){this.specification=t.default$5.light.position};Ut.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},Ut.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var Gt=new t.Properties({anchor:new t.DataConstantProperty(t.default$5.light.anchor),position:new Ut,color:new t.DataConstantProperty(t.default$5.light.color),intensity:new t.DataConstantProperty(t.default$5.light.intensity)}),Xt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(Gt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.default$5})))},n}(t.Evented),Yt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Yt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},Yt.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,l=e.length%2==1,c=-r;c<=r;c++)for(var h=this.nextRow+r+c,p=this.width*h,f=l?-e[e.length-1]:0,d=e[0],y=1,g=0;g<this.width;g++){for(;d<g/s;)f=d,d+=e[y],l&&y===e.length-1&&(d+=e[0]),y++;var m=Math.abs(g-f*s),v=Math.abs(g-d*s),_=Math.min(m,v),b=y%2==1,x=void 0;if(n){var w=r?c/r*(u+1):0;if(b){var E=u-Math.abs(w);x=Math.sqrt(_*_+E*E)}else x=u-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;this.data[3+4*(p+g)]=Math.max(0,Math.min(255,x+128))}var S={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,S},Yt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var Zt=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,r,this.id);s.name="Worker "+o,this.actors.push(s)}};Zt.prototype.broadcast=function(e,n,r){r=r||function(){},t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r)},Zt.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},Zt.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},Zt.Actor=t.default$7;var Wt=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Wt.prototype.wrap=function(){return new Wt(t.wrap(this.lng,-180,180),this.lat)},Wt.prototype.toArray=function(){return[this.lng,this.lat]},Wt.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Wt.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new $t(new Wt(this.lng-n,this.lat-e),new Wt(this.lng+n,this.lat+e))},Wt.convert=function(t){if(t instanceof Wt)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Wt(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Wt(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $t=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};$t.prototype.setNorthEast=function(t){return this._ne=t instanceof Wt?new Wt(t.lng,t.lat):Wt.convert(t),this},$t.prototype.setSouthWest=function(t){return this._sw=t instanceof Wt?new Wt(t.lng,t.lat):Wt.convert(t),this},$t.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Wt)e=t,n=t;else{if(!(t instanceof $t))return Array.isArray(t)?t.every(Array.isArray)?this.extend($t.convert(t)):this.extend(Wt.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Wt(e.lng,e.lat),this._ne=new Wt(n.lng,n.lat)),this},$t.prototype.getCenter=function(){return new Wt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},$t.prototype.getSouthWest=function(){return this._sw},$t.prototype.getNorthEast=function(){return this._ne},$t.prototype.getNorthWest=function(){return new Wt(this.getWest(),this.getNorth())},$t.prototype.getSouthEast=function(){return new Wt(this.getEast(),this.getSouth())},$t.prototype.getWest=function(){return this._sw.lng},$t.prototype.getSouth=function(){return this._sw.lat},$t.prototype.getEast=function(){return this._ne.lng},$t.prototype.getNorth=function(){return this._ne.lat},$t.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},$t.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},$t.prototype.isEmpty=function(){return!(this._sw&&this._ne)},$t.convert=function(t){return!t||t instanceof $t?t:new $t(t)};var Ht=function(t,e,n){this.bounds=$t.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};Ht.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Ht.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<r&&t.y>=n&&t.y<i},Ht.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},Ht.prototype.latY=function(e,n){var r=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),i=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+r)/(1-r))*-i};var Kt=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),l(this._options,this.map._transformRequest,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Ht(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){function r(t,r){return e.aborted?n(null):t?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var i=Ot(e.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:gt.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,r.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",o,r.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Jt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),l(this._options,this.map._transformRequest,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Ht(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=Ot(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(t,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(t)e.state="errored",n(t);else if(i){r.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=r.map.painter.context,a=o.gl;e.texture=r.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new Ft(o,i,a.RGBA,{useMipmap:!0}),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Qt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=Ot(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(t,r){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(t)e.state="errored",n(t);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var i=gt.getImageData(r),o={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:i,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",o,function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(Jt),te=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type);var a=t.default$8/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.default$8,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.default$8,radius:(r.clusterRadius||50)*a,log:!1}},r.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)return n.fire(new t.ErrorEvent(e));var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}),this},n.prototype._updateWorkerData=function(e){var n,r,i=this,o=t.extend({},this.workerOptions),a=this._data;"string"==typeof a?(o.request=this.map._transformRequest((n=a,(r=t.default.document.createElement("a")).href=n,r.href),t.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(a),this.workerID=this.dispatcher.send(this.type+"."+o.source+".loadData",o,function(t,n){i._removed||n&&n.abandoned||(i._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[i.id]&&(i._resourceTiming=n.resourceTiming[i.id].slice(0)),i.dispatcher.send(i.type+"."+o.source+".coalesce",null,null,i.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(t,e){var n=this,r=void 0===t.workerID?"loadTile":"reloadTile",i={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:gt.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(r,i,function(i,o){return t.unloadVectorData(),t.aborted?e(null):i?e(i):(t.loadVectorData(o,n.map.painter,"reloadTile"===r),e(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),ee=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ne=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ne.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,r,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},ne.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,f=n;p<f.length;p+=1)f[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,y=n;d<y.length;d+=1){var g=y[d];g.bind(),g.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},ne.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var re=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.image=gt.getImageData(r),e._finishLoading())})},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){this.coordinates=e;var n=this.map,r=e.map(function(t){return n.transform.locationCoordinate(Wt.convert(t)).zoomTo(0)}),i=this.centerCoord=t.getCoordinatesCenter(r);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new t.CanonicalTileID(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var o=r.map(function(e){var n=e.zoomTo(i.zoom);return new t.default$1(Math.round((n.column-i.column)*t.default$8),Math.round((n.row-i.row)*t.default$8))});return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,t.default$8,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,t.default$8),this._boundsArray.emplaceBack(o[2].x,o[2].y,t.default$8,t.default$8),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,ee.members)),this.boundsVAO||(this.boundsVAO=new ne),this.texture||(this.texture=new Ft(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),ie=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];e.urls.push(e.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,ee.members)),this.boundsVAO||(this.boundsVAO=new ne),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new Ft(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(re),oe=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.default$9("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.default$9("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.default$9("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.default.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.default$9("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.default$9("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.default.HTMLCanvasElement?this.options.canvas:t.default.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,ee.members)),this.boundsVAO||(this.boundsVAO=new ne),this.texture?t?this.texture.update(this.canvas):this._playing&&(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.canvas)):(this.texture=new Ft(e,this.canvas,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(re),ae={vector:Kt,raster:Jt,"raster-dem":Qt,geojson:te,video:ie,image:re,canvas:oe},se=function(e,n,r,i){var o=new ae[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o},ue=function(e,n){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading"};ue.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<gt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ue.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ue.prototype.loadVectorData=function(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){if(e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}(e.buckets,n.style),r)for(var i in this.buckets){var o=this.buckets[i];o instanceof t.default$14&&(o.justReloaded=!0)}for(var a in this.queryPadding=0,this.buckets){var s=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(s.layerIds[0]).queryRadius(s))}e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray},ue.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ue.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},ue.prototype.getBucket=function(t){return this.buckets[t.id]},ue.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploaded||(n.upload(t),n.uploaded=!0)}var r=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new Ft(t,this.iconAtlasImage,r.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ft(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},ue.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:e,scale:n,tileSize:this.tileSize,posMatrix:a,transform:i,params:r,queryPadding:this.queryPadding*o},t):{}},ue.prototype.querySourceFeatures=function(e,n){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),i=n?n.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=t.default$13(n&&n.filter),s={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},u=0;u<o.length;u++){var l=o.feature(u);if(a(new t.default$16(this.tileID.overscaledZ),l)){var c=new t.default$12(l,s.z,s.x,s.y);c.tile=s,e.push(c)}}}},ue.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},ue.prototype.setMask=function(e,n){if(!t.default$10(this.mask,e)&&(this.mask=e,this.clearMask(),!t.default$10(e,{0:!0}))){var r=new t.RasterBoundsArray,i=new t.TriangleIndexArray;this.segments=new t.default$15,this.segments.prepareSegment(0,r,i);for(var o=Object.keys(e),a=0;a<o.length;a++){var s=e[o[a]],u=t.default$8>>s.z,l=new t.default$1(s.x*u,s.y*u),c=new t.default$1(l.x+u,l.y+u),h=this.segments.prepareSegment(4,r,i);r.emplaceBack(l.x,l.y,l.x,l.y),r.emplaceBack(c.x,l.y,c.x,l.y),r.emplaceBack(l.x,c.y,l.x,c.y),r.emplaceBack(c.x,c.y,c.x,c.y);var p=h.vertexLength;i.emplaceBack(p,p+1,p+2),i.emplaceBack(p+1,p+2,p+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=n.createVertexBuffer(r,ee.members),this.maskedIndexBuffer=n.createIndexBuffer(i)}},ue.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ue.prototype.setExpiryData=function(e){var n=this.expirationTime;if(e.cacheControl){var r=t.parseCacheControl(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(n)if(this.expirationTime<n)o=!0;else{var a=this.expirationTime-n;a?this.expirationTime=i+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ue.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};var le=function(t,e){this.max=t,this.onRemove=e,this.reset()};le.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},le.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},le.prototype.has=function(t){return t.wrapped().key in this.data},le.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},le.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},le.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},le.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},le.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var ce=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};ce.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},ce.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ce.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},ce.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var he={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},pe=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};pe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},pe.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},pe.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e.attributes[r.name];void 0!==i&&t.enableVertexAttribArray(i)}},pe.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[he[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},pe.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var fe=function(e){this.context=e,this.current=t.default$6.transparent};fe.prototype.get=function(){return this.current},fe.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var de=function(t){this.context=t,this.current=1};de.prototype.get=function(){return this.current},de.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var ye=function(t){this.context=t,this.current=0};ye.prototype.get=function(){return this.current},ye.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var ge=function(t){this.context=t,this.current=[!0,!0,!0,!0]};ge.prototype.get=function(){return this.current},ge.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var me=function(t){this.context=t,this.current=!0};me.prototype.get=function(){return this.current},me.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var ve=function(t){this.context=t,this.current=255};ve.prototype.get=function(){return this.current},ve.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var _e=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};_e.prototype.get=function(){return this.current},_e.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var be=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};be.prototype.get=function(){return this.current},be.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var xe=function(t){this.context=t,this.current=!1};xe.prototype.get=function(){return this.current},xe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var we=function(t){this.context=t,this.current=[0,1]};we.prototype.get=function(){return this.current},we.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var Ee=function(t){this.context=t,this.current=!1};Ee.prototype.get=function(){return this.current},Ee.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var Se=function(t){this.context=t,this.current=t.gl.LESS};Se.prototype.get=function(){return this.current},Se.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var Ie=function(t){this.context=t,this.current=!1};Ie.prototype.get=function(){return this.current},Ie.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var Ce=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};Ce.prototype.get=function(){return this.current},Ce.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var Te=function(e){this.context=e,this.current=t.default$6.transparent};Te.prototype.get=function(){return this.current},Te.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var Me=function(t){this.context=t,this.current=null};Me.prototype.get=function(){return this.current},Me.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var ke=function(t){this.context=t,this.current=1};ke.prototype.get=function(){return this.current},ke.prototype.set=function(e){var n=this.context.lineWidthRange,r=t.clamp(e,n[0],n[1]);this.current!==r&&(this.context.gl.lineWidth(r),this.current=e)};var Pe=function(t){this.context=t,this.current=t.gl.TEXTURE0};Pe.prototype.get=function(){return this.current},Pe.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var Ae=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var Oe=function(t){this.context=t,this.current=null};Oe.prototype.get=function(){return this.current},Oe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var Le=function(t){this.context=t,this.current=null};Le.prototype.get=function(){return this.current},Le.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var Ne=function(t){this.context=t,this.current=null};Ne.prototype.get=function(){return this.current},Ne.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var Re=function(t){this.context=t,this.current=null};Re.prototype.get=function(){return this.current},Re.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var De=function(t){this.context=t,this.current=null};De.prototype.get=function(){return this.current},De.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var ze=function(t){this.context=t,this.current=null};ze.prototype.get=function(){return this.current},ze.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var Fe=function(t){this.context=t,this.current=4};Fe.prototype.get=function(){return this.current},Fe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var Be=function(t){this.context=t,this.current=!1};Be.prototype.get=function(){return this.current},Be.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var je=function(t,e){this.context=t,this.current=null,this.parent=e};je.prototype.get=function(){return this.current};var Ve=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(je),qe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(je),Ue=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=t.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new Ve(t,i),this.depthAttachment=new qe(t,i)};Ue.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Ge=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ge.ReadOnly=!1,Ge.ReadWrite=!0,Ge.disabled=new Ge(519,Ge.ReadOnly,[0,1]);var Xe=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Xe.disabled=new Xe({func:519,mask:0},0,0,7680,7680,7680);var Ye=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Ye.Replace=[1,0],Ye.disabled=new Ye(Ye.Replace,t.default$6.transparent,[!1,!1,!1,!1]),Ye.unblended=new Ye(Ye.Replace,t.default$6.transparent,[!0,!0,!0,!0]),Ye.alphaBlended=new Ye([1,771],t.default$6.transparent,[!0,!0,!0,!0]);var Ze=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new fe(this),this.clearDepth=new de(this),this.clearStencil=new ye(this),this.colorMask=new ge(this),this.depthMask=new me(this),this.stencilMask=new ve(this),this.stencilFunc=new _e(this),this.stencilOp=new be(this),this.stencilTest=new xe(this),this.depthRange=new we(this),this.depthTest=new Ee(this),this.depthFunc=new Se(this),this.blend=new Ie(this),this.blendFunc=new Ce(this),this.blendColor=new Te(this),this.program=new Me(this),this.lineWidth=new ke(this),this.activeTexture=new Pe(this),this.viewport=new Ae(this),this.bindFramebuffer=new Oe(this),this.bindRenderbuffer=new Le(this),this.bindTexture=new Ne(this),this.bindVertexBuffer=new Re(this),this.bindElementBuffer=new De(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ze(this),this.pixelStoreUnpack=new Fe(this),this.pixelStoreUnpackPremultiplyAlpha=new Be(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Ze.prototype.createIndexBuffer=function(t,e){return new ce(this,t,e)},Ze.prototype.createVertexBuffer=function(t,e,n){return new pe(this,t,e,n)},Ze.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Ze.prototype.createFramebuffer=function(t,e){return new Ue(this,t,e)},Ze.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ze.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Ze.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Ze.prototype.setColorMode=function(e){t.default$10(e.blendFunction,Ye.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)};var We=function(e){function n(t,n,r){var i=this;e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=se(t,n,r,this),this._tiles={},this._cache=new le(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){var e=this;return Object.keys(this._tiles).map(Number).sort(function(n,r){var i=e._tiles[n].tileID,o=e._tiles[r].tileID,a=new t.default$1(i.canonical.x,i.canonical.y).rotate(e.transform.angle),s=new t.default$1(o.canonical.x,o.canonical.y).rotate(e.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})},n.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=gt.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null)},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._findLoadedChildren=function(t,e,n){var r=!1;for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=t.overscaledZ||o.tileID.overscaledZ>e)){var a=Math.pow(2,o.tileID.canonical.z-t.canonical.z);if(Math.floor(o.tileID.canonical.x/a)===t.canonical.x&&Math.floor(o.tileID.canonical.y/a)===t.canonical.y)for(n[i]=o.tileID,r=!0;o&&o.tileID.overscaledZ-1>t.overscaledZ;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);if(!s)break;(o=this._tiles[s.key])&&o.hasData()&&(delete n[i],n[s.key]=s)}}}return r},n.prototype.findLoadedParent=function(t,e,n){for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r);if(!i)return;var o=String(i.key),a=this._tiles[o];if(a&&a.hasData())return n[o]=i,a;if(this._cache.has(i))return n[o]=i,this._cache.get(i)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),s=Math.max(a-n.maxOverzooming,this._source.minzoom),u=Math.max(a+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(i,a),c={};if(f(this._source.type))for(var h=Object.keys(l),p=0;p<h.length;p++){var d=h[p],y=l[d],g=r._tiles[d];if(g&&(void 0===g.fadeEndTime||g.fadeEndTime>=gt.now())){r._findLoadedChildren(y,u,l)&&(l[d]=y);var m=r.findLoadedParent(y,s,c);m&&r._addTile(m.tileID)}}for(o in c)l[o]||(r._coveredTiles[o]=!0);for(o in c)l[o]=c[o];for(var v=t.keysDifference(this._tiles,l),_=0;_<v.length;_++)r._removeTile(v[_])}},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s=0;s<t.length;s++){var u=t[s],l=this._addTile(u),c=!1;if(l.hasData())r[u.key]=u;else{c=l.wasRequested(),r[u.key]=u;var h=!0;if(e+1>this._source.maxzoom){var p=u.children(this._source.maxzoom)[0],f=this.getTile(p);f&&f.hasData()?r[p.key]=p:h=!1}else{this._findLoadedChildren(u,a,r);for(var d=u.children(this._source.maxzoom),y=0;y<d.length;y++)if(!r[d[y].key]){h=!1;break}}if(!h)for(var g=u.overscaledZ-1;g>=o;--g){var m=u.scaledTo(g);if(i[m.key])break;if(i[m.key]=!0,!(l=this.getTile(m))&&c&&(l=this._addTile(m)),l&&(r[m.key]=m,c=l.wasRequested(),l.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e);var r=Boolean(n);return r||(n=new ue(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n){for(var r=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,l=e[0].zoom,c=0;c<e.length;c++){var h=e[c];o=Math.min(o,h.column),a=Math.min(a,h.row),s=Math.max(s,h.column),u=Math.max(u,h.row)}for(var f=0;f<i.length;f++){var d=this._tiles[i[f]],y=d.tileID,g=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),m=n*d.queryPadding*t.default$8/d.tileSize/g,v=[p(y,new t.default$17(o,a,l)),p(y,new t.default$17(s,u,l))];if(v[0].x-m<t.default$8&&v[0].y-m<t.default$8&&v[1].x+m>=0&&v[1].y+m>=0){for(var _=[],b=0;b<e.length;b++)_.push(p(y,e[b]));r.push({tile:d,tileID:y,queryGeometry:[_],scale:g})}}return r},n.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),n=0,r=e;n<r.length;n+=1){var i=r[n];i.posMatrix=t.transform.calculatePosMatrix(i.toUnwrapped())}return e},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(f(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=gt.now())return!0}return!1},n}(t.Evented);We.maxOverzooming=10,We.maxUnderzooming=3;var $e,He=function(){this.active={}};He.prototype.acquire=function(t){if(!this.workers){var e=kr.workerCount;for(this.workers=[];this.workers.length<e;)this.workers.push(new d)}return this.active[t]=!0,this.workers.slice()},He.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Ke={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Je=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Je.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Je.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Je.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Je.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Je.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Je.prototype._query=function(t,e,n,r,i){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var o=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var a=0;a<this.boxKeys.length;a++)o.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(var s=0;s<this.circleKeys.length;s++){var u=this.circles[3*s],l=this.circles[3*s+1],c=this.circles[3*s+2];o.push({key:this.circleKeys[s],x1:u-c,y1:l-c,x2:u+c,y2:l+c})}}else{var h={hitTest:i,seenUids:{box:{},circle:{}}};this._forEachCell(t,e,n,r,this._queryCell,o,h)}return i?o.length>0:o},Je.prototype._queryCircle=function(t,e,n,r){var i=t-n,o=t+n,a=e-n,s=e+n;if(o<0||i>this.width||s<0||a>this.height)return!r&&[];var u=[],l={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(i,a,o,s,this._queryCellCircle,u,l),r?u.length>0:u},Je.prototype.query=function(t,e,n,r){return this._query(t,e,n,r,!1)},Je.prototype.hitTest=function(t,e,n,r){return this._query(t,e,n,r,!0)},Je.prototype.hitTestCircle=function(t,e,n){return this._queryCircle(t,e,n,!0)},Je.prototype._queryCell=function(t,e,n,r,i,o,a){var s=a.seenUids,u=this.boxCells[i];if(null!==u)for(var l=this.bboxes,c=0,h=u;c<h.length;c+=1){var p=h[c];if(!s.box[p]){s.box[p]=!0;var f=4*p;if(t<=l[f+2]&&e<=l[f+3]&&n>=l[f+0]&&r>=l[f+1]){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:l[f],y1:l[f+1],x2:l[f+2],y2:l[f+3]})}}}var d=this.circleCells[i];if(null!==d)for(var y=this.circles,g=0,m=d;g<m.length;g+=1){var v=m[g];if(!s.circle[v]){s.circle[v]=!0;var _=3*v;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],t,e,n,r)){if(a.hitTest)return o.push(!0),!0;var b=y[_],x=y[_+1],w=y[_+2];o.push({key:this.circleKeys[v],x1:b-w,y1:x-w,x2:b+w,y2:x+w})}}}},Je.prototype._queryCellCircle=function(t,e,n,r,i,o,a){var s=a.circle,u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,h=0,p=l;h<p.length;h+=1){var f=p[h];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(this._circleAndRectCollide(s.x,s.y,s.radius,c[d+0],c[d+1],c[d+2],c[d+3]))return o.push(!0),!0}}var y=this.circleCells[i];if(null!==y)for(var g=this.circles,m=0,v=y;m<v.length;m+=1){var _=v[m];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circlesCollide(g[b],g[b+1],g[b+2],s.x,s.y,s.radius))return o.push(!0),!0}}},Je.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),c=this._convertToYCellCoord(r),h=s;h<=l;h++)for(var p=u;p<=c;p++){var f=this.xCellCount*p+h;if(i.call(this,t,e,n,r,f,o,a))return}},Je.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Je.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Je.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Je.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,p=c-l;return h*h+p*p<=n*n};var Qe=t.default$19.layout,tn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);t.default$20.mat4;var en=function(t,e,n){void 0===e&&(e=new Je(t.width+200,t.height+200,25)),void 0===n&&(n=new Je(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100};en.prototype.placeCollisionBox=function(t,e,n,r){var i=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),o=n*i.perspectiveRatio,a=t.x1*o+i.point.x,s=t.y1*o+i.point.y,u=t.x2*o+i.point.x,l=t.y2*o+i.point.y;return!e&&this.grid.hitTest(a,s,u,l)?{box:[],offscreen:!1}:{box:[a,s,u,l],offscreen:this.isOffscreen(a,s,u,l)}},en.prototype.approximateTileDistance=function(t,e,n,r,i){var o=i?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},en.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,h,p,f){var d=[],y=this.projectAnchor(c,a.anchorX,a.anchorY),g=l/24,m=a.lineOffsetX*l,v=a.lineOffsetY*l,_=new t.default$1(a.anchorX,a.anchorY),b=P(g,u,m,v,!1,T(_,h).point,_,a,s,h,{},!0),x=!1,w=!0,E=y.perspectiveRatio*i,S=1/(i*r),I=0,C=0;b&&(I=this.approximateTileDistance(b.first.tileDistance,b.first.angle,S,y.cameraDistance,f),C=this.approximateTileDistance(b.last.tileDistance,b.last.angle,S,y.cameraDistance,f));for(var M=0;M<e.length;M+=5){var k=e[M],A=e[M+1],O=e[M+2],L=e[M+3];if(!b||L<-I||L>C)z(e,M,!1);else{var N=this.projectPoint(c,k,A),R=O*E;if(d.length>0){var D=N.x-d[d.length-4],F=N.y-d[d.length-3];if(R*R*2>D*D+F*F&&M+8<e.length){var B=e[M+8];if(B>-I&&B<C){z(e,M,!1);continue}}}var j=M/5;if(d.push(N.x,N.y,R,j),z(e,M,!0),w=w&&this.isOffscreen(N.x-R,N.y-R,N.x+R,N.y+R),!n&&this.grid.hitTestCircle(N.x,N.y,R)){if(!p)return{circles:[],offscreen:!1};x=!0}}}return{circles:x?[]:d,offscreen:w}},en.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.default$1(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var h={},p={},f=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<d.length;f+=1){var y=d[f],g=y.key;if(void 0===h[g.bucketInstanceId]&&(h[g.bucketInstanceId]={}),!h[g.bucketInstanceId][g.featureIndex]){var m=[new t.default$1(y.x1,y.y1),new t.default$1(y.x2,y.y1),new t.default$1(y.x2,y.y2),new t.default$1(y.x1,y.y2)];t.polygonIntersectsPolygon(n,m)&&(h[g.bucketInstanceId][g.featureIndex]=!0,void 0===p[g.bucketInstanceId]&&(p[g.bucketInstanceId]=[]),p[g.bucketInstanceId].push(g.featureIndex))}}return p},en.prototype.insertCollisionBox=function(t,e,n,r){var i={bucketInstanceId:n,featureIndex:r};(e?this.ignoredGrid:this.grid).insert(i,t[0],t[1],t[2],t[3])},en.prototype.insertCollisionCircles=function(t,e,n,r){for(var i=e?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r},a=0;a<t.length;a+=4)i.insertCircle(o,t[a],t[a+1],t[a+2])},en.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return D(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},en.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return D(i,i,e),new t.default$1((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},en.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return D(i,i,e),{point:new t.default$1((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},en.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary};var nn=t.default$19.layout,rn=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};rn.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var on=function(t,e,n,r,i){this.text=new rn(t?t.text:null,e,n,i),this.icon=new rn(t?t.icon:null,e,r,i)};on.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var an=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},sn=function(t,e){this.transform=t.clone(),this.collisionIndex=new en(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={}};sn.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.default$8,h=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),p=I(h,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,F(n,1,this.transform.zoom)),f=I(h,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,F(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,h,p,f,l,c,r,i,s)}},sn.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,u,l){for(var c=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,nn.properties["text-size"]),p=!e.hasTextData()||c.get("text-optional"),f=!e.hasIconData()||c.get("icon-optional"),d=0,y=e.symbolInstances;d<y.length;d+=1){var g=y[d];if(!u[g.crossTileID]){var m=void 0!==g.feature.text,v=void 0!==g.feature.icon,_=!0,b=null,x=null,w=null,E=0,S=0;g.collisionArrays||(g.collisionArrays=e.deserializeCollisionBoxes(l,g.textBoxStartIndex,g.textBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex)),g.collisionArrays.textFeatureIndex&&(E=g.collisionArrays.textFeatureIndex),g.collisionArrays.textBox&&(m=(b=this.collisionIndex.placeCollisionBox(g.collisionArrays.textBox,c.get("text-allow-overlap"),a,n)).box.length>0,_=_&&b.offscreen);var I=g.collisionArrays.textCircles;if(I){var C=e.text.placedSymbolArray.get(g.placedTextSymbolIndices[0]),T=t.evaluateSizeForFeature(e.textSizeData,h,C);x=this.collisionIndex.placeCollisionCircles(I,c.get("text-allow-overlap"),o,a,g.key,C,e.lineVertexArray,e.glyphOffsetArray,T,n,r,s,"map"===c.get("text-pitch-alignment")),m=c.get("text-allow-overlap")||x.circles.length>0,_=_&&x.offscreen}g.collisionArrays.iconFeatureIndex&&(S=g.collisionArrays.iconFeatureIndex),g.collisionArrays.iconBox&&(v=(w=this.collisionIndex.placeCollisionBox(g.collisionArrays.iconBox,c.get("icon-allow-overlap"),a,n)).box.length>0,_=_&&w.offscreen),p||f?f?p||(v=v&&m):m=v&&m:v=m=v&&m,m&&b&&this.collisionIndex.insertCollisionBox(b.box,c.get("text-ignore-placement"),e.bucketInstanceId,E),v&&w&&this.collisionIndex.insertCollisionBox(w.box,c.get("icon-ignore-placement"),e.bucketInstanceId,S),m&&x&&this.collisionIndex.insertCollisionCircles(x.circles,c.get("text-ignore-placement"),e.bucketInstanceId,E),this.placements[g.crossTileID]=new an(m,v,_||e.justReloaded),u[g.crossTileID]=!0}}e.justReloaded=!1},sn.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new on(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new on(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new on(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},sn.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},sn.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var r=t.layers[0].layout,i=new on(null,0,!1,!1,!0),o=new on(null,0,r.get("text-allow-overlap"),r.get("icon-allow-overlap"),!0),a=0;a<t.symbolInstances.length;a++){var s=t.symbolInstances[a],u=e[s.crossTileID],l=this.opacities[s.crossTileID];u?l=i:l||(l=o,this.opacities[s.crossTileID]=l),e[s.crossTileID]=!0;var c=s.numGlyphVertices>0||s.numVerticalGlyphVertices>0,h=s.numIconVertices>0;if(c){for(var p=j(l.text),f=(s.numGlyphVertices+s.numVerticalGlyphVertices)/4,d=0;d<f;d++)t.text.opacityVertexArray.emplaceBack(p);for(var y=0,g=s.placedTextSymbolIndices;y<g.length;y+=1){var m=g[y];t.text.placedSymbolArray.get(m).hidden=l.text.isHidden()}}if(h){for(var v=j(l.icon),_=0;_<s.numIconVertices/4;_++)t.icon.opacityVertexArray.emplaceBack(v);t.icon.placedSymbolArray.get(a).hidden=l.icon.isHidden()}s.collisionArrays||(s.collisionArrays=t.deserializeCollisionBoxes(n,s.textBoxStartIndex,s.textBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex));var b=s.collisionArrays;if(b){b.textBox&&t.hasCollisionBoxData()&&B(t.collisionBox.collisionVertexArray,l.text.placed,!1),b.iconBox&&t.hasCollisionBoxData()&&B(t.collisionBox.collisionVertexArray,l.icon.placed,!1);var x=b.textCircles;if(x&&t.hasCollisionCircleData())for(var w=0;w<x.length;w+=5){var E=u||0===x[w+4];B(t.collisionCircle.collisionVertexArray,l.text.placed,E)}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},sn.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},sn.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},sn.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},sn.prototype.setStale=function(){this.stale=!0};var un=Math.pow(2,25),ln=Math.pow(2,24),cn=Math.pow(2,17),hn=Math.pow(2,16),pn=Math.pow(2,9),fn=Math.pow(2,8),dn=Math.pow(2,1),yn=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};yn.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var gn=function(t,e,n,r,i){this.placement=new sn(t,i),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};gn.prototype.isDone=function(){return this._done},gn.prototype.continuePlacement=function(t,e,n){for(var r=this,i=gt.now(),o=function(){var t=gt.now()-i;return!r._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var a=e[t[r._currentPlacementIndex]],s=r.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=s)&&(!a.maxzoom||a.maxzoom>s)){if(r._inProgressLayer||(r._inProgressLayer=new yn),r._inProgressLayer.continuePlacement(n[a.source],r.placement,r._showCollisionBoxes,a,o))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},gn.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var mn=512/t.default$8/2,vn=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}};vn.prototype.getScaledCoordinates=function(e,n){var r=n.canonical.z-this.tileID.canonical.z,i=mn/Math.pow(2,r),o=e.anchor;return{x:Math.floor((n.canonical.x*t.default$8+o.x)*i),y:Math.floor((n.canonical.y*t.default$8+o.y)*i)}},vn.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0,o=t;i<o.length;i+=1){var a=o[i];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var u=this.getScaledCoordinates(a,e),l=0,c=s;l<c.length;l+=1){var h=c[l];if(Math.abs(h.coord.x-u.x)<=r&&Math.abs(h.coord.y-u.y)<=r&&!n[h.crossTileID]){n[h.crossTileID]=!0,a.crossTileID=h.crossTileID;break}}}}};var _n=function(){this.maxCrossTileID=0};_n.prototype.generate=function(){return++this.maxCrossTileID};var bn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};bn.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},bn.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0,i=e.symbolInstances;r<i.length;r+=1)i[r].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>t.overscaledZ)for(var u in s){var l=s[u];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,o)}else{var c=s[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,o)}}for(var h=0,p=e.symbolInstances;h<p.length;h+=1){var f=p[h];f.crossTileID||(f.crossTileID=n.generate(),o[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new vn(t,e.symbolInstances,e.bucketInstanceId),!0},bn.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[t][o.crossTileID]}},bn.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var xn=function(){this.layerIndexes={},this.crossTileIDs=new _n,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};xn.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new bn);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},xn.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var wn=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},En=t.pick(Ke,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Sn=t.pick(Ke,["setCenter","setZoom","setBearing","setPitch"]),In=function(e){function o(n,r){var i=this;void 0===r&&(r={}),e.call(this),this.map=n,this.dispatcher=new Zt(($e||($e=new He),$e),this),this.imageManager=new Bt,this.glyphManager=new qt(n._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new Yt(256,512),this.crossTileSymbolIndex=new xn,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.default$23,this._loaded=!1,this._resetUpdates();var a=this;this._rtlTextPluginCallback=o.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var o=i._layers[r];o.source===n.id&&i._validateLayer(o)}}}})}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.loadURL=function(e,o){var a=this;void 0===o&&(o={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var s="boolean"==typeof o.validate?o.validate:!r(e);e=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/styles/v1"+o.path,n(o,e)}(e,o.accessToken);var u=this.map._transformRequest(e,t.ResourceType.Style);t.getJSON(u,function(e,n){e?a.fire(new t.ErrorEvent(e)):n&&a._load(n,s)})},o.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),gt.frame(function(){r._load(e,!1!==n.validate)})},o.prototype._load=function(e,n){var r=this;if(!n||!wn(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)r.addSource(i,e.sources[i],{validate:!1});e.sprite?function(e,n,r){function i(){if(s)r(s);else if(o&&a){var e=gt.getImageData(a),n={};for(var i in o){var u=o[i],l=u.width,c=u.height,h=u.x,p=u.y,f=u.sdf,d=u.pixelRatio,y=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,y,{x:h,y:p},{x:0,y:0},{width:l,height:c}),n[i]={data:y,pixelRatio:d,sdf:f}}r(null,n)}}var o,a,s,u=gt.devicePixelRatio>1?"@2x":"";t.getJSON(n(Pt(e,u,".json"),t.ResourceType.SpriteJSON),function(t,e){s||(s=t,o=e,i())}),t.getImage(n(Pt(e,u,".png"),t.ResourceType.SpriteImage),function(t,e){s||(s=t,a=e,i())})}(e.sprite,this.map._transformRequest,function(e,n){if(e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=g(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=t.default$22(u)).setEventedParent(r,{layer:{id:u.id}}),r._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Xt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},o.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},o.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},o.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},o.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},o.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},o.prototype.update=function(e){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}))}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=l[u],h=this._layers[c];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},o.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},o.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},o.prototype.setState=function(e){var n=this;if(this._checkLoaded(),wn(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=g(e.layers);var r=S(this.serialize(),e).filter(function(t){return!(t.command in Sn)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in En)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},o.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.getImage=function(t){return this.imageManager.getImage(t)},o.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.addSource=function(e,n,r){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,n,null,r)){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new We(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},o.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},o.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},o.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},o.prototype.addLayer=function(e,n,r){this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),!this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r)){var o=t.default$22(e);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}}},o.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},o.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},o.prototype.getLayer=function(t){return this._layers[t]},o.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},o.prototype.setFilter=function(e,n){this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.default$10(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n)||(r.filter=t.clone(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},o.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},o.prototype.setLayoutProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.default$10(i.getLayoutProperty(n),r)||(i.setLayoutProperty(n,r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},o.prototype.setPaintProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.default$10(i.getPaintProperty(n),r)){var o=i._transitionablePaint._values[n].value.isDataDriven();i.setPaintProperty(n,r),(i._transitionablePaint._values[n].value.isDataDriven()||o)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},o.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},o.prototype.serialize=function(){var e=this;return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},o.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},o.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=t;i<o.length;i+=1){var a=o[i][r];if(a)for(var s=0,u=a;s<u.length;s+=1){var l=u[s];e.push(l)}}return e},o.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var p in this.sourceCaches)n.layers&&!i[p]||l.push(c(this.sourceCaches[p],this._layers,e.worldCoordinate,n,r));return this.placement&&l.push(function(t,e,n,r,i){for(var o={},a=r.queryRenderedSymbols(e),s=[],u=0,l=Object.keys(a).map(Number);u<l.length;u+=1){var c=l[u];s.push(i[c])}s.sort(h);for(var p=0,f=s;p<f.length;p+=1)!function(){var e=f[p],r=e.featureIndex.lookupSymbolFeatures(a[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,n.filter,n.layers,t);for(var i in r){var s=o[i]=o[i]||[],u=r[i];u.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var l=0,c=u;l<c.length;l+=1){var h=c[l];s.push(h.feature)}}}();return o}(this._layers,e.viewport,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(l)},o.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},o.prototype.addSourceType=function(t,e,n){return o.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(o.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},o.prototype.getLight=function(){return this.light.getLight()},o.prototype.setLight=function(e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!t.default$10(e[i],n[i])){r=!0;break}if(r){var o={now:gt.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(o)}},o.prototype._validate=function(e,n,r,i,o){return(!o||!1!==o.validate)&&wn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.default$5},i)))},o.prototype._remove=function(){for(var e in t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},o.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},o.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},o.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},o.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},o.prototype._updatePlacement=function(t,e,n){for(var r=!1,i=!1,o={},a=0,s=this._order;a<s.length;a+=1){var u=s[a],l=this._layers[u];if("symbol"===l.type){if(!o[l.source]){var c=this.sourceCaches[l.source];o[l.source]=c.getRenderableIds().map(function(t){return c.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=this.crossTileSymbolIndex.addLayer(l,o[l.source],t.center.lng);r=r||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var p=this._layerOrderChanged;if((p||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(gt.now()))&&(this.pauseablePlacement=new gn(t,this._order,p,e,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,gt.now()),i=!0),r&&this.pauseablePlacement.placement.setStale()),i||r)for(var f=0,d=this._order;f<d.length;f+=1){var y=d[f],g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,o[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(gt.now())},o.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},o.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},o}(t.Evented);In.getSourceType=function(t){return ae[t]},In.setSourceType=function(t,e){ae[t]=e},In.registerForPluginAvailability=t.registerForPluginAvailability;var Cn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Tn={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},Mn=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var kn in Tn)!function(t){var e=Tn[t],n={};e.fragmentSource=e.fragmentSource.replace(Mn,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(Mn,function(t,e,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}(kn);var Pn=Tn,An=function(t,e,n,r){var i=t.gl;this.program=i.createProgram();var o=n.defines().concat("#define DEVICE_PIXEL_RATIO "+gt.devicePixelRatio.toFixed(1));r&&o.push("#define OVERDRAW_INSPECTOR;");var a=o.concat(Pn.prelude.fragmentSource,e.fragmentSource).join("\n"),s=o.concat(Pn.prelude.vertexSource,e.vertexSource).join("\n"),u=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(u,a),i.compileShader(u),i.attachShader(this.program,u);var l=i.createShader(i.VERTEX_SHADER);i.shaderSource(l,s),i.compileShader(l),i.attachShader(this.program,l);for(var c=n.layoutAttributes||[],h=0;h<c.length;h++)i.bindAttribLocation(this.program,h,c[h].name);i.linkProgram(this.program),this.numAttributes=i.getProgramParameter(this.program,i.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var p=0;p<this.numAttributes;p++){var f=i.getActiveAttrib(this.program,p);f&&(this.attributes[f.name]=i.getAttribLocation(this.program,f.name))}for(var d=i.getProgramParameter(this.program,i.ACTIVE_UNIFORMS),y=0;y<d;y++){var g=i.getActiveUniform(this.program,y);g&&(this.uniforms[g.name]=i.getUniformLocation(this.program,g.name))}};An.prototype.draw=function(t,e,n,r,i,o,a,s,u){for(var l,c=t.gl,h=(l={},l[c.LINES]=2,l[c.TRIANGLES]=3,l)[e],p=0,f=o.get();p<f.length;p+=1){var d=f[p],y=d.vaos||(d.vaos={});(y[n]||(y[n]=new ne)).bind(t,this,r,a?a.getPaintVertexBuffers():[],i,d.vertexOffset,s,u),c.drawElements(e,d.primitiveLength*h,c.UNSIGNED_SHORT,d.primitiveOffset*h*2)}};var On=t.mat4.identity(new Float32Array(16)),Ln=t.default$19.layout,Nn=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!n||!r},Rn=function(t,e,n){var r=e.context,i=r.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),u=s.width,l=s.height;i.uniform2fv(n.uniforms.u_texsize,[u,l]),i.uniform1f(n.uniforms.u_mix,t.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,t.fromScale),i.uniform1f(n.uniforms.u_scale_b,t.toScale),r.activeTexture.set(i.TEXTURE0),e.imageManager.bind(e.context)},Dn=function(t,e,n){var r=e.context.gl;r.uniform1f(n.uniforms.u_tile_units_to_pixels,1/F(t,1,e.transform.tileZoom));var i=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(t.tileID.canonical.x+t.tileID.wrap*i),s=o*t.tileID.canonical.y;r.uniform2f(n.uniforms.u_pixel_coord_upper,a>>16,s>>16),r.uniform2f(n.uniforms.u_pixel_coord_lower,65535&a,65535&s)},zn=t.default$20.mat3,Fn=t.default$20.mat4,Bn=t.default$20.vec3,jn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Vn={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=t.context;i.setStencilMode(Xe.disabled),i.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&U(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&U(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&function(t,e,n,r){q(t,e,n,r,!1),q(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,u=s.gl;s.setDepthMode(t.depthModeForSublayer(0,Ge.ReadOnly)),s.setStencilMode(Xe.disabled),s.setColorMode(t.colorModeForRenderPass());for(var l=!0,c=0;c<r.length;c++){var h=r[c],p=e.getTile(h),f=p.getBucket(n);if(f){var d=t.context.program.get(),y=f.programConfigurations.get(n.id),g=t.useProgram("circle",y);if((l||g.program!==d)&&(y.setUniforms(s,g,n.paint,{zoom:t.transform.zoom}),l=!1),u.uniform1f(g.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),u.uniform1i(g.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){u.uniform1i(g.uniforms.u_pitch_with_map,1);var m=F(p,1,t.transform.zoom);u.uniform2f(g.uniforms.u_extrude_scale,m,m)}else u.uniform1i(g.uniforms.u_pitch_with_map,0),u.uniform2fv(g.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);u.uniformMatrix4fv(g.uniforms.u_matrix,!1,t.translatePosMatrix(h.posMatrix,p,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),g.draw(s,u.TRIANGLES,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,y)}}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl;o.setDepthMode(e.depthModeForSublayer(0,Ge.ReadOnly)),o.setStencilMode(Xe.disabled),function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.default$6.transparent}),o.setColorMode(new Ye([a.ONE,a.ONE],t.default$6.transparent,[!0,!0,!0,!0]));for(var s=!0,u=0;u<i.length;u++){var l=i[u];if(!n.hasRenderableParent(l)){var c=n.getTile(l),h=c.getBucket(r);if(h){var p=e.context.program.get(),f=h.programConfigurations.get(r.id),d=e.useProgram("heatmap",f),y=e.transform.zoom;(s||d.program!==p)&&(f.setUniforms(e.context,d,r.paint,{zoom:y}),s=!1),a.uniform1f(d.uniforms.u_extrude_scale,F(c,1,y)),a.uniform1f(d.uniforms.u_intensity,r.paint.get("heatmap-intensity")),a.uniformMatrix4fv(d.uniforms.u_matrix,!1,l.posMatrix),d.draw(o,a.TRIANGLES,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,f)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new Ft(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),r.setDepthMode(Ge.disabled);var s=e.useProgram("heatmapTexture"),u=n.paint.get("heatmap-opacity");i.uniform1f(s.uniforms.u_opacity,u),i.uniform1i(s.uniforms.u_image,0),i.uniform1i(s.uniforms.u_color_ramp,1);var l=t.mat4.create();t.mat4.ortho(l,0,e.width,e.height,0,0,1),i.uniformMatrix4fv(s.uniforms.u_matrix,!1,l),i.uniform2f(s.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),e.viewportVAO.bind(e.context,s,e.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}(e,r))},line:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var i=t.context;i.setDepthMode(t.depthModeForSublayer(0,Ge.ReadOnly)),i.setColorMode(t.colorModeForRenderPass());for(var o,a=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":n.paint.get("line-gradient")?"lineGradient":"line",s=!0,u=0,l=r;u<l.length;u+=1){var c=l[u],h=e.getTile(c),p=h.getBucket(n);if(p){var f=p.programConfigurations.get(n.id),d=t.context.program.get(),y=t.useProgram(a,f),g=s||y.program!==d,m=o!==h.tileID.overscaledZ;g&&f.setUniforms(t.context,y,n.paint,{zoom:t.transform.zoom}),Z(y,t,h,p,n,c,f,g,m),o=h.tileID.overscaledZ,s=!1}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.context;s.setColorMode(e.colorModeForRenderPass());var u=r.paint.get("fill-pattern")||1!==o.constantOr(t.default$6.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===u&&(s.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?Ge.ReadWrite:Ge.ReadOnly)),W(e,n,r,i,$)),"translucent"===e.renderPass&&r.paint.get("fill-antialias")&&(s.lineWidth.set(2),s.setDepthMode(e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ge.ReadOnly)),W(e,n,r,i,H))}},"fill-extrusion":function(e,n,r,i){if(0!==r.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){!function(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new Ft(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.default$6.transparent}),r.setStencilMode(Xe.disabled),r.setDepthMode(new Ge(i.LEQUAL,Ge.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}(e,r);for(var o=!0,a=0,s=i;a<s.length;a+=1){var u=s[a],l=n.getTile(u),c=l.getBucket(r);c&&(J(e,0,r,l,u,c,o),o=!1)}}else"translucent"===e.renderPass&&function(t,e){var n=e.viewportFrame;if(n){var r=t.context,i=r.gl,o=t.useProgram("extrusionTexture");r.setStencilMode(Xe.disabled),r.setDepthMode(Ge.disabled),r.setColorMode(t.colorModeForRenderPass()),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),i.uniform1f(o.uniforms.u_opacity,e.paint.get("fill-extrusion-opacity")),i.uniform1i(o.uniforms.u_image,0);var a=Fn.create();Fn.ortho(a,0,t.width,t.height,0,0,1),i.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),i.uniform2f(o.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),t.viewportVAO.bind(r,o,t.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}(e,r)},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var i=t.context,o=e.getSource().maxzoom;i.setDepthMode(t.depthModeForSublayer(0,Ge.ReadOnly)),i.setStencilMode(Xe.disabled),i.setColorMode(t.colorModeForRenderPass());for(var a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u);l.needsHillshadePrepare&&"offscreen"===t.renderPass?tt(t,l,o):"translucent"===t.renderPass&&Q(t,l,n)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var i,o,a=t.context,s=a.gl,u=e.getSource(),l=t.useProgram("raster");a.setStencilMode(Xe.disabled),a.setColorMode(t.colorModeForRenderPass()),s.uniform1f(l.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),s.uniform1f(l.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),s.uniform1f(l.uniforms.u_saturation_factor,(i=n.paint.get("raster-saturation"))>0?1-1/(1.001-i):-i),s.uniform1f(l.uniforms.u_contrast_factor,(o=n.paint.get("raster-contrast"))>0?1/(1-o):1+o),s.uniform3fv(l.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(n.paint.get("raster-hue-rotate"))),s.uniform1f(l.uniforms.u_buffer_scale,1),s.uniform1i(l.uniforms.u_image0,0),s.uniform1i(l.uniforms.u_image1,1);for(var c=r.length&&r[0].overscaledZ,h=0,p=r;h<p.length;h+=1){var f=p[h];a.setDepthMode(t.depthModeForSublayer(f.overscaledZ-c,1===n.paint.get("raster-opacity")?Ge.ReadWrite:Ge.ReadOnly,s.LESS));var d=e.getTile(f),y=t.transform.calculatePosMatrix(f.toUnwrapped(),!0);d.registerFadeDuration(n.paint.get("raster-fade-duration")),s.uniformMatrix4fv(l.uniforms.u_matrix,!1,y);var g=e.findLoadedParent(f,0,{}),m=et(d,g,e,n,t.transform),v=void 0,_=void 0;if(a.activeTexture.set(s.TEXTURE0),d.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(s.TEXTURE1),g?(g.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),v=Math.pow(2,g.tileID.overscaledZ-d.tileID.overscaledZ),_=[d.tileID.canonical.x*v%1,d.tileID.canonical.y*v%1]):d.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),s.uniform2fv(l.uniforms.u_tl_parent,_||[0,0]),s.uniform1f(l.uniforms.u_scale_parent,v||1),s.uniform1f(l.uniforms.u_fade_t,m.mix),s.uniform1f(l.uniforms.u_opacity,m.opacity*n.paint.get("raster-opacity")),u instanceof re){var b=u.boundsBuffer;u.boundsVAO.bind(a,l,b,[]),s.drawArrays(s.TRIANGLE_STRIP,0,b.length)}else if(d.maskedBoundsBuffer&&d.maskedIndexBuffer&&d.segments)l.draw(a,s.TRIANGLES,n.id,d.maskedBoundsBuffer,d.maskedIndexBuffer,d.segments);else{var x=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,l,x,[]),s.drawArrays(s.TRIANGLE_STRIP,0,x.length)}}}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern"),c=l||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var h;if(o.setStencilMode(Xe.disabled),o.setDepthMode(t.depthModeForSublayer(0,"opaque"===c?Ge.ReadWrite:Ge.ReadOnly)),o.setColorMode(t.colorModeForRenderPass()),l){if(Nn(l,t))return;h=t.useProgram("backgroundPattern"),Rn(l,t,h),t.tileExtentPatternVAO.bind(o,h,t.tileExtentBuffer,[])}else h=t.useProgram("background"),a.uniform4fv(h.uniforms.u_color,[r.r,r.g,r.b,r.a]),t.tileExtentVAO.bind(o,h,t.tileExtentBuffer,[]);a.uniform1f(h.uniforms.u_opacity,i);for(var p=0,f=s.coveringTiles({tileSize:u});p<f.length;p+=1){var d=f[p];l&&Dn({tileID:d,tileSize:u},t,h),a.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(d.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)nt(t,e,n[r])}},qn=function(e,n){this.context=new Ze(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=We.maxUnderzooming+We.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.default$24,this.crossTileSymbolIndex=new xn};qn.prototype.resize=function(t,e){var n=this.context.gl;if(this.width=t*gt.devicePixelRatio,this.height=e*gt.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1){var o=i[r];this.style._layers[o].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},qn.prototype.setup=function(){var e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.default$8,0),n.emplaceBack(0,t.default$8),n.emplaceBack(t.default$8,t.default$8),this.tileExtentBuffer=e.createVertexBuffer(n,Cn.members),this.tileExtentVAO=new ne,this.tileExtentPatternVAO=new ne;var r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.default$8,0),r.emplaceBack(t.default$8,t.default$8),r.emplaceBack(0,t.default$8),r.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(r,Cn.members),this.debugVAO=new ne;var i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.default$8,0,t.default$8,0),i.emplaceBack(0,t.default$8,0,t.default$8),i.emplaceBack(t.default$8,t.default$8,t.default$8,t.default$8),this.rasterBoundsBuffer=e.createVertexBuffer(i,ee.members),this.rasterBoundsVAO=new ne;var o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Cn.members),this.viewportVAO=new ne},qn.prototype.clearStencil=function(){var e=this.context,n=e.gl;e.setColorMode(Ye.disabled),e.setDepthMode(Ge.disabled),e.setStencilMode(new Xe({func:n.ALWAYS,mask:0},0,255,n.ZERO,n.ZERO,n.ZERO));var r=t.mat4.create();t.mat4.ortho(r,0,this.width,this.height,0,0,1),t.mat4.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]);var i=this.useProgram("clippingMask");n.uniformMatrix4fv(i.uniforms.u_matrix,!1,r),this.viewportVAO.bind(e,i,this.viewportBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,4)},qn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(Ye.disabled),e.setDepthMode(Ge.disabled);var r=1;this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=this._tileClippingMaskIDs[a.key]=r++;e.setStencilMode(new Xe({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE));var u=this.useProgram("clippingMask");n.uniformMatrix4fv(u.uniforms.u_matrix,!1,a.posMatrix),this.tileExtentVAO.bind(this.context,u,this.tileExtentBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}},qn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Xe({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},qn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Ye([e.CONSTANT_COLOR,e.ONE],new t.default$6(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ye.unblended:Ye.alphaBlended},qn.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,i=r-1+this.depthRange;return new Ge(n||this.context.gl.LEQUAL,e,[i,r])},qn.prototype.render=function(e,n){var r=this;for(var i in this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(gt.now()),e.sourceCaches){var o=r.style.sourceCaches[i];o.used&&o.prepare(r.context)}var a=this.style._order,s=t.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var u in s)!function(e){var n=s[e];!function(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);V(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}(n.getVisibleCoordinates().map(function(t){return n.getTile(t)}),r.context)}(u);this.renderPass="offscreen";var l,c=[];this.depthRboNeedsClear=!0;for(var h=0;h<a.length;h++){var p=r.style._layers[a[h]];p.hasOffscreenPass()&&!p.isHidden(r.transform.zoom)&&(p.source!==(l&&l.id)&&(c=[],(l=r.style.sourceCaches[p.source])&&(c=l.getVisibleCoordinates()).reverse()),c.length&&r.renderLayer(r,l,p,c))}this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.default$6.black:t.default$6.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var f,d=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var y=r.style._layers[a[r.currentLayer]];y.source!==(f&&f.id)&&(d=[],(f=r.style.sourceCaches[y.source])&&(r.clearStencil(),d=f.getVisibleCoordinates(),f.getSource().isTileClipped&&r._renderTileClippingMasks(d))),r.renderLayer(r,f,y,d)}this.renderPass="translucent";var g,m=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var v=r.style._layers[a[r.currentLayer]];v.source!==(g&&g.id)&&(m=[],(g=r.style.sourceCaches[v.source])&&(r.clearStencil(),m=g.getVisibleCoordinates(),g.getSource().isTileClipped&&r._renderTileClippingMasks(m)),m.reverse()),r.renderLayer(r,g,v,m)}if(this.options.showTileBoundaries){var _=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];_&&Vn.debug(this,_,_.getVisibleCoordinates())}},qn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},qn.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,Vn[n.type](t,e,n,r))},qn.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:F(n,r[0],this.transform.zoom),o?r[1]:F(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.mat4.translate(c,e,l),c},qn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},qn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},qn.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new An(this.context,Pn[t],e,this._showOverdrawInspector)),this.cache[n]},qn.prototype.useProgram=function(t,e){var n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(n.program),n};var Un=t.default$20.vec4,Gn=t.default$20.mat4,Xn=t.default$20.mat2,Yn=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new Wt(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Zn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Yn.prototype.clone=function(){var t=new Yn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Zn.minZoom.get=function(){return this._minZoom},Zn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Zn.maxZoom.get=function(){return this._maxZoom},Zn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Zn.renderWorldCopies.get=function(){return this._renderWorldCopies},Zn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Zn.worldSize.get=function(){return this.tileSize*this.scale},Zn.centerPoint.get=function(){return this.size._div(2)},Zn.size.get=function(){return new t.default$1(this.width,this.height)},Zn.bearing.get=function(){return-this.angle/Math.PI*180},Zn.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=Xn.create(),Xn.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Zn.pitch.get=function(){return this._pitch/Math.PI*180},Zn.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Zn.fov.get=function(){return this._fov/Math.PI*180},Zn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Zn.zoom.get=function(){return this._zoom},Zn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Zn.center.get=function(){return this._center},Zn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Yn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Yn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=this.pointCoordinate(new t.default$1(0,0),0),r=this.pointCoordinate(new t.default$1(this.width,0),0),i=Math.floor(n.column),o=Math.floor(r.column),a=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var s=i;s<=o;s++)0!==s&&a.push(new t.UnwrappedTileID(s,e));return a},Yn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=this.pointCoordinate(this.centerPoint,n),o=new t.default$1(i.column-.5,i.row-.5);return function(e,n,r,i){function o(n,o,u){var l,c,h,p;if(u>=0&&u<=a)for(l=n;l<o;l++)c=Math.floor(l/a),h=(l%a+a)%a,0!==c&&!0!==i||(p=new t.OverscaledTileID(r,c,e,h,u),s[p.key]=p)}void 0===i&&(i=!0);var a=1<<e,s={};return ot(n[0],n[1],n[2],0,a,o),ot(n[2],n[3],n[0],0,a,o),Object.keys(s).map(function(t){return s[t]})}(n,[this.pointCoordinate(new t.default$1(0,0),n),this.pointCoordinate(new t.default$1(this.width,0),n),this.pointCoordinate(new t.default$1(this.width,this.height),n),this.pointCoordinate(new t.default$1(0,this.height),n)],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},Yn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Zn.unmodified.get=function(){return this._unmodified},Yn.prototype.zoomScale=function(t){return Math.pow(2,t)},Yn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Yn.prototype.project=function(e){return new t.default$1(this.lngX(e.lng),this.latY(e.lat))},Yn.prototype.unproject=function(t){return new Wt(this.xLng(t.x),this.yLat(t.y))},Zn.x.get=function(){return this.lngX(this.center.lng)},Zn.y.get=function(){return this.latY(this.center.lat)},Zn.point.get=function(){return new t.default$1(this.x,this.y)},Yn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Yn.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},Yn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Yn.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Yn.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Yn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Yn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Yn.prototype.locationCoordinate=function(e){return new t.default$17(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Yn.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new Wt(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Yn.prototype.pointCoordinate=function(e,n){void 0===n&&(n=this.tileZoom);var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];Un.transformMat4(r,r,this.pixelMatrixInverse),Un.transformMat4(i,i,this.pixelMatrixInverse);var o=r[3],a=i[3],s=r[0]/o,u=i[0]/a,l=r[1]/o,c=i[1]/a,h=r[2]/o,p=i[2]/a,f=h===p?0:(0-h)/(p-h);return new t.default$17(t.number(s,u,f)/this.tileSize,t.number(l,c,f)/this.tileSize,this.zoom)._zoomTo(n)},Yn.prototype.coordinatePoint=function(e){var n=e.zoomTo(this.zoom),r=[n.column*this.tileSize,n.row*this.tileSize,0,1];return Un.transformMat4(r,r,this.pixelMatrix),new t.default$1(r[0]/r[3],r[1]/r[3])},Yn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=Gn.identity(new Float64Array(16));return Gn.translate(u,u,[s*a,o.y*a,0]),Gn.scale(u,u,[a/t.default$8,a/t.default$8,1]),Gn.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Yn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=this.latY(h[1]),e=(a=this.latY(h[0]))-o<l.y?l.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=this.lngX(p[0]),n=(u=this.lngX(p[1]))-s<l.x?l.x/(u-s):0}var f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.default$1(n?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,y=l.y/2;d-y<o&&(i=o+y),d+y>a&&(i=a-y)}if(this.lngRange){var g=this.x,m=l.x/2;g-m<s&&(r=s+m),g+m>u&&(r=u-m)}void 0===r&&void 0===i||(this.center=this.unproject(new t.default$1(void 0!==r?r:this.x,void 0!==i?i:this.y))),this._unmodified=c,this._constraining=!1}},Yn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=this.x,i=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),a=new Float64Array(16);Gn.perspective(a,this._fov,this.width/this.height,1,o),Gn.scale(a,a,[1,-1,1]),Gn.translate(a,a,[0,0,-this.cameraToCenterDistance]),Gn.rotateX(a,a,this._pitch),Gn.rotateZ(a,a,this.angle),Gn.translate(a,a,[-r,-i,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));Gn.scale(a,a,[1,1,s,1]),this.projMatrix=a;var u=this.width%2/2,l=this.height%2/2,c=Math.cos(this.angle),h=Math.sin(this.angle),p=r-Math.round(r)+c*u+h*l,f=i-Math.round(i)+c*l+h*u,d=new Float64Array(a);if(Gn.translate(d,d,[p>.5?p-1:p,f>.5?f-1:f,0]),this.alignedProjMatrix=d,a=Gn.create(),Gn.scale(a,a,[this.width/2,-this.height/2,1]),Gn.translate(a,a,[1,-1,0]),this.pixelMatrix=Gn.multiply(new Float64Array(16),a,this.projMatrix),!(a=Gn.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Yn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.default$1(0,0)).zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return Un.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Yn.prototype,Zn);var Wn=function(){var e,n,r,i,o;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=300,r=!1,i=0,o=function(){i=0,r&&(e(),i=setTimeout(o,n),r=!1)},function(){return r=!0,i||o(),i})};Wn.prototype.addTo=function(e){return this._map=e,t.default.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Wn.prototype.remove=function(){return t.default.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Wn.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},Wn.prototype._onHashChange=function(){var e=t.default.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},Wn.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.default.history.replaceState(t.default.history.state,"",e)};var $n=function(e){function n(n,r,i,o){void 0===o&&(o={});var a=_t.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Hn=function(e){function n(n,r,i){var o=_t.touchPos(r.getCanvasContainer(),i),a=o.map(function(t){return r.unproject(t)}),s=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.default$1(0,0)),u=r.unproject(s);e.call(this,n,{points:o,point:s,lngLats:a,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Kn=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),Jn=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Jn.prototype.isEnabled=function(){return!!this._enabled},Jn.prototype.isActive=function(){return!!this._active},Jn.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Jn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jn.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.default.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=gt.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},Jn.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},Jn.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=_t.mousePos(this._el,e);this._around=Wt.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Jn.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a=!1;if("wheel"===this._type){var s=Math.min((gt.now()-this._lastWheelEventTime)/200,1),u=this._easing(s);n.zoom=t.number(this._startZoom,this._targetZoom,u),s<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):a=!0}else n.zoom=this._targetZoom,a=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),a&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},Jn.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(gt.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:gt.now(),duration:e,easing:n},n};var Qn=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Qn.prototype.isEnabled=function(){return!!this._enabled},Qn.prototype.isActive=function(){return!!this._active},Qn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Qn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Qn.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.default.document.addEventListener("mousemove",this._onMouseMove,!1),t.default.document.addEventListener("keydown",this._onKeyDown,!1),t.default.document.addEventListener("mouseup",this._onMouseUp,!1),_t.disableDrag(),this._startPos=_t.mousePos(this._el,e),this._active=!0)},Qn.prototype._onMouseMove=function(t){var e=this._startPos,n=_t.mousePos(this._el,t);this._box||(this._box=_t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y);_t.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"},Qn.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,r=_t.mousePos(this._el,e),i=(new $t).extend(this._map.unproject(n)).extend(this._map.unproject(r));this._finish(),_t.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(i,{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e,boxZoomBounds:i}))}},Qn.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Qn.prototype._finish=function(){this._active=!1,t.default.document.removeEventListener("mousemove",this._onMouseMove,!1),t.default.document.removeEventListener("keydown",this._onKeyDown,!1),t.default.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(_t.remove(this._box),this._box=null),_t.enableDrag()},Qn.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var tr=t.bezier(0,0,.25,1),er=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};er.prototype.isEnabled=function(){return"disabled"!==this._state},er.prototype.isActive=function(){return"active"===this._state},er.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},er.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},er.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=_t.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==_t.mouseButton(e))return;this._eventButton=0}_t.disableDrag(),t.default.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default.document.addEventListener("mouseup",this._onMouseUp),t.default.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[gt.now(),this._map.getBearing()]],this._previousPos=_t.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},er.prototype._onMouseMove=function(t){this._lastMoveEvent=t,this._pos=_t.mousePos(this._el,t),"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))},er.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform,n=this._previousPos,r=this._pos,i=.8*(n.x-r.x),o=-.5*(n.y-r.y),a=e.bearing-i,s=e.pitch-o,u=this._inertia,l=u[u.length-1];this._drainInertiaBuffer(),u.push([gt.now(),this._map._normalizeBearing(a,l[1])]),e.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.pitch=s),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._previousPos=this._pos}},er.prototype._onMouseUp=function(t){if(_t.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",_t.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},er.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},er.prototype._unbind=function(){t.default.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default.document.removeEventListener("mouseup",this._onMouseUp),t.default.removeEventListener("blur",this._onBlur),_t.enableDrag()},er.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._previousPos},er.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-a[1],h=c<0?-1:1,p=(s[0]-a[0])/1e3;if(0!==c&&0!==p){var f=Math.abs(c*(.25/p));f>180&&(f=180);var d=f/180;l+=h*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:tr,noMoveStart:!0},{originalEvent:t})}else o()}},er.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},er.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=gt.now();t.length>0&&e-t[0][0]>160;)t.shift()};var nr=t.bezier(0,0,.3,1),rr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};rr.prototype.isEnabled=function(){return"disabled"!==this._state},rr.prototype.isActive=function(){return"active"===this._state},rr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},rr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},rr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==_t.mouseButton(e)||(_t.addEventListener(t.default.document,"mousemove",this._onMove,{capture:!0}),_t.addEventListener(t.default.document,"mouseup",this._onMouseUp),this._start(e)))},rr.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(_t.addEventListener(t.default.document,"touchmove",this._onMove,{capture:!0,passive:!1}),_t.addEventListener(t.default.document,"touchend",this._onTouchEnd),this._start(e)))},rr.prototype._start=function(e){t.default.addEventListener("blur",this._onBlur),this._state="pending",this._previousPos=_t.mousePos(this._el,e),this._inertia=[[gt.now(),this._previousPos]]},rr.prototype._onMove=function(t){this._lastMoveEvent=t,t.preventDefault(),this._pos=_t.mousePos(this._el,t),this._drainInertiaBuffer(),this._inertia.push([gt.now(),this._pos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))},rr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",t),this._fireEvent("move",t),this._previousPos=this._pos,delete this._lastMoveEvent}},rr.prototype._onMouseUp=function(t){if(0===_t.mouseButton(t))switch(this._state){case"active":this._state="enabled",_t.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},rr.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},rr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},rr.prototype._unbind=function(){_t.removeEventListener(t.default.document,"touchmove",this._onMove,{capture:!0,passive:!1}),_t.removeEventListener(t.default.document,"touchend",this._onTouchEnd),_t.removeEventListener(t.default.document,"mousemove",this._onMove,{capture:!0}),_t.removeEventListener(t.default.document,"mouseup",this._onMouseUp),_t.removeEventListener(t.default,"blur",this._onBlur)},rr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._previousPos,delete this._pos},rr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:nr,noMoveStart:!0},{originalEvent:t})}}},rr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},rr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=gt.now();t.length>0&&e-t[0][0]>160;)t.shift()};var ir=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};ir.prototype.isEnabled=function(){return!!this._enabled},ir.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},ir.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},ir.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:at,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var or=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};or.prototype.isEnabled=function(){return!!this._enabled},or.prototype.isActive=function(){return!!this._active},or.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},or.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},or.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},or.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},or.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},or.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var ar=t.bezier(0,0,.15,1),sr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},sr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},sr.prototype.disableRotation=function(){this._rotationDisabled=!0},sr.prototype.enableRotation=function(){this._rotationDisabled=!1},sr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=_t.mousePos(this._el,e.touches[0]),r=_t.mousePos(this._el,e.touches[1]);this._startVec=n.sub(r),this._gestureIntent=void 0,this._inertia=[],_t.addEventListener(t.default.document,"touchmove",this._onMove,{passive:!1}),_t.addEventListener(t.default.document,"touchend",this._onEnd)}},sr.prototype._getTouchEventData=function(t){var e=_t.mousePos(this._el,t.touches[0]),n=_t.mousePos(this._el,t.touches[1]),r=e.sub(n);return{vec:r,center:e.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},sr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},sr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(s,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([gt.now(),a,i])}},sr.prototype._onEnd=function(e){_t.removeEventListener(t.default.document,"touchmove",this._onMove,{passive:!1}),_t.removeEventListener(t.default.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,o=this._map;if(i.length<2)o.snapToNorth({},{originalEvent:e});else{var a=i[i.length-1],s=i[0],u=o.transform.scaleZoom(r*a[1]),l=o.transform.scaleZoom(r*s[1]),c=u-l,h=(a[0]-s[0])/1e3,p=a[2];if(0!==h&&u!==l){var f=.15*c/h;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15)),y=u+f*d/2e3;y<0&&(y=0),o.easeTo({zoom:y,duration:d,easing:ar,around:this._aroundCenter?o.getCenter():o.unproject(p),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},sr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=gt.now();t.length>2&&e-t[0][0]>160;)t.shift()};var ur={scrollZoom:Jn,boxZoom:Qn,dragRotate:er,dragPan:rr,keyboard:ir,doubleClickZoom:or,touchZoomRotate:sr},lr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.default$1.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.fitBounds=function(e,n,r){if("number"==typeof(n=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var i=n.padding;n.padding={top:i,bottom:i,right:i,left:i}}if(!t.default$10(Object.keys(n.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=$t.convert(e);var o=[(n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2],a=Math.min(n.padding.right,n.padding.left),s=Math.min(n.padding.top,n.padding.bottom);n.offset=[n.offset[0]+o[0],n.offset[1]+o[1]];var u=t.default$1.convert(n.offset),l=this.transform,c=l.project(e.getNorthWest()),h=l.project(e.getSouthEast()),p=h.sub(c),f=(l.width-2*a-2*Math.abs(u.x))/p.x,d=(l.height-2*s-2*Math.abs(u.y))/p.y;return d<0||f<0?(t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(n.center=l.unproject(c.add(h).div(2)),n.zoom=Math.min(l.scaleZoom(l.scale*Math.min(f,d)),n.maxZoom),n.bearing=0,n.linear?this.easeTo(n,r):this.flyTo(n,r))},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=Wt.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,h=i.centerPoint.add(t.default$1.convert(e.offset)),p=i.pointLocation(h),f=Wt.convert(e.center||p);this._normalizeCenter(f);var d,y,g=i.project(p),m=i.project(f).sub(g),v=i.zoomScale(u-o);return e.around&&(d=Wt.convert(e.around),y=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,y);else{var p=i.zoomScale(i.zoom-o),f=u>o?Math.min(2,v):Math.max(.5,v),_=Math.pow(f,1-e),b=i.unproject(g.add(m.mult(e*_)).mult(p));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,h)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){function r(t){var e=(w*w-x*x+(t?-1:1)*C*C*E*E)/(2*(t?w:x)*C*E);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}var a=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),h="zoom"in e?t.clamp(+e.zoom,s.minZoom,s.maxZoom):u,p="bearing"in e?this._normalizeBearing(e.bearing,l):l,f="pitch"in e?+e.pitch:c,d=s.zoomScale(h-u),y=s.centerPoint.add(t.default$1.convert(e.offset)),g=s.pointLocation(y),m=Wt.convert(e.center||g);this._normalizeCenter(m);var v=s.project(g),_=s.project(m).sub(v),b=e.curve,x=Math.max(s.width,s.height),w=x/d,E=_.mag();if("minZoom"in e){var S=t.clamp(Math.min(e.minZoom,u,h),s.minZoom,s.maxZoom),I=x/s.zoomScale(S-u);b=Math.sqrt(I/E*2)}var C=b*b,T=r(0),M=function(t){return o(T)/o(T+b*t)},k=function(t){return x*((o(T)*(i(e=T+b*t)/o(e))-i(T))/C)/E;var e},P=(r(1)-T)/b;if(Math.abs(E)<1e-6||!isFinite(P)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var A=w<x?-1:1;P=Math.abs(Math.log(w/x))/b,k=function(){return 0},M=function(t){return Math.exp(A*b*t)}}if("duration"in e)e.duration=+e.duration;else{var O="screenSpeed"in e?+e.screenSpeed/b:+e.speed;e.duration=1e3*P/O}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==p,this._pitching=f!==c,this._prepareEase(n,!1),this._ease(function(e){var r=e*P,i=1/M(r);s.zoom=u+s.scaleZoom(i),a._rotating&&(s.bearing=t.number(l,p,e)),a._pitching&&(s.pitch=t.number(c,f,e));var o=s.unproject(v.add(_.mult(k(r))).mult(i));s.setLocationAtPoint(s.renderWorldCopies?o.wrap():o,y),a._fireMoveEvents(n)},function(){return a._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(t,e,n){!1===n.animate||0===n.duration?(t(1),e()):(this._easeStart=gt.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var t=Math.min((gt.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),cr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};cr.prototype.getDefaultPosition=function(){return"bottom-right"},cr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=_t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},cr.prototype.onRemove=function(){_t.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},cr.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:Ct.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,r){return n.value&&(t+=n.key+"="+n.value+(r<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},cr.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},cr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},cr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var hr=function(){t.bindAll(["_updateLogo"],this)};hr.prototype.onAdd=function(t){this._map=t,this._container=_t.create("div","mapboxgl-ctrl");var e=_t.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},hr.prototype.onRemove=function(){_t.remove(this._container),this._map.off("sourcedata",this._updateLogo)},hr.prototype.getDefaultPosition=function(){return"bottom-left"},hr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},hr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}};var pr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},pr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},pr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var fr=t.default.HTMLImageElement,dr=t.default.HTMLElement,yr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},gr=function(e){function n(n){if(null!=(n=t.extend({},yr,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Yn(n.minZoom,n.maxZoom,n.renderWorldCopies);e.call(this,r,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new pr;var i=n.transformRequest;if(this._transformRequest=i?function(t,e){return i(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof n.container){var o=t.default.document.getElementById(n.container);if(!o)throw new Error("Container '"+n.container+"' not found.");this._container=o}else{if(!(n.container instanceof dr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==t.default&&(t.default.addEventListener("online",this._onWindowOnline,!1),t.default.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),r=null,i=!1;for(var o in ur)t[o]=new ur[o](t,e),e.interactive&&e[o]&&t[o].enable(e[o]);_t.addEventListener(n,"mouseout",function(e){t.fire(new $n("mouseout",t,e))}),_t.addEventListener(n,"mousedown",function(n){i=!0;var r=new $n("mousedown",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(n),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(n),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(n))}),_t.addEventListener(n,"mouseup",function(e){var n=t.dragRotate.isActive();r&&!n&&t.fire(new $n("contextmenu",t,r)),r=null,i=!1,t.fire(new $n("mouseup",t,e))}),_t.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var r=e.toElement||e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new $n("mousemove",t,e))}}),_t.addEventListener(n,"mouseover",function(e){for(var r=e.toElement||e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new $n("mouseover",t,e))}),_t.addEventListener(n,"touchstart",function(n){var r=new Hn("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),_t.addEventListener(n,"touchmove",function(e){t.fire(new Hn("touchmove",t,e))},{passive:!1}),_t.addEventListener(n,"touchend",function(e){t.fire(new Hn("touchend",t,e))}),_t.addEventListener(n,"touchcancel",function(e){t.fire(new Hn("touchcancel",t,e))}),_t.addEventListener(n,"click",function(e){t.fire(new $n("click",t,e))}),_t.addEventListener(n,"dblclick",function(e){var n=new $n("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),_t.addEventListener(n,"contextmenu",function(e){var n=t.dragRotate.isActive();i||n?i&&(r=e):t.fire(new $n("contextmenu",t,e)),e.preventDefault()}),_t.addEventListener(n,"wheel",function(e){var n=new Kn("wheel",t,e);t.fire(n),n.defaultPrevented||t.scrollZoom.onWheel(e)},{passive:!1})}(this,n),this._hash=n.hash&&(new Wn).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),this.resize(),n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new cr),this.addControl(new hr,n.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return n.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},n.prototype.removeControl=function(t){return t.onRemove(this),this},n.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e))},n.prototype.getBounds=function(){var e=new $t(this.transform.pointLocation(new t.default$1(0,this.transform.height)),this.transform.pointLocation(new t.default$1(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new t.default$1(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new t.default$1(0,this.transform.size.y)))),e},n.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new $t([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},n.prototype.setMaxBounds=function(t){if(t){var e=$t.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null==t&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},n.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update(),this},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.project=function(t){return this.transform.locationPoint(Wt.convert(t))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.default$1.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype.on=function(t,n,r){var i,o=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(i){var a=o.getLayer(n)?o.queryRenderedFeatures(i.point,{layers:[n]}):[];a.length?e||(e=!0,r.call(o,new $n(t,o,i.originalEvent,{features:a}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,new $n(t,o,e.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(o,new $n(t,o,e.originalEvent)))}}}}return{layer:n,listener:r,delegates:(i={},i[t]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&(t.features=e,r.call(o,t),delete t.features)},i)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)o.on(s,a.delegates[s]);return this},n.prototype.off=function(t,n,r){if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===n&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},n.prototype.queryRenderedFeatures=function(e,n){var r;return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&((r=arguments[0])instanceof t.default$1||Array.isArray(r))?(e=arguments[0],n={}):1===arguments.length?(e=void 0,n=arguments[0]):(e=void 0,n={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform):[]},n.prototype._makeQueryGeometry=function(e){var n,r=this;if(void 0===e&&(e=[t.default$1.convert([0,0]),t.default$1.convert([this.transform.width,this.transform.height])]),e instanceof t.default$1||"number"==typeof e[0])n=[t.default$1.convert(e)];else{var i=[t.default$1.convert(e[0]),t.default$1.convert(e[1])];n=[i[0],new t.default$1(i[1].x,i[0].y),i[1],new t.default$1(i[0].x,i[1].y),i[0]]}return{viewport:n,worldCoordinate:n.map(function(t){return r.transform.pointCoordinate(t)})}},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new In(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof fr){var a=gt.getImageData(n),s=a.width,u=a.height,l=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:u},l),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,h=n.height,p=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:h},p.slice(0)),pixelRatio:i,sdf:o})}},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},n.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSContainer=_t.create("div","mapboxgl-missing-css",t)).innerHTML="Missing Mapbox GL JS CSS";var e=this._canvasContainer=_t.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=_t.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=_t.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=_t.create("div","mapboxgl-ctrl-"+t,r)})},n.prototype._resizeCanvas=function(e,n){var r=t.default.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},pt.webGLContextAttributes),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?this.painter=new qn(n,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(gt.cancelFrame(this._frameId),this._frameId=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},n.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=gt.now();this.style.zoomHistory.update(n,r);var i=new t.default$16(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},n.prototype.remove=function(){this._hash&&this._hash.remove(),gt.cancelFrame(this._frameId),this._renderTaskQueue.clear(),this._frameId=null,this.setStyle(null),void 0!==t.default&&(t.default.removeEventListener("resize",this._onWindowResize,!1),t.default.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),st(this._canvasContainer),st(this._controlContainer),st(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype._rerender=function(){var t=this;this.style&&!this._frameId&&(this._frameId=gt.frame(function(){t._frameId=null,t._render()}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint=t,this._update()},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(new t.Event(e.dataType+"data",e))},n.prototype._onDataLoading=function(e){this.fire(new t.Event(e.dataType+"dataloading",e))},Object.defineProperties(n.prototype,r),n}(lr),mr={showCompass:!0,showZoom:!0},vr=function(e){var n=this;this.options=t.extend({},mr,e),this._container=_t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=_t.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};vr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},vr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new er(t,{button:"left",element:this._compass}),this._handler.enable()),this._container},vr.prototype.onRemove=function(){_t.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},vr.prototype._createButton=function(t,e,n){var r=_t.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",n),r};var _r={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},br=function(e){if((arguments[0]instanceof t.default.HTMLElement||2===arguments.length)&&(e=t.extend({element:e},arguments[1])),t.bindAll(["_update","_onMapClick"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",e&&e.element)this._element=e.element,this._offset=t.default$1.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=_t.create("div");var n=_t.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var r=_t.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var i=_t.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"fill-rule","nonzero");var o=_t.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var a=0,s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];a<s.length;a+=1){var u=s[a],l=_t.createNS("http://www.w3.org/2000/svg","ellipse");l.setAttributeNS(null,"opacity","0.04"),l.setAttributeNS(null,"cx","10.5"),l.setAttributeNS(null,"cy","5.80029008"),l.setAttributeNS(null,"rx",u.rx),l.setAttributeNS(null,"ry",u.ry),o.appendChild(l)}var c=_t.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);var h=_t.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);var p=_t.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");var f=_t.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(f);var d=_t.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");var y=_t.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var g=_t.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");var m=_t.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#FFFFFF"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962"),y.appendChild(g),y.appendChild(m),i.appendChild(o),i.appendChild(c),i.appendChild(p),i.appendChild(d),i.appendChild(y),n.appendChild(i),this._element.appendChild(n),this._offset=t.default$1.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null};br.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},br.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),_t.remove(this._element),this._popup&&this._popup.remove(),this},br.prototype.getLngLat=function(){return this._lngLat},br.prototype.setLngLat=function(t){return this._lngLat=Wt.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},br.prototype.getElement=function(){return this._element},br.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},br.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},br.prototype.getPopup=function(){return this._popup},br.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},br.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ut(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),_t.setTransform(this._element,_r[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),lt(this._element,this._anchor,"marker"))},br.prototype.getOffset=function(){return this._offset},br.prototype.setOffset=function(e){return this._offset=t.default$1.convert(e),this._update(),this};var xr,wr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Er=function(e){function n(n){e.call(this),this.options=t.extend({},wr,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=_t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==xr?n(xr):void 0!==t.default.navigator.permissions?t.default.navigator.permissions.query({name:"geolocation"}).then(function(t){xr="denied"!==t.state,n(xr)}):(xr=!!t.default.navigator.geolocation,n(xr)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.default.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),_t.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(t){var e=new Wt(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy;this._map.fitBounds(e.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;!1!==e&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=_t.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new br(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))}))},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.default.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.default.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.default.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Sr={maxWidth:100,unit:"metric"},Ir=function(e){this.options=t.extend({},Sr,e),t.bindAll(["_onMove","setUnit"],this)};Ir.prototype.getDefaultPosition=function(){return"bottom-left"},Ir.prototype._onMove=function(){ct(this._map,this._container,this.options)},Ir.prototype.onAdd=function(t){return this._map=t,this._container=_t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ir.prototype.onRemove=function(){_t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ir.prototype.setUnit=function(t){this.options.unit=t,ct(this._map,this._container,this.options)};var Cr=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.default.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.default.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.default.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.default.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Cr.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=_t.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},Cr.prototype.onRemove=function(){_t.remove(this._container),this._map=null,t.default.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Cr.prototype._checkFullscreenSupport=function(){return!!(t.default.document.fullscreenEnabled||t.default.document.mozFullScreenEnabled||t.default.document.msFullscreenEnabled||t.default.document.webkitFullscreenEnabled)},Cr.prototype._setupUI=function(){var e=this._fullscreenButton=_t.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.default.document.addEventListener(this._fullscreenchange,this._changeIcon)},Cr.prototype._isFullscreen=function(){return this._fullscreen},Cr.prototype._changeIcon=function(){(t.default.document.fullscreenElement||t.default.document.mozFullScreenElement||t.default.document.webkitFullscreenElement||t.default.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Cr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.default.document.exitFullscreen?t.default.document.exitFullscreen():t.default.document.mozCancelFullScreen?t.default.document.mozCancelFullScreen():t.default.document.msExitFullscreen?t.default.document.msExitFullscreen():t.default.document.webkitCancelFullScreen&&t.default.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Tr={closeButton:!0,closeOnClick:!0},Mr=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(Tr),n),t.bindAll(["_update","_onClickClose"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&_t.remove(this._content),this._container&&(_t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Wt.convert(t),this._pos=null,this._update(),this},n.prototype.setText=function(e){return this.setDOMContent(t.default.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,r=t.default.document.createDocumentFragment(),i=t.default.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&_t.remove(this._content),this._content=_t.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=_t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=_t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=_t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=ut(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),n=this.options.anchor,r=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.default$1(0,0),top:new t.default$1(0,n),"top-left":new t.default$1(r,r),"top-right":new t.default$1(-r,r),bottom:new t.default$1(0,-n),"bottom-left":new t.default$1(r,-r),"bottom-right":new t.default$1(-r,-r),left:new t.default$1(n,0),right:new t.default$1(-n,0)}}if(n instanceof t.default$1||Array.isArray(n)){var i=t.default$1.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.default$1.convert(n.center||[0,0]),top:t.default$1.convert(n.top||[0,0]),"top-left":t.default$1.convert(n["top-left"]||[0,0]),"top-right":t.default$1.convert(n["top-right"]||[0,0]),bottom:t.default$1.convert(n.bottom||[0,0]),"bottom-left":t.default$1.convert(n["bottom-left"]||[0,0]),"bottom-right":t.default$1.convert(n["bottom-right"]||[0,0]),left:t.default$1.convert(n.left||[0,0]),right:t.default$1.convert(n.right||[0,0])}}return e(new t.default$1(0,0))}(this.options.offset);if(!n){var i,o=this._container.offsetWidth,a=this._container.offsetHeight;i=e.y+r.bottom.y<a?["top"]:e.y>this._map.transform.height-a?["bottom"]:[],e.x<o/2?i.push("left"):e.x>this._map.transform.width-o/2&&i.push("right"),n=0===i.length?"bottom":i.join("-")}var s=e.add(r[n]).round();_t.setTransform(this._container,_r[n]+" translate("+s.x+"px,"+s.y+"px)"),lt(this._container,n,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented),kr={version:"0.45.0",supported:pt,workerCount:Math.max(Math.floor(gt.hardwareConcurrency/2),1),setRTLTextPlugin:t.setRTLTextPlugin,Map:gr,NavigationControl:vr,GeolocateControl:Er,AttributionControl:cr,ScaleControl:Ir,FullscreenControl:Cr,Popup:Mr,Marker:br,Style:In,LngLat:Wt,LngLatBounds:$t,Point:t.default$1,Evented:t.Evented,config:Ct,get accessToken(){return Ct.ACCESS_TOKEN},set accessToken(t){Ct.ACCESS_TOKEN=t},workerUrl:""};return kr}),i})}).call(e,n(12))},function(t,e,n){"use strict";var r=(n(89),n(11),n(90),n(39),n(91),n(2));n.d(e,"a",function(){return r.e});var i=n(152),o=n(153),a=n(92),s=n(154);i.a,a.a,o.a,s.a},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){return s(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function s(t){if(Array.isArray(t))return t}function u(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"a",function(){return g});var h=n(2),p=n(11),f=n(33),d=n.n(f),y=6371e3,g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.phi,r=e.theta,i=e.radius,o=e.bearing,a=e.pitch,s=(e.altitude,e.radiusScale),l=void 0===s?y:s;u(this,t),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(r)?(this.phi=n||0,this.theta=r||0):(Number.isFinite(o)||Number.isFinite(a))&&(this.bearing=o||0,this.pitch=a||0),this.radius=i||1,this.radiusScale=l||1,this.check()}return c(t,[{key:"toString",value:function(){return this.formatString(h.c)}},{key:"formatString",value:function(t){var e=t.printTypes,n=(t.printDegrees,h.f);return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}},{key:"equals",value:function(t){return Object(h.e)(this.radius,t.radius)&&Object(h.e)(this.theta,t.theta)&&Object(h.e)(this.phi,t.phi)}},{key:"exactEquals",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:"fromLngLatZ",value:function(t){var e=i(t,3),n=e[0],r=e[1],o=e[2];this.radius=1+o/this.radiusScale,this.phi=Object(h.g)(r),this.theta=Object(h.g)(n)}},{key:"fromVector3",value:function(t){return this.radius=d()(t),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(Object(h.b)(t[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new p.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-Object(h.d)(this.phi)},set:function(t){this.phi=Math.PI-Object(h.g)(t)}},{key:"pitch",get:function(){return Object(h.d)(this.theta)},set:function(t){this.theta=Object(h.g)(t)}},{key:"longitude",get:function(){return Object(h.d)(this.phi)}},{key:"latitude",get:function(){return Object(h.d)(this.theta)}},{key:"lng",get:function(){return Object(h.d)(this.phi)}},{key:"lat",get:function(){return Object(h.d)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),t}()},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return c});var s=n(39),u=n(11),l=n(92),c=function(){function t(e){var n=e.x,r=void 0===n?0:n,o=e.y,a=void 0===o?0:o,s=e.z,c=void 0===s?0:s,h=e.roll,p=void 0===h?0:h,f=e.pitch,d=void 0===f?0:f,y=e.yaw,g=void 0===y?0:y;i(this,t),this.position=new u.a(r,a,c),this.orientation=new l.a(p,d,g,l.a.RollPitchYaw)}return a(t,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"getTransformationMatrix",value:function(){var t=Math.sin(this.roll),e=Math.sin(this.pitch),n=Math.sin(this.yaw),r=Math.cos(this.roll),i=Math.cos(this.pitch),o=Math.cos(this.yaw);return(new s.a).setRowMajor(o*i,-n*r+o*e*t,n*t+o*e*r,this.x,n*i,o*r+n*e*t,-o*t+n*e*r,this.y,-e,i*t,i*r,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(t){return(new s.a).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(t){return(new s.a).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(t){return this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){return this.position.y=t}},{key:"z",get:function(){return this.position.z},set:function(t){return this.position.z=t}},{key:"roll",get:function(){return this.orientation.roll},set:function(t){return this.orientation.roll=t}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(t){return this.orientation.pitch=t}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(t){return this.orientation.yaw=t}}]),t}()},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return u});var s=n(2),u=function(){function t(e){i(this,t),this.points=e,this.isClosed=Object(s.e)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return a(t,[{key:"getSignedArea",value:function(){var t=0;return this.forEachSegment(function(e,n){t+=(e[0]+n[0])*(e[1]-n[1])}),t/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(t){for(var e=this.points.length,n=0;n<e-1;n++)t(this.points[n],this.points[n+1],n,n+1);this.isPolygon&&!this.isClosed()&&t(this.points[e-1],this.points[0],e-1,0)}}]),t}()},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return _});var p=n(10),f=n(37),d=n(5),y=n(93),g=["longitude","latitude","zoom","bearing","pitch"],m=["latitude","longitude","zoom","width","height"],v=["bearing","pitch"],_=function(t){function e(){var t;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.propNames=g,t}return c(e,t),s(e,[{key:"initializeProps",value:function(t,e){for(var n={},r={},i=0;i<m.length;i++){var o=m[i],a=t[o],s=e[o];Object(p.a)(Object(y.b)(a)&&Object(y.b)(s),"".concat(o," must be supplied for transition")),n[o]=a,r[o]=Object(y.a)(o,a,s)}for(var u=0;u<v.length;u++){var l=v[u],c=t[l]||0,h=e[l]||0;n[l]=c,r[l]=Object(y.a)(l,c,h)}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){for(var r,i=Object(d.b)(t,e,n),o=0;o<v.length;o++)r=v[o],i[r]=Object(y.c)(t[r],e[r],n);return i}}]),e}(f.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return g});var p=n(10),f=n(37),d=n(93),y=["longitude","latitude","zoom","bearing","pitch"],g=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.propNames=n,t}return c(e,t),s(e,[{key:"initializeProps",value:function(t,e){var n={},r={},i=!0,o=!1,a=void 0;try{for(var s,u=this.propNames[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=t[l],h=e[l];Object(p.a)(Object(d.b)(c)&&Object(d.b)(h),"".concat(l," must be supplied for transition")),n[l]=c,r[l]=Object(d.a)(l,c,h)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u,l=this.propNames[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=s.value,r[u]=Object(d.c)(t[u],e[u],n)}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}}]),e}(f.a)},function(t,e,n){"use strict";var r=n(158);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(94),o=n(163),a=n(164),s=n(165),u=n(166),l=n(20),c=n(167),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p={events:null,recognizers:null,Manager:i.a,rightButton:!1,touchAction:"none",legacyBlockScroll:!0},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.options=Object.assign({},p,n),this.eventHandlers=[],this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var i=n.events;i&&this.on(i)}return h(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||l.e}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(l.f).forEach(function(t){var n=e.manager.get(t);n&&l.f[t].forEach(function(t){n.recognizeWith(t)})}),this.wheelInput=new o.a(t,this._onOtherEvent,{enable:!1,legacyBlockScroll:n.legacyBlockScroll}),this.moveInput=new a.a(t,this._onOtherEvent,{enable:!1}),this.keyInput=new s.a(t,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new u.a(t,this._onOtherEvent,{rightButton:n.rightButton}),this.eventHandlers.forEach(function(t){var n=t.recognizerName,r=t.eventAlias,i=t.wrappedHandler;e._toggleRecognizer(n,!0),e.manager.on(r,i)})}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){if("string"===typeof t)this._addEventHandler(t,e,n);else{n=e;for(var r in t)this._addEventHandler(r,t[r],n)}}},{key:"off",value:function(t,e){if("string"===typeof t)this._removeEventHandler(t,e);else for(var n in t)this._removeEventHandler(n,t[n])}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r){r.set({enable:e});var i=l.g[t];i&&!this.options.recognizers&&i.forEach(function(r){var i=n.get(r);e?i.requireFailure(t):i.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.manager,i=this.eventHandlers,o=this._wrapEventHandler(t,e,n),a=l.c[t]||t,s=l.b[a]||a;this._toggleRecognizer(s,!0);var u=i.filter(function(t){return t.eventAlias===a&&t.srcElement!==n&&(!t.srcElement||t.srcElement.contains(n))});i.push({event:t,eventAlias:a,recognizerName:s,srcElement:n,handler:e,wrappedHandler:o}),u.forEach(function(t){return r.off(a,t.wrappedHandler)}),r&&r.on(a,o),u.forEach(function(t){return r.on(a,t.wrappedHandler)})}},{key:"_removeEventHandler",value:function(t,e){for(var n=this.manager,r=this.eventHandlers,i=!1,o=r.length;o--;){var a=r[o];a.event===t&&a.handler===e&&(n&&n.off(a.eventAlias,a.wrappedHandler),r.splice(o,1),i=!0)}if(i){var s=l.c[t]||t,u=l.b[s]||s;r.find(function(t){return t.recognizerName===u})||this._toggleRecognizer(u,!1)}}},{key:"_wrapEventHandler",value:function(t,e,n){var r=this;return function(i){var o=i.mjolnirEvent;(o||(o=r._normalizeEvent(i),i.mjolnirEvent=o),o.handled&&o.handled!==n)||(!n||n.contains(i.srcEvent.target))&&e(Object.assign({},o,{type:t,stopPropagation:function(){o.handled||(o.handled=n)}}))}}},{key:"_normalizeEvent",value:function(t){var e=this.element;return Object.assign({},t,Object(c.b)(t),Object(c.a)(t,e),{handled:!1,rootElement:e})}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=l.a[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}();e.a=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){n.d(e,"isBrowserMainThread",function(){return s});var r=n(160),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="object"===("undefined"===typeof t?"undefined":i(t))&&"[object process]"===String(t)&&!t.browser,a=!o||r.a,s=a&&"undefined"!==typeof document;e.default=a}.call(e,n(9))},function(t,e,n){"use strict";(function(t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(){return"undefined"!==typeof window&&"object"===n(window.process)&&"renderer"===window.process.type||(!("undefined"===typeof t||"object"!==n(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"===typeof navigator?"undefined":n(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}()}).call(e,n(9))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function i(t){var e=t.prototype.handler;t.prototype.handler=function(t){var n=this.store;t.button>0&&(r(n,function(e){return e.pointerId===t.pointerId})||n.push(t)),e.call(this,t)}}function o(t){t.prototype.handler=function(t){var e=l[t.type];e&a&&t.button>=0&&(this.pressed=!0),e&s&&0===t.which&&(e=u),this.pressed&&(e&u&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}e.b=i,e.a=o;var a=1,s=2,u=4,l={mousedown:a,mousemove:s,mouseup:u}},function(t,e,n){var r;!function(i,o,a,s){"use strict";function u(t,e,n){return setTimeout(f(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(c(t,n[e],n),!0)}function c(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function h(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function p(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&dt(r,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==mt?t.apply(e?e[0]||s:s,e):t}function y(t,e){return t===s?e:t}function g(t,e,n){c(b(e),function(e){t.addEventListener(e,n,!1)})}function m(t,e,n){c(b(e),function(e){t.removeEventListener(e,n,!1)})}function v(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function E(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function S(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<yt.length;){if(n=yt[o],(r=n?n+i:e)in t)return r;o++}return s}function I(){return Et++}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function T(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function M(t){var e=t.options.inputClass;return new(e||(Ct?q:Tt?X:It?Z:V))(t,k)}function k(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&kt&&r-i===0,a=e&(At|Ot)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function P(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=L(e)),i>1&&!n.firstMultiple?n.firstMultiple=L(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=N(r);e.timeStamp=bt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=F(s,u),e.distance=z(s,u),A(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var l=R(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=_t(l.x)>_t(l.y)?l.x:l.y,e.scale=a?j(a.pointers,r):1,e.rotation=a?B(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,O(n,e);var c=t.element;v(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function A(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==kt&&o.eventType!==At||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function O(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Ot&&(u>Mt||a.velocity===s)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=R(u,l,c);r=h.x,i=h.y,n=_t(h.x)>_t(h.y)?h.x:h.y,o=D(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function L(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:vt(t.pointers[n].clientX),clientY:vt(t.pointers[n].clientY)},n++;return{timeStamp:bt(),pointers:e,center:N(e),deltaX:t.deltaX,deltaY:t.deltaY}}function N(t){var e=t.length;if(1===e)return{x:vt(t[0].clientX),y:vt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:vt(n/e),y:vt(r/e)}}function R(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?Lt:_t(t)>=_t(e)?t<0?Nt:Rt:e<0?Dt:zt}function z(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function F(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function B(t,e){return F(e[1],e[0],qt)+F(t[1],t[0],qt)}function j(t,e){return z(e[0],e[1],qt)/z(t[0],t[1],qt)}function V(){this.evEl=Gt,this.evWin=Xt,this.pressed=!1,T.apply(this,arguments)}function q(){this.evEl=Wt,this.evWin=$t,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Kt,this.evWin=Jt,this.started=!1,T.apply(this,arguments)}function G(t,e){var n=w(t.touches),r=w(t.changedTouches);return e&(At|Ot)&&(n=E(n.concat(r),"identifier",!0)),[n,r]}function X(){this.evTarget=te,this.targetIds={},T.apply(this,arguments)}function Y(t,e){var n=w(t.touches),r=this.targetIds;if(e&(kt|Pt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=w(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return v(t.target,u)}),e===kt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(At|Ot)&&delete r[a[i].identifier],i++;return s.length?[E(o.concat(s),"identifier",!0),s]:void 0}function Z(){T.apply(this,arguments);var t=f(this.handler,this);this.touch=new X(this.manager,t),this.mouse=new V(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function W(t,e){t&kt?(this.primaryTouch=e.changedPointers[0].identifier,$.call(this,e)):t&(At|Ot)&&$.call(this,e)}function $(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ee)}}function H(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=ne&&a<=ne)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function J(t){if(_(t,se))return se;var e=_(t,ue),n=_(t,le);return e&&n?se:e||n?e?ue:le:_(t,ae)?ae:oe}function Q(t){this.options=dt({},this.defaults,t||{}),this.id=I(),this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function tt(t){return t&ge?"cancel":t&de?"end":t&fe?"move":t&pe?"start":""}function et(t){return t==zt?"down":t==Dt?"up":t==Nt?"left":t==Rt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function rt(){Q.apply(this,arguments)}function it(){rt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){rt.apply(this,arguments)}function at(){Q.apply(this,arguments),this._timer=null,this._input=null}function st(){rt.apply(this,arguments)}function ut(){rt.apply(this,arguments)}function lt(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return e=e||{},e.recognizers=y(e.recognizers,ct.defaults.preset),new ht(t,e)}function ht(t,e){this.options=dt({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=M(this),this.touchAction=new K(this,this.options.touchAction),pt(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var n=t.element;if(n.style){var r;c(t.options.cssProps,function(i,o){r=S(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var dt,yt=["","webkit","Moz","MS","ms","o"],gt=o.createElement("div"),mt="function",vt=Math.round,_t=Math.abs,bt=Date.now;dt="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var xt=h(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),wt=h(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),Et=1,St=/mobile|tablet|ip(ad|hone|od)|android/i,It="ontouchstart"in i,Ct=S(i,"PointerEvent")!==s,Tt=It&&St.test(navigator.userAgent),Mt=25,kt=1,Pt=2,At=4,Ot=8,Lt=1,Nt=2,Rt=4,Dt=8,zt=16,Ft=Nt|Rt,Bt=Dt|zt,jt=Ft|Bt,Vt=["x","y"],qt=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler)}};var Ut={mousedown:kt,mousemove:Pt,mouseup:At},Gt="mousedown",Xt="mousemove mouseup";p(V,T,{handler:function(t){var e=Ut[t.type];e&kt&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=At),this.pressed&&(e&At&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Yt={pointerdown:kt,pointermove:Pt,pointerup:At,pointercancel:Ot,pointerout:Ot},Zt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Wt="pointerdown",$t="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(Wt="MSPointerDown",$t="MSPointerMove MSPointerUp MSPointerCancel"),p(q,T,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Yt[r],o=Zt[t.pointerType]||t.pointerType,a="touch"==o,s=x(e,t.pointerId,"pointerId");i&kt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(At|Ot)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Ht={touchstart:kt,touchmove:Pt,touchend:At,touchcancel:Ot},Kt="touchstart",Jt="touchstart touchmove touchend touchcancel";p(U,T,{handler:function(t){var e=Ht[t.type];if(e===kt&&(this.started=!0),this.started){var n=G.call(this,t,e);e&(At|Ot)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:kt,touchmove:Pt,touchend:At,touchcancel:Ot},te="touchstart touchmove touchend touchcancel";p(X,T,{handler:function(t){var e=Qt[t.type],n=Y.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ne=25;p(Z,T,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)W.call(this,e,n);else if(i&&H.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=S(gt.style,"touchAction"),ie=re!==s,oe="auto",ae="manipulation",se="none",ue="pan-x",le="pan-y",ce=function(){if(!ie)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();K.prototype={set:function(t){"compute"==t&&(t=this.compute()),ie&&this.manager.element.style&&ce[t]&&(this.manager.element.style[re]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=_(r,se)&&!ce[se],o=_(r,le)&&!ce[le],a=_(r,ue)&&!ce[ue];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:i||o&&n&Ft||a&&n&Bt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var he=1,pe=2,fe=4,de=8,ye=de,ge=16;Q.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<de&&e(n.options.event+tt(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=de&&e(n.options.event+tt(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|he)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ye|ge|32)&&(this.state=he),this.state=this.process(e),this.state&(pe|fe|de|ge)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},p(rt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(pe|fe),i=this.attrTest(t);return r&&(n&Ot||!i)?e|ge:r||i?n&At?e|de:e&pe?e|fe:pe:32}}),p(it,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:jt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ft&&e.push(le),t&Bt&&e.push(ue),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Ft?(i=0===o?Lt:o<0?Nt:Rt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Lt:a<0?Dt:zt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&pe||!(this.state&pe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(ot,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&pe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(at,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(At|Ot)&&!i)this.reset();else if(t.eventType&kt)this.reset(),this._timer=u(function(){this.state=ye,this.tryEmit()},e.time,this);else if(t.eventType&At)return ye;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ye&&(t&&t.eventType&At?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=bt(),this.manager.emit(this.options.event,this._input)))}}),p(st,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&pe)}}),p(ut,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ft|Bt,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ft|Bt)?e=t.overallVelocity:n&Ft?e=t.overallVelocityX:n&Bt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&At},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(lt,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&kt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=At)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||z(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=ye,this.tryEmit()},e.interval,this),pe):ye}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ye&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.7",ct.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ot,{enable:!1},["rotate"]],[ut,{direction:Ft}],[it,{direction:Ft},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ht.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ye)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(pe|fe|de)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return c(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return c(b(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(ct,{INPUT_START:kt,INPUT_MOVE:Pt,INPUT_END:At,INPUT_CANCEL:Ot,STATE_POSSIBLE:he,STATE_BEGAN:pe,STATE_CHANGED:fe,STATE_ENDED:de,STATE_RECOGNIZED:ye,STATE_CANCELLED:ge,STATE_FAILED:32,DIRECTION_NONE:Lt,DIRECTION_LEFT:Nt,DIRECTION_RIGHT:Rt,DIRECTION_UP:Dt,DIRECTION_DOWN:zt,DIRECTION_HORIZONTAL:Ft,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:jt,Manager:ht,Input:T,TouchAction:K,TouchInput:X,MouseInput:V,PointerEventInput:q,TouchMouseInput:Z,SingleTouchInput:U,Recognizer:Q,AttrRecognizer:rt,Tap:lt,Pan:it,Swipe:ut,Pinch:ot,Rotate:st,Press:at,on:g,off:m,each:c,merge:wt,extend:xt,assign:dt,inherit:p,bindFn:f,prefixed:S}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=ct,(r=function(){return ct}.call(e,n,e,t))!==s&&(t.exports=r)}(window,document)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(20),o=n(95),a=(n.n(o),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),s=-1!==o.userAgent.indexOf("firefox"),u=i.d.WHEEL_EVENTS,l=function(){function t(e,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},o),this.events=u.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,i.handleEvent)})}return a(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"wheel"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){this.options.legacyBlockScroll&&t.preventDefault();var e=t.deltaY;o.window.WheelEvent&&(s&&t.deltaMode===o.window.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.window.devicePixelRatio),t.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%4.000244140625===0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:"wheel",center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(20),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=i.d.MOUSE_EVENTS,s=function(){function t(e,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},o),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.events=a.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,i.handleEvent)})}return o(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"pointermove"===t&&(this.enableMoveEvent=e),"pointerleave"===t&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){if(this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:"pointerleave",srcEvent:t,pointerType:"mouse",target:t.target}),this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(20),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=i.d.KEY_EVENTS,s=function(){function t(e,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},o),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=a.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=1,e.style.outline="none",this.events.forEach(function(t){return e.addEventListener(t,i.handleEvent)})}return o(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"keydown"===t&&(this.enableDownEvent=e),"keyup"===t&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:"keydown",srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:"keyup",srcEvent:t,key:t.key,target:t.target}))}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return i(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"handleEvent",value:function(t){this.callback({type:"contextmenu",center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target}),this.options.rightButton&&t.preventDefault()}}]),t}();e.a=o},function(t,e,n){"use strict";function r(t){var e=u[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,v=n.which,_=!1,b=!1,x=!1;return e===s||e===a&&!Number.isFinite(r)?(_=v===l,b=v===c,x=v===h):e===a?(_=Boolean(r&y),b=Boolean(r&m),x=Boolean(r&g)):e===o&&(_=i===p,b=i===f,x=i===d),{leftButton:_,middleButton:b,rightButton:x}}function i(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth,a=i.height/e.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}e.b=r,e.a=i;var o=1,a=2,s=4,u={pointerdown:o,pointermove:a,pointerup:s,mousedown:o,mousemove:a,mouseup:s},l=1,c=2,h=3,p=0,f=1,d=2,y=1,g=2,m=4},function(t,e,n){"use strict";var r=n(169),i=n.n(r),o=i.a.webkit||i.a.blink?"-webkit-":i.a.gecko?"-moz-":"";e.a={DEFAULTS:{},CURSOR:{GRABBING:"".concat(o,"grabbing"),GRAB:"".concat(o,"grab"),POINTER:"pointer"}}},function(t,e,n){!function(e,r,i){"undefined"!=typeof t&&t.exports?t.exports=i():n(170)("bowser",i)}(0,0,function(){function t(t){function e(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function n(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,o=e(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),u=!s&&/android/i.test(t),l=/nexus\s*[0-6]\s*/i.test(t),c=!l&&/nexus\s*[0-9]+/i.test(t),h=/CrOS/.test(t),p=/silk/i.test(t),f=/sailfish/i.test(t),d=/tizen/i.test(t),y=/(web|hpw)(o|0)s/i.test(t),g=/windows phone/i.test(t),m=(/SamsungBrowser/i.test(t),!g&&/windows/i.test(t)),v=!o&&!p&&/macintosh/i.test(t),_=!u&&!f&&!d&&!y&&/linux/i.test(t),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),x=e(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),E=!w&&/[^-]mobi/i.test(t),S=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:a,version:x||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:a,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||x}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:a,version:x||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:a,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:a,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:a,version:x||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:a,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:a,version:x||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:a,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:a,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:a,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:a,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:a,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:a,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},b?(i.msedge=a,i.version=b):(i.msie=a,i.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:a,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?i={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:a,version:b}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:a,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||x}:f?i={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:a,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:a,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=a,i.osname="Firefox OS")):p?i={name:"Amazon Silk",silk:a,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:a,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:a,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:x||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:y?(i={name:"WebOS",osname:"WebOS",webos:a,version:x||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=a)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:a,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:d?i={name:"Tizen",osname:"Tizen",tizen:a,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||x}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:a,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||x}:/chromium/i.test(t)?i={name:"Chromium",chromium:a,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||x}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:u?i={name:"Android",version:x}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:a},x&&(i.version=x)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},x&&(i.version=x)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:a,version:e(/googlebot\/(\d+(\.\d+))/i)||x}:{name:e(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=a):(i.name=i.name||"Webkit",i.webkit=a),!i.version&&x&&(i.version=x)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=a,i.version=i.version||e(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!u&&!i.silk?!i.windowsphone&&o?(i[o]=a,i.ios=a,i.osname="iOS"):v?(i.mac=a,i.osname="macOS"):S?(i.xbox=a,i.osname="Xbox"):m?(i.windows=a,i.osname="Windows"):_&&(i.linux=a,i.osname="Linux"):(i.android=a,i.osname="Android");var I="";i.windows?I=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?I=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?(I=e(/Mac OS X (\d+([_\.\s]\d+)*)/i),I=I.replace(/[_\s]/g,".")):o?(I=e(/os (\d+([_\s]\d+)*) like mac os x/i),I=I.replace(/[_\s]/g,".")):u?I=e(/android[ \/-](\d+(\.\d+)*)/i):i.webos?I=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?I=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?I=e(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(I=e(/tizen[\/\s](\d+(\.\d+)*)/i)),I&&(i.osversion=I);var C=!i.windows&&I.split(".")[0];return w||c||"ipad"==o||u&&(3==C||C>=4&&!E)||i.silk?i.tablet=a:(E||"iphone"==o||"ipod"==o||u||l||i.blackberry||i.webos||i.bada)&&(i.mobile=a),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===r([i.version,"1.0"])||i.mzbrowser&&1===r([i.version,"6.0"])||i.focus&&1===r([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=a:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=a:i.x=a,i}function e(t){return t.split(".").length}function n(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function r(t){for(var r=Math.max(e(t[0]),e(t[1])),i=n(t,function(t){var i=r-e(t);return t+=new Array(i+1).join(".0"),n(t.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(e,n,i){var o=s;"string"===typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=t(i));var a=""+o.version;for(var u in e)if(e.hasOwnProperty(u)&&o[u]){if("string"!==typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return r([a,e[u]])<0}return n}function o(t,e,n){return!i(t,e,n)}var a=!0,s=t("undefined"!==typeof navigator?navigator.userAgent||"":"");return s.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"===typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=r,s.check=o,s._detect=t,s.detect=t,s})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function p(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return w});var g=n(0),m=(n.n(g),n(3)),v=n.n(m),_=n(4),b=Object.assign({},_.a.propTypes,{className:v.a.string,longitude:v.a.number.isRequired,latitude:v.a.number.isRequired,offsetLeft:v.a.number,offsetTop:v.a.number}),x=Object.assign({},_.a.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),w=function(t){function e(){return l(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),h(e,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.longitude,r=t.latitude,i=t.offsetLeft,a=t.offsetTop,s=this.context.viewport.project([n,r]),u=o(s,2),l=u[0],c=u[1];return Object(g.createElement)("div",{className:"mapboxgl-marker ".concat(e),ref:this._onContainerLoad,style:{position:"absolute",left:l+i,top:c+a},children:this.props.children})}}]),e}(_.a);w.displayName="Marker",w.propTypes=b,w.defaultProps=x},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function p(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?y(t):e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var g=n(0),m=(n.n(g),n(3)),v=n.n(m),_=n(4),b=n(173),x=Object.assign({},_.a.propTypes,{className:v.a.string,longitude:v.a.number.isRequired,latitude:v.a.number.isRequired,offsetLeft:v.a.number,offsetTop:v.a.number,tipSize:v.a.number,closeButton:v.a.bool,closeOnClick:v.a.bool,anchor:v.a.oneOf(Object.keys(b.a)),dynamicPosition:v.a.bool,onClose:v.a.func}),w=Object.assign({},_.a.defaultProps,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,closeButton:!0,closeOnClick:!0,onClose:function(){}}),E=function(t){function e(t){var n;return l(this,e),n=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._getPosition=n._getPosition.bind(y(n)),n._onClose=n._onClose.bind(y(n)),n._contentLoaded=n._contentLoaded.bind(y(n)),n._renderTip=n._renderTip.bind(y(n)),n._renderContent=n._renderContent.bind(y(n)),n._closeOnClick=!1,n}return f(e,t),h(e,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"_getPosition",value:function(t,e){var n=this.context.viewport,r=this.props,i=r.anchor,o=r.dynamicPosition,a=r.tipSize;return this._content&&o?Object(b.b)({x:t,y:e,anchor:i,padding:a,width:n.width,height:n.height,selfWidth:this._content.clientWidth,selfHeight:this._content.clientHeight}):i}},{key:"_onClick",value:function(t){this.props.captureClick&&t.stopPropagation(),(this.props.closeOnClick||this._closeOnClick)&&this.props.onClose()}},{key:"_onClose",value:function(){this._closeOnClick=!0}},{key:"_contentLoaded",value:function(t){this._content=t}},{key:"_renderTip",value:function(){var t=this.props.tipSize;return Object(g.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:t}})}},{key:"_renderContent",value:function(){var t=this.props,e=t.closeButton,n=t.children;return Object(g.createElement)("div",{key:"content",ref:this._contentLoaded,className:"mapboxgl-popup-content"},[e&&Object(g.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:this._onClose},"\xd7"),n])}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.longitude,r=t.latitude,i=t.offsetLeft,a=t.offsetTop,s=this.context.viewport.project([n,r]),u=o(s,2),l=u[0],c=u[1],h=this._getPosition(l,c),p=b.a[h],f={position:"absolute",left:l+i,top:c+a,transform:"translate(".concat(100*-p.x,"%, ").concat(100*-p.y,"%)")};return Object(g.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(h," ").concat(e),style:f,ref:this._onContainerLoad},[this._renderTip(),this._renderContent()])}}]),e}(_.a);E.displayName="Popup",E.propTypes=x,E.defaultProps=w},function(t,e,n){"use strict";function r(t){var e=t.x,n=t.y,r=t.width,o=t.height,a=t.selfWidth,s=t.selfHeight,u=t.anchor,l=t.padding,c=void 0===l?0:l,h=i[u],p=h.x,f=h.y,d=n-f*s,y=d+s;if(d<c)for(;d<c&&f>=.5;)f-=.5,d+=.5*s;else if(y>o-c)for(;y>o-c&&f<=.5;)f+=.5,y-=.5*s;var g=e-p*a,m=g+a,v=.5;if(.5===f&&(p=Math.floor(p),v=1),g<c)for(;g<c&&p>=v;)p-=v,g+=v*a;else if(m>r-c)for(;m>r-c&&p<=1-v;)p+=v,m-=v*a;return Object.keys(i).find(function(t){var e=i[t];return e.x===p&&e.y===f})}n.d(e,"a",function(){return i}),e.b=r;var i={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}}},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var p=n(0),f=(n.n(p),n(3)),d=n.n(f),y=n(4),g=n(17),m=n(18),v=n(97),_=Object.assign({},m.b.defaultProps,{transitionDuration:300}),b=Object.assign({},y.a.propTypes,{className:d.a.string,onViewStateChange:d.a.func,onViewportChange:d.a.func,showCompass:d.a.bool,showZoom:d.a.bool}),x=Object.assign({},y.a.defaultProps,{className:"",onViewStateChange:function(){},onViewportChange:function(){},showCompass:!0,showZoom:!0}),w=function(t){function e(t){var n;return o(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),Object(v.a)(t),n._updateViewport=n._updateViewport.bind(h(n)),n._onZoomIn=n._onZoomIn.bind(h(n)),n._onZoomOut=n._onZoomOut.bind(h(n)),n._onResetNorth=n._onResetNorth.bind(h(n)),n._renderCompass=n._renderCompass.bind(h(n)),n._renderButton=n._renderButton.bind(h(n)),n}return l(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t,e,n){return this.context.viewport.bearing!==n.viewport.bearing}},{key:"_updateViewport",value:function(t){var e=this.context.viewport,n=new g.b(Object.assign({},e,t)),r=Object.assign({},n.getViewportProps(),_);this.props.onViewStateChange({viewState:r}),(this.props.onChangeViewport||this.props.onViewportChange)(r)}},{key:"_onZoomIn",value:function(){this._updateViewport({zoom:this.context.viewport.zoom+1})}},{key:"_onZoomOut",value:function(){this._updateViewport({zoom:this.context.viewport.zoom-1})}},{key:"_onResetNorth",value:function(){this._updateViewport({bearing:0,pitch:0})}},{key:"_renderCompass",value:function(){var t=this.context.viewport.bearing;return Object(p.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(t,"deg)")}})}},{key:"_renderButton",value:function(t,e,n,r){return Object(p.createElement)("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n,children:r})}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.showCompass,r=t.showZoom;return Object(p.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(e),ref:this._onContainerLoad},[r&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),r&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),n&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),e}(y.a);w.displayName="NavigationControl",w.propTypes=b,w.defaultProps=x},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var p=n(0),f=(n.n(p),n(3)),d=n.n(f),y=n(4),g=n(176),m=(n.n(g),Object.assign({},y.a.propTypes,{redraw:d.a.func.isRequired})),v={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},_=function(t){function e(t){var n;return o(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._redraw=n._redraw.bind(h(n)),n._canvasLoaded=n._canvasLoaded.bind(h(n)),n}return l(e,t),s(e,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t=g.window.devicePixelRatio||1,e=this._canvas,n=e.getContext("2d");n.save(),n.scale(t,t);var r=this.context,i=r.viewport,o=r.isDragging;this.props.redraw({width:i.width,height:i.height,ctx:n,isDragging:o,project:i.project.bind(i),unproject:i.unproject.bind(i)}),n.restore()}},{key:"_canvasLoaded",value:function(t){this._canvas=t,this._onContainerLoad(t)}},{key:"render",value:function(){var t=g.window.devicePixelRatio||1,e=this.context.viewport,n=e.width,r=e.height;return Object(p.createElement)("canvas",{ref:this._canvasLoaded,width:n*t,height:r*t,style:{width:"".concat(n,"px"),height:"".concat(r,"px"),position:"absolute",pointerEvents:"none",left:0,top:0}})}}]),e}(y.a);_.displayName="CanvasOverlay",_.propTypes=m,_.defaultProps=v},function(t,e,n){(function(e){t.exports={window:"undefined"==typeof window?e:window,global:"undefined"==typeof e?window:e,document:"undefined"==typeof document?{}:document}}).call(e,n(12))},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=n(0),f=(n.n(p),n(3)),d=n.n(f),y=n(4),g=Object.assign({},y.a.propTypes,{redraw:d.a.func.isRequired,style:d.a.object}),m={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},v=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"render",value:function(){var t=this.context,e=t.viewport,n=t.isDragging,r=Object.assign({position:"absolute",pointerEvents:"none",left:0,top:0,width:e.width,height:e.height},this.props.style);return Object(p.createElement)("div",{ref:this._onContainerLoad,style:r},this.props.redraw({width:e.width,height:e.height,isDragging:n,project:e.project.bind(e),unproject:e.unproject.bind(e)}))}}]),e}(y.a);v.displayName="HTMLOverlay",v.propTypes=g,v.defaultProps=m},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=n(0),f=(n.n(p),n(3)),d=n.n(f),y=n(4),g=Object.assign({},y.a.propTypes,{redraw:d.a.func.isRequired,style:d.a.object}),m={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},v=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"render",value:function(){var t=this.context,e=t.viewport,n=t.isDragging,r=Object.assign({pointerEvents:"none",position:"absolute",left:0,top:0},this.props.style);return Object(p.createElement)("svg",{width:e.width,height:e.height,ref:this._onContainerLoad,style:r},this.props.redraw({width:e.width,height:e.height,isDragging:n,project:e.project.bind(e),unproject:e.unproject.bind(e)}))}}]),e}(y.a);v.displayName="SVGOverlay",v.propTypes=g,v.defaultProps=m},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(22),l=n(98),c=(n.n(l),n(100)),h=n(99),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.createSingleArc=function(t){for(var e=Object(l.distance)(t.geometry.coordinates[0],t.geometry.coordinates[1],{units:"kilometers"}),n=[],r=0;r<e;r+=e/500){var i=Object(l.along)(t,r,{units:"kilometers"});n.push(i.geometry.coordinates)}return n},n.reactMap=s.a.createRef(),n}return o(e,t),p(e,[{key:"componentDidUpdate",value:function(t,e){var n=this;if(this.props.formattedTransactions!==t.formattedTransactions){var r=[];this.props.formattedTransactions&&this.props.formattedTransactions.forEach(function(t){var e=t.long1,n=t.long2;n-e<-180?n+=360:e-n<-180&&(e+=360),t.long1!==t.long2&&t.lat1!==t.lat2&&r.push({type:"Feature",geometry:{type:"LineString",coordinates:[[e,t.lat1],[n,t.lat2]]}})});var i={type:"FeatureCollection",features:r};i.features.forEach(function(t){t.geometry.coordinates=n.createSingleArc(t)});var o=this.reactMap.getMap();o.getLayer("route")&&o.removeLayer("route"),o.getSource("route")&&o.removeSource("route"),o.addSource("route",{type:"geojson",data:i}),o.addLayer({id:"route",source:"route",type:"line",paint:{"line-width":1,"line-color":"rgba(0, 241, 183, 0.39)"}})}}},{key:"render",value:function(){var t=this,e=this.props,n=e.formattedTransactions,r=e.mapWidth,i=e.mapHeight,o=e.mapLatitude,a=e.mapLongitude,l=e.mapZoom,p=e.onViewportChange;return s.a.createElement(u.d,{mapboxApiAccessToken:h.a.MKEY,mapStyle:"mapbox://styles/giovaroma27/cjjrdybad1b1r2rk8gvy8rsgo",width:r,height:i,latitude:o,longitude:a,zoom:l,onViewportChange:function(t){p(t)},transitionDuration:1,transitionInterpolator:new u.a,ref:function(e){t.reactMap=e}},n?n.map(function(t){return s.a.createElement(c.a,{key:t.hash,id1:t.ip1,id2:t.ip2,lat1:t.lat1,lat2:t.lat2,long1:t.long1,long2:t.long2})}):"")}}]),e}(s.a.Component);e.a=f},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(183),l=n(185),c=(n.n(l),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),h=function(t){function e(){var t,n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o.state={displayAll:!1,numRowsDisplayed:5},o.toggleDisplay=function(){o.setState({displayAll:!o.state.displayAll})},o.setNumRowsDisplayed=function(){o.props.windowWidth>=1145?o.setState({numRowsDisplayed:5}):o.setState({numRowsDisplayed:1})},a=n,i(o,a)}return o(e,t),c(e,[{key:"componentDidMount",value:function(){this.setNumRowsDisplayed()}},{key:"componentDidUpdate",value:function(t){this.props.windowWidth!==t.windowWidth&&this.setNumRowsDisplayed()}},{key:"render",value:function(){var t=this;return s.a.createElement("section",{className:"NodeTable"},s.a.createElement("h1",{className:"NodeTable__header"},"Recent TestNet Transactions"),s.a.createElement("h2",{className:"NodeTable__secondary-header"},"Transactions"),s.a.createElement("div",{className:"NodeTable__table"},this.props.formattedTransactions?this.props.formattedTransactions.map(function(e,n){return s.a.createElement(u.a,{displayAll:t.state.displayAll,position:n,key:e.hash,city1:e.city1,country_name1:e.country_name1,city2:e.city2,country_name2:e.country_name2,amount:e.amount,sender:e.sender,receiver:e.receiver,signers:e.signers,numRowsDisplayed:t.state.numRowsDisplayed})}):""),s.a.createElement("button",{onClick:this.toggleDisplay,className:"NodeTable__button"},this.state.displayAll?"VIEW LESS":"VIEW LAST 20 TRANSACTIONS"))}}]),e}(s.a.Component);e.a=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(184),l=(n.n(u),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),c=function(t){function e(){var t,n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o.state={displayRow:!0,displayingSigners:!1},o.toggleSigners=function(){o.setState({displayingSigners:!o.state.displayingSigners})},o.getNodeTableClassNames=function(){return!o.props.displayAll&&o.props.position>=o.props.numRowsDisplayed?"NodeTableRow NodeTableRow--hidden":"NodeTableRow"},a=n,i(o,a)}return o(e,t),l(e,[{key:"componentDidUpdate",value:function(t){this.props.hash!==t.hash&&this.setState(function(t){return{displayRow:!t.displayRow}})}},{key:"render",value:function(){return s.a.createElement("button",{onClick:this.toggleSigners,className:this.getNodeTableClassNames()},s.a.createElement("div",{className:"NodeTableRow__primaryrow"},s.a.createElement("div",{className:"NodeTableRow__column--outer"},s.a.createElement("span",{className:"NodeTableRow__circle NodeTableRow__circle--one"}),s.a.createElement("h3",{className:"NodeTableRow__heading"},"Sender"),s.a.createElement("div",null,s.a.createElement("p",{className:"NodeTableRow__text"},this.props.sender),s.a.createElement("p",{className:"NodeTableRow__subtext"},this.props.city1?this.props.city1:this.props.country_name1))),s.a.createElement("div",{className:"NodeTableRow__column--inner"},s.a.createElement("p",{className:"NodeTableRow__text"},this.props.amount," DAG"),s.a.createElement("div",{className:"NodeTableRow__line"})),s.a.createElement("div",{className:"NodeTableRow__column--outer"},s.a.createElement("span",{className:"NodeTableRow__circle NodeTableRow__circle--two"}),s.a.createElement("h3",{className:"NodeTableRow__heading"},"Receiver"),s.a.createElement("div",null,s.a.createElement("p",{className:"NodeTableRow__text"},this.props.receiver),s.a.createElement("p",{className:"NodeTableRow__subtext"},this.props.city2?this.props.city2:this.props.country_name2)))),s.a.createElement("div",{className:this.state.displayingSigners?"NodeTableRow__secondaryrow":"NodeTableRow__secondaryrow NodeTableRow__secondaryrow--hidden"},s.a.createElement("h3",{className:"NodeTableRow__heading"},"Signatures (TX)"),s.a.createElement("div",{className:"NodeTableRow__signatures"},this.props.signers.map(function(t){return s.a.createElement("p",{key:t,className:"NodeTableRow__text"},t)}))))}}]),e}(s.a.Component);e.a=c},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="/service-worker.js";a?(o(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(t)})}}function i(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function o(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):i(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}e.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);
//# sourceMappingURL=main.8eaa8a0c.js.map